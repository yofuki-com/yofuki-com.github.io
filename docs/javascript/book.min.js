var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(b){return b.raw=b};$jscomp.createTemplateTagFirstArgWithRaw=function(b,c){b.raw=c;return b};$jscomp.arrayIteratorImpl=function(b){var c=0;return function(){return c<b.length?{done:!1,value:b[c++]}:{done:!0}}};$jscomp.arrayIterator=function(b){return{next:$jscomp.arrayIteratorImpl(b)}};$jscomp.makeIterator=function(b){var c="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];return c?c.call(b):$jscomp.arrayIterator(b)};
$jscomp.arrayFromIterator=function(b){for(var c,d=[];!(c=b.next()).done;)d.push(c.value);return d};$jscomp.arrayFromIterable=function(b){return b instanceof Array?b:$jscomp.arrayFromIterator($jscomp.makeIterator(b))};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,c,d){if(b==Array.prototype||b==Object.prototype)return b;b[c]=d.value;return b};$jscomp.getGlobal=function(b){b=["object"==typeof globalThis&&globalThis,b,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var c=0;c<b.length;++c){var d=b[c];if(d&&d.Math==Math)return d}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(b,c){var d=$jscomp.propertyToPolyfillSymbol[c];if(null==d)return b[c];d=b[d];return void 0!==d?d:b[c]};
$jscomp.polyfill=function(b,c,d,e){c&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(b,c,d,e):$jscomp.polyfillUnisolated(b,c,d,e))};$jscomp.polyfillUnisolated=function(b,c,d,e){d=$jscomp.global;b=b.split(".");for(e=0;e<b.length-1;e++){var f=b[e];if(!(f in d))return;d=d[f]}b=b[b.length-1];e=d[b];c=c(e);c!=e&&null!=c&&$jscomp.defineProperty(d,b,{configurable:!0,writable:!0,value:c})};
$jscomp.polyfillIsolated=function(b,c,d,e){var f=b.split(".");b=1===f.length;e=f[0];e=!b&&e in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var g=0;g<f.length-1;g++){var h=f[g];if(!(h in e))return;e=e[h]}f=f[f.length-1];d=$jscomp.IS_SYMBOL_NATIVE&&"es6"===d?e[f]:null;c=c(d);null!=c&&(b?$jscomp.defineProperty($jscomp.polyfills,f,{configurable:!0,writable:!0,value:c}):c!==d&&(void 0===$jscomp.propertyToPolyfillSymbol[f]&&(d=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[f]=$jscomp.IS_SYMBOL_NATIVE?
$jscomp.global.Symbol(f):$jscomp.POLYFILL_PREFIX+d+"$"+f),$jscomp.defineProperty(e,$jscomp.propertyToPolyfillSymbol[f],{configurable:!0,writable:!0,value:c})))};$jscomp.underscoreProtoCanBeSet=function(){var b={a:!0},c={};try{return c.__proto__=b,c.a}catch(d){}return!1};
$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(b,c){b.__proto__=c;if(b.__proto__!==c)throw new TypeError(b+" is not extensible");return b}:null;$jscomp.generator={};$jscomp.generator.ensureIteratorResultIsObject_=function(b){if(!(b instanceof Object))throw new TypeError("Iterator result "+b+" is not an object");};
$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};
$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(b){this.yieldResult=b};$jscomp.generator.Context.prototype.throw_=function(b){this.abruptCompletion_={exception:b,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(b){this.abruptCompletion_={return:b};this.nextAddress=this.finallyAddress_};
$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(b){this.abruptCompletion_={jumpTo:b};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(b,c){this.nextAddress=c;return{value:b}};$jscomp.generator.Context.prototype.yieldAll=function(b,c){b=$jscomp.makeIterator(b);var d=b.next();$jscomp.generator.ensureIteratorResultIsObject_(d);if(d.done)this.yieldResult=d.value,this.nextAddress=c;else return this.yieldAllIterator_=b,this.yield(d.value,c)};
$jscomp.generator.Context.prototype.jumpTo=function(b){this.nextAddress=b};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(b,c){this.catchAddress_=b;void 0!=c&&(this.finallyAddress_=c)};$jscomp.generator.Context.prototype.setFinallyBlock=function(b){this.catchAddress_=0;this.finallyAddress_=b||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(b,c){this.nextAddress=b;this.catchAddress_=c||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(b){this.catchAddress_=b||0;b=this.abruptCompletion_.exception;this.abruptCompletion_=null;return b};$jscomp.generator.Context.prototype.enterFinallyBlock=function(b,c,d){d?this.finallyContexts_[d]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=b||0;this.finallyAddress_=c||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(b,c){c=this.finallyContexts_.splice(c||0)[0];if(c=this.abruptCompletion_=this.abruptCompletion_||c){if(c.isException)return this.jumpToErrorHandler_();void 0!=c.jumpTo&&this.finallyAddress_<c.jumpTo?(this.nextAddress=c.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=b};$jscomp.generator.Context.prototype.forIn=function(b){return new $jscomp.generator.Context.PropertyIterator(b)};
$jscomp.generator.Context.PropertyIterator=function(b){this.object_=b;this.properties_=[];for(var c in b)this.properties_.push(c);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var b=this.properties_.pop();if(b in this.object_)return b}return null};$jscomp.generator.Engine_=function(b){this.context_=new $jscomp.generator.Context;this.program_=b};
$jscomp.generator.Engine_.prototype.next_=function(b){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,b,this.context_.next_);this.context_.next_(b);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(b){this.context_.start_();var c=this.context_.yieldAllIterator_;if(c)return this.yieldAllStep_("return"in c?c["return"]:function(d){return{value:d,done:!0}},b,this.context_.return);this.context_.return(b);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(b){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],b,this.context_.next_);this.context_.throw_(b);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(b,c,d){try{var e=b.call(this.context_.yieldAllIterator_,c);$jscomp.generator.ensureIteratorResultIsObject_(e);if(!e.done)return this.context_.stop_(),e;var f=e.value}catch(g){return this.context_.yieldAllIterator_=null,this.context_.throw_(g),this.nextStep_()}this.context_.yieldAllIterator_=null;d.call(this.context_,f);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var b=this.program_(this.context_);if(b)return this.context_.stop_(),{value:b.value,done:!1}}catch(c){this.context_.yieldResult=void 0,this.context_.throw_(c)}this.context_.stop_();if(this.context_.abruptCompletion_){b=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(b.isException)throw b.exception;return{value:b.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(b){this.next=function(c){return b.next_(c)};this.throw=function(c){return b.throw_(c)};this.return=function(c){return b.return_(c)};this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(b,c){c=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(c));$jscomp.setPrototypeOf&&b.prototype&&$jscomp.setPrototypeOf(c,b.prototype);return c};
$jscomp.asyncExecutePromiseGenerator=function(b){function c(e){return b.next(e)}function d(e){return b.throw(e)}return new Promise(function(e,f){function g(h){h.done?e(h.value):Promise.resolve(h.value).then(c,d).then(g,f)}g(b.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(b){return $jscomp.asyncExecutePromiseGenerator(b())};$jscomp.asyncExecutePromiseGeneratorProgram=function(b){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(b)))};
$jscomp.initSymbol=function(){};$jscomp.polyfill("Symbol",function(b){if(b)return b;var c=function(g,h){this.$jscomp$symbol$id_=g;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:h})};c.prototype.toString=function(){return this.$jscomp$symbol$id_};var d="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",e=0,f=function(g){if(this instanceof f)throw new TypeError("Symbol is not a constructor");return new c(d+(g||"")+"_"+e++,g)};return f},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(b){if(b)return b;b=Symbol("Symbol.iterator");for(var c="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),d=0;d<c.length;d++){var e=$jscomp.global[c[d]];"function"===typeof e&&"function"!=typeof e.prototype[b]&&$jscomp.defineProperty(e.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return b},"es6",
"es3");$jscomp.iteratorPrototype=function(b){b={next:b};b[Symbol.iterator]=function(){return this};return b};
$jscomp.polyfill("Promise",function(b){function c(){this.batch_=null}function d(h){return h instanceof f?h:new f(function(k,l){k(h)})}if(b&&(!($jscomp.FORCE_POLYFILL_PROMISE||$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION&&"undefined"===typeof $jscomp.global.PromiseRejectionEvent)||!$jscomp.global.Promise||-1===$jscomp.global.Promise.toString().indexOf("[native code]")))return b;c.prototype.asyncExecute=function(h){if(null==this.batch_){this.batch_=[];var k=this;this.asyncExecuteFunction(function(){k.executeBatch_()})}this.batch_.push(h)};
var e=$jscomp.global.setTimeout;c.prototype.asyncExecuteFunction=function(h){e(h,0)};c.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var h=this.batch_;this.batch_=[];for(var k=0;k<h.length;++k){var l=h[k];h[k]=null;try{l()}catch(n){this.asyncThrow_(n)}}}this.batch_=null};c.prototype.asyncThrow_=function(h){this.asyncExecuteFunction(function(){throw h;})};var f=function(h){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];this.isRejectionHandled_=!1;var k=this.createResolveAndReject_();
try{h(k.resolve,k.reject)}catch(l){k.reject(l)}};f.prototype.createResolveAndReject_=function(){function h(n){return function(p){l||(l=!0,n.call(k,p))}}var k=this,l=!1;return{resolve:h(this.resolveTo_),reject:h(this.reject_)}};f.prototype.resolveTo_=function(h){if(h===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(h instanceof f)this.settleSameAsPromise_(h);else{a:switch(typeof h){case "object":var k=null!=h;break a;case "function":k=!0;break a;default:k=!1}k?this.resolveToNonPromiseObj_(h):
this.fulfill_(h)}};f.prototype.resolveToNonPromiseObj_=function(h){var k=void 0;try{k=h.then}catch(l){this.reject_(l);return}"function"==typeof k?this.settleSameAsThenable_(k,h):this.fulfill_(h)};f.prototype.reject_=function(h){this.settle_(2,h)};f.prototype.fulfill_=function(h){this.settle_(1,h)};f.prototype.settle_=function(h,k){if(0!=this.state_)throw Error("Cannot settle("+h+", "+k+"): Promise already settled in state"+this.state_);this.state_=h;this.result_=k;2===this.state_&&this.scheduleUnhandledRejectionCheck_();
this.executeOnSettledCallbacks_()};f.prototype.scheduleUnhandledRejectionCheck_=function(){var h=this;e(function(){if(h.notifyUnhandledRejection_()){var k=$jscomp.global.console;"undefined"!==typeof k&&k.error(h.result_)}},1)};f.prototype.notifyUnhandledRejection_=function(){if(this.isRejectionHandled_)return!1;var h=$jscomp.global.CustomEvent,k=$jscomp.global.Event,l=$jscomp.global.dispatchEvent;if("undefined"===typeof l)return!0;"function"===typeof h?h=new h("unhandledrejection",{cancelable:!0}):
"function"===typeof k?h=new k("unhandledrejection",{cancelable:!0}):(h=$jscomp.global.document.createEvent("CustomEvent"),h.initCustomEvent("unhandledrejection",!1,!0,h));h.promise=this;h.reason=this.result_;return l(h)};f.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var h=0;h<this.onSettledCallbacks_.length;++h)g.asyncExecute(this.onSettledCallbacks_[h]);this.onSettledCallbacks_=null}};var g=new c;f.prototype.settleSameAsPromise_=function(h){var k=this.createResolveAndReject_();
h.callWhenSettled_(k.resolve,k.reject)};f.prototype.settleSameAsThenable_=function(h,k){var l=this.createResolveAndReject_();try{h.call(k,l.resolve,l.reject)}catch(n){l.reject(n)}};f.prototype.then=function(h,k){function l(B,v){return"function"==typeof B?function(w){try{n(B(w))}catch(u){p(u)}}:v}var n,p,r=new f(function(B,v){n=B;p=v});this.callWhenSettled_(l(h,n),l(k,p));return r};f.prototype.catch=function(h){return this.then(void 0,h)};f.prototype.callWhenSettled_=function(h,k){function l(){switch(n.state_){case 1:h(n.result_);
break;case 2:k(n.result_);break;default:throw Error("Unexpected state: "+n.state_);}}var n=this;null==this.onSettledCallbacks_?g.asyncExecute(l):this.onSettledCallbacks_.push(l);this.isRejectionHandled_=!0};f.resolve=d;f.reject=function(h){return new f(function(k,l){l(h)})};f.race=function(h){return new f(function(k,l){for(var n=$jscomp.makeIterator(h),p=n.next();!p.done;p=n.next())d(p.value).callWhenSettled_(k,l)})};f.all=function(h){var k=$jscomp.makeIterator(h),l=k.next();return l.done?d([]):new f(function(n,
p){function r(w){return function(u){B[w]=u;v--;0==v&&n(B)}}var B=[],v=0;do B.push(void 0),v++,d(l.value).callWhenSettled_(r(B.length-1),p),l=k.next();while(!l.done)})};return f},"es6","es3");$jscomp.iteratorFromArray=function(b,c){b instanceof String&&(b+="");var d=0,e=!1,f={next:function(){if(!e&&d<b.length){var g=d++;return{value:c(g,b[g]),done:!1}}e=!0;return{done:!0,value:void 0}}};f[Symbol.iterator]=function(){return f};return f};
$jscomp.polyfill("Array.prototype.keys",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(c){return c})}},"es6","es3");$jscomp.findInternal=function(b,c,d){b instanceof String&&(b=String(b));for(var e=b.length,f=0;f<e;f++){var g=b[f];if(c.call(d,g,f,b))return{i:f,v:g}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(c,d){return $jscomp.findInternal(this,c,d).v}},"es6","es3");
$jscomp.checkStringArgs=function(b,c,d){if(null==b)throw new TypeError("The 'this' value for String.prototype."+d+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+d+" must not be a regular expression");return b+""};
$jscomp.polyfill("String.prototype.startsWith",function(b){return b?b:function(c,d){var e=$jscomp.checkStringArgs(this,c,"startsWith");c+="";var f=e.length,g=c.length;d=Math.max(0,Math.min(d|0,e.length));for(var h=0;h<g&&d<f;)if(e[d++]!=c[h++])return!1;return h>=g}},"es6","es3");$jscomp.polyfill("Object.is",function(b){return b?b:function(c,d){return c===d?0!==c||1/c===1/d:c!==c&&d!==d}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(b){return b?b:function(c,d){var e=this;e instanceof String&&(e=String(e));var f=e.length;d=d||0;for(0>d&&(d=Math.max(d+f,0));d<f;d++){var g=e[d];if(g===c||Object.is(g,c))return!0}return!1}},"es7","es3");$jscomp.polyfill("String.prototype.includes",function(b){return b?b:function(c,d){return-1!==$jscomp.checkStringArgs(this,c,"includes").indexOf(c,d||0)}},"es6","es3");
$jscomp.polyfill("String.prototype.endsWith",function(b){return b?b:function(c,d){var e=$jscomp.checkStringArgs(this,c,"endsWith");c+="";void 0===d&&(d=e.length);d=Math.max(0,Math.min(d|0,e.length));for(var f=c.length;0<f&&0<d;)if(e[--d]!=c[--f])return!1;return 0>=f}},"es6","es3");
$jscomp.polyfill("Array.prototype.fill",function(b){return b?b:function(c,d,e){var f=this.length||0;0>d&&(d=Math.max(0,f+d));if(null==e||e>f)e=f;e=Number(e);0>e&&(e=Math.max(0,f+e));for(d=Number(d||0);d<e;d++)this[d]=c;return this}},"es6","es3");$jscomp.typedArrayFill=function(b){return b?b:Array.prototype.fill};$jscomp.polyfill("Int8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Uint8ClampedArray.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Float64Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.owns=function(b,c){return Object.prototype.hasOwnProperty.call(b,c)};$jscomp.polyfill("Object.values",function(b){return b?b:function(c){var d=[],e;for(e in c)$jscomp.owns(c,e)&&d.push(c[e]);return d}},"es8","es3");
$jscomp.polyfill("Array.prototype.flat",function(b){return b?b:function(c){c=void 0===c?1:c;for(var d=[],e=0;e<this.length;e++){var f=this[e];Array.isArray(f)&&0<c?(f=Array.prototype.flat.call(f,c-1),d.push.apply(d,f)):d.push(f)}return d}},"es9","es5");
var windowWidth=20,windowHeight,originTotalPageCount,totalPageCount,isTouch=!1,bookContainer,tmpContainer,slideBook,singleSlideBook,catalogBook,singleCatalogBook,flipBook,singlePageBook,cardBook,invertBook,flipShotButton,toolBar,printBody,helpBody,aboutBody,sharePanel,annotationPannel,videoGallery,photoGallery,languagePanel,frmSearch,frmShare,frmTableOfContent,bookmark,thumbnail,googleID,noteCookie,textRemark,signature,annotationShapes,QRcode,QRbutton,moreBar,pageIndexTextField,resizeBookAfterFlip=
!1,flipAudio,auto_player,hardPageEnable,uiBaseURL,phoneBaseURL,soundBaseURL,browserType,bookType=0,rightToLeft,isFlipPdf=!1,bookConfig,jQuery,Hammer,aliasLanguage,language,isPlaying,ClipboardJS,uc,netscape,Components,staticAd,AlbumCalendar,Directory,videoList,phoneNumber,wx,WeixinJSBridge,checkReportConfig,bmtConfig,aliasConfig,base64,fullScreenApi,skin,bookPlugin,FlipBookPlugins,SliderShowAd,DynamicBackground,StateSynchronous,settingBody,volumeControlBar,getSearchRealPageIndex,positionForPages,PageItem,
toolbar_icons,form_icons,realLocation,HTML5AdSlider,totalWidth,deg2rad,windows,rendering,alpha,size,fill,stroke,canvasContext,toBlendModeString,setFill,setStroke,restrictUrl,devicePixelRatio,fliphtml5_pages,configForPages,pdfjsLib,response,pdfLoadStack,htmlConfig,sliderJS,highlightSearchFun,clearHighlightFun,Annotation,AnnotationCookie,SearchTextHighlight,SearchHighlightDOM,phoneCopyForm,CopyForm,inverseEditor,PageEditor,PageEditorParser,pageEditor,onStageResize,templateArea,MiniStyle,BookmarkTab,
fromPageIndex,PasswardPannel,_tipsBox,downLoadBody,GuidToolbar,sendvisitinfo,dataLayer,gtag,jsLoadingBar,onBookLoad,editor_js_url,interface_js_url,xyz,property,bdor,ctx,text,blend,transform;window.phoneTemplateArea={getLeftWidth:function(){return 0},getRightWidth:function(){return 0},getTopHeight:function(){return window.toolBar?toolBar.getTopHeight():bookConfig.toolbarAlwaysShow?"both"==bookConfig.phoneToolbarType?60:40:0},getBottomHeight:function(){if(window.toolBar)return toolBar.getBottomHeight();if(!bookConfig.toolbarAlwaysShow)return 0;if("both"==bookConfig.phoneToolbarType)return isIphoneXor11()?80:60;if(!isIphoneXor11())return 40;if(isIphoneXor11())return 60},getHeight:function(){return this.getTopHeight()+
this.getBottomHeight()},getWidth:function(){return this.getLeftWidth()+this.getRightWidth()}};window.templeteName="popular";
window.templateArea={getLeftWidth:function(){return 0},getRightWidth:function(){return 0},getTopHeight:function(){return MiniStyle.isMini()||NeatStyle.isNeat()||!bookConfig.ToolBarVisible?0:isPC()?bookConfig.appLogoIcon?20:0:phoneTemplateArea.getTopHeight()},getBottomHeight:function(){return MiniStyle.isMini()?0:NeatStyle.isNeat()?40:bookConfig.ToolBarVisible?isPC()?window.thumbnail&&window.thumbnail.visible?thumbnail.getBottomHeight()+58:58:phoneTemplateArea.getBottomHeight():0},getHeight:function(){return this.getTopHeight()+
this.getBottomHeight()},getWidth:function(){return this.getLeftWidth()+this.getRightWidth()}};/*
 Hammer.JS - v2.0.8 - 2016-04-23
 http://hammerjs.github.io/

 Copyright (c) 2016 Jorik Tangelder;
 Licensed under the MIT license  http://mths.be/base64 v0.1.0 by @mathias | MIT license */
(this||(0,eval)("(this)")).bdor=[];var _agent_={};
(function(b){function c(p){p=e.match(p);if(null==p||0==p.length)return 0;p=p[0];var r=p.indexOf("/");p=p.substring(r+1,p.length);return""==p?0:parseInt(p)}function d(p){p=e.match(p);if(null==p||0==p.length)return 0;p=p[0].replace("_",".").match(/\d+\.?\d?/);if(null==p||0==p.length)return 0;p=p[0];return""==p?0:parseFloat(p)}var e=navigator.userAgent.toLowerCase();b.browser={};b.browser.webkit=/webkit/.test(e);b.browser.mozilla=/firefox/.test(e);b.browser.firefox=b.browser.mozilla;b.browser.msie=/msie/.test(e)||
/trident/.test(e)||/edge/.test(e);b.browser.edge=/edge/.test(e);b.browser.opera=/opera/.test(e)||/opr/.test(e);b.browser.chrome=/chrome/.test(e)&&!b.browser.opera&&!b.browser.edge;b.browser.uc=/ucbrowser/.test(e);b.browser.safari=/safari/.test(e)&&!b.browser.chrome&&!b.browser.uc&&!b.browser.opera;b.browser.wechat=/micromessenger/.test(e);b.browser.dingding=/dingtalk/.test(e);b.browser.version=0;window.bdor[1]="p";b.browser.firefox&&(b.browser.version=c(/firefox\/\d+/));if(b.browser.msie){var f=e.match(/msie\s?\d+\.0/);
null==f?(f=e.match(/trident\/\d+\.0/),null!=f&&0<f.length?(f=f[0],f=parseInt(f.replace("trident/","")),b.browser.version=f+4):(f=e.match(/edge\/\d+\.0/),null!=f&&0<f.length&&(f=f[0],f=parseInt(f.replace("edge/","")),b.browser.version=f))):(f=parseInt(f[0].replace("msie","")),b.browser.version=f)}b.browser.opera&&(b.browser.version=c(/opera\/\d+/)||c(/opr\/\d+/));b.browser.chrome&&(b.browser.version=c(/chrome\/\d+/));b.browser.uc&&(b.browser.version=c(/ucbrowser\/\d+/));b.browser.safari&&(b.browser.version=
c(/safari\/\d+/));if(void 0==b.browser.device){b.browser.DEVICE_PC=0;b.browser.DEVICE_PAD=1;b.browser.DEVICE_PHONE=2;var g=/pad/.test(e)||/ipod/.test(e);f=/iphone/.test(e);var h=/wpdesktop/.test(e)||/windows phone/.test(e),k=/blackberry/.test(e),l=/mobile/.test(e)||/phone/.test(e),n=/heytapbrowser/.test(e);if(-1<e.indexOf("macintosh")){g=!0;try{document.createEvent("TouchEvent")}catch(p){g=!1}}b.browser.device=b.browser.DEVICE_PC;if(g)b.browser.device=b.browser.DEVICE_PAD;else if(f||h||k||l||n)b.browser.device=
b.browser.DEVICE_PHONE}void 0==b.browser.app&&(b.browser.app=/android-app/.test(e));void 0==b.browser.prefix&&(b.browser.prefix="",1==b.browser.webkit&&(b.browser.prefix="-webkit-"),1==b.browser.mozilla&&(b.browser.prefix="-moz-"),1==b.browser.opera&&(b.browser.prefix="-webkit-"),1==b.browser.uc&&(b.browser.prefix="-webkit-"),1==b.browser.msie&&(b.browser.prefix="-ms-"));if(void 0==b.system){b.system={name:"",version:0};b.system.WINDOWS="Windows";b.system.WP="WinPhone";b.system.WP_DESKTOP="WinPhoneDesktop";
b.system.MAC="Mac OS";b.system.IOS="iPhone OS";b.system.LINUX="Linux";b.system.ANDROID="Android";b.system.BLACKBERRY="BlackBerry";/windows/.test(e)&&(b.system.name=b.system.WINDOWS,b.system.version=d(/windows nt\s?\d+\.?\d?/));/windows phone/.test(e)&&(b.system.name=b.system.WP,b.system.version=d(/windows phone\s?\d+\.?\d?/));/wpdesktop/.test(e)&&(b.system.name=b.system.WP_DESKTOP,b.system.version=d(/wpdesktop\s?\d+\.?\d?/));if(b.system.name!=b.system.WP){if(/iphone/.test(e)||/ipad/.test(e))b.system.name=
b.system.IOS,b.system.version=d(/os\s?\d+_?\d?/);/macintosh/.test(e)&&g&&(b.system.name=b.system.IOS,b.system.version=d(/version\/\s?\d+_?\d?/));/android/.test(e)&&(b.system.name=b.system.ANDROID,b.system.version=d(/android\s?\d+\.?\d?/))}/mac/.test(e)&&b.browser.system!=b.browser.IOS&&(b.system.name=b.system.MAC,b.system.version=d(/os x\s?\d+\.?\d?/));/linux/.test(e)&&!/android/.test(e)&&(b.system.name=b.system.LINUX);/blackberry/.test(e)&&(b.system.name=b.system.BLACKBERRY,b.system.version=d(/blackberry\s?\d+/))}})(_agent_);
var $=window.jQuery,isFirefox=function(){return _agent_.browser.firefox},isIE=function(){return _agent_.browser.msie},isIE8=function(){return _agent_.browser.msie&&8==_agent_.browser.version},isIE9=function(){return _agent_.browser.msie&&9==_agent_.browser.version},isIE11=function(){return _agent_.browser.msie&&11==_agent_.browser.version},isBelowIE11=function(){return _agent_.browser.msie&&11>_agent_.browser.version},isPad=function(){return _agent_.browser.device==_agent_.browser.DEVICE_PAD||_agent_.browser.device==
_agent_.browser.DEVICE_PC&&_agent_.system.name==_agent_.system.ANDROID?!0:!1},isIpad=function(){var b=navigator.userAgent.toLowerCase();return 0<b.indexOf("ipad")&&0<b.indexOf("safari")},isPC=function(){return isPhone()||isPad()?!1:_agent_.browser.device==_agent_.browser.DEVICE_PC?!0:!1},isIpod=function(){return 0<navigator.userAgent.toLowerCase().indexOf("ipod")},isIphone=function(){return 0<navigator.userAgent.toLowerCase().indexOf("iphone")},isIphoneXor11=function(){return isIphone()&&(812==screen.height&&
375==screen.width||896==screen.height&&414==screen.width||12<=_agent_.system.version)},isNokiaPhone=function(){var b=navigator.userAgent.toLowerCase();return 0<b.indexOf("msie")&&0<b.indexOf("wpdesktop")},isAndroid=function(){var b=navigator.userAgent.toLowerCase();return-1<b.indexOf("android")||-1<b.indexOf("adr")},isPhone=function(){var b=window.location.search;return _agent_.browser.device==_agent_.browser.DEVICE_PHONE||0<=b.toLowerCase().indexOf("phone=true")||0<=b.toLowerCase().indexOf("phonebook=true")?
!0:!1},isAndroidWeChat=function(){return _agent_.system.name==_agent_.system.ANDROID&&_agent_.browser.chrome&&40>_agent_.browser.version},isWeChat=function(){return _agent_.browser.wechat},isDingDing=function(){return _agent_.browser.dingding},isAndroidDefault=function(){return _agent_.system.name==_agent_.system.ANDROID&&_agent_.browser.safari},isPhoneBook=function(){if(_agent_.system.name==_agent_.system.ANDROID&&_agent_.browser.uc)return!0;var b=window.location.search;return(isPhone()||isPad())&&
_agent_.system.name==_agent_.system.ANDROID&&4>parseInt(_agent_.system.version)||0<=b.toLowerCase().indexOf("phonebook=true")||(isPhone()||isPad())&&"slide"==bookConfig.FlipStyle.toLowerCase()?!0:!1},isHigherThanIOS8=function(){return _agent_.system.name==_agent_.system.IOS&&8<=_agent_.system.version},isInTheFrame=function(){return window.top!=window};function isBelowIE9(){return _agent_.browser.msie?9>_agent_.browser.version?!0:!1:!1}
function isBelowIE8(){return _agent_.browser.msie?8>_agent_.browser.version?!0:!1:!1}function isBelowIE10(){return _agent_.browser.msie?10>_agent_.browser.version?!0:!1:!1}function isMacOSChrome(){var b=navigator.userAgent.toLowerCase();return/macintosh/.test(b)&&_agent_.browser.chrome}var global=function(){return this||(0,eval)("(this)")}(),virtual_function=function(){};
function getPackageByName(b){if(void 0==b||""==b)return global;var c=global;b=b.split(".");for(var d=0;d<b.length;d++){var e=b[d];c[e]||(c[e]={IS_PACKAGE_OBJECT:!0});c=c[e]}return c}function getClassByFullName(b){if(-1==b.indexOf("."))return global[b];var c=b.split(".");b=c.pop();c=c.join(".");return getPackageByName(c)[b]}
function classof(b,c){if(!b)return"";c||(c=global);"string"==typeof c&&(c=getPackageByName(c));var d=["webkitStorageInfo","webkitIndexedDB"],e;for(e in c)try{if(!(-1<d.indexOf(e))&&c[e]instanceof Function)try{if(b instanceof c[e])return e}catch(g){}}catch(g){}for(e in c)try{if("object"==typeof c[e]&&c[e].IS_PACKAGE_OBJECT){var f=classof(b,c[e]);if(""!=f)return e+"."+f}}catch(g){}return""}
function nameof(b,c){if(!b)return"";c||(c=global);"string"==typeof c&&(c=getPackageByName(c));var d="webkitStorageInfo webkitIndexedDB parent top opener document location frames localStorage sessionStorage indexedDB cookie frameElement".split(" "),e;for(e in c)try{if(!(-1<d.indexOf(e))&&c[e]==b)return e}catch(g){}for(e in c)try{if("object"==typeof c[e]&&c[e].IS_PACKAGE_OBJECT){var f=nameof(b,c[e]);if(""!=f)return e+"."+f}}catch(g){}return""}
function Class(b,c){if("string"===typeof b){var d=getPackageByName(c.Package);d[b]=Class(c);return d[b]}var e=function(){if(this.Import){"string"==typeof this.Import&&(this.Import=[this.Import]);for(var g=0;g<this.Import.length;g++){var h=this.Import[g],k=getPackageByName(h);if(k instanceof Function)this[h.split(".").pop()]=k;else for(var l in k)k[l]instanceof Function&&(this[l]=k[l])}}k=getPackageByName(this.Package);if(k!=global)for(l in k)this.getClassName()!=l&&k[l]instanceof Function&&(this[l]=
k[l]);this.create&&this.create instanceof Function&&this.create.apply(this,arguments)};e.prototype=b||{};var f;e.prototype.getClassName=function(){f||(f=nameof(e,this.Package));return f};e.prototype.getClass=function(){return e};b=e.prototype.statics;if(void 0!=b){for(d in b)void 0==e[d]&&(e[d]=b[d]);delete e.prototype.statics}return e}
Function.prototype.extend=function(b){if(!b)return this;if("string"==typeof b)if(-1<b.indexOf(".")){if(b=getClassByFullName(b),!b)return this}else{var c=this.prototype.Package,d=b;c&&""!=c&&(b=c+"."+d);b=getClassByFullName(b);if(!b&&(b=getClassByFullName(d),!b))return this}if(b instanceof Function){for(var e in b)void 0==this[e]&&(this[e]=b[e]);for(e in b.prototype)void 0==this.prototype[e]?b.prototype[e]==virtual_function?console&&console.error&&console.error("virtual function [%s] must be override.",
e):this.prototype[e]=b.prototype[e]:(d=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/,this.prototype[e]instanceof Function&&b.prototype[e]instanceof Function&&d.test(this.prototype[e])&&(this.prototype[e]=function(f,g){return function(){var h=this._super;this._super=f;var k=g.apply(this,arguments);this._super=h;return k}}(b.prototype[e],this.prototype[e])));return this}return"object"!==typeof b?this:this.extend(Class(b))};
Function.prototype.expand=function(b,c){if("object"===typeof b){void 0==c&&(c=!1);var d=b.statics;if(d&&"object"==typeof d){for(var e in d)if(c||void 0==this[e])this[e]=d[e];delete b.statics}for(e in b)if(c||void 0==this.prototype[e])this.prototype[e]=b[e];return this}};
var Instance={copy:function(b){if(!b||"object"!==typeof b)return b;var c={};b instanceof Array&&(c=[]);for(property in b)c[property]="object"==typeof b[property]?Instance.copy(b[property]):b[property];return c},create:function(b,c){c||(c=[]);var d=b;"string"==typeof b&&(d=getClassByFullName(d));if(!d)return null;b=d.prototype.create;d.prototype.create=function(){};var e=new d;d.prototype.create=b;e.create&&e.create instanceof Function&&e.create.apply(e,c);return e},JSON:function(b){if(void 0===b)return"undefined";
if(null===b)return"null";if(b instanceof Array){var c=[];c.push("[");for(var d=0;d<b.length;d++)c.push(Instance.JSON(b[d])),c.push(", ");1<c.length&&c.pop();c.push("]");return c.join("")}if(b instanceof Function)return b;if("string"===typeof b)return b=b.toString(),b=b.replaceAll("\\","\\\\",!0),b=b.replaceAll('"','\\"',!0),'"'+b+'"';if("number"===typeof b)return Number(b).toString();if("boolean"===typeof b)return(!!b).toString();if("object"===typeof b){c=[];c.push("{");for(d in b){var e='"'+d+'":'+
Instance.JSON(b[d]);c.push(e);c.push(", ")}1<c.length&&c.pop();c.push("}");return c.join("")}},parse:function(b,c){return b&&"undefined"!=b&&"null"!=b&&""!=b?eval("("+b+")"):c}};Object.create=Object.create||function(){function b(){}return function(c){if(1!=arguments.length)throw Error("Object.create implementation only accepts one parameter.");b.prototype=c;return new b}}();
Object.keys=Object.keys||function(b){if(b!==Object(b))throw new TypeError("Object.keys called on a non-object");var c=[],d;for(d in b)Object.prototype.hasOwnProperty.call(b,d)&&c.push(d);return c};
Function.expand({bind:function(b){var c=this;return function(){return c.apply(b,arguments)}},delay:function(b,c,d){"object"!==typeof b&&(d=c,c=b,b=global);c=c||1;d=d||[];return setTimeout(function(){this.apply(b,d)}.bind(this),c)},interval:function(b,c,d){"object"!==typeof b&&(d=c,c=b,b=global);c=c||1;d=d||[];var e=this;return{intervalId:setInterval(function(){this.apply(b,d)}.bind(this),c),stop:function(){clearInterval(this.intervalId);this.intervalId=void 0},isRunning:function(){return void 0!=
this.intervalId},start:function(){this.intervalId=setInterval(function(){e.apply(b,d)},c)}}},animation:function(b,c){"object"!==typeof b&&(c=b,b=global);var d={stopFlag:!1,stop:function(){this.stopFlag=!0}},e=this,f=0,g=Math.ceil(c/16.7),h=function(){!0!==d.stopFlag&&(f++,!1!==e.apply(b,[f,g])&&(f<g||void 0==c)&&window.requestAnimationFrame(h))};h();return d},once:function(b,c){b||(b=global);this.executed||(this.executed=!1);this.executed||(this.apply(b,c),this.executed=!0)}});
String.expand({trim:function(){return this.replace(/(^\s*)|(\s*$)/g,"")},replaceAll:function(b,c,d){void 0==d&&(d=!1);if(!b||!c)return this;if(RegExp&&!d)return this.replace(new RegExp(b,"g"),c);var e=this.indexOf(b);d=[];for(var f=this;-1!=e;){e+=b.length;var g=f.substring(0,e);f=f.substring(e);g=g.replace(b,c);d.push(g);e=f.indexOf(b)}""!==f&&d.push(f);return d.join("")},subBetween:function(b,c){if(void 0==b||void 0==c)return"";var d=this.length,e=this.indexOf(b);if(-1==e)return"";e+=b.length;b=
this.substring(e,d).indexOf(c);return-1==b?"":this.substring(e,b+e)},isUrl:function(){if(""==this.trim()||!RegExp)return!1;var b=/((((ht|f)tp(s?)):\/\/)|(www\.))([\w\-]+\.)+\w+[\/\w]*/gi,c=this.toLowerCase();return!!c.match(/(((ht|f)tp(s?)):\/\/)?(www\.)?([\w\-]+\.)+\w+[\/\w]*/gi)||!!c.match(b)},isEmail:function(){return""==this?!1:!!this.toLowerCase().match(/^([A-Za-z0-9])(\w)+@(\w)+(\.)(com|com\.cn|net|cn|net\.cn|org|biz|info|gov|gov\.cn|edu|edu\.cn)/)},toArray:function(b){b||(b="");return this.split(b)},
reverse:function(){var b=this.split("");b.reverse();return b.join("")},equals:function(b){return this.trim()==b.trim()},equalsIgnoreCase:function(b){return this.toLowerCase().trim()==b.toLowerCase().trim()},like:function(b){if(!b)return!1;b=this.toLowerCase().trim();var c=this.toLowerCase().trim();return-1<b.indexOf(c)||-1<c.indexOf(b)},contains:function(b){return-1<this.indexOf(b)},startsWith:function(b){return""===b?!1:this.substr(0,b.length)===b},endsWith:function(b){return""===b?!1:this.substr(this.length-
b.length,b.length)===b},isEnglish:function(){return/[\x00-\xff]/.test(this)},overflow:function(b){if(void 0==b)return this.toString();var c=2;/[^\x00-\xff]/.test(this)&&(b=Math.floor(b/2),c=Math.floor(c/2));return this.length-b>c?this.substr(0,b)+"...":this.toString()},remove:function(b){if("string"!=typeof b||!b)return this;var c=this.indexOf(b);if(0>c)return this;b=b.length;return this.substring(0,c)+this.substring(c+b,this.length)+""},removeStartFrom:function(b){if("string"==typeof b&&b)return b=
this.indexOf(b),0>b?this:this.substring(0,b)+""},cycleToLength:function(b){if(!isNaN(b)){for(var c=parseInt(b/this.length),d=this;0<c;)d+=this,c--;return d.substring(0,b)}},firstUpperCase:function(){return 1>this.length?this:this.substring(0,1).toUpperCase()+this.substring(1)},firstLowerCase:function(){return 1>this.length?this:this.substring(0,1).toLowerCase()+this.substring(1)},extract:function(){if(0==this.length||0==arguments.length)return[];for(var b=[],c=this.toString(),d=0;d<c.length;){for(var e=
!1,f=0;f<arguments.length;f++){var g=arguments[f];if(c.substr(d,g.length)==g){b.push(g);d+=g.length;e=!0;break}}e||d++}return b},addUrlParameter:function(b){var c=this.toString();b=b.param;return"string"!=typeof c?c:c=0<=c.indexOf("?")?c+"&"+b:c+"?"+b},statics:{format:function(){if(0==arguments.length)return"";if(1==arguments.length)return arguments[0];for(var b=arguments[0],c=b.extract("%s","%d","%f","%b","%o"),d=1;d<arguments.length;d++){var e=arguments[d],f=c[d-1];"%s"==f&&("string"==typeof e?
b=b.replace("%s",e):b=b.replace("%s",""));if("%d"==f){isNaN(e)&&(e=0);var g="number"==typeof e?-1==Number(e).toString().indexOf("."):!1;g?b=b.replace("%d",e+""):b=b.replace("%d","")}"%f"==f&&(isNaN(e)&&(e=0),"number"==typeof e?b=b.replace("%f",e+""):b=b.replace("%f",""));"%b"==f&&(e=!!e,"boolean"==typeof e?b=b.replace("%b",e+""):b=b.replace("%b",""));"%o"==f&&("object"==typeof e?b=b.replace("%o",Instance.JSON(e)):b=b.replace("%o",""))}return b},toUtf8:function(b){if(!b)return"";var c,d=[],e=b.length;
for(c=0;c<e;c++){var f=b.charCodeAt(c);0<f&&127>=f?d.push(b.charAt(c)):128<=f&&2047>=f?d.push(String.fromCharCode(192|f>>6&31),String.fromCharCode(128|f&63)):2048<=f&&65535>=f&&d.push(String.fromCharCode(224|f>>12&15),String.fromCharCode(128|f>>6&63),String.fromCharCode(128|f&63))}return d.join("")},parseUtf8:function(b){if(!b)return"";var c,d=[],e=b.length;for(c=0;c<e;c++){var f=[];f.push(b.charCodeAt(c));if(0==(f[0]>>7&255))d.push(b.charAt(c));else if(6==(f[0]>>5&255)){f.push(b.charCodeAt(++c));
var g=[];g.push(f[0]&31);g.push(f[1]&63);d.push(String.fromCharCode(g[0]<<6|g[1]))}else 14==(f[0]>>4&255)&&(f.push(b.charCodeAt(++c)),f.push(b.charCodeAt(++c)),g=[],g.push(f[0]<<4|f[1]>>2&15),g.push((f[1]&3)<<6|f[2]&63),d.push(String.fromCharCode(g[0]<<8|g[1])))}return d.join("")}}});
Array.expand({remove:function(b){return isNaN(b)||b>this.length?!1:this.splice(b,1)[0]},indexOf:function(b){for(var c=0;c<this.length;c++)if(this[c]===b)return c;return-1},removeElement:function(b){b=this.indexOf(b);-1<b&&this.remove(b)},lastIndexOf:function(b){for(var c=-1,d=0;d<this.length;d++)this[d]===b&&(c=d);return c},statics:{isArray:function(b){return"[object Array]"==Object.prototype.toString.call(b)}},clone:function(){for(var b=[],c=0;c<this.length;c++)b.push(this[c]);return b},increasing:function(){return this.sort(function(b,
c){return b-c})},diminishing:function(){return this.sort(function(b,c){return c-b})}});
Date.expand({format:function(b,c){c=c||!0;var d={"y+":this.getYear(),"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(b)&&(b=b.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var e in d)(new RegExp("("+e+")")).test(b)&&(b=!0===c?b.replace(RegExp.$1,d[e]):b.replace(RegExp.$1,1==RegExp.$1.length?d[e]:("00"+d[e]).substr((""+d[e]).length)));
return b},statics:{now:function(){return(new Date).getTime()}}});
Number.expand({statics:{between:function(b,c,d){if(isNaN(b)||isNaN(c)||isNaN(d))return b;var e=Math.min(c,d);c=Math.max(c,d);b<e&&(b=e);b>c&&(b=c);return b},isBetween:function(b,c,d){if(isNaN(c)||isNaN(d)||isNaN(b))return!1;var e=Math.max(c,d);return b>=Math.min(c,d)&&b<=e?!0:!1},fixed:function(b,c){if(isNaN(b))return b;isNaN(c)&&(c=0);c=Math.pow(10,c);return Math.round(b*c)/c},decimals:function(b){if(isNaN(b))return-1;b=Number(b).toString();var c=b.indexOf(".");return-1==c?0:b.length-c-1},random:function(b,
c,d){if(isNaN(b)||isNaN(c))return 0;void 0==d&&Number.decimals(b)==Number.decimals(c)&&(d=Number.decimals(b));var e=Math.min(b,c);b=e+(Math.max(b,c)-e)*Math.random();return!d||0>d||isNaN(d)?Math.floor(b):Number.fixed(b,d)}}});
var Color=function(b){b&&"object"==typeof b&&b.toString&&(b=b.toString());return{value:ColorTable.value(b),toString:function(){function c(e,f,g){if(e.length<g&&e.length>f)for(;e.length<g;)e="0"+e;return e}var d=this.value;d||(d=0);if("string"==typeof d){d=d.trim();if(0==d.indexOf("#"))return d;if(0==d.indexOf("0x"))return d.replace("0x","#")}d=parseInt(d);d=0>d?Number(0):d;d=d.toString(16);8<d.length&&(d=d.substr(0,8));d=c(d,6,8);d=c(d,0,6);return"#"+d},valueOf:this.toString,split:function(){var c=
{r:0,g:0,b:0,a:255};if(!this.value)return c;var d=this.toString(),e="FF";switch(d.length){case 9:e=d.substr(1,2);c=d.substr(3,2);var f=d.substr(5,2);d=d.substr(7,2);break;case 7:c=d.substr(1,2);f=d.substr(3,2);d=d.substr(5,2);break;case 4:c=d.substr(1,1);f=d.substr(2,1);d=d.substr(3,1);c+=c;f+=f;d+=d;break;default:return c}return{r:parseInt(c,16),g:parseInt(f,16),b:parseInt(d,16),a:parseInt(e,16)}},add:function(c){var d="object"==typeof c?c:{r:c,g:c,b:c,a:1};var e=this.split();c=Number.between(e.r+
d.r,0,255).toString(16).toUpperCase();var f=Number.between(e.g+d.g,0,255).toString(16).toUpperCase();d=Number.between(e.b+d.b,0,255).toString(16).toUpperCase();e=Number(e.a).toString(16).toUpperCase();c=1>=c.length?"0"+c:c;f=1>=f.length?"0"+f:f;d=1>=d.length?"0"+d:d;e=1>=e.length?"0"+e:e;return"FF"==e?"#"+c+f+d:"#"+e+c+f+d},reduce:function(c){return this.add("object"==typeof c?c:{r:-c,g:-c,b:-c,a:1})},rgba:function(c){var d=this.split();c=void 0==c||""===c?d.a:parseFloat(c);1<c&&(c=Number.fixed(c/
255,2));return String.format("rgba(%d,%d,%d,%f)",d.r,d.g,d.b,c)},equals:function(c){return this.toString()==Color(c).toString()},difference:function(c){var d=this.split();c=Color(c).split();return{r:Math.abs(d.r-c.r),g:Math.abs(d.g-c.g),b:Math.abs(d.b-c.b),a:Math.abs(d.a-c.a)}},reverse:function(){var c=this.split(),d=Number.between(255-c.r,0,255).toString(16).toUpperCase(),e=Number.between(255-c.g,0,255).toString(16).toUpperCase(),f=Number.between(255-c.b,0,255).toString(16).toUpperCase();c=Number(c.a).toString(16).toUpperCase();
d=1>=d.length?"0"+d:d;e=1>=e.length?"0"+e:e;f=1>=f.length?"0"+f:f;c=1>=c.length?"0"+c:c;return"FF"==c?"#"+d+e+f:"#"+c+d+e+f}}};function colorSplit(b){return Color(b).split()}function colorAdd(b,c){return Color(b).add(c)}function colorDiv(b,c){return Color(b).reduce(c)}function equals(b,c){return 1E-7>Math.abs(b-c)}
var Point=function(b,c){return{x:b,y:c,isNearTo:function(d,e){if(!d)return!1;void 0==e&&(e=5);return Math.abs(this.x-d.x)<e&&Math.abs(this.y-d.y)<e},equals:function(d){return d?equals(this.x,d.x)&&equals(this.y,d.y):!1},toString:function(){return"("+this.x+","+this.y+")"},clone:function(){return Point(this.x,this.y)},getX:function(){return this.x},getY:function(){return this.y},isNaP:function(){return isNaN(this.x)||isNaN(this.y)}}};Point.NaP=function(){return Point(Number.NaN,Number.NaN)};
_agent_.browser.mozilla&&(HTMLElement.prototype.__defineGetter__("innerText",function(){return this.textContent}),HTMLElement.prototype.__defineSetter__("innerText",function(b){this.textContent=b}));
function getImageConfig(b,c,d,e){if(!b||void 0==c||void 0==d)return null;b[0]&&(b=b[0]);if(b.complete){var f=b.naturalWidth;var g=b.naturalHeight;return e?getCoverSize(f,g,c,d):getContainSize(f,g,c,d)}$(b).on("load",function(){f=b.naturalWidth;g=b.naturalHeight;return e?getCoverSize(f,g,c,d):getContainSize(f,g,c,d)}.bind(this))}
function getContainSize(b,c,d,e){if(b/c>d/e)if(b<d){var f=b,g=c;c=(d-f)/2;e=(e-g)/2}else f=d,g=d/b*c,c=0,e=(e-g)/2;else c<e?(f=b,g=c,c=(d-f)/2,e=(e-g)/2):(g=e,f=e/c*b,c=(d-f)/2,e=0);return{scale:f/b,width:f,height:g,left:c,top:e}}function getContainSizeRate(b,c,d,e){b=getContainSize(b,c,d,e);return{scale:b.scale,width:b.width/d,height:b.height/e,left:b.left/d,top:b.left/e}}
function getCoverSize(b,c,d,e){if(b/c>d/e){var f=d,g=d/b*c;c=0;e=(e-g)/2}else g=e,f=e/c*b,c=(d-f)/2,e=0;return{scale:b/f,width:f,height:g,left:c,top:e}}
function getInverseItem(b,c,d){b=JSON.parse(JSON.stringify(b));var e=b.location;if(window.articleConfig&&window.articleConfig.hotArea){var f=window.articleConfig.hotArea;b.overColor=f.overColor;b.downColor=f.downColor;b.outColor=f.outColor;b.overAlpha=f.overAlpha;b.downAlpha=f.downAlpha;b.outAlpha=f.outAlpha}"issuu"!=bookConfig.FlipStyle&&(e.pageWidth>c||e.pageHeight>d)&&(c=getContainSizeRate(e.pageWidth,e.pageHeight,c,d),d=(1-c.height)/2,b.location.x=b.location.x*c.width+(1-c.width)/2,b.location.y=
b.location.y*c.height+d,b.location.width*=c.width,b.location.height*=c.height);return b}function getOffset(b){for(var c=b.target,d=0,e=0;c;)d+=c.offsetLeft,e+=c.offsetTop,c=c.offsetParent;return{X:window.pageXOffset+b.clientX-d,Y:window.pageYOffset+b.clientY-e}}
function getPositionFromEvt(b){b=b.originalEvent&&b.originalEvent.changedTouches?b.originalEvent.changedTouches:b.changedTouches?b.changedTouches:[b];return{x:(b[0].pageX||b[0].clientX)+(document.documentElement.scrollLeft||document.body.scrollLeft),y:(b[0].pageY||b[0].clientY)+(document.documentElement.scrollTop||document.body.scrollTop)}}
function getDeString(b){"[object String]"!==Object.prototype.toString.call(b)||b.match(/^[\[\{]/)||(b=window.Module._DeString(window.allocateUTF8(b)),b=window.UTF8ToString(b));return b}function getCustomEventName(){return bookConfig.productName&&bookConfig.productName.toLocaleLowerCase().match(/flip[ ]*pdf/)?"flip_pdf_customize_":bookConfig.productName&&bookConfig.productName.toLocaleLowerCase().match(/fliphtml5/)?"fliphtml5_customize_":""}
function getEditorEventName(){return bookConfig.productName&&bookConfig.productName.toLocaleLowerCase().match(/flip[ ]*pdf/)?"flip_pdf_editor_":bookConfig.productName&&bookConfig.productName.toLocaleLowerCase().match(/fliphtml5/)?"fliphtml5_editor_":""}
function DeString(b,c){if(""==b)return"";c&&""!=c||(c="fb5");c=escape(c);if(null==b||8>b.length)alert("A salt value could not be extracted from the encrypted message because it's length is too short. The message cannot be decrypted.");else if(null==c||0>=c.length)alert("Please enter a password with which to decrypt the message.");else{for(var d="",e=0;e<c.length;e++)d+=c.charCodeAt(e).toString();var f=Math.floor(d.length/5);f=parseInt(d.charAt(f)+d.charAt(2*f)+d.charAt(3*f)+d.charAt(4*f)+d.charAt(5*
f),10);c=Math.round(c.length/2);var g=Math.pow(2,31)-1;e=parseInt(b.substring(b.length-8,b.length),16);b=b.substring(0,b.length-8);for(d+=e;10<d.length;)d=(parseInt(d.substring(0,10),10)+parseInt(d.substring(10,d.length),10)).toString();d=(f*d+c)%g;var h="";for(e=0;e<b.length;e+=2){var k=parseInt(parseInt(b.substring(e,e+2),16)^Math.floor(d/g*255),10);h+=String.fromCharCode(k);d=(f*d+c)%g}return unescape(h)}}
function loadJavascript(b,c,d){var e=this,f=!1,g=document.createElement("script");g.type="text/javascript";g.async=!0;g.onload=g.onreadystatechange=function(){e.readyState&&"loaded"!=e.readyState&&"complete"!=e.readyState||(g.onload=g.onreadystatechange=null,void 0!=c&&c(g))};g.onerror=function(){void 0!=d&&d(g)};var h=$("head");h.find("script").each(function(){this.src==b&&(f=!0)});f?void 0!=c&&c(g):(h[0].appendChild(g),g.src=b);return g}
function loadCss(b,c,d){var e=this,f=!1,g=document.createElement("link");g.rel="stylesheet";g.async=!0;g.onload=g.onreadystatechange=function(){e.readyState&&"loaded"!=e.readyState&&"complete"!=e.readyState||(g.onload=g.onreadystatechange=null,void 0!=c&&c(g))};g.onerror=function(){void 0!=d&&d(g)};var h=$("head");h.find("link").each(function(){this.href==b&&(f=!0)});f?void 0!=c&&c(g):(h[0].appendChild(g),g.href=b);return g}
function loadComponentsJavascript(b,c,d){return new Promise(function(e,f){var g=document.createElement("script");g.type="text/javascript";g.src=b;g.onload=function(){void 0!=c&&c(g);e()};g.onerror=function(){void 0!=d&&d(g);f(Error("\u9474\u6c2d\u6e70\u9354\u72ba\u6d47\u6fb6\u8fab\u89e6: "+g.src))};document.head.appendChild(g)})}
function loadCSS(b,c){return new Promise(function(d,e){if(c&&document.getElementById(c))d();else{var f=document.createElement("link");f.rel="stylesheet";f.type="text/css";f.href=b;c&&(f.id=c);f.onload=function(){return d()};f.onerror=function(){return e(Error("Failed to load CSS file: "+b))};document.head.appendChild(f)}})}
(function(){for(var b={supportsFullScreen:!1,isFullScreen:function(){return!1},requestFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"-",prefix:""},c=["webkit","moz","o","ms"],d=0,e=c.length;d<e;d++)if(b.prefix=c[d],"undefined"!=typeof document[b.prefix+"CancelFullScreen"]){b.supportsFullScreen=!0;break}b.supportsFullScreen&&(b.fullScreenEventName=b.prefix+"fullscreenchange",b.isFullScreen=function(){switch(this.prefix){case "":return document.fullScreen;case "webkit":return document.webkitIsFullScreen;
default:return document[this.prefix+"FullScreen"]}},b.requestFullScreen=function(f){f[this.prefix+"RequestFullScreen"]()},b.cancelFullScreen=function(f){return""===this.prefix?document.cancelFullScreen():document[this.prefix+"CancelFullScreen"]()});window.fullScreenApi=b})();
function readAsFullscreen(){if(isIphone()||isIpad()){var b=window.location.href;if(bookConfig.isEncryptionBook){var c=BookRestrict.getRestrictToken();b=appendParamToUrl(b,"token="+c)}window.open(b,"_blank")}else fullScreenApi&&fullScreenApi.supportsFullScreen?($(document).unbind(fullScreenApi.fullScreenEventName,onFullscreenEvent),$(document).bind(fullScreenApi.fullScreenEventName,onFullscreenEvent),fullscreenFun()):window.top!=window?window.open(window.location.href):alert("Press F11 to View FlipBook in Full Screen")}
function onFullscreenEvent(b){fullScreenApi.srcElement=b.srcElement||b.target;b=isPhone()||isPad()?"PhoneFullscreenButton":"FullscreenButton";StateSynchronous.instance().findButtons(b).each(function(c){fullScreenApi.isFullScreen()?c.setAsExitFullScreen():c.setAsFullScreen();c.executeCallback()});window.parent.postMessage({trigger:"fullScreen",value:fullScreenApi.isFullScreen()},"*");fullScreenApi.isFullScreen()?MiniStyle.hide():MiniStyle.show();(function(){if(global.toolBar&&global.toolBar.onResize)toolBar.onResize()}).delay(100)}
function fullscreenFun(){var b=$("body")[0];fullScreenApi.supportsFullScreen&&(fullScreenApi.isFullScreen()?fullScreenApi.cancelFullScreen():fullScreenApi.requestFullScreen(b));b.webkitSupportsFullscreen&&b.webkitEnterFullscreen(Element.ALLOW_KEYBOARD_INPUT)}
(function(b,c,d,e){function f(m,q,t){return setTimeout(n(m,t),q)}function g(m,q,t){return Array.isArray(m)?(h(m,t[q],t),!0):!1}function h(m,q,t){var z;if(m)if(m.forEach)m.forEach(q,t);else if(m.length!==e)for(z=0;z<m.length;)q.call(t,m[z],z,m),z++;else for(z in m)m.hasOwnProperty(z)&&q.call(t,m[z],z,m)}function k(m,q,t){var z="DEPRECATED METHOD: "+q+"\n"+t+" AT \n";return function(){var C=Error("get-stack-trace");C=C&&C.stack?C.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,
"{anonymous}()@"):"Unknown Stack Trace";var D=b.console&&(b.console.warn||b.console.log);D&&D.call(b.console,z,C);return m.apply(this,arguments)}}function l(m,q,t){q=q.prototype;var z=m.prototype=Object.create(q);z.constructor=m;z._super=q;t&&S(z,t)}function n(m,q){return function(){return m.apply(q,arguments)}}function p(m,q){return"function"==typeof m?m.apply(q?q[0]||e:e,q):m}function r(m,q,t){h(w(q),function(z){"undefined"!=typeof b.addEventListener?m.addEventListener(z,t,!1):m.attachEvent(z,t)})}
function B(m,q,t){h(w(q),function(z){"undefined"!=typeof b.removeEventListener?m.removeEventListener(z,t,!1):m.detachEvent(z,t,!1)})}function v(m,q){for(;m;){if(m==q)return!0;m=m.parentNode}return!1}function w(m){return m.trim().split(/\s+/g)}function u(m,q,t){if(m.indexOf&&!t)return m.indexOf(q);for(var z=0;z<m.length;){if(t&&m[z][t]==q||!t&&m[z]===q)return z;z++}return-1}function x(m){return Array.prototype.slice.call(m,0)}function y(m,q,t){for(var z=[],C=[],D=0;D<m.length;){var E=q?m[D][q]:m[D];
0>u(C,E)&&z.push(m[D]);C[D]=E;D++}t&&(z=q?z.sort(function(J,P){return J[q]>P[q]}):z.sort());return z}function A(m,q){if(q&&q[0]){for(var t,z=q[0].toUpperCase()+q.slice(1),C=0;C<oa.length;){t=(t=oa[C])?t+z:q;if(t in m)return t;C++}return e}}function G(m){m=m.ownerDocument||m;return m.defaultView||m.parentWindow||b}function F(m,q){var t=this;this.manager=m;this.callback=q;this.element=m.element;this.target=m.options.inputTarget;this.domHandler=function(z){p(m.options.enable,[m])&&t.handler(z)};this.init()}
function O(m,q,t){var z=t.pointers.length,C=t.changedPointers.length;var D=q&1&&0===z-C;t.isFirst=!!D;t.isFinal=!!(q&12&&0===z-C);D&&(m.session={});t.eventType=q;q=m.session;z=t.pointers;C=z.length;q.firstInput||(q.firstInput=L(t));1<C&&!q.firstMultiple?q.firstMultiple=L(t):1===C&&(q.firstMultiple=!1);D=q.firstInput;var E=(C=q.firstMultiple)?C.center:D.center;var J=t.center=H(z);t.timeStamp=fa();t.deltaTime=t.timeStamp-D.timeStamp;t.angle=M(E,J);t.distance=K(E,J);D=t.center;E=q.offsetDelta||{};J=
q.prevDelta||{};var P=q.prevInput||{};if(1===t.eventType||4===P.eventType)J=q.prevDelta={x:P.deltaX||0,y:P.deltaY||0},E=q.offsetDelta={x:D.x,y:D.y};t.deltaX=J.x+(D.x-E.x);t.deltaY=J.y+(D.y-E.y);t.offsetDirection=I(t.deltaX,t.deltaY);E=t.deltaTime;D=t.deltaX/E||0;E=t.deltaY/E||0;t.overallVelocityX=D;t.overallVelocityY=E;t.overallVelocity=V(D)>V(E)?D:E;C?(D=C.pointers,D=K(z[0],z[1],Y)/K(D[0],D[1],Y)):D=1;t.scale=D;C?(C=C.pointers,z=M(z[1],z[0],Y)+M(C[1],C[0],Y)):z=0;t.rotation=z;t.maxPointers=q.prevInput?
t.pointers.length>q.prevInput.maxPointers?t.pointers.length:q.prevInput.maxPointers:t.pointers.length;E=q.lastInterval||t;z=t.timeStamp-E.timeStamp;8!=t.eventType&&(25<z||E.velocity===e)?(D=t.deltaX-E.deltaX,E=t.deltaY-E.deltaY,J=D/z||0,P=E/z||0,z=J,C=P,J=V(J)>V(P)?J:P,D=I(D,E),q.lastInterval=t):(J=E.velocity,z=E.velocityX,C=E.velocityY,D=E.direction);t.velocity=J;t.velocityX=z;t.velocityY=C;t.direction=D;q=m.element;v(t.srcEvent.target,q)&&(q=t.srcEvent.target);t.target=q;m.emit("hammer.input",t);
m.recognize(t);m.session.prevInput=t}function L(m){for(var q=[],t=0;t<m.pointers.length;)q[t]={clientX:X(m.pointers[t].clientX),clientY:X(m.pointers[t].clientY)},t++;return{timeStamp:fa(),pointers:q,center:H(q),deltaX:m.deltaX,deltaY:m.deltaY}}function H(m){var q=m.length;if(1===q)return{x:X(m[0].clientX),y:X(m[0].clientY)};for(var t=0,z=0,C=0;C<q;)t+=m[C].clientX,z+=m[C].clientY,C++;return{x:X(t/q),y:X(z/q)}}function I(m,q){return m===q?1:V(m)>=V(q)?0>m?2:4:0>q?8:16}function K(m,q,t){t||(t=pa);var z=
q[t[0]]-m[t[0]];m=q[t[1]]-m[t[1]];return Math.sqrt(z*z+m*m)}function M(m,q,t){t||(t=pa);return 180*Math.atan2(q[t[1]]-m[t[1]],q[t[0]]-m[t[0]])/Math.PI}function W(){this.evEl=za;this.evWin=Aa;this.pressed=!1;F.apply(this,arguments)}function Z(){this.evEl=qa;this.evWin=ra;F.apply(this,arguments);this.store=this.manager.session.pointerEvents=[]}function aa(){this.evTarget="touchstart";this.evWin="touchstart touchmove touchend touchcancel";this.started=!1;F.apply(this,arguments)}function T(){this.evTarget=
Ba;this.targetIds={};F.apply(this,arguments)}function U(m,q){var t=x(m.touches),z=this.targetIds;if(q&3&&1===t.length)return z[t[0].identifier]=!0,[t,t];m=x(m.changedTouches);var C=[],D=this.target;var E=t.filter(function(J){return v(J.target,D)});if(1===q)for(t=0;t<E.length;)z[E[t].identifier]=!0,t++;for(t=0;t<m.length;)z[m[t].identifier]&&C.push(m[t]),q&12&&delete z[m[t].identifier],t++;if(C.length)return[y(E.concat(C),"identifier",!0),C]}function ha(){F.apply(this,arguments);var m=n(this.handler,
this);this.touch=new T(this.manager,m);this.mouse=new W(this.manager,m);this.primaryTouch=null;this.lastTouches=[]}function sa(m){m=m.changedPointers[0];if(m.identifier===this.primaryTouch){var q={x:m.clientX,y:m.clientY};this.lastTouches.push(q);var t=this.lastTouches;setTimeout(function(){var z=t.indexOf(q);-1<z&&t.splice(z,1)},2500)}}function ia(m,q){this.manager=m;this.set(q)}function Ca(m){if(-1<m.indexOf("none"))return"none";var q=-1<m.indexOf("pan-x"),t=-1<m.indexOf("pan-y");return q&&t?"none":
q||t?q?"pan-x":"pan-y":-1<m.indexOf("manipulation")?"manipulation":"auto"}function Q(m){this.options=S({},this.defaults,m||{});this.id=Da++;this.manager=null;m=this.options.enable;this.options.enable=m===e?!0:m;this.state=1;this.simultaneous={};this.requireFail=[]}function ta(m){return m&16?"cancel":m&8?"end":m&4?"move":m&2?"start":""}function ua(m){return 16==m?"down":8==m?"up":2==m?"left":4==m?"right":""}function ba(m,q){return(q=q.manager)?q.get(m):m}function N(){Q.apply(this,arguments)}function ca(){N.apply(this,
arguments);this.pY=this.pX=null}function ja(){N.apply(this,arguments)}function ka(){Q.apply(this,arguments);this._input=this._timer=null}function la(){N.apply(this,arguments)}function ma(){N.apply(this,arguments)}function da(){Q.apply(this,arguments);this.pCenter=this.pTime=!1;this._input=this._timer=null;this.count=0}function R(m,q){q=q||{};var t=q.recognizers;q.recognizers=t===e?R.defaults.preset:t;return new na(m,q)}function na(m,q){this.options=S({},R.defaults,q||{});this.options.inputTarget=
this.options.inputTarget||m;this.handlers={};this.session={};this.recognizers=[];this.oldCssProps={};this.element=m;this.input=new ha(this,O);this.touchAction=new ia(this,this.options.touchAction);va(this,!0);h(this.options.recognizers,function(t){var z=this.add(new t[0](t[1]));t[2]&&z.recognizeWith(t[2]);t[3]&&z.requireFailure(t[3])},this)}function va(m,q){var t=m.element;if(t.style){var z;h(m.options.cssProps,function(C,D){z=A(t.style,D);q?(m.oldCssProps[z]=t.style[z],t.style[z]=C):t.style[z]=m.oldCssProps[z]||
""});q||(m.oldCssProps={})}}function Ea(m,q){var t=c.createEvent("Event");t.initEvent(m,!0,!0);t.gesture=q;q.target.dispatchEvent(t)}var oa=" webkit Moz MS ms o".split(" "),Fa=c.createElement("div"),X=Math.round,V=Math.abs,fa=Date.now;var S="function"!==typeof Object.assign?function(m){if(m===e||null===m)throw new TypeError("Cannot convert undefined or null to object");for(var q=Object(m),t=1;t<arguments.length;t++){var z=arguments[t];if(z!==e&&null!==z)for(var C in z)z.hasOwnProperty(C)&&(q[C]=z[C])}return q}:
Object.assign;var wa=k(function(m,q,t){for(var z=Object.keys(q),C=0;C<z.length;){if(!t||t&&m[z[C]]===e)m[z[C]]=q[z[C]];C++}return m},"extend","Use `assign`."),Ga=k(function(m,q){return wa(m,q,!0)},"merge","Use `assign`."),Da=1,Ha=/mobile|tablet|ip(ad|hone|od)|android/i,Ia="ontouchstart"in b;A(b,"PointerEvent");Ia&&Ha.test(navigator.userAgent);var pa=["x","y"],Y=["clientX","clientY"];F.prototype={handler:function(){},init:function(){this.evEl&&r(this.element,this.evEl,this.domHandler);this.evTarget&&
r(this.target,this.evTarget,this.domHandler);this.evWin&&r(G(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&B(this.element,this.evEl,this.domHandler);this.evTarget&&B(this.target,this.evTarget,this.domHandler);this.evWin&&B(G(this.element),this.evWin,this.domHandler)}};var Ja={mousedown:1,mousemove:2,mouseup:4},za="mousedown",Aa="mousemove mouseup";l(W,F,{handler:function(m){var q=Ja[m.type];q&1&&0===m.button&&(this.pressed=!0);q&2&&1!==m.which&&(q=4);this.pressed&&(q&4&&
(this.pressed=!1),this.callback(this.manager,q,{pointers:[m],changedPointers:[m],pointerType:"mouse",srcEvent:m}))}});var Ka={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},La={2:"touch",3:"pen",4:"mouse",5:"kinect"},qa="pointerdown",ra="pointermove pointerup pointercancel";b.MSPointerEvent&&!b.PointerEvent&&(qa="MSPointerDown",ra="MSPointerMove MSPointerUp MSPointerCancel");l(Z,F,{handler:function(m){var q=this.store,t=!1,z=m.type.toLowerCase().replace("ms","");z=Ka[z];var C=
La[m.pointerType]||m.pointerType,D="touch"==C,E=u(q,m.pointerId,"pointerId");z&1&&(0===m.button||D)?0>E&&(q.push(m),E=q.length-1):z&12&&(t=!0);0>E||(q[E]=m,this.callback(this.manager,z,{pointers:q,changedPointers:[m],pointerType:C,srcEvent:m}),t&&q.splice(E,1))}});var Ma={touchstart:1,touchmove:2,touchend:4,touchcancel:8};l(aa,F,{handler:function(m){var q=Ma[m.type];1===q&&(this.started=!0);if(this.started){var t=x(m.touches);var z=x(m.changedTouches);q&12&&(t=y(t.concat(z),"identifier",!0));t=[t,
z];q&12&&0===t[0].length-t[1].length&&(this.started=!1);this.callback(this.manager,q,{pointers:t[0],changedPointers:t[1],pointerType:"touch",srcEvent:m})}}});var Na={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Ba="touchstart touchmove touchend touchcancel";l(T,F,{handler:function(m){var q=Na[m.type],t=U.call(this,m,q);t&&this.callback(this.manager,q,{pointers:t[0],changedPointers:t[1],pointerType:"touch",srcEvent:m})}});l(ha,F,{handler:function(m,q,t){var z="mouse"==t.pointerType;if(!(z&&t.sourceCapabilities&&
t.sourceCapabilities.firesTouchEvents)){if("touch"==t.pointerType)q&1?(this.primaryTouch=t.changedPointers[0].identifier,sa.call(this,t)):q&12&&sa.call(this,t);else{if(z)a:{z=t.srcEvent.clientX;for(var C=t.srcEvent.clientY,D=0;D<this.lastTouches.length;D++){var E=this.lastTouches[D],J=Math.abs(C-E.y);if(25>=Math.abs(z-E.x)&&25>=J){z=!0;break a}}z=!1}if(z)return}this.callback(m,q,t)}},destroy:function(){this.touch.destroy();this.mouse.destroy()}});var xa=A(Fa.style,"touchAction"),ya=xa!==e,ea=function(){if(!ya)return!1;
var m={},q=b.CSS&&b.CSS.supports;"auto;manipulation;pan-y;pan-x;pan-x pan-y;none".split(";").forEach(function(t){m[t]=q?b.CSS.supports("touch-action",t):!0});return m}();ia.prototype={set:function(m){"compute"==m&&(m=this.compute());ya&&this.manager.element.style&&ea[m]&&(this.manager.element.style[xa]=m);this.actions=m.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var m=[];h(this.manager.recognizers,function(q){p(q.options.enable,[q])&&(m=
m.concat(q.getTouchAction()))});return Ca(m.join(" "))},preventDefaults:function(m){var q=m.srcEvent,t=m.offsetDirection;if(this.manager.session.prevented)q.preventDefault();else{var z=this.actions,C=-1<z.indexOf("none")&&!ea.none,D=-1<z.indexOf("pan-y")&&!ea["pan-y"];z=-1<z.indexOf("pan-x")&&!ea["pan-x"];if(C){var E=2>m.distance,J=250>m.deltaTime;if(1===m.pointers.length&&E&&J)return}if(!z||!D)if(C||D&&t&6||z&&t&24)return this.preventSrc(q)}},preventSrc:function(m){this.manager.session.prevented=
!0;m.preventDefault()}};Q.prototype={defaults:{},set:function(m){S(this.options,m);this.manager&&this.manager.touchAction.update();return this},recognizeWith:function(m){if(g(m,"recognizeWith",this))return this;var q=this.simultaneous;m=ba(m,this);q[m.id]||(q[m.id]=m,m.recognizeWith(this));return this},dropRecognizeWith:function(m){if(g(m,"dropRecognizeWith",this))return this;m=ba(m,this);delete this.simultaneous[m.id];return this},requireFailure:function(m){if(g(m,"requireFailure",this))return this;
var q=this.requireFail;m=ba(m,this);-1===u(q,m)&&(q.push(m),m.requireFailure(this));return this},dropRequireFailure:function(m){if(g(m,"dropRequireFailure",this))return this;m=ba(m,this);m=u(this.requireFail,m);-1<m&&this.requireFail.splice(m,1);return this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(m){return!!this.simultaneous[m.id]},emit:function(m){function q(C){t.manager.emit(C,m)}var t=this,z=this.state;8>z&&q(t.options.event+ta(z));q(t.options.event);
m.additionalEvent&&q(m.additionalEvent);8<=z&&q(t.options.event+ta(z))},tryEmit:function(m){if(this.canEmit())return this.emit(m);this.state=32},canEmit:function(){for(var m=0;m<this.requireFail.length;){if(!(this.requireFail[m].state&33))return!1;m++}return!0},recognize:function(m){m=S({},m);p(this.options.enable,[this,m])?(this.state&56&&(this.state=1),this.state=this.process(m),this.state&30&&this.tryEmit(m)):(this.reset(),this.state=32)},process:function(m){},getTouchAction:function(){},reset:function(){}};
l(N,Q,{defaults:{pointers:1},attrTest:function(m){var q=this.options.pointers;return 0===q||m.pointers.length===q},process:function(m){var q=this.state,t=m.eventType,z=q&6;m=this.attrTest(m);return z&&(t&8||!m)?q|16:z||m?t&4?q|8:q&2?q|4:2:32}});l(ca,N,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var m=this.options.direction,q=[];m&6&&q.push("pan-y");m&24&&q.push("pan-x");return q},directionTest:function(m){var q=this.options,t=!0,z=m.distance,C=m.direction,
D=m.deltaX,E=m.deltaY;C&q.direction||(q.direction&6?(C=0===D?1:0>D?2:4,t=D!=this.pX,z=Math.abs(m.deltaX)):(C=0===E?1:0>E?8:16,t=E!=this.pY,z=Math.abs(m.deltaY)));m.direction=C;return t&&z>q.threshold&&C&q.direction},attrTest:function(m){return N.prototype.attrTest.call(this,m)&&(this.state&2||!(this.state&2)&&this.directionTest(m))},emit:function(m){this.pX=m.deltaX;this.pY=m.deltaY;var q=ua(m.direction);q&&(m.additionalEvent=this.options.event+q);this._super.emit.call(this,m)}});l(ja,N,{defaults:{event:"pinch",
threshold:0,pointers:2},getTouchAction:function(){return["none"]},attrTest:function(m){return this._super.attrTest.call(this,m)&&(Math.abs(m.scale-1)>this.options.threshold||this.state&2)},emit:function(m){1!==m.scale&&(m.additionalEvent=this.options.event+(1>m.scale?"in":"out"));this._super.emit.call(this,m)}});l(ka,Q,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(m){var q=this.options,t=m.pointers.length===q.pointers,z=m.distance<
q.threshold,C=m.deltaTime>q.time;this._input=m;if(!z||!t||m.eventType&12&&!C)this.reset();else if(m.eventType&1)this.reset(),this._timer=f(function(){this.state=8;this.tryEmit()},q.time,this);else if(m.eventType&4)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(m){8===this.state&&(m&&m.eventType&4?this.manager.emit(this.options.event+"up",m):(this._input.timeStamp=fa(),this.manager.emit(this.options.event,this._input)))}});l(la,N,{defaults:{event:"rotate",threshold:0,
pointers:2},getTouchAction:function(){return["none"]},attrTest:function(m){return this._super.attrTest.call(this,m)&&(Math.abs(m.rotation)>this.options.threshold||this.state&2)}});l(ma,N,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return ca.prototype.getTouchAction.call(this)},attrTest:function(m){var q=this.options.direction;if(q&30)var t=m.overallVelocity;else q&6?t=m.overallVelocityX:q&24&&(t=m.overallVelocityY);return this._super.attrTest.call(this,
m)&&q&m.offsetDirection&&m.distance>this.options.threshold&&m.maxPointers==this.options.pointers&&V(t)>this.options.velocity&&m.eventType&4},emit:function(m){var q=ua(m.offsetDirection);q&&this.manager.emit(this.options.event+q,m);this.manager.emit(this.options.event,m)}});l(da,Q,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return["manipulation"]},process:function(m){var q=this.options,t=m.pointers.length===q.pointers,z=m.distance<
q.threshold,C=m.deltaTime<q.time;this.reset();if(m.eventType&1&&0===this.count)return this.failTimeout();if(z&&C&&t){if(4!=m.eventType)return this.failTimeout();t=this.pTime?m.timeStamp-this.pTime<q.interval:!0;z=!this.pCenter||K(this.pCenter,m.center)<q.posThreshold;this.pTime=m.timeStamp;this.pCenter=m.center;this.count=z&&t?this.count+1:1;this._input=m;if(0===this.count%q.taps)return this.hasRequireFailures()?(this._timer=f(function(){this.state=8;this.tryEmit()},q.interval,this),2):8}return 32},
failTimeout:function(){this._timer=f(function(){this.state=32},this.options.interval,this);return 32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});R.VERSION="2.0.8";R.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[la,{enable:!1}],[ja,{enable:!1},["rotate"]],[ma,{direction:6}],[ca,{direction:6},["swipe"]],[da],[da,{event:"doubletap",
taps:2},["tap"]],[ka]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};na.prototype={set:function(m){S(this.options,m);m.touchAction&&this.touchAction.update();m.inputTarget&&(this.input.destroy(),this.input.target=m.inputTarget,this.input.init());return this},stop:function(m){this.session.stopped=m?2:1},recognize:function(m){var q=this.session;if(!q.stopped){this.touchAction.preventDefaults(m);var t=this.recognizers,
z=q.curRecognizer;if(!z||z&&z.state&8)z=q.curRecognizer=null;for(var C=0;C<t.length;){var D=t[C];2===q.stopped||z&&D!=z&&!D.canRecognizeWith(z)?D.reset():D.recognize(m);!z&&D.state&14&&(z=q.curRecognizer=D);C++}}},get:function(m){if(m instanceof Q)return m;for(var q=this.recognizers,t=0;t<q.length;t++)if(q[t].options.event==m)return q[t];return null},add:function(m){if(g(m,"add",this))return this;var q=this.get(m.options.event);q&&this.remove(q);this.recognizers.push(m);m.manager=this;this.touchAction.update();
return m},remove:function(m){if(g(m,"remove",this))return this;if(m=this.get(m)){var q=this.recognizers;m=u(q,m);-1!==m&&(q.splice(m,1),this.touchAction.update())}return this},on:function(m,q){if(m!==e&&q!==e){var t=this.handlers;h(w(m),function(z){t[z]=t[z]||[];t[z].push(q)});return this}},off:function(m,q){if(m!==e){var t=this.handlers;h(w(m),function(z){q?t[z]&&t[z].splice(u(t[z],q),1):delete t[z]});return this}},emit:function(m,q){this.options.domEvents&&Ea(m,q);var t=this.handlers[m]&&this.handlers[m].slice();
if(t&&t.length)for(q.type=m,q.preventDefault=function(){q.srcEvent.preventDefault()},m=0;m<t.length;)t[m](q),m++},destroy:function(){this.element&&va(this,!1);this.handlers={};this.session={};this.input.destroy();this.element=null}};S(R,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,
DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:na,Input:F,TouchAction:ia,TouchInput:T,MouseInput:W,PointerEventInput:Z,TouchMouseInput:ha,SingleTouchInput:aa,Recognizer:Q,AttrRecognizer:N,Tap:da,Pan:ca,Swipe:ma,Pinch:ja,Rotate:la,Press:ka,on:r,off:B,each:h,merge:Ga,extend:wa,assign:S,inherit:l,bindFn:n,prefixed:A});("undefined"!==typeof b?b:"undefined"!==typeof self?self:{}).Hammer=R;"function"===typeof define&&define.amd?define(function(){return R}):"undefined"!=typeof module&&module.exports?module.exports=
R:b[d]=R})(window,document,"Hammer");
jQuery.fn.IEZoom=function(b){this.options=b;this.middleScale=3;this.maxScale=6;this.side=b.side;this.parameters={width:$(this).width()||0,height:$(this).height()||0,naturalWidth:$(this).width()||0,naturalHeight:$(this).height()||0,left:parseInt($(this).css("left"))||0,top:parseInt($(this).css("top"))||0,naturalLeft:parseInt($(this).css("left"))||0,naturalTop:parseInt($(this).css("top"))||0,scale:1,rotate:0,toScale:1,tran:{x:0,y:0},origin:{x:50,y:50},zoomFlag:!1,zoomming:!1,zoonOut:!1,resize:!1,eventCancel:!1};
this.onPan=function(f){if(!this.parameters.resize&&!this.parameters.eventCancel&&!this.parameters.zoomming&&f&&f.pointers&&1==f.pointers.length&&(this.swipeInterval&&this.swipeInterval.stop(),this.animateInterval&&this.animateInterval.stop(),this.parameters.zoomFlag&&(this.panForMove(this,f.deltaX,f.deltaY,!0),this.options&&this.options.onPan)))this.options.onPan()};this.onDoubleTap=function(f){if(!(BookInfo.getBook().status_resize||BookInfo.getBook().flipping||(BookInfo.getBook().endFlip(),global.windowTapInterval&&
window.clearTimeout(global.windowTapInterval),this.parameters.resize||this.parameters.eventCancel||this.parameters.zoomming)))if(this.status_zoom=!0,!this.parameters.zoomFlag)this.zoomIn(this),this.parameters.zoomOut=!1,this.animateToScale(this,this.middleScale,f);else if(this.parameters.zoomFlag){var g=this.parameters.naturalWidth/this.parameters.width;this.parameters.zoomOut=!0;this.animateToScale(this,g,f)}};this.zoomIn=function(f){f.parameters.left=parseInt($(f).css("left"));f.parameters.top=
parseInt($(f).css("top"));f.parameters.naturalLeft=f.parameters.left;f.parameters.naturalTop=f.parameters.top;f.parameters.width=$(f).width();f.parameters.height=$(f).height();f.parameters.naturalWidth=$(f).width();f.parameters.naturalHeight=$(f).height();f.parameters.zoomFlag=!0;f.parameters.zoomOut=!1;f.options&&f.options.zoomIn&&f.options.zoomIn()};this.zoomOut=function(f){f.swipeInterval&&f.swipeInterval.stop();f.animateInterval&&f.animateInterval.stop();f.parameters.zoomFlag=!1;f.parameters.zoomOut=
!0;f.parameters.toScale=1;f.parameters.scale=1;f.options&&f.options.zoomOut&&f.options.zoomOut()};this.animateToScale=function(f,g,h){if(!f.parameters.eventCancel&&!f.parameters.zoomming){f.options&&f.options.zoomStart&&f.options.zoomStart();f.parameters.zoomming=!0;var k=0,l=0,n=0,p=0,r=0;f.animateInterval=function(B,v){k=$.easing.swing(null,n,f.parameters.width,f.parameters.width*(g-1),20);l=$.easing.swing(null,n,f.parameters.height,f.parameters.height*(g-1),20);p=$.easing.swing(null,n,f.parameters.left,
f.parameters.naturalLeft+50*(f.parameters.naturalWidth-f.parameters.width*g)/100-f.parameters.left,20);r=$.easing.swing(null,n,f.parameters.top,f.parameters.naturalTop+50*(f.parameters.naturalHeight-f.parameters.height*g)/100-f.parameters.top,20);f.css({width:k+"px",height:l+"px",left:p+"px",top:r+"px"});for(var w=0;w<f.side.pageArray.length;w++)if(f.side.pageArray[w])f.side.pageArray[w].onResize(k/2,l);n++;if(20<=n||B>=v){f.animateInterval.stop();f.parameters.left=f.parameters.naturalLeft+50*(f.parameters.naturalWidth-
f.parameters.width*g)/100;f.parameters.top=f.parameters.naturalTop+50*(f.parameters.naturalHeight-f.parameters.height*g)/100;f.parameters.width*=g;f.parameters.height*=g;f.css({width:f.parameters.width+"px",height:f.parameters.height+"px",left:f.parameters.left+"px",top:f.parameters.top+"px"});for(w=0;w<f.side.pageArray.length;w++)if(f.side.pageArray[w])f.side.pageArray[w].onResize(f.parameters.width/2,f.parameters.height);f.parameters.zoomming=!1;1>=f.parameters.width*f.parameters.scale/f.parameters.naturalWidth&&
f.zoomOut(f)}}.animation(this,320)}};this.panForMove=function(f,g,h,k){f.css({left:f.parameters.left+g+"px",top:f.parameters.top+h+"px"})};var c=!1,d=0,e=0;bookConfig.SupportOperatePageZoom&&this.dblclick(function(f){f.pointers=[{pageX:f.pageX,pageY:f.pageY}];this.onDoubleTap(f)}.bind(this));this.bind(_event._down,function(f){c=!0;d=f.pageX;e=f.pageY}.bind(this));this.bind(_event._move,function(f){f.pointers=[{pageX:f.pageX,pageY:f.pageY}];c&&(f.deltaX=f.pageX-d,f.deltaY=f.pageY-e,this.onPan(f))}.bind(this));
this.bind(_event._end,function(f){c=!1;this.parameters.left+=f.pageX-d;this.parameters.top+=f.pageY-e}.bind(this))};
jQuery.fn.zoom=function(b,c){this.options=b;this.isBook=c;this.parameters={width:$(this).width()||0,height:$(this).height()||0,naturalWidth:$(this).width()||0,naturalHeight:$(this).height()||0,left:$(this).offset().left-0||0,top:$(this).offset().top-0||0,toScale:1,scale:1,rotate:0,tran:{x:0,y:0},origin:{x:50,y:50},zoomFlag:!1,zoomming:!1,zoomOut:!1,resize:!1,eventCancel:!1,zoomDelay:!1,onPan:!1,onSwipe:!1,onDoubleTap:!1,onPinch:!1,zoomArea:{left:0,top:0,right:0,bottom:0}};this.onPan=function(d){if(!this.parameters.resize&&
!this.parameters.eventCancel&&!this.parameters.zoomming&&d&&d.pointers&&1==d.pointers.length&&(this.swipeInterval&&this.swipeInterval.stop(),this.animateInterval&&this.animateInterval.stop(),this.parameters.zoomFlag)){"panstart"==d.type&&(this.parameters.onPan=!0);var e=this.getDelta(d);e=this.panForMove(this,e.deltaX,e.deltaY,!0);if(this.options&&this.options.onPan)this.options.onPan();if("panend"==d.type||"pancancel"==d.type)this.parameters.onPan=!1,this.setZoomParameters(this,e),this.restrictInBoundary(this)}};
this.onSwipe=function(d){if(!this.parameters.resize&&!this.parameters.eventCancel&&!this.parameters.zoomming)if(this.parameters.zoomFlag){var e=this.parameters.tran,f=this.tranLimit(this,this.parameters.scale,this.parameters.tran);if(f.x==parseInt(e.x)&&f.y==parseInt(e.y)){this.animateInterval&&this.animateInterval.stop();this.swipeInterval&&this.swipeInterval.stop();var g=0,h=0;d=this.getVelocity(d);g=d.velocityX;h=d.velocityY;this.swipeInterval=function(k,l){var n=this.parameters.tran,p=this.tranLimit(this,
this.parameters.scale,this.parameters.tran);p.x!=parseInt(n.x)||p.y!=parseInt(n.y)?(this.swipeInterval.stop(),this.restrictInBoundary(this)):(n=(l-k)/l,n=this.panForMove(this,g*n*16.7,h*n*16.7,!0),this.setZoomParameters(this,n),k>=l&&(this.swipeInterval.stop(),this.restrictInBoundary(this)))}.animation(this,320)}}else d=this.getDirection(d),this.options&&this.options.swipeend&&this.options.swipeend(d)};this.getDirection=function(d){var e,f=bookConfig.upsideOnMobile();d.direction&Hammer.DIRECTION_RIGHT&&
!f&&(e="right");d.direction&Hammer.DIRECTION_LEFT&&!f&&(e="left");d.direction&Hammer.DIRECTION_UP&&!f&&(e="up");d.direction&Hammer.DIRECTION_DOWN&&!f&&(e="down");d.direction&Hammer.DIRECTION_RIGHT&&f&&(e="down");d.direction&Hammer.DIRECTION_LEFT&&f&&(e="up");d.direction&Hammer.DIRECTION_UP&&f&&(e="left");d.direction&Hammer.DIRECTION_DOWN&&f&&(e="right");return e};this.getVelocity=function(d){var e=0,f=0,g=bookConfig.upsideOnMobile();0==d.velocityX||g||(e=d.velocityX);0==d.velocityY||g||(f=d.velocityY);
0!=d.velocityX&&g&&(e=d.velocityY);0!=d.velocityY&&g&&(f=-d.velocityX);return{velocityX:e,velocityY:f}};this.getDelta=function(d){var e=0,f=0,g=bookConfig.upsideOnMobile();0==d.deltaX||g||(e=d.deltaX);0==d.deltaY||g||(f=d.deltaY);0!=d.deltaX&&g&&(e=d.deltaY);0!=d.deltaY&&g&&(f=-d.deltaX);return{deltaX:e,deltaY:f}};this.onDoubleTap=function(d){if(!(BookInfo.getBook().status_resize||BookInfo.getBook().flipping||(BookInfo.getBook().endFlip(),global.windowTapInterval&&window.clearTimeout(global.windowTapInterval),
this.parameters.resize||this.parameters.zoomming)))if(BookInfo.getBook().unSelect(),this.status_zoom=!0,!this.parameters.zoomFlag)BookEvent.trigger("zoomIn",["double tap",BookInfo.getCurrentPages().join("-")]),this.zoomIn(this),this.parameters.origin=this.mathOrigin(this,d),this.originObj(this,this.parameters.origin),this.parameters.zoomOut=!1,this.animateToScale(this,this.middleScale,d);else if(this.parameters.zoomFlag){this.beforeZoomOut(this);BookEvent.trigger("zoomOut",["double tap",BookInfo.getCurrentPages().join("-")]);
var e=this.parameters.naturalWidth/this.parameters.width;this.parameters.zoomOut=!0;this.animateToScale(this,e,d)}};this.onPinch=function(d){"pinchstart"==d.type&&(this.pinchStart=!0);if(!(this.parameters.resize||this.parameters.zoomming||!this.parameters.zoomFlag&&1>=d.scale)&&d&&d.pointers){BookInfo.getBook().unSelect();this.animateInterval&&this.animateInterval.stop();this.swipeInterval&&this.swipeInterval.stop();var e=function(){this.pinchStart=!1;this.parameters.zoomFlag||(this.parameters.zoomOut=
!1,this.zoomIn(this));BookEvent.trigger("zoomIn",["pinch",BookInfo.getCurrentPages().join("-")]);this.scale=this.parameters.toScale;this.parameters.origin=this.mathOrigin(this,d);this.originObj(this,this.parameters.origin);this.pinchMoveIn(this,parseFloat(this.scale)*parseFloat(d.scale),d,this.parameters.origin)}.bind(this);"pinchstart"==d.type&&(this.parameters.onPinch=!0,e(d));"pinchend"==d.type&&(this.parameters.scale=this.parameters.toScale,this.parameters.onPinch=!1,this.exceedScale(this,d),
this.pinchStart=!1);"pinchmove"==d.type&&(this.pinchStart&&e(d),this.pinchMoveIn(this,parseFloat(this.scale)*parseFloat(d.scale),d,this.parameters.origin));"pinchcancel"==d.type&&(this.parameters.scale=this.parameters.toScale,this.parameters.onPinch=!1,this.exceedScale(this,d),this.pinchStart=!1)}};this.exceedScale=function(d,e){var f=d.parameters.width*d.parameters.toScale/d.parameters.naturalWidth,g=d.parameters.width*d.parameters.toScale,h=d.parameters.height*d.parameters.toScale,k=d.parameters.naturalWidth*
d.maxScale/d.parameters.width,l=d.parameters.naturalWidth/d.parameters.width,n=d.parameters.toScale;f>d.maxScale&&(n=k);if(1>f||g<windowWidth&&h<windowHeight)d.parameters.zoomOut=!0,n=l;d.animateToScale(d,n,e)};this.zoomIn=function(d){var e=this.getBookOffset($(d));d.parameters.tran=getTransform(d[0]);d.parameters.left=e.left-d.parameters.tran.x;d.parameters.top=e.top-d.parameters.tran.y;d.parameters.width=$(d).width();d.parameters.height=$(d).height();d.parameters.naturalWidth=$(d).width();d.parameters.naturalHeight=
$(d).height();d.setZoomSize();d.parameters.zoomFlag=!0;d.parameters.zoomOut=!1;d.options&&d.options.zoomIn&&d.options.zoomIn(d.parameters)};this.beforeZoomOut=function(d){d.options&&d.options.beforeZoomOut&&d.options.beforeZoomOut()};this.zoomOut=function(d){d.swipeInterval&&d.swipeInterval.stop();d.animateInterval&&d.animateInterval.stop();d.parameters.zoomFlag=!1;d.parameters.zoomOut=!0;d.parameters.toScale=1;d.parameters.scale=1;d.options&&d.options.zoomOut&&d.options.zoomOut()};this.tranLimit=
function(d,e,f){if(f){if(d.parameters.zoomOut){f={x:0,y:0};f.x=d.parameters.width*(e-1)*d.parameters.origin.x/100;f.y=d.parameters.height*(e-1)*d.parameters.origin.y/100;if((bookType==BookType.normal_book||bookType==BookType.catalog_book)&&bookConfig.retainBookCenter&&d.isBook){var g=BookInfo.getCurrentPages();1==g.length&&"issuu"!=bookConfig.FlipStyle&&(!BookInfo.isLeftPage(g[0],!0)&&bookConfig.FlipDirection&&(f.y-=d.parameters.height*e/4),BookInfo.isLeftPage(g[0],!0)&&bookConfig.FlipDirection&&
(f.y+=d.parameters.height*e/4),BookInfo.isLeftPage(g[0],!0)||bookConfig.FlipDirection||(f.x-=d.parameters.width*e/4),BookInfo.isLeftPage(g[0],!0)&&!bookConfig.FlipDirection&&(f.x+=d.parameters.width*e/4))}return f}d.parameters.origin||(d.parameters.origin={x:0,y:0});g=f.x;f=f.y;var h=d.parameters.width;var k=d.parameters.height;var l=d.parameters.left-d.parameters.origin.x*(e-1)*h/100;var n=d.parameters.top-d.parameters.origin.y*(e-1)*k/100;var p=e*h,r=e*k,B=0,v=0,w=0,u=0;toolBar&&(B=0===toolBar.getTopHeight()?
0:toolBar.getTopHeight()+10,v=0===toolBar.getBottomHeight()?0:toolBar.getBottomHeight()+10,w=0===toolBar.getLeftWidth()?0:toolBar.getLeftWidth()+10,u=0===toolBar.getRightWidth()?0:toolBar.getRightWidth()+10);if(p>windowWidth){var x=windowWidth-p-l+h*e*d.parameters.zoomArea.right/100-u;l=-l-h*e*d.parameters.zoomArea.left/100+w}else x=-l-h*e*d.parameters.zoomArea.left/100+w,l=windowWidth-p-l+h*e*d.parameters.zoomArea.right/100-u;r>windowHeight?(h=windowHeight-r-n+k*e*d.parameters.zoomArea.bottom/100-
v,d=-n-k*e*d.parameters.zoomArea.top/100+B):(h=-n-k*e*d.parameters.zoomArea.top/100+B,d=windowHeight-r-n+k*e*d.parameters.zoomArea.bottom/100-v);g=Number.between(g,x,l);f=Number.between(f,h,d);return{x:parseInt(g),y:parseInt(f)}}};this.pinchMoveIn=function(d,e,f){if(!d.parameters.eventCancel&&!d.parameters.zoomming&&f&&f.pointers&&2==f.pointers.length){var g={};g.scale=e;g.tran=d.mathTran(d,f,d.parameters.origin);d.transformSetting(d,g);d.parameters.toScale=e}};this.mathTran=function(d,e,f){if(!e||
!e.pointers||0>=e.pointers.length||!f)return{x:0,y:0};var g=this.getPageXY(e);e=g.pageX;g=g.pageY;var h=d.parameters.width;var k=d.parameters.height;var l=d.parameters.left;d=d.parameters.top;l=(f.x*h/100+l).toFixed(2);f=(f.y*k/100+d).toFixed(2);e-=parseFloat(l);f=g-parseFloat(f);return{x:parseFloat(e.toFixed(2)),y:parseFloat(f.toFixed(2))}};this.mathOrigin=function(d,e){if(!e||!e.pointers||0>=e.pointers.length)return{x:50,y:50};var f=this.getPageXY(e);e=f.pageX;f=f.pageY;var g=d.parameters.width;
var h=d.parameters.height;var k=this.getBookOffset(d);e=(e-parseInt(k.left))/(g*d.parameters.scale);d=(f-parseInt(k.top))/(h*d.parameters.scale);return{x:(100*e).toFixed(2),y:(100*d).toFixed(2)}};this.getPageXY=function(d){var e=bookConfig.upsideOnMobile();if(1==d.pointers.length){var f=d.pointers[0].pageX;var g=d.pointers[0].pageY}1<d.pointers.length&&(f=(d.pointers[0].pageX+d.pointers[1].pageX)/2,g=(d.pointers[0].pageY+d.pointers[1].pageY)/2);return e?{pageX:g,pageY:windowHeight-f}:{pageX:f,pageY:g}};
this.getBookOffset=function(d){if(d)return d=d.offset(),bookConfig.upsideOnMobile()?{left:d.top,top:d.left}:{left:d.left,top:d.top}};this.restrictInBoundary=function(d,e){if(!d.parameters.eventCancel&&!d.parameters.zoomming){var f=d.parameters.tran,g=this.tranLimit(d,d.parameters.scale,f);if(g.x!=parseInt(f.x)||g.y!=parseInt(f.y)){d.animateInterval&&d.animateInterval.stop();var h=0,k=0;g.x!=f.x&&(h=g.x-f.x);g.y!=f.y&&(k=g.y-f.y);d.animateInterval=function(l,n){var p=$.easing.easeOutBack(null,l,0,
h,n),r=$.easing.easeOutBack(null,l,0,k,n);0<l&&(p-=$.easing.easeOutBack(null,l-1,0,h,n),r-=$.easing.easeOutBack(null,l-1,0,k,n));l>=n&&(r=d.parameters.tran,p=g.x-r.x,r=g.y-r.y);p=d.panForMove(d,p,r);d.setZoomParameters(d,p);l>=n&&(d.animateInterval.stop(),BookInfo.getBook().bookAttachments&&BookInfo.getBook().bookAttachments.Items.find("ZoomMap").each(function(B){B.refreshArea()}),e&&"function"==typeof e&&e())}.animation(this,320)}}};this.transformSetting=function(d,e){d.setZoomParameters(d,e);e=
transformCSS(e);d.css(e)};this.panForMove=function(d,e,f,g){var h=d.parameters?d.parameters.tran:{x:0,y:0};g=d.parameters?d.parameters.scale:1;h||(h={x:0,y:0});g||0==g||(g=1);e=parseInt(h.x+e);var k=parseInt(h.y+f);f={x:e,y:k};BookInfo.getBook().disableDriection&&(f=bookConfig.FlipDirection||bookConfig.upsideOnMobile()?{x:e,y:h.y}:{x:h.x,y:k});h=transformCSS({tran:f,scale:g});d.css(h);return{tran:f,scale:g}};this.originObj=function(d,e){d.css({"-webkit-transform-origin":e.x+"% "+e.y+"%","-moz-transform-origin":e.x+
"% "+e.y+"%","-ms-transform-origin":e.x+"% "+e.y+"%","-o-transform-origin":e.x+"% "+e.y+"%"})};this.setZoomParameters=function(d,e){function f(k){return void 0!==k&&null!==k}function g(k){return f(e[k])&&!isNaN(e[k])?e[k]:d.parameters[k]}function h(k){return f(e[k])?e[k]:d.parameters[k]}d&&d.parameters&&e&&(d.parameters={width:g("width"),height:g("height"),naturalWidth:g("naturalWidth"),naturalHeight:g("naturalHeight"),left:g("left"),top:g("top"),scale:g("scale"),rotate:g("rotate"),toScale:g("toScale"),
tran:h("tran"),origin:h("origin"),zoomFlag:h("zoomFlag"),zoomming:h("zoomming"),zoomOut:h("zoomOut"),resize:h("resize"),eventCancel:h("eventCancel"),zoomArea:h("zoomArea"),zoomDelay:h("zoomDelay"),onPan:h("onPan"),onSwipe:h("onSwipe"),onDoubleTap:h("onDoubleTap"),onPinch:h("onPinch")})};this.animateToTransform=function(d,e,f){if(!this.parameters.eventCancel&&!this.parameters.zoomming){this.options&&this.options.zoomStart&&this.options.zoomStart();var g=this.getBookOffset($(this));this.parameters.tran=
getTransform(this[0]);if(parseInt(e.x)!=parseInt(this.parameters.tran.x)||parseInt(e.y)!=parseInt(this.parameters.tran.y)||d.toFixed(2)!=this.parameters.scale.toFixed(2)){this.parameters.zoomming=!0;this.parameters.left=g.left-this.parameters.tran.x;this.parameters.top=g.top-this.parameters.tran.y;this.parameters.width=$(this).width();this.parameters.height=$(this).height();this.parameters.naturalWidth=$(this).width();this.parameters.naturalHeight=$(this).height();this.setZoomSize();var h={};h.origin=
this.parameters.origin;h.scale=d;h.tran=e;h.origin=f;this.zoomTran=h;e=transformCSS(h);this.originObj(this,h.origin);animateOnce(this,e,300,function(){getTransform(this[0]);this.transformSetting(this,h);this.parameters.scale=d;this.parameters.toScale=d;this.parameters.zoomming=!1;if(this.options.onZoomed)this.options.onZoomed(h)}.bind(this),"%stransform","ease-out")}}};this.animateToTransform=function(d,e,f){if(!this.parameters.eventCancel&&!this.parameters.zoomming){this.options&&this.options.zoomStart&&
this.options.zoomStart();var g=this.getBookOffset($(this));this.parameters.tran=getTransform(this[0]);if(parseInt(e.x)!=parseInt(this.parameters.tran.x)||parseInt(e.y)!=parseInt(this.parameters.tran.y)||d.toFixed(2)!=this.parameters.scale.toFixed(2)){this.parameters.zoomming=!0;this.parameters.left=g.left-this.parameters.tran.x;this.parameters.top=g.top-this.parameters.tran.y;this.parameters.width=$(this).width();this.parameters.height=$(this).height();this.parameters.naturalWidth=$(this).width();
this.parameters.naturalHeight=$(this).height();this.setZoomSize();var h={};h.scale=d;h.tran=e;h.origin=f;this.zoomTran=h;this.originObj(this,h.origin);try{var k=$.easing.easeOutSine,l=function(){(function(p,r){n(p,r,"Sine")}).animation(this,300)}.bind(this),n=function(p,r,B){if(p<r){B=k(null,p,this.parameters.tran.x,e.x-this.parameters.tran.x,r);var v=k(null,p,this.parameters.tran.y,e.y-this.parameters.tran.y,r);p=k(null,p,this.parameters.scale,d-this.parameters.scale,r);r={};r.scale=p;r.tran={x:B,
y:v};B=transformCSS(r);this.css(B)}else if(this.transformSetting(this,h),this.parameters.scale=d,this.parameters.toScale=d,this.parameters.zoomming=!1,this.options.onZoomed)this.options.onZoomed(h)}.bind(this);l()}catch(p){}}}};this.animateToScale=function(d,e,f,g){if(!d.parameters.eventCancel&&!d.parameters.zoomming){d.options&&d.options.zoomStart&&d.options.zoomStart();d.parameters.zoomming=!0;var h={};h.origin=d.parameters.origin;h.scale=e;h.tran=this.mathTran(d,f,h.origin);h.tran=this.tranLimit(d,
e,h.tran);this.zoomTran=h;this.animation(d,e,h,g)}};this.animation=function(d,e,f,g){var h=transformCSS(f);d.originObj(d,f.origin);animateOnce(d,h,void 0==g?600:g,function(){getTransform(d[0]);d.transformSetting(d,f);d.parameters.scale=e;d.parameters.toScale=e;d.parameters.zoomming=!1;var k=(d.parameters.width*d.parameters.toScale).toFixed(2),l=(d.parameters.height*d.parameters.toScale).toFixed(2),n=d.parameters.naturalWidth,p=d.parameters.naturalHeight;if(Number.isBetween(k,n-1,n+1)||Number.isBetween(l,
p-1,p+1)){d.timeout&&(d.timeout=void 0,window.clearTimeout(d.timeout));d.parameters.zoomDelay=!1;if(d.options.onZoomed)d.options.onZoomed(d.zoomTran);d.zoomOut(d)}else if(d.options.onZoomed)d.options.onZoomed(d.zoomTran)}.bind(d),"%stransform","cubic-bezier(0.2150, 0.610, 0.3550, 1)")};this.delayExecuteOnZoomed=function(d){d.timeout=window.setTimeout(function(){if(d.parameters.zoomFlag&&!d.parameters.onPinch&&!d.parameters.zoomming)d.options.onZoomed(d.zoomTran);d.parameters.zoomDelay=!1;window.clearTimeout(d.timeout);
d.timeout=void 0},3E3)};this.registerParamers=function(d){d&&(void 0!=d.width&&(this.parameters.width=d.width),void 0!=d.height&&(this.parameters.height=d.height),void 0!=d.left&&(this.parameters.left=d.left),void 0!=d.top&&(this.parameters.top=d.top),void 0!=d.scale&&(this.parameters.scale=d.scale),void 0!=d.tran&&(this.parameters.tran=d.tran),void 0!=d.origin&&(this.parameters.origin=d.origin))};this.setZoomSize=function(){this.middleScale=Math.max(bookConfig.defaultZoomScale,1.5);this.maxScale=
Math.max(bookConfig.maxZoomScale,this.middleScale)};b=window.self!==window.top?"pan-y":"none";b=new Hammer.Manager($(this)[0],{touchAction:b});b.add(new Hammer.Pan);b.add((new Hammer.Swipe({velocity:.15})).recognizeWith(b.get("pan")));b.on("panstart panmove panend pancancel",this.onPan.bind(this));b.on("swipe swipeup",this.onSwipe.bind(this));if(bookConfig.SupportOperatePageZoom&&(b.add(new Hammer.Pinch),isPhone()||isPad()?b.add(new Hammer.Tap({event:"doubletap",taps:2,interval:400,posThreshold:30})):
b.add(new Hammer.Tap({event:"doubletap",taps:2})),b.on("pinchstart pinchmove pinchcancel pinchend",this.onPinch.bind(this)),!isAndroidWeChat()))b.on("doubletap",this.onDoubleTap.bind(this));this.setZoomSize()};jQuery.easing.jswing=jQuery.easing.swing;
jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(b,c,d,e,f){return jQuery.easing[jQuery.easing.def](b,c,d,e,f)},easeInQuad:function(b,c,d,e,f){return e*(c/=f)*c+d},easeOutQuad:function(b,c,d,e,f){return-e*(c/=f)*(c-2)+d},easeInOutQuad:function(b,c,d,e,f){return 1>(c/=f/2)?e/2*c*c+d:-e/2*(--c*(c-2)-1)+d},easeInCubic:function(b,c,d,e,f){return e*(c/=f)*c*c+d},easeOutCubic:function(b,c,d,e,f){return e*((c=c/f-1)*c*c+1)+d},easeInOutCubic:function(b,c,d,e,f){return 1>(c/=f/2)?e/2*c*c*c+d:
e/2*((c-=2)*c*c+2)+d},easeInQuart:function(b,c,d,e,f){return e*(c/=f)*c*c*c+d},easeOutQuart:function(b,c,d,e,f){return-e*((c=c/f-1)*c*c*c-1)+d},easeInOutQuart:function(b,c,d,e,f){return 1>(c/=f/2)?e/2*c*c*c*c+d:-e/2*((c-=2)*c*c*c-2)+d},easeInQuint:function(b,c,d,e,f){return e*(c/=f)*c*c*c*c+d},easeOutQuint:function(b,c,d,e,f){return e*((c=c/f-1)*c*c*c*c+1)+d},easeInOutQuint:function(b,c,d,e,f){return 1>(c/=f/2)?e/2*c*c*c*c*c+d:e/2*((c-=2)*c*c*c*c+2)+d},easeInSine:function(b,c,d,e,f){return-e*Math.cos(c/
f*(Math.PI/2))+e+d},easeOutSine:function(b,c,d,e,f){return e*Math.sin(c/f*(Math.PI/2))+d},easeInOutSine:function(b,c,d,e,f){return-e/2*(Math.cos(Math.PI*c/f)-1)+d},easeInExpo:function(b,c,d,e,f){return 0==c?d:e*Math.pow(2,10*(c/f-1))+d},easeOutExpo:function(b,c,d,e,f){return c==f?d+e:e*(-Math.pow(2,-10*c/f)+1)+d},easeInOutExpo:function(b,c,d,e,f){return 0==c?d:c==f?d+e:1>(c/=f/2)?e/2*Math.pow(2,10*(c-1))+d:e/2*(-Math.pow(2,-10*--c)+2)+d},easeInCirc:function(b,c,d,e,f){return-e*(Math.sqrt(1-(c/=f)*
c)-1)+d},easeOutCirc:function(b,c,d,e,f){return e*Math.sqrt(1-(c=c/f-1)*c)+d},easeInOutCirc:function(b,c,d,e,f){return 1>(c/=f/2)?-e/2*(Math.sqrt(1-c*c)-1)+d:e/2*(Math.sqrt(1-(c-=2)*c)+1)+d},easeInElastic:function(b,c,d,e,f){b=0;var g=e;if(0==c)return d;if(1==(c/=f))return d+e;b||(b=.3*f);g<Math.abs(e)?(g=e,e=b/4):e=b/(2*Math.PI)*Math.asin(e/g);return-(g*Math.pow(2,10*--c)*Math.sin(2*(c*f-e)*Math.PI/b))+d},easeOutElastic:function(b,c,d,e,f){var g=0,h=e;if(0==c)return d;if(1==(c/=f))return d+e;g||
(g=.3*f);h<Math.abs(e)?(h=e,b=g/4):b=g/(2*Math.PI)*Math.asin(e/h);return h*Math.pow(2,-10*c)*Math.sin(2*(c*f-b)*Math.PI/g)+e+d},easeInOutElastic:function(b,c,d,e,f){var g=0,h=e;if(0==c)return d;if(2==(c/=f/2))return d+e;g||(g=.3*f*1.5);h<Math.abs(e)?(h=e,b=g/4):b=g/(2*Math.PI)*Math.asin(e/h);return 1>c?-.5*h*Math.pow(2,10*--c)*Math.sin(2*(c*f-b)*Math.PI/g)+d:h*Math.pow(2,-10*--c)*Math.sin(2*(c*f-b)*Math.PI/g)*.5+e+d},easeInBack:function(b,c,d,e,f,g){void 0==g&&(g=1.70158);return e*(c/=f)*c*((g+1)*
c-g)+d},easeOutBack:function(b,c,d,e,f,g){void 0==g&&(g=1.70158);return e*((c=c/f-1)*c*((g+1)*c+g)+1)+d},easeInOutBack:function(b,c,d,e,f,g){void 0==g&&(g=1.70158);return 1>(c/=f/2)?e/2*c*c*(((g*=1.525)+1)*c-g)+d:e/2*((c-=2)*c*(((g*=1.525)+1)*c+g)+2)+d},easeInBounce:function(b,c,d,e,f){return e-jQuery.easing.easeOutBounce(b,f-c,0,e,f)+d},easeOutBounce:function(b,c,d,e,f){return(c/=f)<1/2.75?7.5625*e*c*c+d:c<2/2.75?e*(7.5625*(c-=1.5/2.75)*c+.75)+d:c<2.5/2.75?e*(7.5625*(c-=2.25/2.75)*c+.9375)+d:e*(7.5625*
(c-=2.625/2.75)*c+.984375)+d},easeInOutBounce:function(b,c,d,e,f){return c<f/2?.5*jQuery.easing.easeInBounce(b,2*c,0,e,f)+d:.5*jQuery.easing.easeOutBounce(b,2*c-f,0,e,f)+.5*e+d}});
jQuery.fn.drag=function(b){this.options=b?b:{};this.parameters={reference:this.options.reference?this.options.reference:$("body"),direction:this.options.direction?this.options.direction:"both",callback:this.options.callback?this.options.callback:void 0};this.create=function(){this.initEvent()}.bind(this);this.initEvent=function(){var c=new Hammer.Manager(this[0]);c.add(new Hammer.Pan);c.add((new Hammer.Swipe).recognizeWith(c.get("pan")));c.on("panstart panmove panend pancancel",this.onPan.bind(this))}.bind(this);
this.onPan=function(c){c&&c.pointers&&1==c.pointers.length&&(this.animateInterval&&this.animateInterval.stop(),"panstart"==c.type&&(this.onPanStart=!0,$(this).css({cursor:"move"}),$(this).find(".form_title")[0]&&$(this).find(".form_title").css({cursor:"move"}),this.startX=this.getLeft(),this.startY=this.getTop()),this.onPanStart&&(this.moveTo(this.startX+c.deltaX,this.startY+c.deltaY),"panend"==c.type||"pancancel"==c.type))&&(this.restrictInBoundary(),$(this).css({cursor:"default"}),$(this).find(".form_title")[0]&&
$(this).find(".form_title").css({cursor:"default"}),this.parameters.callback&&this.parameters.callback(c),this.onPanStart=!1)}.bind(this);this.getLeft=function(){return parseInt($(this).css("left"))}.bind(this);this.getTop=function(){return parseInt($(this).css("top"))}.bind(this);this.moveTo=function(c,d){var e=this.offset(),f=this.getLeft(),g=this.getTop(),h=c-f,k=d-g,l=this.parameters.reference.width(),n=this.parameters.reference.height(),p=this.parameters.reference.offset().left,r=this.parameters.reference.offset().top;
e.left+h+this.width()>l+p&&(c=l+p-e.left-this.width()+f);e.top+k+this.height()>n+r&&(d=n+r-e.top-this.height()+g);e.left+h<p&&(c=p-e.left+f);e.top+k<r&&(d=r-e.top+g);switch(this.parameters.direction){case "horizontal":$(this).css({left:c+"px"});break;case "vertical":$(this).css({top:d+"px"});break;case "both":$(this).css({left:c+"px",top:d+"px"})}}.bind(this);this.restrictInBoundary=function(){}.bind(this);this.create()};
$.fn.setGradient=function(b,c){var d=colorAdd(b,15);b=colorDiv(b,15);void 0==c&&(c=!1);var e="",f="0";c&&(e="left,",f="1");this.css({background:"linear-gradient("+e+d+", "+b+")"});switch(browserType){case 1:this.css({background:"-webkit-linear-gradient("+e+d+", "+b+")"});break;case 2:this.css({background:"-moz-linear-gradient("+e+d+", "+b+")"});break;case 3:this.css({background:"-ms-linear-gradient("+e+d+", "+b+")"});this.css("filter","progid:DXImageTransform.Microsoft.Gradient(GradientType="+f+", EndColorStr="+
b+", StartColorStr="+d+")");break;case 4:this.css({background:"-o-linear-gradient("+e+d+", "+b+")"})}};
$.fn.setGradientByDir=function(b,c,d){void 0==d&&(d=!1);var e="",f="0";d&&(e="left,",f="1");this.css({background:"linear-gradient("+e+b+", "+c+")"});switch(browserType){case 1:this.css({background:"-webkit-linear-gradient("+e+b+", "+c+")"});break;case 2:this.css({background:"-moz-linear-gradient("+e+b+", "+c+")"});break;case 3:this.css({background:"-ms-linear-gradient("+e+b+", "+c+")"});this.css("filter","progid:DXImageTransform.Microsoft.Gradient(GradientType="+f+", EndColorStr="+c+", StartColorStr="+
b+")");break;case 4:this.css({background:"-o-linear-gradient("+e+b+", "+c+")"})}};$.fn.addBorderShadow=function(b,c,d){var e=c+"px",f=d+"px";c=2*(Math.abs(c)+Math.abs(d))+"px";this.css({"-moz-box-shadow":e+" "+f+" "+c+" "+b,"box-shadow":e+" "+f+" "+c+" "+b,"-webkit-box-shadow":e+" "+f+" "+c+" "+b,"-o-box-shadow":e+" "+f+" "+c+" "+b,"-ms-box-shadow":e+" "+f+" "+c+" "+b})};
var getHost=function(b){var c;b||(b=window.location.href);var d=b.match(/(.*:\/\/)([^\/]*)\/([^\/]*).*/);d&&(c="s3.amazonaws.com"===d[2]?d[1]+d[2]+"/"+d[3]:d[1]+d[2]);Log.print(b+d+","+c);return c};
$.fn.changeButtonColor=function(b,c,d){var e=this;if("none"!=this.css("display")){var f=this;0<this.children().length&&(f=this.find("img:first"));if(window.ActiveXObject){if("complete"!=f[0].readyState){$(f).on("load",function(){try{e.changeButtonColor(b,c,d)}catch(u){}});return}}else if(!f[0].complete){$(f).on("load",function(){try{e.changeButtonColor(b,c,d)}catch(u){}});return}if(void 0!=f[0]){try{var g=$("<canvas></canvas>")[0];var h=g.getContext("2d")}catch(u){return}var k=f.width(),l=f.height();
f=f[0];void 0==c&&(c=!1);var n=getHost(f.src),p=getHost();if(n&&p!==n){if(g=f.src.replace(n,p),f.src=g,0==c)$(f).on("load",function(){try{e.changeButtonColor(b,!0,d)}catch(u){}})}else{g.width=k;g.height=l;try{h.drawImage(f,0,0,f.naturalWidth,f.naturalHeight,0,0,k,l);var r=h.getImageData(0,0,k,l),B=h.getImageData(0,0,k,l);if(1!=f.colorChanged&&r){var v=Color(b).split();k=0;for(var w=r.data.length;k<w;k+=4)0<B.data[k+3]&&(r.data[k]!=v.r&&(B.data[k]=r.data[k]/255*v.r),r.data[k+1]!=v.g&&(B.data[k+1]=
r.data[k+1]/255*v.g),r.data[k+2]!=v.b&&(B.data[k+2]=r.data[k+2]/255*v.b));h.putImageData(B,0,0);f.src=g.toDataURL("image/png");void 0!=d&&d(e);f.colorChanged=!0}}catch(u){if(0==c)$(f).on("load",function(){try{e.changeButtonColor(b,!0,d)}catch(x){}})}}}}};
$.fn.rotate=function(b){if(!(4<browserType&&1>browserType)){switch(browserType){case 1:this.css({"-webkit-transform":"rotate("+b+"deg)"});break;case 2:this.css({"-moz-transform":"rotate("+b+"deg)"});break;case 3:this.css({"-ms-transform":"rotate("+b+"deg)"});break;case 4:this.css({"-o-transform":"rotate("+b+"deg)"})}this.css({transform:"rotate("+b+"deg)"})}};
$.fn.scale=function(b,c){void 0==c&&(c="50% 50% 0");this.css({"-webkit-transform":"scale("+b+")","-moz-transform":"scale("+b+")","-ms-transform":"scale("+b+")","-o-transform":"scale("+b+")",transform:"scale("+b+")","-webkit-transform-origin":c,"-moz-transform-origin":c,"-ms-transform-origin":c,"-o-transform-origin":c,"transform-origin":c})};
$.fn.transition3D=function(){this.css({"-ms-transform":"translate3d(0,0,0)","-webkit-transform":"translate3d(0,0,0)","-moz-transform":"translate3d(0,0,0)","-o-transform":"translate3d(0,0,0)",transform:"translate3d(0,0,0)"});return this};
jQuery.fn.appearance=function(b,c,d){d=d||{};this.background=$("<div class='appear_win10'></div>");this.addClass("main_dom");this.background.append(this);d.defaultHide&&this.background.css("opacity",0).hide();this.show=function(){var e=this;this.animating=!0;this.background.show();this.background.animate({opacity:1},function(){e.animating=!1;e.background.show();b&&b()})}.bind(this);this.hide=function(){var e=this;this.animating=!0;this.background.animate({opacity:0},function(){e.animating=!1;e.background.hide();
c&&c()})}.bind(this);this.getDom=function(){return this.background}.bind(this);this.background.click(function(e){e.target==e.currentTarget&&(this.animating||this.hide())}.bind(this));return this.background};
$.fn.speed=function(b){function c(w){w=void 0==w.originalEvent.touches?[w]:w.originalEvent.touches;if(1<w.length)return r=!0;f=h=w[0].pageX;g=k=w[0].pageY;l=new Date;-1!=p&&window.clearInterval(p);p=window.setInterval(function(){f=h;g=k;l=new Date},300)}function d(w){if(-1==p||1==r)return!0;w=void 0==w.originalEvent.touches?[w]:w.originalEvent.touches;h=w[0].pageX;k=w[0].pageY}function e(w){if(-1==p)return!0;w=void 0!=w.originalEvent.touches==0?[w]:w.originalEvent.touches;if(1==r)return r=1<w.length,
!0;n=new Date;w=(n-l)/20;var u=h-f,x=k-g;0==w?v=B=0:(B=u/w,v=x/w);void 0!=b&&b(B,v);window.clearInterval(p);p=-1}var f,g,h,k,l,n,p=-1,r=!1,B=0,v=0;try{this.bind("mousedown",c),this.bind("mousemove",d),this.bind("mouseup",e),this.bind("mouseleave",e)}catch(w){}try{this.bind("touchstart",c),this.bind("touchmove",d),this.bind("touchend",e),this.bind("touchleave",e)}catch(w){}};
(function(b){var c="object"==typeof exports&&exports,d="object"==typeof module&&module&&module.exports==c&&module,e="object"==typeof global&&global;if(e.global===e||e.window===e)b=e;var f=function(k){this.message=k};f.prototype=Error();f.prototype.name="InvalidCharacterError";var g={encode:function(k){k=String(k);if(/[^\0-\xFF]/.test(k))throw new f("The string to be encoded contains characters outside of the Latin1 range.");for(var l=k.length%3,n="",p=-1,r,B,v,w=k.length-l;++p<w;)r=k.charCodeAt(p)<<
16,B=k.charCodeAt(++p)<<8,v=k.charCodeAt(++p),r=r+B+v,n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>18&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>12&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>6&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r&63);2==l?(r=k.charCodeAt(p)<<8,B=k.charCodeAt(++p),r+=B,n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>
10)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>4&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r<<2&63)+"="):1==l&&(r=k.charCodeAt(p),n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>2)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r<<4&63)+"==");return n},decode:function(k){k=String(k);for(var l=k.length,n=0,p,r,B="",v=-1;++v<l;)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(k.charAt(v)),
p=n%4?64*p+r:r,n++%4&&(B+=String.fromCharCode(255&p>>(-2*n&6)));return B},version:"0.1.0"};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return g});else if(c&&!c.nodeType)if(d)d.exports=g;else for(var h in g)g.hasOwnProperty(h)&&(c[h]=g[h]);else b.base64=g})(this);function parsHexToNormalString(b){for(var c="";2<=b.length;)c+=String.fromCharCode(parseInt(b.substring(0,2),16)),b=b.substring(2,b.length);return c}
function parseHexString(b){for(var c=[];2<=b.length;)c.push(parseInt(b.substring(0,2),16)),b=b.substring(2,b.length);return c}function byteArray2String(b){for(var c="",d=0;d<b.length;d++)c+=String.fromCharCode(b[d]);return c}
function rc4(b,c){for(var d=[],e=[],f=0;256>f;f++)d[f]=f,e[f]=b.charCodeAt(f%b.length);for(f=b=0;256>f;f++){b=b+d[f]+e[f]&255;var g=d[f];d[f]=d[b];d[b]=g}b=e=0;g="";for(f=0;f<c.length;f++){e=e+1&255;b=b+d[e]&255;var h=d[e];d[e]=d[b];d[b]=h;h=d[e]+d[b]&255;var k=c.charCodeAt(f);k^=d[h];g+=String.fromCharCode(k)}return g}
(function(b){function c(v,w){var u=(v&65535)+(w&65535);return(v>>16)+(w>>16)+(u>>16)<<16|u&65535}function d(v,w,u,x,y,A){v=c(c(w,v),c(x,A));return c(v<<y|v>>>32-y,u)}function e(v,w,u,x,y,A,G){return d(w&u|~w&x,v,w,y,A,G)}function f(v,w,u,x,y,A,G){return d(w&x|u&~x,v,w,y,A,G)}function g(v,w,u,x,y,A,G){return d(u^(w|~x),v,w,y,A,G)}function h(v,w){v[w>>5]|=128<<w%32;v[(w+64>>>9<<4)+14]=w;var u=1732584193,x=-271733879,y=-1732584194,A=271733878;for(w=0;w<v.length;w+=16){var G=u;var F=x;var O=y;var L=A;
u=e(u,x,y,A,v[w],7,-680876936);A=e(A,u,x,y,v[w+1],12,-389564586);y=e(y,A,u,x,v[w+2],17,606105819);x=e(x,y,A,u,v[w+3],22,-1044525330);u=e(u,x,y,A,v[w+4],7,-176418897);A=e(A,u,x,y,v[w+5],12,1200080426);y=e(y,A,u,x,v[w+6],17,-1473231341);x=e(x,y,A,u,v[w+7],22,-45705983);u=e(u,x,y,A,v[w+8],7,1770035416);A=e(A,u,x,y,v[w+9],12,-1958414417);y=e(y,A,u,x,v[w+10],17,-42063);x=e(x,y,A,u,v[w+11],22,-1990404162);u=e(u,x,y,A,v[w+12],7,1804603682);A=e(A,u,x,y,v[w+13],12,-40341101);y=e(y,A,u,x,v[w+14],17,-1502002290);
x=e(x,y,A,u,v[w+15],22,1236535329);u=f(u,x,y,A,v[w+1],5,-165796510);A=f(A,u,x,y,v[w+6],9,-1069501632);y=f(y,A,u,x,v[w+11],14,643717713);x=f(x,y,A,u,v[w],20,-373897302);u=f(u,x,y,A,v[w+5],5,-701558691);A=f(A,u,x,y,v[w+10],9,38016083);y=f(y,A,u,x,v[w+15],14,-660478335);x=f(x,y,A,u,v[w+4],20,-405537848);u=f(u,x,y,A,v[w+9],5,568446438);A=f(A,u,x,y,v[w+14],9,-1019803690);y=f(y,A,u,x,v[w+3],14,-187363961);x=f(x,y,A,u,v[w+8],20,1163531501);u=f(u,x,y,A,v[w+13],5,-1444681467);A=f(A,u,x,y,v[w+2],9,-51403784);
y=f(y,A,u,x,v[w+7],14,1735328473);x=f(x,y,A,u,v[w+12],20,-1926607734);u=d(x^y^A,u,x,v[w+5],4,-378558);A=d(u^x^y,A,u,v[w+8],11,-2022574463);y=d(A^u^x,y,A,v[w+11],16,1839030562);x=d(y^A^u,x,y,v[w+14],23,-35309556);u=d(x^y^A,u,x,v[w+1],4,-1530992060);A=d(u^x^y,A,u,v[w+4],11,1272893353);y=d(A^u^x,y,A,v[w+7],16,-155497632);x=d(y^A^u,x,y,v[w+10],23,-1094730640);u=d(x^y^A,u,x,v[w+13],4,681279174);A=d(u^x^y,A,u,v[w],11,-358537222);y=d(A^u^x,y,A,v[w+3],16,-722521979);x=d(y^A^u,x,y,v[w+6],23,76029189);u=d(x^
y^A,u,x,v[w+9],4,-640364487);A=d(u^x^y,A,u,v[w+12],11,-421815835);y=d(A^u^x,y,A,v[w+15],16,530742520);x=d(y^A^u,x,y,v[w+2],23,-995338651);u=g(u,x,y,A,v[w],6,-198630844);A=g(A,u,x,y,v[w+7],10,1126891415);y=g(y,A,u,x,v[w+14],15,-1416354905);x=g(x,y,A,u,v[w+5],21,-57434055);u=g(u,x,y,A,v[w+12],6,1700485571);A=g(A,u,x,y,v[w+3],10,-1894986606);y=g(y,A,u,x,v[w+10],15,-1051523);x=g(x,y,A,u,v[w+1],21,-2054922799);u=g(u,x,y,A,v[w+8],6,1873313359);A=g(A,u,x,y,v[w+15],10,-30611744);y=g(y,A,u,x,v[w+6],15,-1560198380);
x=g(x,y,A,u,v[w+13],21,1309151649);u=g(u,x,y,A,v[w+4],6,-145523070);A=g(A,u,x,y,v[w+11],10,-1120210379);y=g(y,A,u,x,v[w+2],15,718787259);x=g(x,y,A,u,v[w+9],21,-343485551);u=c(u,G);x=c(x,F);y=c(y,O);A=c(A,L)}return[u,x,y,A]}function k(v){var w,u="",x=32*v.length;for(w=0;w<x;w+=8)u+=String.fromCharCode(v[w>>5]>>>w%32&255);return u}function l(v){var w,u=[];u[(v.length>>2)-1]=void 0;for(w=0;w<u.length;w+=1)u[w]=0;var x=8*v.length;for(w=0;w<x;w+=8)u[w>>5]|=(v.charCodeAt(w/8)&255)<<w%32;return u}function n(v){return k(h(l(v),
8*v.length))}function p(v,w){var u=l(v),x=[],y=[];x[15]=y[15]=void 0;16<u.length&&(u=h(u,8*v.length));for(v=0;16>v;v+=1)x[v]=u[v]^909522486,y[v]=u[v]^1549556828;w=h(x.concat(l(w)),512+8*w.length);return k(h(y.concat(w),640))}function r(v){var w="",u;for(u=0;u<v.length;u+=1){var x=v.charCodeAt(u);w+="0123456789abcdef".charAt(x>>>4&15)+"0123456789abcdef".charAt(x&15)}return w}function B(v,w,u){w?u?v=p(unescape(encodeURIComponent(w)),unescape(encodeURIComponent(v))):(v=p(unescape(encodeURIComponent(w)),
unescape(encodeURIComponent(v))),v=r(v)):v=u?n(unescape(encodeURIComponent(v))):r(n(unescape(encodeURIComponent(v))));return v}"function"===typeof define&&define.amd?define(function(){return B}):"object"===typeof module&&module.exports?module.exports=B:b.md5=B})(this);String.prototype.MD5=function(b){return md5(this)};
var ObjectPool=Class({objects:null,length:0,create:function(){this.objects=[]},add:function(b){b&&(this.objects.push(b),this.length=this.objects.length)},remove:function(b){b&&(this.objects.removeElement(b),this.length=this.objects.length)},exists:function(b){if("string"!=typeof b||""==b)return!1;b=b.toLowerCase();for(var c=0;c<this.objects.length;c++){var d=this.objects[c];if(d.getClassName&&-1<d.getClassName().toLowerCase().indexOf(b))return!0}return!1},find:function(){for(var b=arguments,c=new ObjectPool,
d=0;d<b.length;d++){var e=b[d];if("string"==typeof e&&""!=e){e=e.toLowerCase();for(var f=0;f<this.objects.length;f++){var g=this.objects[f];g.getClassName&&-1<g.getClassName().toLowerCase().indexOf(e)&&c.add(g)}}}return c},match:function(){for(var b=arguments,c=new ObjectPool,d=0;d<b.length;d++){var e=b[d];if("string"==typeof e&&""!=e)for(var f=0;f<this.objects.length;f++){var g=this.objects[f];g.getClassName&&g.getClassName()==e&&c.add(g)}}return c},clone:function(){for(var b=new ObjectPool,c=0;c<
this.objects.length;c++)b.add(this.get(c));return b},get:function(b){return this.objects[b]},each:function(b){for(var c=0;c<this.objects.length;c++){var d=this.objects[c];d&&b&&b instanceof Function&&b(d)}}}),transformCSS=function(b,c){var d=_agent_.system.name==_agent_.system.IOS&&10.3<=_agent_.system.version,e="",f={};void 0!=b.perspective&&(e=e+"perspective("+b.perspective+"px) ");if(b.tran)if(!1===c)e=e+"translate("+b.tran.x+"px,"+b.tran.y+"px) ";else if(_agent_.browser.msie&&!d&&(e=e+"translate("+
b.tran.x+"px,"+b.tran.y+"px) "),!_agent_.browser.msie||d)e=e+"translate3d("+b.tran.x+"px,"+b.tran.y+"px,0px) ";void 0!=b.rotate&&(e=e+"rotate("+b.rotate+"deg) ");void 0!=b.rotateY&&(e=e+"rotateY("+b.rotateY+"deg) ");void 0!=b.rotateX&&(e=e+"rotateX("+b.rotateX+"deg) ");if(void 0!=b.scale&&void 0==b.scale.x)if(!1===c)e=e+"scale("+b.scale+") ";else{if(!_agent_.browser.msie||d)e=e+"scale3d("+b.scale+","+b.scale+",1) ";_agent_.browser.msie&&!d&&(e=e+"scale("+b.scale+") ")}if(void 0!=b.scale&&void 0!=
b.scale.x)if(!1===c)e=e+"scale("+b.scale.x+","+b.scale.y+") ";else{if(!_agent_.browser.msie||d)e=e+"scale3d("+b.scale.x+","+b.scale.y+",1) ";_agent_.browser.msie&&!d&&(e=e+"scale("+b.scale.x+","+b.scale.y+") ")}void 0!=b.scaleX&&(e=e+"scaleX("+b.scaleX+") ");void 0!=b.scaleY&&(e=e+"scaleY("+b.scaleY+") ");b.origin&&(c=b.origin.x+"% "+b.origin.y+"%",f["-webkit-transform-origin"]=c,f["-moz-transform-origin"]=c,f["-ms-transform-origin"]=c,f["-o-transform-origin"]=c,f["transform-origin"]=c);e&&(f["-webkit-transform"]=
e,f["-moz-transform"]=e,f["-ms-transform"]=e,f["-o-transform"]=e,f.transform=e);b.obj&&b.obj.css(f);return f};bdor[32]=function(b,c){return b+c};
var changeShowBook=function(b){var c=bookConfig.ThumbnailsButtonVisible&&global.thumbnail||global.thumbnail&&"popular"===global.templeteName;switch(b){case BookType.normal_book:bookType=BookType.normal_book;singlePageBook&&singlePageBook.hide();flipBook&&flipBook.show();c&&thumbnail.mergeAll();break;case BookType.single_book:bookType=BookType.single_book;singlePageBook&&singlePageBook.show();flipBook&&flipBook.hide();c&&thumbnail.fissionAll();break;case BookType.slide_book:bookType=BookType.slide_book;
slideBook&&slideBook.show();singleSlideBook&&singleSlideBook.hide();c&&thumbnail.mergeAll();break;case BookType.singleSlide_book:bookType=BookType.singleSlide_book;slideBook&&slideBook.hide();singleSlideBook&&singleSlideBook.show();c&&thumbnail.fissionAll();break;case BookType.catalog_book:bookType=BookType.catalog_book;catalogBook&&catalogBook.show();c&&thumbnail.mergeAll();break;case BookType.singleCatalog_book:bookType=BookType.singleCatalog_book;singleCatalogBook&&singleCatalogBook.show();c&&
thumbnail.fissionAll();break;case BookType.documentView_book:bookType=BookType.documentView_book;singleDocumentViewBook&&singleDocumentViewBook.show();bookConfig.ThumbnailsButtonVisible&&global.thumbnail&&thumbnail.mergeAll();break;case BookType.singleDocumentView_book:bookType=BookType.singleDocumentView_book;singleDocumentViewBook&&singleDocumentViewBook.show();bookConfig.ThumbnailsButtonVisible&&global.thumbnail&&thumbnail.fissionAll();break;case BookType.card_book:bookType=BookType.card_book;
cardBook&&cardBook.show();c&&thumbnail.fissionAll();break;case BookType.invert_book:bookType=BookType.invert_book,invertBook&&invertBook.show(),c&&thumbnail.fissionAll()}},supports=function(){var b=document.createElement("div"),c=["Khtml","Ms","O","Moz","Webkit"];return function(d){if(d in b.style)return!0;d=d.replace(/^[a-z]/,function(f){return f.toUpperCase()});for(var e=c.length;e--;)if(c[e]+d in b.style)return!0;return!1}}(),getBrowserPre=function(){switch(browserType){case 3:return"-ms-";case 2:return"-moz-";
case 1:return"-webkit-";case 4:return"-o-"}},getTransform=function(b){switch(browserType){case 3:var c=b.style["-ms-transform"];break;case 2:c=b.style["-moz-transform"];break;case 1:c=b.style["-webkit-transform"];break;case 4:c=b.style["-o-transform"];break;default:c=b.style.transform}if(void 0==c||null==c)if(c=b.style.transform,void 0==c||null==c)return Point(0,0);c=c.match(/translate\((.*?)\)/)||c.match(/translate3d\((.*?)\)/);if(null==c||""==c||2>c.length)return Point(0,0);c=c[1].split(", ");return Point(parseInt(c[0],
10),parseInt(c[1],10))},getTransformScale=function(b){switch(browserType){case 3:var c=b.style["-ms-transform"];break;case 2:c=b.style["-moz-transform"];break;case 1:c=b.style["-webkit-transform"];break;case 4:c=b.style["-o-transform"];break;default:c=b.style.transform}if(void 0==c||null==c)if(c=b.style.transform,void 0==c||null==c)return 1;c=c.match(/scale\((.*?)\)/)||c.match(/scale3d\((.*?)\)/);if(null==c||""==c||2>c.length)return 1;c=c[1].split(",");return c[0]},getTransformRotate=function(b){switch(browserType){case 3:var c=
b.style["-ms-transform"];break;case 2:c=b.style["-moz-transform"];break;case 1:c=b.style["-webkit-transform"];break;case 4:c=b.style["-o-transform"];break;default:c=b.style.transform}if(void 0==c||null==c)if(c=b.style.transform,void 0==c||null==c)return 0;c=c.match(/rotate\((.*?)\)/)||c.match(/rotate3d\((.*?)\)/);if(null==c||""==c||2>c.length)return 0;c=c[1].split(",");return parseInt(c[0])},getColor=function(b,c){b=bookConfig[b];return void 0!=b?Color(b).toString():c},getImage=function(b){return b?
$("<img src='"+b+"'/>"):new Image},parseBool=function(b,c){if(!0===b||!1===b)return b;if(void 0==b||null==b)return!1;c=!!c;if("number"==typeof b)return 0!=b;if("string"!=typeof b||""==b)return!1;var d=["true","yes","show","enable"],e=["false","no","hide","disable"];b=b.toLowerCase();return 0>d.indexOf(b)&&0>e.indexOf(b)?c:0<=d.indexOf(b)},getLanguage=function(b,c){if(global.selectedLanguage&&selectedLanguage[b])return selectedLanguage[b];if(global.aliasLanguage&&aliasLanguage[b]){b=aliasLanguage[b];
for(var d=0;d<b.length;d++){var e=b[d];if(global.selectedLanguage&&selectedLanguage[e])return selectedLanguage[e]}}return c},selectedLanguage,selectLanguage=function(b){b||(b="");global.language||(global.language=[]);selectedLanguage=[];if(0!=language.length){var c="";if(b=b.toLowerCase()){var d=[];try{d=b.split(";")}catch(e){d=[]}0<d.length&&(c=d[0])}if(c)for(b=0;b<language.length;b++){if(language[b].language.toLowerCase()==c){selectedLanguage=language[b];break}}else selectedLanguage=language[0]}BookEvent.trigger("selectedLanguage",
[])},handleData=function(b,c){if(100>b.length)return b;var d=b.length;c=b.toLowerCase().indexOf(c.toLowerCase());if(50<=c){var e=Math.max(50<=d-c?c-50:d-100,0);e=".."+b.substring(e,c)}else e=b.substring(0,c);b=50<d-c?b.substring(c,50<=c?c+50:100)+"..":b.substring(c,d);return e+b},onWindowTap=function(b){Log.print("onWindowTapEnter");global.windowTapInterval&&window.clearTimeout(global.windowTapInterval);global.windowTapInterval=window.setTimeout(function(){if(global.moreBar&&moreBar.visible)moreBar.hide();
else{if(isPhone()||isPad()){if(bookConfig.toolbarAlwaysShow)return;global.phoneSearchBar&&global.phoneSearchBar.showOrHide();toolBar.showOrHide()}global.windowTapInterval&&window.clearTimeout(global.windowTapInterval)}},401)},stopEvent=function(b){try{var c=b||window.event;c.preventDefault?(c.preventDefault(),c.stopPropagation()):(c.returnValue=!1,c.cancelBubble=!0)}catch(d){}return!1},getPagesByRange=function(b){function c(k){for(var l=0;l<d.length;l++)if(d[l]==k)return!0;return!1}var d=[];if(!b||
"string"!==typeof b||""==b.trim())return d;b=b.split(",");for(var e=0;e<b.length;e++){var f=b[e];if(!isNaN(f))f=getRealPageNumber(f),!c(f)&&f<=bookConfig.totalPageCount&&d.push(f);else if(-1<f.indexOf("-")){var g=f.split("-");if(!(2>g.length)){f=getRealPageNumber(g[0]);var h=getRealPageNumber(g[1]);g=Math.max(f,h);for(f=Math.min(f,h);f<=g;f++)f>bookConfig.totalPageCount||c(f)||d.push(f)}}}return d},isSlideBook=function(){return"slide"==bookConfig.FlipStyle.toLowerCase()||isBelowIE9()?!0:!1};
function addGoogleAdSense(){bookConfig.haveAdSense&&bookConfig.adSenseClientId&&loadJavascript("//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",function(){var b=document.createElement("ins");b=$(b);b.addClass("adsbygoogle");b.css({display:"inline-block",width:"100%",height:"100%"});b.attr("data-ad-client",bookConfig.adSenseClientId);b.attr("data-ad-slot",bookConfig.adSenseSlotId);var c=$("<div/>");c.css({position:"absolute","z-index":100,left:bookConfig.adSenseLeft+"px",top:bookConfig.adSenseTop+
"px",width:bookConfig.adSenseWidth+"px",height:bookConfig.adSenseHeight+"px"});c.bind(_event._down,function(){BookEvent.trigger("googleAdSense",[bookConfig.adSenseClientId,bookConfig.adSenseSlotId,bookConfig.adSenseLeft,bookConfig.adSenseTop,bookConfig.adSenseWidth,bookConfig.adSenseHeight])});tmpContainer.append(c);c.append(b);eval("(adsbygoogle = window.adsbygoogle || []).push({});")})}
var changeLanguage=function(b){selectLanguage(b);global.toolBar&&toolBar.changeLanguage&&toolBar.changeLanguage();global.printBody&&printBody.changeLanguage();global.helpBody&&helpBody.changeLanguage();global.aboutBody&&aboutBody.changeLanguage();global.sharePanel&&sharePanel.changeLanguage();global.languagePanel&&languagePanel.changeLanguage();global.videoGallery&&videoGallery.changeLanguage();global.photoGallery&&photoGallery.changeLanguage();global.bookmark&&bookmark.changeLanguage();global.frmTableOfContent&&
frmTableOfContent.changeLanguage();global.frmSearch&&frmSearch.changeLanguage();global.thumbnail&&thumbnail.changeLanguage();global.bookInstructions&&global.bookInstructions.changeLanguage&&global.bookInstructions.changeLanguage();global.telephoneNumberForm&&global.telephoneNumberForm.changeLanguage();global.settingBody&&global.settingBody.changeLanguage();global.doubleSinglePageForm&&global.doubleSinglePageForm.changeLanguage();global.downLoadBody&&global.downLoadBody.changeLanguage();global.annotationPannel&&
global.annotationPannel.changeLanguage();global.jsLoadingBar&&global.jsLoadingBar.changeLanguage(b);global.reportPanel&&global.reportPanel.changeLanguage(b);global.chatbotPanel&&global.chatbotPanel.changeLanguage(b);BookEvent.trigger("changeLanguage",[])},baiduAnalytics=function(){bookConfig.baiduAnalyticsID&&window.setTimeout(function(){var b=document.createElement("script");b.src="https://hm.baidu.com/hm.js?"+bookConfig.baiduAnalyticsID;var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,
c)},3E3)},controlAudioVolume=function(){if(!isNaN(bookConfig.bgSoundVol)){var b=parseFloat(bookConfig.bgSoundVol/100);global.bgSound&&global.bgSound.setVolume(b);flipAudio&&(flipAudio[0].volume=b)}},TurnonAutoFlip=function(){bookConfig.autoFlipOnStart&&window.setTimeout(function(){auto_player&&auto_player.start();toolBar&&toolBar.changeAutoPlayIcon&&toolBar.changeAutoPlayIcon()},1E3)},playFlipSound=function(){if(global.flipSoundIsPlaying)if(!isPhone()&&!isPad()&&!isIE()){var b="flipsound";if(bookType==
BookType.slide_book||bookType==BookType.singleSlide_book)b="slidesound";var c=soundBaseURL+b+".mp3";b=soundBaseURL+b+".ogg";bookConfig.flipSoundURL&&(b=c=bookConfig.flipSoundURL);0<$("#flippingSound").length&&$("#flippingSound").remove();c=$("<audio id='flippingSound' preload style='display:none;'>\n        \"<source src='"+b+"?2024070101' type='audio/ogg'>\n        \"<source src='"+c+"?2024070101' type='audio/mpeg'>\n        </audio>");$("body").append(c);b=parseFloat(bookConfig.bgSoundVol/100);
c[0].volume=b;c.bind("ended",function(){$(this).remove()});try{c[0].currentTime=0,c[0].play()}catch(d){}}else if(!isPlaying||!isAndroidDefault())try{flipAudio[0].currentTime=0,flipAudio[0].play()}catch(d){}},initFlipSound=function(){if(isPhone()||isPad()||isIE()){var b="flipsound";if(bookType==BookType.slide_book||bookType==BookType.singleSlide_book)b="slidesound";var c=soundBaseURL+b+".mp3";b=soundBaseURL+b+".ogg";bookConfig.flipSoundURL&&(b=c=bookConfig.flipSoundURL);flipAudio=$("<audio preload id='flipSound'>\n      <source src='"+
b+"?2024081201' type='audio/ogg'>\n      <source src='"+c+"?2024081201' type='audio/mpeg'>\n      </audio>");$("body").append(flipAudio)}},initSettingBody=function(){(isPhone()||isPad())&&"neat"===_get(htmlConfig,"phoneTemplate.name")&&"Chinese"==UserGroups?(console.log(toolBar.$morePanel,"initSettingBody"),toolBar.$morePanel&&toolBar.$morePanel.appendMusicButton()):global.settingBody?global.settingBody.reset&&global.settingBody.reset():isPhone()||isPad()?global.settingBody=new PhoneSettingForm({parent:tmpContainer,
formType:"setting",rightToLeft:rightToLeft}):global.settingBody=new PcSoundSettingForm({parent:tmpContainer,formType:"brief"==global.templeteName?"setting":"settingpc",rightToLeft:rightToLeft})};function copyFromObj(b){if(b){b.focus();b.select();try{document.execCommand("Copy")}catch(c){b=b.val(),copyToClipboard(b)}}}
function copyHref(b){global.isBelowIE9()||(b=new ClipboardJS(b,{text:function(c){c=_get(window,"toolBar.$shareForm.addCurrentPage");return share_url+(c?"#p="+BookInfo.getCurrentPageIndex():"")}}),b.on("success",function(c){"Chinese"==UserGroups&&alert("\u590d\u5236\u7f51\u5740\u6210\u529f");"English"==UserGroups&&alert("Copied successfully");c.clearSelection()}),b.on("error",function(c){uc?("Chinese"==UserGroups&&alert("\u590d\u5236\u7f51\u5740\u6210\u529f"),"English"==UserGroups&&alert("Copied successfully"),
c.clearSelection()):("Chinese"==UserGroups&&alert("\u590d\u5236\u7f51\u5740\u5931\u8d25"),"English"==UserGroups&&alert("Copied failed"))}))}
function copyToClipboard(b){if(window.clipboardData)window.clipboardData.clearData(),window.clipboardData.setData("Text",b);else if(-1!=navigator.userAgent.indexOf("Opera"))window.location=b;else if(window.netscape){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(f){return alert(getLanguage("infCopyToClipboard","Your browser does not support clipboard.")),!1}var c=Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(Components.interfaces.nsIClipboard);
if(c){var d=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);if(d){d.addDataFlavor("text/unicode");var e=Components.classes["@mozilla.org/supports-string;1"].createInstance(Components.interfaces.nsISupportsString);e.data=b;d.setTransferData("text/unicode",e,2*b.length);if(!c)return!1;c.setData(d,null,Components.interfaces.nsIClipboard.kGlobalClipboard)}}}else alert(getLanguage("infCopyToClipboard","Your browser does not support clipboard."))}
function hideMoreBar(){global.moreBar&&moreBar.visible&&moreBar.hide()}function GetQueryString(b){b=new RegExp("(^|&)"+b+"=([^&]*)(&|$)","i");b=window.location.search.substr(1).match(b);return null!=b?decodeURIComponent(b).split(",")[2]:""}function getProtocal(){return window.location.href.toLowerCase().startsWith("https://")?"https://":"http://"}
function showAlert(b,c){var d=$("body"),e=d.find(".alert-success");0<e.length&&e.remove();var f=$('<p class="alert-success"></p>');f.append("<span>"+b+"</span>");c||(c="success");f.addClass(c);(isPhone()||isPad())&&f.addClass("phone");d.append(f);setTimeout(function(){f.addClass("show")},1);setTimeout(function(){f.fadeOut(function(){$(this).remove()})},2E3)}
function toggleArticleTitle(b){if(!isPhone()&&!isPad()&&bookConfig.isMouseEnterToDisplayArticleTitle){var c=$("body"),d=c.find(".article-alert-title");d.length||(d=$("<div class='article-alert-title' style='box-sizing:border-box;max-width: 350px;position:absolute;pointer-events:none;font-size:18px;border:4px solid #6FADE3;background:rgba(245, 245, 245, 0.9);padding:10px 15px;'></div>"),c.append(d));if(b.isShow){c=b.pos.x;var e=b.pos.y;d.css({display:"block"});c+d.width()>windowWidth&&(c-=d[0].offsetWidth);
e+d.height()>windowHeight&&(e-=d[0].offsetHeight);d.css({left:c+"px",top:e+"px"}).html(b.title)}else d.css({display:"none"})}}window.getHeight=function(){return void 0!=window.innerHeight?window.innerHeight:Math.min(document.documentElement.clientHeight,document.body.clientHeight)};window.getWidth=function(){return void 0!=window.innerWidth?window.innerWidth:Math.min(document.documentElement.clientWidth,document.body.clientWidth)};
function initBrowserType(){_agent_.browser.webkit&&(global.browserType=BrowserType.WEBKIT);_agent_.browser.mozilla&&(global.browserType=BrowserType.MOZ);_agent_.browser.opera&&(global.browserType=BrowserType.OPERA);_agent_.browser.msie&&(global.browserType=BrowserType.MS)}
function resizeCatalogBook(){if(bookType==BookType.catalog_book&&global.catalogBook)if(bookConfig.FlipDirection)resizeCatalogCalendar();else{var b=catalogBook.getSpace(!1),c=catalogBook.getFitWH(),d=parseInt(c.x/2),e=parseInt(c.y),f=(windowWidth-b.left-b.right-c.x)/2+b.left;b=(windowHeight-b.top-b.bottom-c.y)/2+b.top;var g=-c.x/4;c=c.x/4;var h={},k=0;1==bookConfig.retainBookCenter&&(h=catalogBook.getCurrentPageIndex(),BookInfo.isCoverPage(h)&&BookInfo.isLeftPage(h,!0)&&(k=c),BookInfo.isCoverPage(h)&&
!BookInfo.isLeftPage(h,!0)&&(k=g),h={tran:{x:k,y:0},scale:1,origin:{x:0,y:0}});h.top=b;h.left=f;useTheAliCloudChart(d,e);catalogBook.setCSS(h);catalogBook.onResize(d,e);catalogBook.resetZoomConfig()}}
function resizeCatalogCalendar(){var b=catalogBook.getSpace(!1),c=catalogBook.getFitWH(),d=parseInt(c.x),e=parseInt(c.y/2),f=(windowWidth-b.left-b.right-c.x)/2+b.left;b=(windowHeight-b.top-b.bottom-c.y)/2+b.top;var g=-c.y/4;c=c.y/4;var h={},k=0;1==bookConfig.retainBookCenter&&(h=catalogBook.getCurrentPageIndex(),BookInfo.isCoverPage(h)&&BookInfo.isLeftPage(h,!0)&&(k=c),BookInfo.isCoverPage(h)&&!BookInfo.isLeftPage(h,!0)&&(k=g),h={tran:{x:0,y:k},scale:1,origin:{x:0,y:0}});h.top=b;h.left=f;useTheAliCloudChart(d,
e);catalogBook.setCSS(h);catalogBook.onResize(d,e);catalogBook.resetZoomConfig()}
function resizeFlipBook(){if(bookType==BookType.normal_book||bookType==BookType.single_book)if(bookConfig.FlipDirection)resizeFlipCalendar();else if("issuu"==bookConfig.FlipStyle)resizeIssuuBook();else{if(global.flipBook){var b=flipBook.getSpace(!1),c=flipBook.getFitWH(),d=parseInt(c.x/2),e=parseInt(c.y),f=(windowWidth-b.left-b.right-c.x)/2+b.left;b=(windowHeight-b.top-b.bottom-c.y)/2+b.top;var g=-c.x/4;c=c.x/4;var h={tran:{x:0,y:0},scale:1,origin:{x:0,y:0}},k=0;1==bookConfig.retainBookCenter&&(h=
flipBook.getCurrentPageIndex(),BookInfo.isCoverPage(h)&&BookInfo.isLeftPage(h,!0)&&(k=c),BookInfo.isCoverPage(h)&&!BookInfo.isLeftPage(h,!0)&&(k=g),h={tran:{x:parseInt(k),y:0},scale:1,origin:{x:0,y:0}});h.top=b;h.left=f;bookType==BookType.normal_book&&useTheAliCloudChart(d,e);flipBook.setCSS(h);flipBook.onResize(d,e);flipBook.resetZoomConfig()}global.singlePageBook&&(bookConfig.isSingleBookFullWindowOnMobile&&(isPhone()||isPad())?(d=windowWidth,e=windowHeight,b=f=0):(c=singlePageBook.getFitWH(),d=
c.x,e=c.y,b=singlePageBook.getSpace(!0),f=(windowWidth-b.left-b.right-d)/2+b.left,b=(windowHeight-b.top-b.bottom-e)/2+b.top),bookType==BookType.single_book&&useTheAliCloudChart(d,e),singlePageBook.onResize(d,e),singlePageBook.setCSS({top:b,left:f}),singlePageBook.setCSS({tran:{x:0,y:0},scale:1,origin:{x:0,y:0}}),singlePageBook.resetZoomConfig())}}
function resizeIssuuBook(){if("issuu"==bookConfig.FlipStyle&&(bookType==BookType.normal_book||bookType==BookType.single_book)){if(global.flipBook){var b=flipBook.getCurrentPageIndex(),c=flipBook.getSpace(),d=flipBook.getFitWHByIndex(b),e=parseInt(d[0].x+d[1].x);d=parseInt(d[0].y);var f=(windowWidth-c.left-c.right-e)/2+c.left;c=(windowHeight-c.top-c.bottom-d)/2+c.top;var g=-e/4,h=e/4,k=0;1!=bookConfig.retainBookCenter||flipBook.getMovedXByIndex||(b=flipBook.getCurrentPageIndex(),BookInfo.isCoverPage(b)&&
BookInfo.isLeftPage(b,!0)&&(k=h),BookInfo.isCoverPage(b)&&!BookInfo.isLeftPage(b,!0)&&(k=g),b={tran:{x:parseInt(k),y:0},scale:1,origin:{x:0,y:0}},b.top=c,b.left=f,flipBook.setCSS(b));bookType==BookType.normal_book&&useTheAliCloudChartOnIsuuBook(e,d);flipBook.onResize(e,d);flipBook.getMovedXByIndex&&(flipBook.getCurrentPageIndex(),b={tran:{x:0,y:0},scale:1,origin:{x:0,y:0}},b.top=c,b.left=f,flipBook.setCSS(b));flipBook.resetZoomConfig()}global.singlePageBook&&(bookConfig.isSingleBookFullWindowOnMobile&&
(isPhone()||isPad())?(e=windowWidth,d=windowHeight,b=f=0):(b=singlePageBook.getCurrentPageIndex(),d=singlePageBook.getFitWHByIndex(b),e=d[0].x,d=d[0].y,c=singlePageBook.getSpace(!0),f=(windowWidth-c.left-c.right-e)/2+c.left,b=(windowHeight-c.top-c.bottom-d)/2+c.top),bookType==BookType.single_book&&useTheAliCloudChartOnIsuuBook(e,d),singlePageBook.onResize(e,d),singlePageBook.setCSS({top:b,left:f}),singlePageBook.setCSS({tran:{x:0,y:0},scale:1,origin:{x:0,y:0}}),singlePageBook.resetZoomConfig())}}
function resizeFlipCalendar(){if(global.flipBook){var b=flipBook.getSpace(!1),c=flipBook.getFitWH(),d=parseInt(c.x),e=parseInt(c.y/2),f=(windowWidth-b.left-b.right-c.x)/2+b.left;b=(windowHeight-b.top-b.bottom-c.y)/2+b.top;var g=-c.y/4;c=c.y/4;var h={},k=0;1==bookConfig.retainBookCenter&&(h=flipBook.getCurrentPageIndex(),BookInfo.isCoverPage(h)&&BookInfo.isLeftPage(h,!0)&&(k=c),BookInfo.isCoverPage(h)&&!BookInfo.isLeftPage(h,!0)&&(k=g),h={tran:{x:0,y:k},scale:1,origin:{x:0,y:0}});h.top=b;h.left=f;
bookType==BookType.normal_book&&useTheAliCloudChart(d,e);flipBook.setCSS(h);flipBook.onResize(d,e);flipBook.resetZoomConfig()}global.singlePageBook&&(bookConfig.isSingleBookFullWindowOnMobile&&(isPhone()||isPad())?(d=windowWidth,e=windowHeight,b=f=0):(c=singlePageBook.getFitWH(),d=c.x,e=c.y,b=singlePageBook.getSpace(!0),f=(windowWidth-b.left-b.right-d)/2+b.left,b=(windowHeight-b.top-b.bottom-e)/2+b.top),bookType==BookType.single_book&&useTheAliCloudChart(d,e),singlePageBook.onResize(d,e),singlePageBook.setCSS({top:b,
left:f}),singlePageBook.setCSS({tran:{x:0,y:0},scale:1,origin:{x:0,y:0}}),singlePageBook.resetZoomConfig())}function resizeSlideBook(){if(bookType==BookType.singleSlide_book||bookType==BookType.slide_book){if(global.slideBook)slideBook.onResize();if(global.singleSlideBook)singleSlideBook.onResize()}}
function resizeDocumentViewBook(){if(bookType==BookType.documentView_book||bookType==BookType.singleDocumentView_book){if(global.singleDocumentViewBook)singleDocumentViewBook.onResize();if(global.singleDocumentViewBook)singleDocumentViewBook.onResize()}}function resizeCardBook(){if(bookType==BookType.card_book&&global.cardBook)cardBook.onResize()}function resizeInvertBook(){if(bookType==BookType.invert_book&&global.invertBook)invertBook.onResize()}
function changeShowBookByWindow(){if(bookConfig.FlipDirection)changeShowBookByWindowHorizonal();else{var b=!1;if(bookType==BookType.single_book&&windowWidth>=windowHeight&&"auto"==bookConfig.showDoublePage){bookType=BookType.normal_book;changeShowBook(bookType);var c=singlePageBook.currentPageIndex;b=!0}bookType==BookType.singleSlide_book&&windowWidth>=windowHeight&&"auto"==bookConfig.showDoublePage&&(bookType=BookType.slide_book,changeShowBook(bookType),c=singleSlideBook.getRealPageIndex(),b=!0);
bookType==BookType.singleDocumentView_book&&windowWidth>=windowHeight&&"auto"==bookConfig.showDoublePage&&(bookType=BookType.singleDocumentView_book,changeShowBook(bookType),c=singleDocumentViewBook.getRealPageIndex(),b=!0);bookType==BookType.slide_book&&windowWidth<windowHeight&&"auto"==bookConfig.showDoublePage&&(bookType=BookType.singleSlide_book,changeShowBook(bookType),c=slideBook.getRealPageIndex(),b=!0);bookType==BookType.normal_book&&windowWidth<windowHeight&&"auto"==bookConfig.showDoublePage&&
(bookType=BookType.single_book,changeShowBook(bookType),c=flipBook.currentPageIndex,b=!0);bookType==BookType.documentView_book&&windowWidth<windowHeight&&"auto"==bookConfig.showDoublePage&&(bookType=BookType.singleDocumentView_book,changeShowBook(bookType),c=singleDocumentViewBook.currentPageIndex,b=!0);bookType===BookType.invert_book&&windowWidth<windowHeight&&"auto"==bookConfig.showDoublePage&&(changeShowBook(bookType),c=invertBook.currentPageIndex,b=!0);resizeFlipBook();resizeCatalogBook();resizeSlideBook();
resizeDocumentViewBook();resizeCardBook();resizeInvertBook();b&&(gotoPageFun(c,!1,"change book type"),global.thumbnail&&thumbnail.clearHighLight(),global.thumbnail&&thumbnail.setHighLight(c))}}
function changeShowBookByWindowHorizonal(){var b=!1;if(bookType==BookType.single_book&&windowWidth<windowHeight&&"auto"==bookConfig.showDoublePage){bookType=BookType.normal_book;changeShowBook(bookType);var c=singlePageBook.currentPageIndex;b=!0}bookType==BookType.singleSlide_book&&windowWidth<windowHeight&&"auto"==bookConfig.showDoublePage&&(bookType=BookType.slide_book,changeShowBook(bookType),c=singleSlideBook.getRealPageIndex(),b=!0);bookType==BookType.singleDocumentView_book&&windowWidth<windowHeight&&
"auto"==bookConfig.showDoublePage&&(bookType=BookType.singleDocumentView_book,changeShowBook(bookType),c=singleDocumentViewBook.getRealPageIndex(),b=!0);bookType==BookType.slide_book&&windowWidth>=windowHeight&&"auto"==bookConfig.showDoublePage&&(bookType=BookType.singleSlide_book,changeShowBook(bookType),c=slideBook.getRealPageIndex(),b=!0);bookType==BookType.normal_book&&windowWidth>=windowHeight&&"auto"==bookConfig.showDoublePage&&(bookType=BookType.single_book,changeShowBook(bookType),c=flipBook.currentPageIndex,
b=!0);bookType==BookType.documentView_book&&windowWidth>=windowHeight&&"auto"==bookConfig.showDoublePage&&(bookType=BookType.singleDocumentView_book,changeShowBook(bookType),c=singleDocumentViewBook.currentPageIndex,b=!0);bookType===BookType.invert_book&&windowWidth>=windowHeight&&"auto"==bookConfig.showDoublePage&&(changeShowBook(bookType),c=invertBook.currentPageIndex,b=!0);resizeFlipBook();resizeCatalogBook();resizeSlideBook();resizeDocumentViewBook();resizeCardBook();resizeInvertBook();b&&(gotoPageFun(c,
!1,"change book type"),global.thumbnail&&thumbnail.clearHighLight(),global.thumbnail&&thumbnail.setHighLight(c))}function getStaticAdVisible(){return isPhone()||isPad()||!global.staticAd||!global.staticAd.haveAd||global.staticAd.adPosition?!1:!0}
function initDocumentViewBook(b,c){if(bookType==BookType.documentView_book||bookType==BookType.singleDocumentView_book)if($.extend(b,{thickness:!1,bookshadow:!1,grayshadow:!1,miniFullscreen:!1,bookpagenumber:!1,staticad:!1,zoommap:!1,bookmarktab:!1,noteadd:!0}),$.extend(c,{thickness:!1,bookshadow:!1,grayshadow:!1,miniFullscreen:!1,bookpagenumber:!1,staticad:!1,zoommap:!1,bookmarktab:!1,noteadd:!0}),bookType==BookType.documentView_book||bookType==BookType.singleDocumentView_book)global.singleDocumentViewBook=
new PcSingleDocViewBook(c)}
function initFlipBook(b,c){"issuu"==bookConfig.FlipStyle||bookType!=BookType.normal_book&&bookType!=BookType.single_book||($.extend(b,{thickness:bookConfig.FlipDirection?!1:!0,bookshadow:!0,grayshadow:bookConfig.ShowTopLeftShadow?!0:!1,miniFullscreen:bookConfig.hideMiniFullscreen?!1:!0,bookpagenumber:bookConfig.updatePageNumberForFlip?!0:!1,staticad:getStaticAdVisible(),zoommap:bookConfig.ZoomMapVisible?!0:!1,bookmarktab:global.bmtConfig?!0:!1,noteadd:bookConfig.AnnotationButtonVisible?!0:!1}),$.extend(c,
{thickness:bookConfig.showThicknessOnMobile&&!bookConfig.FlipDirection?!0:!1,bookshadow:!0,grayshadow:!1,miniFullscreen:bookConfig.hideMiniFullscreen?!1:!0,bookpagenumber:bookConfig.updatePageNumberForFlip?!0:!1,staticad:!1,zoommap:bookConfig.ZoomMapVisible?!0:!1,bookmarktab:global.bmtConfig?!0:!1,noteadd:bookConfig.AnnotationButtonVisible?!0:!1}),bookConfig.HardInnerPageEnable?bookConfig.FlipDirection?bookConfig.HardPageEnable?("single"!=bookConfig.showDoublePage&&(global.flipBook=bookConfig.isTheBookOpen?
new OpenAlbumHardCalendar(b):new AlbumHardCalendar(b)),"double"!=bookConfig.showDoublePage&&(global.singlePageBook=new SingleAlbumHardCalendar(c))):("single"!=bookConfig.showDoublePage&&(global.flipBook=new AlbumCalendar(b)),"double"!=bookConfig.showDoublePage&&(global.singlePageBook=new SingleAlbumCalendar(c))):bookConfig.HardPageEnable?("single"!=bookConfig.showDoublePage&&(global.flipBook=bookConfig.isTheBookOpen?new OpenAlbumHardBook(b):new AlbumHardBook(b)),"double"!=bookConfig.showDoublePage&&
(global.singlePageBook=new SingleAlbumHardBook(c))):("single"!=bookConfig.showDoublePage&&(global.flipBook=new AlbumBook(b)),"double"!=bookConfig.showDoublePage&&(global.singlePageBook=new SingleAlbumBook(c))):bookConfig.FlipDirection?bookConfig.HardPageEnable?("single"!=bookConfig.showDoublePage&&(global.flipBook=bookConfig.isTheBookOpen?new OpenHardCalendar(b):new HardCalendar(b)),"double"!=bookConfig.showDoublePage&&(global.singlePageBook=new SingleHardCalendar(c))):("single"!=bookConfig.showDoublePage&&
(global.flipBook=new NormalCalendar(b)),"double"!=bookConfig.showDoublePage&&(global.singlePageBook=new SingleCalendar(c))):(bookConfig.HardPageEnable?("single"!=bookConfig.showDoublePage&&(global.flipBook=bookConfig.isTheBookOpen?new OpenHardBook(b):new HardBook(b)),"double"!=bookConfig.showDoublePage&&(global.singlePageBook=new SingleHardBook(c))):("single"!=bookConfig.showDoublePage&&(global.flipBook=new NormalBook(b)),"double"!=bookConfig.showDoublePage&&(global.singlePageBook=new SingleBook(c))),
bookConfig.flipshortcutbutton&&window.flipShotButton&&flipShotButton.animate()))}
function initIssuuBook(b,c){"issuu"!=bookConfig.FlipStyle||bookType!=BookType.normal_book&&bookType!=BookType.single_book||($.extend(b,{thickness:bookConfig.FlipDirection?!1:!0,staticad:getStaticAdVisible(),bookmarktab:global.bmtConfig?!0:!1}),$.extend(c,{thickness:bookConfig.showThicknessOnMobile&&!bookConfig.FlipDirection?!0:!1,bookshadow:!0,grayshadow:!1,miniFullscreen:bookConfig.hideMiniFullscreen?!1:!0,bookpagenumber:bookConfig.updatePageNumberForFlip?!0:!1,staticad:!1,zoommap:bookConfig.ZoomMapVisible?
!0:!1,bookmarktab:global.bmtConfig?!0:!1,noteadd:bookConfig.AnnotationButtonVisible?!0:!1}),bookConfig.HardPageEnable?("single"!=bookConfig.showDoublePage&&(global.flipBook=new HardIssuuBook(b)),"double"!=bookConfig.showDoublePage&&(global.singlePageBook=new SingleHardIssuuBook(c))):("single"!=bookConfig.showDoublePage&&(global.flipBook=new IssuuBook(b)),"double"!=bookConfig.showDoublePage&&(global.singlePageBook=new SingleIssuuBook(c))),bookConfig.flipshortcutbutton&&window.flipShotButton&&flipShotButton.animate())}
function initCatalogBook(b){bookType==BookType.catalog_book&&($.extend(b,{thickness:bookConfig.showThicknessOnMobile?!0:!1,bookshadow:!0,grayshadow:bookConfig.ShowTopLeftShadow?!0:!1,miniFullscreen:bookConfig.hideMiniFullscreen?!1:!0,bookpagenumber:bookConfig.updatePageNumberForFlip?!0:!1,staticad:getStaticAdVisible(),zoommap:bookConfig.ZoomMapVisible?!0:!1,bookmarktab:global.bmtConfig?!0:!1,noteadd:bookConfig.AnnotationButtonVisible?!0:!1}),"lite"==bookConfig.ToolbarViewMode.toLowerCase()?(global.catalogBook=
bookConfig.FlipDirection?bookConfig.HardPageEnable?bookConfig.isTheBookOpen?new OpenCatalogSimpleHardCalendar(b):new CatalogSimpleHardCalendar(b):new CatalogSimpleCalendar(b):bookConfig.HardPageEnable?bookConfig.isTheBookOpen?new OpenCatalogSimpleHardBook(b):new CatalogSimpleHardBook(b):new CatalogSimpleBook(b),toolBar&&toolBar.hide()):global.catalogBook=bookConfig.FlipDirection?bookConfig.HardPageEnable?bookConfig.isTheBookOpen?new OpenCatalogHardCalendar(b):new CatalogHardCalendar(b):new CatalogCalendar(b):
bookConfig.HardPageEnable?bookConfig.isTheBookOpen?new OpenCatalogHardBook(b):new CatalogHardBook(b):new CatalogBook(b))}
function initSlideBook(b,c){if(bookType==BookType.slide_book||bookType==BookType.singleSlide_book){$.extend(b,{thickness:!1,bookshadow:!1,grayshadow:!1,miniFullscreen:!1,bookpagenumber:!1,staticad:getStaticAdVisible(),zoommap:!1,bookmarktab:!1,noteadd:!0});$.extend(c,{thickness:!1,bookshadow:!1,grayshadow:!1,miniFullscreen:!1,bookpagenumber:!1,staticad:!1,zoommap:!1,bookmarktab:!1,noteadd:!0});if(bookType==BookType.slide_book||bookType==BookType.singleSlide_book)"single"!=bookConfig.showDoublePage&&
(global.slideBook=new PcDoubleSlideBook(b)),"double"!=bookConfig.showDoublePage&&(global.singleSlideBook=new PcSingleSlideBook(c));(isPhone()||isPad())&&global.QRbutton&&QRbutton.hide()}}function initCardBook(b){bookType==BookType.card_book&&($.extend(b,{thickness:!1,bookshadow:!1,grayshadow:!1,miniFullscreen:!1,bookpagenumber:!1,staticad:!1,zoommap:!1,bookmarktab:!1,noteadd:!0}),global.cardBook=new CardBook(b),(isPhone()||isPad())&&global.QRbutton&&QRbutton.hide())}
function initInvertBook(b){bookType==BookType.invert_book&&($.extend(b,{thickness:!1,bookshadow:!1,grayshadow:!1,miniFullscreen:bookConfig.hideMiniFullscreen?!1:!0,bookpagenumber:bookConfig.updatePageNumberForFlip?!0:!1,staticad:getStaticAdVisible(),zoommap:bookConfig.ZoomMapVisible?!0:!1,bookmarktab:global.bmtConfig?!0:!1,noteadd:bookConfig.AnnotationButtonVisible?!0:!1}),global.invertBook=new InvertBook(b))}
function initBook(){var b=scrapOriginPageIndex(),c={parent:bookContainer,currentPageIndex:b,flippingTime:bookConfig.flippingTime,rightToLeft:bookConfig.RightToLeft,originTotalPageCount:originTotalPageCount,totalPageCount:totalPageCount,topMargin:bookConfig.topMargin,bottomMargin:bookConfig.bottomMargin,leftMargin:bookConfig.leftMargin,rightMargin:bookConfig.rightMargin,isDoublePage:!0},d=Math.max(1,bookConfig.totalPageCount-1);b={parent:bookContainer,currentPageIndex:bookConfig.SingleModeBanFlipToLastPage?
Number.between(b,1,d):b,flippingTime:bookConfig.flippingTime,rightToLeft:bookConfig.RightToLeft,originTotalPageCount:originTotalPageCount,totalPageCount:totalPageCount,topMargin:bookConfig.topMargin,bottomMargin:bookConfig.bottomMargin,leftMargin:bookConfig.leftMargin,rightMargin:bookConfig.rightMargin,isDoublePage:!1};initFlipBook(c,b);initIssuuBook(c,b);initCatalogBook(c,b);initSlideBook(c,b);initDocumentViewBook(c,b);initCardBook(b);initInvertBook(b)}
function throttle(b,c){c=void 0===c?16:c;var d=0;return function(e){for(var f=[],g=0;g<arguments.length;++g)f[g-0]=arguments[g];g=Date.now();if(g-d>c)return d=g,b.apply(this,f)}}function debounce(b,c){var d=arguments,e=this;c=void 0===c?16:c;var f=null;return function(){f&&(clearTimeout(f),f=null);f=setTimeout(b.bind.apply(b,[e].concat($jscomp.arrayFromIterable(d))),c)}}
function _get(b,c,d){c=Array.isArray(c)?c:c.split(".");for(var e=0;e<c.length;e++){if(!b||!b.hasOwnProperty(c[e]))return d;b=b[c[e]];if(""===b)return d?d:""}return b}function initStyleSheet(b){var c=null;b=$('<style id="'+b+'" type="text/css"></style>');$(document.head).append(b);for(var d=$jscomp.makeIterator(document.styleSheets),e=d.next();!e.done;e=d.next())e=e.value,e.ownerNode===b[0]&&(c=e);return function(){return c}}var getLocalStyleSheet=initStyleSheet("local");
function updateStyleSheet(b,c,d,e){var f=getLocalStyleSheet();f||(getLocalStyleSheet=initStyleSheet("local"),f=getLocalStyleSheet());var g=e?e:f,h=g.cssRules;f=null;if(d&&""!==d){e=d.split("@media ")[1];for(var k=$jscomp.makeIterator(h),l=k.next();!l.done;l=k.next())if(l=l.value,!1!==l instanceof CSSMediaRule&&l.cssText.replace(/ /g,"").includes(e.replace(/ /g,""))&&l.cssText.includes(b)){f=l;break}null===f&&(f=g.insertRule(d+" { "+b+" {} }",h.length),f=h.item(f));updateStyleSheet(b,c,null,f)}else{var n=
$jscomp.makeIterator(h);for(l=n.next();!l.done;l=n.next())if(l=l.value,l.selectorText===b){f=l;break}!f&&b&&(f=g.insertRule(b+" {}",h.length),f=h.item(f));for(k in c)(h=c[k])&&""===h?f.style.removeProperty(k):"object"===typeof h?updateStyleSheet(""+b+(k.startsWith(":")?"":" ")+k,h,d,e):(h=String(h).split(" !"),f.style.setProperty(k,h[0],h[1]))}}
function updateStyleSheetBatch(b,c){function d(h,k){k=void 0===k?"":k;for(var l in h){var n=h[l];n&&updateStyleSheet(l,n,k,f)}}c=void 0===c?"":c;var e=getLocalStyleSheet();e||(getLocalStyleSheet=initStyleSheet("local"),e=getLocalStyleSheet());var f=e;if(""!==c)d(b,c);else for(var g in b)"body"===g?d(b[g]):g.startsWith("@media")?d(b[g],g):g.startsWith("@keyframes")?f.insertRule(g+" "+b[g]):updateStyleSheet(g,b[g])}
function handlePropStyle(b,c){if(c){var d=Object.keys(c).includes("body"),e=d?c.body:c;d&&delete c.body;d={};for(var f in c){var g={};d[f]=(g[b]=c[f],g)}c={};updateStyleSheetBatch(Object.assign({},{body:(c[b]=e,c)},d))}}function getHashParams(b){for(var c=window.location.hash,d=/[#&]([^=#]+)=([^&#]*)/g,e,f={};e=d.exec(c);){var g=decodeURIComponent(e[1]);e=decodeURIComponent(e[2]);f[g]=e}return b?f[b]||"":f}
function imageUrl2DataUrl(b){return new Promise(function(c,d){try{var e=getImage(b)[0];e.onload=function(){var f=document.createElement("canvas");f.width=e.width;f.height=e.height;f.getContext("2d").drawImage(e,0,0);f=f.toDataURL("image/png",1);c(f)}}catch(f){d(f)}})}
function getWebpOriginFormat(b){if(!b||"string"!=typeof b)return"jpg";switch(b.subBetween("_wci_",".")){case "jpeg":return"jpeg";case "png":return"png";case "gif":return"gif";case "svg":return"svg";case "webp":return"webp"}return"jpg"}var fitPageWidthHeight=function(b,c,d,e){d||(d=bookConfig.largePageWidth);e||(e=bookConfig.largePageHeight);var f=Point(0,0);b/c>d/e?(f.x=Math.round(d*c/e),f.y=c):(f.x=b,f.y=Math.round(e*b/d));return f};
function getMetaTagValueByName(b){for(var c=document.getElementsByTagName("meta"),d=0;d<c.length;d++)if(c[d].getAttribute("name")===b)return c[d].getAttribute("content");return""}function removeUrlParts(b){b=new URL(void 0===b?"":b,window.location.href);b.search="";b.hash="";return b.toString()}
function appendParamToUrl(b,c){if(!b||"string"!==typeof b)return"";var d=$jscomp.makeIterator(b.split("#"));b=d.next().value;d=d.next().value;c=c.split("=").map(function(e){return encodeURIComponent(e)}).join("=");c=b.endsWith("?")?b+c:b.includes("?")?b+"&"+c:b+"?"+c;return d?c+"#"+d:c}function getVimeoIdFromUrl(b){var c=b.match(/https?:\/\/(?:www\.)?vimeo\.com\/(\d+)(?:[/?].*)?/);return c&&c[1]?c[1]:b}
function getYouTubeIdFromUrl(b){for(var c=$jscomp.makeIterator([/(?:https?:\/\/)?(?:www\.)?youtube\.com\/watch\?v=([0-9A-Za-z_-]+)(?:&.*)?/,/https:\/\/youtu\.be\/([0-9A-Za-z_-]+)/,/(?:https?:\/\/)?(?:www\.)?youtube\.com\/shorts\/([0-9A-Za-z_-]+)/]),d=c.next();!d.done;d=c.next())if(d=b.match(d.value))return d[1];return b}function isWechatMiniProgram(){var b=navigator.userAgent.toLowerCase();return-1!==b.indexOf("micromessenger")&&-1!==b.indexOf("miniprogram")?!0:!1}
function getArticleTitle(b){for(var c=b.articleTextList,d="",e=-1,f=0;f<c.length;f++)if(0>f)"headline"==c[f].fontType&&(d+=c[f].text,e=f);else if(e===f-1&&"headline"==c[f].fontType)d+=c[f].text,e=f;else break;d||(d=b.title);return d}function copyTextToClipboard(b){navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(b).then(function(){}).catch(function(c){fallbackCopyTextToClipboard(b)}):fallbackCopyTextToClipboard(b)}
function fallbackCopyTextToClipboard(b){var c=$("<textarea>");$("body").append(c);c.val(b).select();try{document.execCommand("copy")?console.log("success!"):console.error("fail!")}catch(d){console.error("failed to copy: ",d)}c.remove()}
function loadAndFixPositionScript(b,c){var d,e,f,g,h,k,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){switch(n.nextAddress){case 1:return n.setCatchFinallyBlocks(2),n.yield(fetch(c),4);case 4:return d=n.yieldResult,d.ok?n.yield(d.text(),5):(console.log("positionForPages \u811a\u672c\u52a0\u8f7d\u5931\u8d25\uff0c\u72b6\u6001\u7801: "+d.status+"\uff0cURL: "+c),n.return());case 5:e=n.yieldResult;f=e.match(/positionForPages\[(\d+)\]/);if(!f)return console.log("\u672a\u80fd\u5339\u914dpositionForPages\u7d22\u5f15"),
n.return();g=f[1];h=/"page"\s*:\s*"?(\d+)"?/;k=e.replace(new RegExp("positionForPages\\["+g+"\\]","g"),"positionForPages["+(b-1)+"]").replace(h,'"page": '+b);(new Function(k))();n.leaveTryBlock(0);break;case 2:l=n.enterCatchBlock(),console.log("positionForPages \u52a0\u8f7d\u6216\u89e3\u6790\u5931\u8d25\uff1a",l),n.jumpToEnd()}})}
function wrapFormManagerRegister(b){if("function"===typeof b.show){var c=b.show;b.show=function(){this.skipFormManagerRegister||FormManager.register&&FormManager.register(this);return c.apply(this,arguments)}}if("function"===typeof b.onHide){var d=b.onHide;b.onHide=function(){this.skipFormManagerRegister||FormManager.unregister&&FormManager.unregister(this);return d.apply(this,arguments)}}}
function debounceAsyncByKey(b,c,d){var e={},f={};d=d||function(g){return g[0]};return function(g){for(var h=[],k=0;k<arguments.length;++k)h[k-0]=arguments[k];var l=this,n=d(h);e[n]&&clearTimeout(e[n]);return new Promise(function(p,r){f[n]||(f[n]=[]);f[n].push({resolve:p,reject:r});e[n]=setTimeout(function(){var B,v;return $jscomp.asyncExecutePromiseGeneratorProgram(function(w){switch(w.nextAddress){case 1:return w.setCatchFinallyBlocks(2,3),w.yield(b.apply(l,h),5);case 5:B=w.yieldResult,f[n].forEach(function(u){return u.resolve(B)});
case 3:w.enterFinallyBlock();delete e[n];delete f[n];w.leaveFinallyBlock(0);break;case 2:v=w.enterCatchBlock(),f[n].forEach(function(u){return u.reject(v)}),w.jumpTo(3)}})},c)})}}
Directory={getFileName:function(b){b=b.replaceAll("\\","/",!0);if(""==Directory.getFileSuffix(b))return"index.html";var c=b.lastIndexOf("/");return-1==c?b:b.substr(c+1)},getFilePath:function(b){b=b.replaceAll("\\","/",!0);var c=b.lastIndexOf("/");return-1==c?"":b.substr(0,c+1)},getFileSuffix:function(b){b=b.replaceAll("\\","/",!0);var c=b.lastIndexOf(".");return-1==c?"":b.substr(c)},getFolderName:function(b){b=Directory.getFilePath(b);if(""==b)return"";b=Directory.removeSlash(b);var c=b.lastIndexOf("/");
return-1==c?b:b.substr(c+1)},addSlash:function(b){b=b.replaceAll("\\","/",!0);return b.endsWith("/")?b:b+"/"},removeSlash:function(b){b=b.replaceAll("\\","/",!0);return b.endsWith("/")?b.substring(0,b.length-1):b},getUpperFilePath:function(b){b=b.replaceAll("\\","/",!0);var c=b.split("/"),d=c.length;return b=b.endsWith(".html")||b.endsWith("/")?b.remove(c[d-2]+"/"+c[d-1]):b.remove(c[d-1])}};bdor[2]="e";
function Metacharacter(b){if(null==b||""==b)return"";b=b.replaceAll("%","%25",!0);b=b.replaceAll("+","%2B",!0);b=b.replaceAll("/","%2F",!0);b=b.replaceAll("?","%3F",!0);b=b.replaceAll(" ","%20",!0);b=b.replaceAll("#","%23",!0);b=b.replaceAll("&","%26",!0);b=b.replaceAll("=","%3D",!0);b=b.replaceAll(":","%3A",!0);b=b.replaceAll("\r","%0D",!0);b=b.replaceAll("\n","%0A",!0);return b=b.replaceAll("'","%27",!0)}
var reflection=function(b){var c=new Image;c.onload=function(){var d=null;b.children("canvas")[0]&&(d=$(b.children("canvas")[0]));var e=document.createElement("canvas"),f=e.getContext("2d");b[0].appendChild(e);c.onload=c.onerror=null;var g=this.width,h=this.height;b.children("img")&&g>b.children("img").width()&&(g=b.children("img").width());b.children("img")&&h>b.children("img").height()&&(h=b.children("img").height());var k=.7*h;try{e.style.width=g+"px";e.style.height=k+"px";e.width=g;e.height=k;
e.className="reflect";$(e).css({transform:"translateY(-1px)"});f.save();f.translate(0,h);f.scale(1,-1);f.drawImage(c,0,0,g,h);f.restore();f.globalCompositeOperation="destination-out";var l=f.createLinearGradient(0,0,0,k);l.addColorStop(1,"rgba(255, 0, 0, 1.0)");l.addColorStop(0,"rgba(255, 0, 0, 0)");f.fillStyle=l;f.rect(0,0,g,2*k);f.fill();d&&d.remove()}catch(n){}};c.onerror=function(){c.onload=c.onerror=null};c.src=b.children("img")[0].src};
$.fn.allowNumberOnly=function(){$(this).keypress(function(b){b=b.keyCode||b.which;return 48<=b&&57>=b?!0:!1}).focus(function(){this.style.imeMode="disabled"}).bind("paste",function(){var b=window.clipboardData.getData("Text");return/^\d+$/.test(b)?!0:!1})};function getAnimationEnd(){var b=document.createElement("div"),c={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"},d;for(d in c)if(void 0!==b.style[d])return c[d]}
var getRealURL=function(b){if(b.isUrl()){var c=b.toLocaleLowerCase(),d=/^([_a-z\d\-]+\.)*[_a-z\d\-]+\.(com|net|int|info|edu|org|gov|club|biz|mil|xyz|[a-z]{2}[$\/]?)+/;/(f|ht)tp(s?):\/\//.test(c)||d.test(c)&&(b=getProtocal()+b)}else{c=window.location.href.removeStartFrom("#p=");c=Directory.getFilePath(c).substring(0,c.lastIndexOf("/"));d=Directory.getUpperFilePath(c);if(0<=b.indexOf("./"))return b=c+b.remove("./");b=0<=b.indexOf("../")?d+b.remove("../"):c+b}return b};
function dateFormat(b,c){b=new Date(parseInt(b));c=c.replace(/yyyy|YYYY/,b.getFullYear().toString());c=c.replace(/yy|YY/,9<b.getFullYear()%100?(b.getFullYear()%100).toString():"0"+b.getFullYear()%100);var d=b.getMonth()+1;c=c.replace(/MM/,9<d?d.toString():"0"+d);c=c.replace(/M/g,d.toString());c=c.replace(/w|W/g,"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".split("")[b.getDay()]);c=c.replace(/dd|DD/,9<b.getDate()?b.getDate().toString():"0"+b.getDate());c=c.replace(/d|D/g,b.getDate().toString());c=c.replace(/hh|HH/,
9<b.getHours()?b.getHours().toString():"0"+b.getHours());c=c.replace(/h|H/g,b.getHours().toString());c=c.replace(/mm/,9<b.getMinutes()?b.getMinutes().toString():"0"+b.getMinutes());c=c.replace(/m/g,b.getMinutes().toString());c=c.replace(/ss|SS/,9<b.getSeconds()?b.getSeconds().toString():"0"+b.getSeconds());return c=c.replace(/s|S/g,b.getSeconds().toString())}
function getMeta(b){b=window.location.origin;var c=window.location.pathname,d=window.location.href;-1<d.indexOf("mobile")?(b=d.removeStartFrom("/mobile/"),b=b.removeStartFrom("/articles/"),b+="/files/shot.jpg"):(-1<c.indexOf("index.html")&&(c=c.replace("index.html","")),b=b+c+"files/shot.jpg");return b}
var ColorTable={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff0",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",
darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdC",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",value:function(b){if(!b||"string"!=typeof b)return b;var c=b.toLowerCase();return this[c]?this[c]:b}},UserGroups="English",
vimeoPlayerUrl="https://player.vimeo.com/api/player.js";checkReportConfig=function(){changeBookConfigValue("EnableReportButton",getConfigValue("EnableReportButton",!1))};
var tmpBookConfig={},checkBookConfig=function(){var b,c,d,e,f,g,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress){b=htmlConfig.bookConfig;c=allocateUTF8(b);window.key_index=Module._DeConfig_Parse(c);void 0==window.aliasConfig&&(window.aliasConfig={});tmpBookConfig.printOptions=getConfigValue("printOptions","all,current,range").toLowerCase();tmpBookConfig.isBookDomainAccessEnabled=getConfigValue("isBookDomainAccessEnabled",!0);tmpBookConfig.isZoomControlBarVisible=
getConfigValue("isZoomControlBarVisible",!0);tmpBookConfig.power_info=getConfigValue("power_info",null);tmpBookConfig.autoFlipPageOnTimelineEnd=getConfigValue("autoFlipPageOnTimelineEnd",!1);tmpBookConfig.homeButtonOpenWindowType=getConfigValue("homeButtonOpenWindowType","Chinese"==UserGroups?"_self":"_blank").toLowerCase();tmpBookConfig.homeButtonOpenWindowType.startsWith("_")||(tmpBookConfig.homeButtonOpenWindowType="_"+tmpBookConfig.homeButtonOpenWindowType);tmpBookConfig.isFirstLastShortcutVisible=
getConfigValue("isFirstLastShortcutVisible",!0);tmpBookConfig.miniFullscreenDisplayType=getConfigValue("miniFullscreenDisplayType","always").toLowerCase();tmpBookConfig.isFakeStopBook=getConfigValue("isFakeStopBook",0);tmpBookConfig.isTabelOfContentSearchBarVisible=getConfigValue("isTabelOfContentSearchBarVisible",!0);tmpBookConfig.mouseDragFlip=getConfigValue("mouseDragFlip",!0);tmpBookConfig.disablePrintShortcut=getConfigValue("disablePrintShortcut",!1);tmpBookConfig.chatBotButtonIconHeight=getConfigValue("chatBotButtonIconHeight",
56);tmpBookConfig.chatBotButtonIcon=getConfigValue("chatBotButtonIcon","");tmpBookConfig.isAccessibilityButtonVisible=getConfigValue("isAccessibilityButtonVisible",!1);tmpBookConfig.ClientBookId=getConfigValue("ClientBookId","");tmpBookConfig.CreatedTime=getConfigValue("CreatedTime","");tmpBookConfig.CreatedVersion=getConfigValue("CreatedVersion","");tmpBookConfig.productName=getConfigValue("productName","");tmpBookConfig.productVersion=getConfigValue("productVersion","");tmpBookConfig.PDFBASE_VERSION_MAC=
getConfigValue("PDFBASE_VERSION_MAC","");tmpBookConfig.PDFBASE_VERSION=getConfigValue("PDFBASE_VERSION","");tmpBookConfig.isCachePages=getConfigValue("isCachePages",!1);tmpBookConfig.displayNumberOfShares=getConfigValue("displayNumberOfShares",!1);tmpBookConfig.additionalNumberOfShare=getConfigValue("additionalNumberOfShare",0);tmpBookConfig.flipSoundURL=getConfigValue("flipSoundURL","");tmpBookConfig.isTableOfContentPagesVisible=getConfigValue("isTableOfContentPagesVisible",!1);tmpBookConfig.isArticlePhoneMoreButtonVisible=
getConfigValue("isArticlePhoneMoreButtonVisible",!1);tmpBookConfig.alwaysShowBottomFullscreenPrompt=getConfigValue("alwaysShowBottomFullscreenPrompt",!1);tmpBookConfig.bottomFullscreenPromptDisplayDuration=getConfigValue("bottomFullscreenPromptDisplayDuration",3);tmpBookConfig.isChatBotButtonVisible=getConfigValue("isChatBotButtonVisible",!1);tmpBookConfig.articleTitlePosition=getConfigValue("articleTitlePosition","center").toLocaleLowerCase();tmpBookConfig.phoneFlipShortcutButtonSize=getConfigValue("phoneFlipShortcutButtonSize",
"large").toLocaleLowerCase();tmpBookConfig.socialSharingList=getConfigValue("socialSharingList",void 0);tmpBookConfig.socialShareType=getConfigValue("socialShareType","0");tmpBookConfig.isRestorePageFrameVisible=getConfigValue("isRestorePageFrameVisible",!0);tmpBookConfig.alwaysShowBookInstructionOnStart=getConfigValue("alwaysShowBookInstructionOnStart","0");tmpBookConfig.showBookInstructionCountOnStart=getConfigValue("showBookInstructionCountOnStart",3);tmpBookConfig.toolBarBrandInfoVisible=getConfigValue("toolBarBrandInfoVisible",
void 0);void 0!==tmpBookConfig.toolBarBrandInfoVisible&&(tmpBookConfig.toolBarBrandInfoVisible=parseBool(tmpBookConfig.toolBarBrandInfoVisible));tmpBookConfig.toolBarBrandInfoUrl=getConfigValue("toolBarBrandInfoUrl","");tmpBookConfig.loadingBrandInfoVisible=getConfigValue("loadingBrandInfoVisible",!1);tmpBookConfig.loadingBrandInfoUrl=getConfigValue("loadingBrandInfoUrl","");tmpBookConfig.relatedBrandInfoVisible=getConfigValue("relatedBrandInfoVisible",!1);tmpBookConfig.relatedBrandInfoUrl=getConfigValue("relatedBrandInfoUrl",
"");tmpBookConfig.relatedCardVisible=getConfigValue("relatedCardVisible",!1);tmpBookConfig.relatedCardUrl=getConfigValue("relatedCardUrl","");tmpBookConfig.bookBaseURL=getConfigValue("bookBaseURL","");tmpBookConfig.bookResourceBaseURL=getConfigValue("bookResourceBaseURL","");!tmpBookConfig.bookResourceBaseURL&&window.htmlConfig&&window.htmlConfig.loadingConfig&&window.htmlConfig.loadingConfig.bookResourceBaseURL&&(tmpBookConfig.bookResourceBaseURL=window.htmlConfig.loadingConfig.bookResourceBaseURL);
!tmpBookConfig.bookResourceBaseURL&&window.bookResourceBaseURL&&(tmpBookConfig.bookResourceBaseURL=window.bookResourceBaseURL);try{tmpBookConfig.bookResourceBaseURL||"Chinese"==UserGroups||"article"!=window.templeteName&&"article2"!=window.templeteName&&"article3"!=window.templeteName||(tmpBookConfig.bookResourceBaseURL=window.location.origin+window.location.pathname.remove("mobile/index.html"),tmpBookConfig.bookResourceBaseURL=tmpBookConfig.bookResourceBaseURL.remove("index.html"))}catch(l){}tmpBookConfig.enableCustomizedBookmarkWidth=
getConfigValue("enableCustomizedBookmarkWidth",!1);tmpBookConfig.customizedBookmarkWidth=getConfigValue("customizedBookmarkWidth",50);tmpBookConfig.onlyOpenInDingDing=getConfigValue("onlyOpenInDingDing",!1);tmpBookConfig.disableDingDingSharing=getConfigValue("disableDingDingSharing",!1);tmpBookConfig.formBackgroundOpacity=getConfigValue("formBackgroundOpacity",1);tmpBookConfig.phoneToolbarFontSize=getConfigValue("phoneToolbarFontSize","small").toLowerCase();tmpBookConfig.EnableRecognizeQRcodePressOnMobile=
getConfigValue("EnableRecognizeQRcodePressOnMobile",!1);tmpBookConfig.mobileThumbnailSearchBarVisible=getConfigValue("mobileThumbnailSearchBarVisible",!0);tmpBookConfig.loadingMainColor=getConfigValue("loadingMainColor","#1F2232");tmpBookConfig.loadingBackgroundColorType=getConfigValue("loadingBackgroundColorType","1");tmpBookConfig.isShowFirstOrLastPagePrompt=getConfigValue("isShowFirstOrLastPagePrompt",!0);tmpBookConfig.isShowMobileBottomFullscreenPrompts=getConfigValue("isShowMobileBottomFullscreenPrompts",
!1);tmpBookConfig.SmallProgramUrl=getConfigValue("SmallProgramUrl","");tmpBookConfig.searchColor=getConfigValue("searchColor","#00ffff");tmpBookConfig.searchAlpha=getConfigValue("searchAlpha",.3);tmpBookConfig.appLogoIcon=getConfigValue("appLogoIcon","");tmpBookConfig.HomeURL=getConfigValue("HomeURL","");tmpBookConfig.bookTitle=getConfigValue("bookTitle","FLIPBOOK");tmpBookConfig.bookDescription=getConfigValue("bookDescription","");tmpBookConfig.toolbarColor=getConfigValue("toolbarColor","#27181A");
tmpBookConfig.iconColor=getConfigValue("iconColor","#FFFFFF");tmpBookConfig.toolbarColor==tmpBookConfig.iconColor&&(tmpBookConfig.iconColor=Color(tmpBookConfig.toolbarColor).reverse());tmpBookConfig.pageNumColor=getConfigValue("pageNumColor","#000000");tmpBookConfig.formBackgroundColor=getConfigValue("formBackgroundColor",tmpBookConfig.toolbarColor);tmpBookConfig.formFontColor=getConfigValue("formFontColor",tmpBookConfig.iconColor);tmpBookConfig.formBackgroundColor.toLocaleLowerCase()==tmpBookConfig.formFontColor.toLocaleLowerCase()&&
(tmpBookConfig.formFontColor=Color(tmpBookConfig.formBackgroundColor).reverse());tmpBookConfig.loadingBackground=getConfigValue("loadingBackground","#1F2232");tmpBookConfig.loadingDisplayTime=getConfigValue("loadingDisplayTime",0);tmpBookConfig.searchHightlightColor=getConfigValue("searchHightlightColor","#fdc606");tmpBookConfig.logoHeight=getConfigValue("logoHeight",40);tmpBookConfig.logoTop=getConfigValue("logoTop",0);tmpBookConfig.logoPadding=getConfigValue("logoPadding",0);tmpBookConfig.isFixLogoSize=
getConfigValue("isFixLogoSize",!1);tmpBookConfig.HomeButtonVisible=getConfigValue("HomeButtonVisible",!1);tmpBookConfig.ShareButtonVisible=getConfigValue("ShareButtonVisible",!1);tmpBookConfig.facebookAppId=getConfigValue("facebookAppId","");tmpBookConfig.isInsertFrameLinkEnable=getConfigValue("isInsertFrameLinkEnable",!0);tmpBookConfig.addCurrentPage=getConfigValue("addCurrentPage",!1);tmpBookConfig.DoubleSinglePageButtonVisible=getConfigValue("DoubleSinglePageButtonVisible",!1);tmpBookConfig.ToolBarVisible=
getConfigValue("ToolBarVisible",!0);tmpBookConfig.WeChatShareButtonVisible=getConfigValue("WeChatShareButtonVisible",!1);tmpBookConfig.ThumbnailsButtonVisible=getConfigValue("ThumbnailsButtonVisible",!1);tmpBookConfig.thumbnailColor=getConfigValue("thumbnailColor",tmpBookConfig.formBackgroundColor);tmpBookConfig.thumbnailAlpha=getConfigValue("thumbnailAlpha",100);tmpBookConfig.ThumbnailSize=getConfigValue("ThumbnailSize","small");tmpBookConfig.ZoomButtonVisible=getConfigValue("ZoomButtonVisible",
!1);tmpBookConfig.ZoomToolbarVisible=getConfigValue("ZoomToolbarVisible",!0);tmpBookConfig.ZoomMapVisible=getConfigValue("ZoomMapVisible",!0);tmpBookConfig.MagnifierButtonVisible=getConfigValue("MagnifierButtonVisible",!1);tmpBookConfig.SupportOperatePageZoom=getConfigValue("SupportOperatePageZoom",!0);tmpBookConfig.TableOfContentButtonVisible=getConfigValue("TableOfContentButtonVisible",!1);if(!global.ols||0>=global.ols.length)global.ols=[],tmpBookConfig.TableOfContentButtonVisible=!1;tmpBookConfig.LargeLogoPosition=
getConfigValue("LargeLogoPosition","top-left");tmpBookConfig.LargeLogoTarget=getConfigValue("LargeLogoTarget","blank");tmpBookConfig.isHideTabelOfContentNodes=getConfigValue("isHideTabelOfContentNodes",!0);tmpBookConfig.BookMarkButtonVisible=getConfigValue("BookMarkButtonVisible",!1);tmpBookConfig.SelectTextButtonVisible=getConfigValue("SelectTextButtonVisible",!1);tmpBookConfig.SearchButtonVisible=getConfigValue("SearchButtonVisible",!1);tmpBookConfig.searchKeywordFontColor=getConfigValue("searchKeywordFontColor",
"#FFB000");tmpBookConfig.FullscreenButtonVisible=getConfigValue("FullscreenButtonVisible",!0);tmpBookConfig.isNeat&&(tmpBookConfig.FullscreenButtonVisible=!0);tmpBookConfig.hideMiniFullscreen=getConfigValue("hideMiniFullscreen",!1);isIphone()&&window.top==window.self&&(tmpBookConfig.isShowMobileBottomFullscreenPrompts=!1);tmpBookConfig.updatePageNumberForFlip=getConfigValue("updatePageNumberForFlip",!1);tmpBookConfig.leastSearchChar=getConfigValue("leastSearchChar",0);tmpBookConfig.PrintButtonVisible=
getConfigValue("PrintButtonVisible",!1);tmpBookConfig.MessageButtonVisible=getConfigValue("MessageButtonVisible",!1);tmpBookConfig.printWatermarkFile=getConfigValue("printWatermarkFile","");tmpBookConfig.BackgroundSoundButtonVisible=getConfigValue("BackgroundSoundButtonVisible",!1);tmpBookConfig.BackgroundSoundURL=getConfigValue("BackgroundSoundURL","");tmpBookConfig.BackgroundSoundLoop=getConfigValue("BackgroundSoundLoop",-1);tmpBookConfig.HelpButtonVisible=getConfigValue("HelpButtonVisible",!1);
tmpBookConfig.helpContentFileURL=getConfigValue("helpContentFileURL","");tmpBookConfig.helpWidth=getConfigValue("helpWidth",400);tmpBookConfig.helpHeight=getConfigValue("helpHeight",450);tmpBookConfig.showHelpContentAtFirst=getConfigValue("showHelpContentAtFirst",!1);tmpBookConfig.aboutButtonVisible=getConfigValue("aboutButtonVisible",!1);tmpBookConfig.aboutContactInfoTxt=getConfigValue("aboutContactInfoTxt","");tmpBookConfig.AutoPlayButtonVisible=getConfigValue("AutoPlayButtonVisible",!1);tmpBookConfig.autoPlayAutoStart=
getConfigValue("autoPlayAutoStart",!1);tmpBookConfig.autoPlayDuration=getConfigValue("autoPlayDuration",3);tmpBookConfig.autoPlayLoopCount=getConfigValue("autoPlayLoopCount",1);tmpBookConfig.minZoomWidth=getConfigValue("minZoomWidth",0);tmpBookConfig.minZoomHeight=getConfigValue("minZoomHeight",0);tmpBookConfig.maxZoomScale=getConfigValue("maxZoomScale",4);tmpBookConfig.maxZoomHeight=getConfigValue("maxZoomHeight",0);tmpBookConfig.defaultZoomScale=getConfigValue("defaultZoomScale",2);tmpBookConfig.defaultZoomHeight=
getConfigValue("defaultZoomHeight",0);tmpBookConfig.middleZoomWidth=getConfigValue("middleZoomWidth",0);isNaN(tmpBookConfig.middleZoomWidth)&&(tmpBookConfig.middleZoomWidth=0);tmpBookConfig.mouseWheelFlip=getConfigValue("mouseWheelFlip",!0);tmpBookConfig.DownloadButtonVisible=getConfigValue("DownloadButtonVisible",!0);tmpBookConfig.DownloadURL=getConfigValue("DownloadURL","");fixDownloadURLValue();tmpBookConfig.bgBeginColor=getConfigValue("bgBeginColor","#E6E6E6");tmpBookConfig.bgEndColor=getConfigValue("bgEndColor",
"#E3E3E3");tmpBookConfig.bgMRotation=getConfigValue("bgMRotation",90);tmpBookConfig.backGroundImgURL=getConfigValue("backGroundImgURL","");tmpBookConfig.backgroundOpacity=getConfigValue("backgroundOpacity",100);tmpBookConfig.LeftShadowWidth=getConfigValue("LeftShadowWidth",40);tmpBookConfig.LeftShadowAlpha=getConfigValue("LeftShadowAlpha",1);tmpBookConfig.RightShadowWidth=getConfigValue("RightShadowWidth",40);tmpBookConfig.RightShadowAlpha=getConfigValue("RightShadowAlpha",1);_agent_.system.name==
_agent_.system.ANDROID&&_agent_.browser.wechat&&(tmpBookConfig.RightShadowAlpha=1,tmpBookConfig.LeftShadowAlpha=1);tmpBookConfig.ShowTopLeftShadow=getConfigValue("ShowTopLeftShadow",!0);tmpBookConfig.pageBackgroundColor=getConfigValue("pageBackgroundColor","#FFFFFF");tmpBookConfig.flipshortcutbutton=getConfigValue("flipshortcutbutton",!1);tmpBookConfig.OriginPageIndex=getConfigValue("OriginPageIndex",1);tmpBookConfig.HardPageEnable=getConfigValue("HardPageEnable",!1);tmpBookConfig.HardInnerPageEnable=
getConfigValue("HardInnerPageEnable",!1);tmpBookConfig.bookPageStretch=getConfigValue("bookPageStretch",!1);_agent_.browser.msie&&11>_agent_.browser.version&&(tmpBookConfig.HardPageEnable=!1,tmpBookConfig.HardInnerPageEnable=!1);tmpBookConfig.HardPageEnable||(tmpBookConfig.HardInnerPageEnable=!1);tmpBookConfig.thicknessWidthType=getConfigValue("thicknessWidthType","thick").toLowerCase();tmpBookConfig.showThicknessOnMobile=getConfigValue("showThicknessOnMobile",!1);"Chinese"==UserGroups&&(tmpBookConfig.pageHighlightType=
getConfigValue("pageHighlightType","book").toLowerCase());"English"==UserGroups&&(tmpBookConfig.pageHighlightType=getConfigValue("pageHighlightType","magazine").toLowerCase());tmpBookConfig.usePdfJs=getConfigValue("usePdfJs",!1);tmpBookConfig.highDefinitionConversion=getConfigValue("highDefinitionConversion",!1);tmpBookConfig.usePdfJs&&(tmpBookConfig.highDefinitionConversion=!1);tmpBookConfig.highDefinitionConversion=!1;tmpBookConfig.isStopMouseMenu=getConfigValue("isStopMouseMenu",!1);tmpBookConfig.thicknessColor=
getConfigValue("thicknessColor","#FFFFFF");tmpBookConfig.RightToLeft=getConfigValue("RightToLeft",!1);tmpBookConfig.flippingTime=getConfigValue("flippingTime",.3);void 0!=tmpBookConfig.flippingTime&&(tmpBookConfig.flippingTime=.2>tmpBookConfig.flippingTime?.2:tmpBookConfig.flippingTime);tmpBookConfig.supportSerialsFlip=getConfigValue("supportSerialsFlip",!0);tmpBookConfig.retainBookCenter=getConfigValue("retainBookCenter",!0);tmpBookConfig.totalPagesCaption=getConfigValue("totalPagesCaption","");
tmpBookConfig.pageNumberCaption=getConfigValue("pageNumberCaption","");tmpBookConfig.buttonsSortXML=getConfigValue("buttonsSortXML",[]);tmpBookConfig.toolbarAlwaysShow=getConfigValue("toolbarAlwaysShow",!1);tmpBookConfig.searchbarAlwaysShowOnMobile=getConfigValue("searchbarAlwaysShowOnMobile",!1);"neat"===_get(htmlConfig,"phoneTemplate.name")&&(tmpBookConfig.searchbarAlwaysShowOnMobile=!1);isPhone()||isPad()||(tmpBookConfig.toolbarAlwaysShow=!0);tmpBookConfig.leftRightPnlShowOption=getConfigValue("leftRightPnlShowOption",
"").toLowerCase();tmpBookConfig.mobileLeftRightPnlShowOption=getConfigValue("mobileLeftRightPnlShowOption","").toLowerCase();tmpBookConfig.topMargin=getConfigValue("topMargin",10);tmpBookConfig.ORIGIN_TOP_MARGIN=tmpBookConfig.topMargin;tmpBookConfig.bottomMargin=getConfigValue("bottomMargin",10);tmpBookConfig.ORIGIN_BOTTOM_MARGIN=tmpBookConfig.bottomMargin;tmpBookConfig.leftMargin=getConfigValue("leftMargin",10);tmpBookConfig.rightMargin=getConfigValue("rightMargin",10);tmpBookConfig.topMarginOnMobile=
getConfigValue("topMarginOnMobile",10);tmpBookConfig.bottomMarginOnMobile=getConfigValue("bottomMarginOnMobile",10);tmpBookConfig.leftMarginOnMobile=getConfigValue("leftMarginOnMobile",10);tmpBookConfig.rightMarginOnMobile=getConfigValue("rightMarginOnMobile",10);isPhone()||isPad()?(tmpBookConfig.topMargin=tmpBookConfig.topMarginOnMobile,tmpBookConfig.bottomMargin=tmpBookConfig.bottomMarginOnMobile,tmpBookConfig.leftMargin=tmpBookConfig.leftMarginOnMobile,tmpBookConfig.rightMargin=tmpBookConfig.rightMarginOnMobile,
tmpBookConfig.phoneFlipShortcutSwitchButtonVisible=getConfigValue("phoneFlipShortcutSwitchButtonVisible",!1),tmpBookConfig.phoneFlipShortcutButton=getConfigValue("phoneFlipShortcutButton",!1),tmpBookConfig.searchbarAlwaysShowOnMobile&&tmpBookConfig.toolbarAlwaysShow&&(tmpBookConfig.topMargin+=50)):tmpBookConfig.phoneFlipShortcutButton=!1;tmpBookConfig.visibleAreaLeft=parseFloat(getConfigValue("visibleAreaLeft","0%"));tmpBookConfig.visibleAreaTop=parseFloat(getConfigValue("visibleAreaTop","0%"));tmpBookConfig.visibleAreaRight=
parseFloat(getConfigValue("visibleAreaRight","100%"));tmpBookConfig.visibleAreaBottom=parseFloat(getConfigValue("visibleAreaBottom","100%"));tmpBookConfig.visibleAreaLeft=isNaN(tmpBookConfig.visibleAreaLeft)?"0%":tmpBookConfig.visibleAreaLeft;tmpBookConfig.visibleAreaTop=isNaN(tmpBookConfig.visibleAreaTop)?"0%":tmpBookConfig.visibleAreaTop;tmpBookConfig.visibleAreaRight=isNaN(tmpBookConfig.visibleAreaRight)?"100%":tmpBookConfig.visibleAreaRight;tmpBookConfig.visibleAreaBottom=isNaN(tmpBookConfig.visibleAreaBottom)?
"100%":tmpBookConfig.visibleAreaBottom;tmpBookConfig.bleedAreaLeft=parseFloat(getConfigValue("bleedAreaLeft","0%"));tmpBookConfig.bleedAreaTop=parseFloat(getConfigValue("bleedAreaTop","0%"));tmpBookConfig.bleedAreaRight=parseFloat(getConfigValue("bleedAreaRight","0%"));tmpBookConfig.bleedAreaBottom=parseFloat(getConfigValue("bleedAreaBottom","0%"));tmpBookConfig.bleedAreaLeft=isNaN(tmpBookConfig.bleedAreaLeft)?"0%":tmpBookConfig.bleedAreaLeft;tmpBookConfig.bleedAreaTop=isNaN(tmpBookConfig.bleedAreaTop)?
"0%":tmpBookConfig.bleedAreaTop;tmpBookConfig.bleedAreaRight=isNaN(tmpBookConfig.bleedAreaRight)?"0%":tmpBookConfig.bleedAreaRight;tmpBookConfig.bleedAreaBottom=isNaN(tmpBookConfig.bleedAreaBottom)?"0%":tmpBookConfig.bleedAreaBottom;tmpBookConfig.visibleAreaLeft=tmpBookConfig.bleedAreaLeft?tmpBookConfig.bleedAreaLeft:tmpBookConfig.visibleAreaLeft;tmpBookConfig.visibleAreaTop=tmpBookConfig.bleedAreaTop?tmpBookConfig.bleedAreaTop:tmpBookConfig.visibleAreaTop;tmpBookConfig.visibleAreaRight=tmpBookConfig.bleedAreaRight?
100-parseFloat(tmpBookConfig.bleedAreaRight):tmpBookConfig.visibleAreaRight;tmpBookConfig.visibleAreaBottom=tmpBookConfig.bleedAreaBottom?100-parseFloat(tmpBookConfig.bleedAreaBottom):tmpBookConfig.visibleAreaBottom;tmpBookConfig.LinkDownColor=getConfigValue("LinkDownColor","#9C9C9C");tmpBookConfig.LinkAlpha=getConfigValue("LinkAlpha",.4);tmpBookConfig.googleAnalyticsID=getConfigValue("googleAnalyticsID","");tmpBookConfig.googleTagManagerID=getConfigValue("googleTagManagerID","");tmpBookConfig.language=
getConfigValue("language","English");tmpBookConfig.AboutAddress=getConfigValue("AboutAddress","");tmpBookConfig.AboutEmail=getConfigValue("AboutEmail","");tmpBookConfig.AboutMobile=getConfigValue("AboutMobile","");tmpBookConfig.AboutWebsite=getConfigValue("AboutWebsite","");tmpBookConfig.AboutDescription=getConfigValue("AboutDescription","");tmpBookConfig.AboutAuthor=getConfigValue("AboutAuthor","");tmpBookConfig.totalPageCount=getConfigValue("totalPageCount",1);tmpBookConfig.largePageWidth=getConfigValue("largePageWidth",
1440);tmpBookConfig.largePageHeight=getConfigValue("largePageHeight",1728);tmpBookConfig.normalPath=getConfigValue("normalPath","files/page/");tmpBookConfig.largePath=getConfigValue("largePath","files/large/");tmpBookConfig.thumbPath=getConfigValue("thumbPath","files/thumb/");tmpBookConfig.pageSpacing=getConfigValue("pageSpacing",10);tmpBookConfig.FlipStyle=getConfigValue("FlipStyle","flip");tmpBookConfig.FlipStyle=tmpBookConfig.FlipStyle.toLowerCase();tmpBookConfig.phoneFlipStyle=getConfigValue("phoneFlipStyle",
void 0);(isPhone()||isPad())&&void 0!==tmpBookConfig.phoneFlipStyle&&(tmpBookConfig.FlipStyle=tmpBookConfig.phoneFlipStyle.toLowerCase());tmpBookConfig.autoDoublePage=getConfigValue("autoDoublePage","auto");"docview"===tmpBookConfig.FlipStyle&&(tmpBookConfig.autoDoublePage="single");d=tmpBookConfig.autoDoublePage?tmpBookConfig.autoDoublePage.toLocaleLowerCase():"auto";"single"!=d&&"auto"!=d&&"double"!=d?getConfigValue("autoDoublePage",!0)?tmpBookConfig.showDoublePage="auto":tmpBookConfig.showDoublePage=
"single":tmpBookConfig.showDoublePage=d;tmpBookConfig.alwaysDoublePageOnMobile=getConfigValue("alwaysDoublePageOnMobile",!1);tmpBookConfig.upsideOnMobile=function(){return isPhone()||isPad()?tmpBookConfig.alwaysDoublePageOnMobile&&window.innerHeight>window.innerWidth?!0:!1:!1};tmpBookConfig.autoSwitchWidePage=getConfigValue("autoSwitchWidePage",!0);tmpBookConfig.upsideOnMobile()&&"single"!=tmpBookConfig.showDoublePage&&(tmpBookConfig.showDoublePage="double");tmpBookConfig.QRPath=getConfigValue("QRPath",
"files/extfile/QRURL.png");tmpBookConfig.QRCode=getConfigValue("QRCode",!1);tmpBookConfig.MiniStyle=getConfigValue("MiniStyle",!0);tmpBookConfig.AnnotationButtonVisible=getConfigValue("AnnotationButtonVisible",!1);tmpBookConfig.InstructionsButtonVisible=getConfigValue("InstructionsButtonVisible",!1);tmpBookConfig.showInstructionOnStart=getConfigValue("showInstructionOnStart",!0);tmpBookConfig.showBookInstructionOnStart=getConfigValue("showBookInstructionOnStart",!1);tmpBookConfig.showSwitchTipsOnStart=
getConfigValue("showSwitchTipsOnStart",!1);tmpBookConfig.EmailButtonVisible=getConfigValue("EmailButtonVisible",!1);tmpBookConfig.btnShareWithEmailSubject=getConfigValue("btnShareWithEmailSubject","");tmpBookConfig.btnShareWithEmailBody=getConfigValue("btnShareWithEmailBody","");tmpBookConfig.btnShareWithEmailTo=getConfigValue("btnShareWithEmailTo","");tmpBookConfig.socialShareLink=getConfigValue("socialShareLink","");tmpBookConfig.VideoButtonVisible=getConfigValue("VideoButtonVisible",!1);if(!global.videoList||
0>=global.videoList.length)tmpBookConfig.VideoButtonVisible=!1;tmpBookConfig.SlideshowButtonVisible=getConfigValue("SlideshowButtonVisible",!1);if(!global.slideshow||0>=global.slideshow.length)tmpBookConfig.SlideshowButtonVisible=!1;tmpBookConfig.CompanyLogoFile=getConfigValue("CompanyLogoFile","");tmpBookConfig.UIBaseURL=getConfigValue("UIBaseURL","");tmpBookConfig.haveAdSense=getConfigValue("haveAdSense",!1);tmpBookConfig.adSenseLeft=getConfigValue("adSenseLeft",0);tmpBookConfig.adSenseTop=getConfigValue("adSenseTop",
0);tmpBookConfig.adSenseWidth=getConfigValue("adSenseWidth",0);tmpBookConfig.adSenseHeight=getConfigValue("adSenseHeight",0);tmpBookConfig.adSenseClientId=getConfigValue("adSenseClientId","");tmpBookConfig.adSenseSlotId=getConfigValue("adSenseSlotId","");tmpBookConfig.productName=getConfigValue("productName","Flip HTML5");tmpBookConfig.homePage=getConfigValue("homePage","http://www.fliphtml5.com");tmpBookConfig.preloadNextPage=getConfigValue("preloadNextPage",!0);tmpBookConfig.showMirrorSide=getConfigValue("showMirrorSide",
!0);tmpBookConfig.addPaperCoil=getConfigValue("addPaperCoil",!1);tmpBookConfig.addPaperCoil&&!tmpBookConfig.BindingType&&(tmpBookConfig.BindingType="loose");tmpBookConfig.BindingType||(tmpBookConfig.BindingType=getConfigValue("BindingType","side"));tmpBookConfig.addPaperCoil="loose"==tmpBookConfig.BindingType||"loose2"==tmpBookConfig.BindingType;tmpBookConfig.ToolbarViewMode=getConfigValue("ToolbarViewMode","standard");tmpBookConfig.ToolbarViewMode=tmpBookConfig.ToolbarViewMode.toLocaleLowerCase();
tmpBookConfig.isTheBookOpen=getConfigValue("isTheBookOpen",!1);tmpBookConfig.FlipDirection=getConfigValue("FlipDirection",0);tmpBookConfig.continuousPageArrangement=getConfigValue("continuousPageArrangement",!0);tmpBookConfig.startingFromTheSide=getConfigValue("startingFromTheSide",!1);tmpBookConfig.automaticAdsorption=getConfigValue("automaticAdsorption",!0);tmpBookConfig.phoneFlipShortcutSwitchButtonIcon=getConfigValue("phoneFlipShortcutSwitchButtonIcon","");tmpBookConfig.HomeButtonIcon=getConfigValue("HomeButtonIcon",
"");tmpBookConfig.AnnotationButtonIcon=getConfigValue("AnnotationButtonIcon","");tmpBookConfig.VideoButtonIcon=getConfigValue("VideoButtonIcon","");tmpBookConfig.SlideshowButtonIcon=getConfigValue("SlideshowButtonIcon","");tmpBookConfig.ShareButtonIcon=getConfigValue("ShareButtonIcon","");tmpBookConfig.ThumbnailButtonIcon=getConfigValue("ThumbnailButtonIcon","");tmpBookConfig.ZoomInButtonIcon=getConfigValue("ZoomInButtonIcon","");tmpBookConfig.ZoomOutButtonIcon=getConfigValue("ZoomOutButtonIcon",
"");tmpBookConfig.MagnifierButtonIcon=getConfigValue("MagnifierButtonIcon","");tmpBookConfig.FullscreenButtonIcon=getConfigValue("FullscreenButtonIcon","");tmpBookConfig.ExitFullscreenButtonIcon=getConfigValue("ExitFullscreenButtonIcon","");tmpBookConfig.BookmarkButtonIcon=getConfigValue("BookmarkButtonIcon","");tmpBookConfig.TableOfContentButtonIcon=getConfigValue("TableOfContentButtonIcon","");tmpBookConfig.SearchButtonIcon=getConfigValue("SearchButtonIcon","");tmpBookConfig.PrintButtonIcon=getConfigValue("PrintButtonIcon",
"");tmpBookConfig.BackgroundSoundButtonOnIcon=getConfigValue("BackgroundSoundButtonOnIcon","");tmpBookConfig.BackgroundSoundButtonOffIcon=getConfigValue("BackgroundSoundButtonOffIcon","");tmpBookConfig.HelpButtonIcon=getConfigValue("HelpButtonIcon","");tmpBookConfig.AboutButtonIcon=getConfigValue("AboutButtonIcon","");tmpBookConfig.AutoPlayStartButtonIcon=getConfigValue("AutoPlayStartButtonIcon","");tmpBookConfig.AutoPlayStopButtonIcon=getConfigValue("AutoPlayStopButtonIcon","");tmpBookConfig.DownloadButtonIcon=
getConfigValue("DownloadButtonIcon","");tmpBookConfig.SelectTextButtonIcon=getConfigValue("SelectTextButtonIcon","");tmpBookConfig.facebookShotImageURL=getConfigValue("facebookShotImageURL","");tmpBookConfig.searchTextJS=getConfigValue("searchTextJS","files/search/book_config.js");tmpBookConfig.searchPositionJS=getConfigValue("searchPositionJS","files/search/text_position.js");tmpBookConfig.userSmallMode=getConfigValue("userSmallMode",!0);tmpBookConfig.maxWidthToSmallMode=getConfigValue("maxWidthToSmallMode",
300);tmpBookConfig.maxHeightToSmallMode=getConfigValue("maxHeightToSmallMode",300);tmpBookConfig.backgroundScene=getConfigValue("backgroundScene","None");tmpBookConfig.bgSoundVol=getConfigValue("bgSoundVol",50);tmpBookConfig.bgSoundVol=Number.between(tmpBookConfig.bgSoundVol,0,100);tmpBookConfig.enablePageBack=getConfigValue("enablePageBack",!1);tmpBookConfig.userListPath=getConfigValue("userListPath","files/extfiles/users.js");tmpBookConfig.excludeFrontPages=getConfigValue("excludeFrontPages","");
tmpBookConfig.isFlipPdf=getConfigValue("isFlipPdf",!1);tmpBookConfig.SingleModeBanFlipToLastPage=getConfigValue("SingleModeBanFlipToLastPage",!1);tmpBookConfig.isSingleBookFullWindowOnMobile=getConfigValue("isSingleBookFullWindowOnMobile",!1);tmpBookConfig.showGotoButtonsAtFirst=getConfigValue("showGotoButtonsAtFirst",!1);0==tmpBookConfig.isFlipPdf&&void 0!=global.isFlipPdf&&(tmpBookConfig.isFlipPdf=isFlipPdf);tmpBookConfig.FlipSound=getConfigValue("FlipSound",!0);global.flipSoundIsPlaying=tmpBookConfig.FlipSound;
tmpBookConfig.CurlingPageCorner=getConfigValue("CurlingPageCorner",!0);tmpBookConfig.BanFlipFromDirection=getConfigValue("BanFlipFromDirection",!1);tmpBookConfig.iconFontColor=getConfigValue("iconFontColor","#ffffff");try{void 0!=global.staticAd&&1==staticAd.haveAd&&void 0==global.staticAd.adPosition&&("Chinese"==UserGroups&&(global.staticAd.adPosition=1),"English"==UserGroups&&(global.staticAd.adPosition=0)),void 0!=global.staticAd&&1==staticAd.haveAd&&0===parseInt(global.staticAd.adPosition)?tmpBookConfig.retainBookCenter=
!1:tmpBookConfig.retainBookCenter=getConfigValue("retainBookCenter",!0)}catch(l){}tmpBookConfig.updateURLForPage=getConfigValue("updateURLForPage",!0);tmpBookConfig.borderColor=getConfigValue("borderColor","#572f0d");tmpBookConfig.outerCoverBorder=getConfigValue("outerCoverBorder",!1);tmpBookConfig.hardCoverBorderWidth=getConfigValue("hardCoverBorderWidth",0);tmpBookConfig.cornerRound=getConfigValue("cornerRound",0);tmpBookConfig.hardCoverBorderWidth=tmpBookConfig.HardPageEnable?Number.between(0,
16,tmpBookConfig.hardCoverBorderWidth):0;tmpBookConfig.cornerRound=tmpBookConfig.HardPageEnable?Number.between(0,tmpBookConfig.hardCoverBorderWidth,tmpBookConfig.cornerRound):0;tmpBookConfig.coverTexture=getConfigValue("coverTexture","none");tmpBookConfig.passwardPrompt=getConfigValue("passwardPrompt","");tmpBookConfig.SlideshowAutoPlay=getConfigValue("SlideshowAutoPlay",!1);tmpBookConfig.SlideshowPlayInterval=getConfigValue("SlideshowPlayInterval",5);tmpBookConfig.productName=getConfigValue("productName",
"Flip HTML5");tmpBookConfig.homePage=getConfigValue("homePage","http://www.fliphtml5.com");global.productName=tmpBookConfig.productName||"Flip HTML5";global.homePage=tmpBookConfig.homePage||"http://www.fliphtml5.com";tmpBookConfig.backgroundPosition=getConfigValue("backgroundPosition","Stretch");tmpBookConfig.restorePageVisible=getConfigValue("restorePageVisible",!1);tmpBookConfig.restorePageDuration=getConfigValue("restorePageDuration",86400);tmpBookConfig.toobarClear=getConfigValue("toobarClear",
!1);tmpBookConfig.bottomToolBarAlpha=getConfigValue("bottomToolBarAlpha",1);tmpBookConfig.topToolBarAlpha=getConfigValue("topToolBarAlpha",1);tmpBookConfig.ToolBarAlpha=getConfigValue("ToolBarAlpha",1);tmpBookConfig.phoneSearchBarAlpha=getConfigValue("phoneSearchBarAlpha",.8);!isPhone()&&!isPad()||["slide","docview","card","inverteffect"].includes(tmpBookConfig.FlipStyle.toLowerCase())||(tmpBookConfig.FlipStyle="flip");isBelowIE9()&&(tmpBookConfig.FlipStyle="slide");if(isPhone()||isPad()||"slide"==
tmpBookConfig.FlipStyle.toLowerCase()&&"lite"==tmpBookConfig.ToolbarViewMode.toLowerCase())tmpBookConfig.flipshortcutbutton=!1;if("slide"==tmpBookConfig.FlipStyle&&"lite"==tmpBookConfig.ToolbarViewMode.toLowerCase()||isPhone()||isPad())tmpBookConfig.flipshortcutbutton=!1;if(global.videoList&&1<=global.videoList.length)for(e=0;e<videoList.length;e++)videoList[e].id||(videoList[e].id=""),videoList[e].description||(videoList[e].description=""),videoList[e].thumbnail||(videoList[e].thumbnail=""),videoList[e].title||
(videoList[e].title=""),videoList[e].type||(videoList[e].type="");try{window.localStorage||(tmpBookConfig.BookMarkButtonVisible=!1,tmpBookConfig.AnnotationButtonVisible=!1,tmpBookConfig.restorePageVisible=!1,global.pageEditor&&global.pageEditor.setting&&parseBool(global.pageEditor.setting.shoppingCartHTML)&&(global.pageEditor.setting.shoppingCartHTML=!1))}catch(l){tmpBookConfig.BookMarkButtonVisible=!1,tmpBookConfig.AnnotationButtonVisible=!1,tmpBookConfig.restorePageVisible=!1,global.pageEditor&&
global.pageEditor.setting&&parseBool(global.pageEditor.setting.shoppingCartHTML)&&(global.pageEditor.setting.shoppingCartHTML=!1)}0<=global.templeteName.indexOf("article")&&(isPhone()||isPad())&&(tmpBookConfig.BookMarkButtonVisible=!1);tmpBookConfig.OpenWindow=(getConfigValue("OpenWindow","_blank")+"").toLowerCase();tmpBookConfig.appLogoOpenWindow=(getConfigValue("appLogoOpenWindow","_blank")+"").toLowerCase();tmpBookConfig.OpenWindow.startsWith("_")||(tmpBookConfig.OpenWindow="_"+tmpBookConfig.OpenWindow);
tmpBookConfig.appLogoOpenWindow.startsWith("_")||(tmpBookConfig.appLogoOpenWindow="_"+tmpBookConfig.appLogoOpenWindow);tmpBookConfig.appLargeLogoIcon=getConfigValue("appLargeLogoIcon","");tmpBookConfig.appLogoLinkURL=getConfigValue("appLogoLinkURL","");tmpBookConfig.appLogoLinkURL&&(tmpBookConfig.appLogoLinkURL=getRealURL(tmpBookConfig.appLogoLinkURL));tmpBookConfig.appLargeLogoURL=getConfigValue("appLargeLogoURL","");tmpBookConfig.appLargeLogoURL&&(tmpBookConfig.appLargeLogoURL=getRealURL(tmpBookConfig.appLargeLogoURL));
tmpBookConfig.isFixLogoSize=getConfigValue("isFixLogoSize",!1);tmpBookConfig.logoFixWidth=getConfigValue("logoFixWidth",0);tmpBookConfig.logoFixHeight=getConfigValue("logoFixHeight",0);tmpBookConfig.PhoneButtonVisible=getConfigValue("PhoneButtonVisible",!1);window.phoneNumber&&0!=phoneNumber.length||(tmpBookConfig.PhoneButtonVisible=!1);tmpBookConfig.PhoneButtonIcon=getConfigValue("PhoneButtonIcon","");tmpBookConfig.phoneNumber=getConfigValue("phoneNumber","");tmpBookConfig.aboutContactInfoTxt=getConfigValue("aboutContactInfoTxt",
"");tmpBookConfig.isEncryptionBook=getConfigValue("isEncryptionBook",!1);tmpBookConfig.useTheAliCloudChart=getConfigValue("useTheAliCloudChart",!1);tmpBookConfig.securityType=getConfigValue("securityType",0);tmpBookConfig.singlePasswordKey=getConfigValue("singlePasswordKey","");tmpBookConfig.singlePasswordMD5=getConfigValue("singlePasswordMD5","");1<=passwardType()&&(tmpBookConfig.useTheAliCloudChart=!1);tmpBookConfig.isEncryptionBook&&(tmpBookConfig.useTheAliCloudChart=!1);tmpBookConfig.useTheFliphtml5Service=
getConfigValue("useTheFliphtml5Service",!1);if("online.fliphtml5.com"==document.domain||0<=tmpBookConfig.bookResourceBaseURL.indexOf("online.fliphtml5.com"))tmpBookConfig.useTheAliCloudChart=!1,tmpBookConfig.useTheFliphtml5Service=!0;tmpBookConfig.isEncryptionBook&&(tmpBookConfig.useTheFliphtml5Service=!1);tmpBookConfig.OnlyOpenInWechat=getConfigValue("OnlyOpenInWechat",!1);tmpBookConfig.NoWechatSharing=getConfigValue("NoWechatSharing",!1);tmpBookConfig.WeChatShareButtonIcon=getConfigValue("WeChatShareButtonIcon",
"");tmpBookConfig.isShowAssistantPerson=getConfigValue("isShowAssistantPerson",!0);tmpBookConfig.OnlyOpenInIframe=getConfigValue("OnlyOpenInIframe",!1);tmpBookConfig.OnlyOpenInIframeInfo=getConfigValue("OnlyOpenInIframeInfo","Only open in iframe.");tmpBookConfig.NoWechatSharing&&jQuery(document).ready(function(){window.setTimeout(function(){function l(){WeixinJSBridge.call("hideOptionMenu")}global.wx&&wx.hideOptionMenu();"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",
l,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",l),document.attachEvent("onWeixinJSBridgeReady",l)):l()},10)});tmpBookConfig.textClarityEnhancement=getConfigValue("textClarityEnhancement",0);tmpBookConfig.textSharpening=getConfigValue("textSharpening",!0);if(_agent_.browser.firefox||_agent_.browser.opera||_agent_.browser.safari)tmpBookConfig.textSharpening=!1;tmpBookConfig.AboutDescription=tmpBookConfig.AboutDescription.replace(/\n/g,"<br/>");tmpBookConfig.AboutDescription=
tmpBookConfig.AboutDescription.replace(/\r/g,"<br/>");checkBookmarkConfig();checkStaticAdConfig();isBelowIE9()&&(tmpBookConfig.BookMarkButtonVisible=!1,tmpBookConfig.AnnotationButtonVisible=!1,tmpBookConfig.WeChatShareButtonVisible=!1);tmpBookConfig.useTheAliCloudChart&&tmpBookConfig.backGroundImgURL&&(0<=tmpBookConfig.backGroundImgURL.indexOf("?")?tmpBookConfig.backGroundImgURL+="&x-oss-process=image/resize,h_800":tmpBookConfig.backGroundImgURL+="?x-oss-process=image/resize,h_800",window.isSupportWebp&&
(tmpBookConfig.backGroundImgURL+="/format,webp"));tmpBookConfig.useTheFliphtml5Service&&tmpBookConfig.backGroundImgURL&&(tmpBookConfig.backGroundImgURL=resetFliphtml5URL(tmpBookConfig.backGroundImgURL));global.checkReportConfig&&checkReportConfig();global.aboutReadTimesCaptions="Views";"Chinese"==UserGroups&&(global.aboutReadTimesCaptions="\u95c3\u5470\ue1f0\u5a06\u2103\u669f");tmpBookConfig.isNeat=getConfigValue("isNeat",!1);0<=window.location.hash.indexOf("isNeat")&&(tmpBookConfig.isNeat=!0);tmpBookConfig.phoneToolbarType=
getConfigValue("phoneToolbarType","image").toLowerCase();tmpBookConfig.phoneIconNumber=getConfigValue("phoneIconNumber",6);tmpBookConfig.phoneIconNumber=Math.max(1,tmpBookConfig.phoneIconNumber);tmpBookConfig.showAdOnTop=getConfigValue("showAdOnTop",!0);tmpBookConfig.bookPath=getConfigValue("bookPath",window.location.href);tmpBookConfig.bookPath=tmpBookConfig.bookPath.removeStartFrom("index.html");tmpBookConfig.bookPath=tmpBookConfig.bookPath.removeStartFrom("articles/");tmpBookConfig.bookPath=tmpBookConfig.bookPath.removeStartFrom("mobile/");
tmpBookConfig.bookPath=tmpBookConfig.bookPath.removeStartFrom("?");tmpBookConfig.bookPath=tmpBookConfig.bookPath.removeStartFrom("#");"/"!=tmpBookConfig.bookPath.slice(-1)&&(tmpBookConfig.bookPath+="/");tmpBookConfig.loadPreviewImage=!1;tmpBookConfig.removeLoad=!0;tmpBookConfig.showArticleDescription=getConfigValue("showArticleDescription",!1);tmpBookConfig.showArticlePageFlashes=getConfigValue("showArticlePageFlashes",!0);tmpBookConfig.articleListPath=getConfigValue("articleListPath","");tmpBookConfig.articleConfigPath=
getConfigValue("articleConfigPath","");tmpBookConfig.bookArticleConfigPath=getConfigValue("bookArticleConfigPath","");tmpBookConfig.periodsConfigPath=getConfigValue("periodsConfigPath","");tmpBookConfig.userArticleConfigPath=getConfigValue("userArticleConfigPath","");checkURLValue();tmpBookConfig.pageEditorUrl=getConfigValue("pageEditorUrl","");tmpBookConfig.pageReaderUrl=getConfigValue("pageReaderUrl","");tmpBookConfig.pageSliderUrl=getConfigValue("pageSliderUrl","");tmpBookConfig.pageRestrictUrl=
getConfigValue("pageRestrictUrl","");tmpBookConfig.restrictUrl=getConfigValue("restrictUrl","");tmpBookConfig.keyForPageTest=getConfigValue("keyForPageTest","");tmpBookConfig.bookOwnerInfo=getConfigValue("bookOwnerInfo","");tmpBookConfig.Copyright=getConfigValue("Copyright","");tmpBookConfig.articleTitle=getConfigValue("articleTitle","");tmpBookConfig.articleTime=getConfigValue("articleTime","");tmpBookConfig.isMouseEnterToDisplayArticleTitle=getConfigValue("isMouseEnterToDisplayArticleTitle",!1);
tmpBookConfig.delayToFlipFirst=getConfigValue("delayToFlipFirst",!1);tmpBookConfig.timeToFlipFirst=getConfigValue("timeToFlipFirst",10);tmpBookConfig.printBackgroundPosition=getConfigValue("printBackgroundPosition","fit");try{if(window.ignoreModuleArray&&window.ignoreModuleArray.bookConfig)for(e=0;e<window.ignoreModuleArray.bookConfig.length;e++)f=window.ignoreModuleArray.bookConfig[e],void 0!=tmpBookConfig[f]&&(tmpBookConfig[f]=!1)}catch(l){}checkFliphtml5PagesConfig();checkFlipStyleConfig();return"issuu"==
tmpBookConfig.FlipStyle?k.yield(loadCSS(tmpBookConfig.UIBaseURL+"style/issuubook.min.css"),3):k.yield(loadCSS(tmpBookConfig.UIBaseURL+"style/flipbook.min.css"),3)}checkPageEditorConfig();recordError();g=Module._getVerifyString();h=UTF8ToString(g);Module._free(g);eval(h);k.jumpToEnd()})};
function recordError(){try{var b=window.setInterval(function(){window.onBookError&&(tmpBookConfig.largePageWidth&&tmpBookConfig.largePageHeight&&tmpBookConfig.totalPageCount||BookEvent.trigger("errorLog",[JSON.stringify({largePageWidth:tmpBookConfig.largePageWidth,largePageHeight:tmpBookConfig.largePageHeight,totalPageCount:tmpBookConfig.totalPageCount,type:"BookConfigError"})]),window.clearInterval(b))},500)}catch(c){}}
function setBookVerticalMargin(b){b=void 0===b?{}:b;try{var c=global.staticAd&&global.staticAd.haveAd&&"Chinese"!=UserGroups&&global.staticAd.adPosition?!0:!1,d=global.staticAd.height||90,e=tmpBookConfig.ORIGIN_TOP_MARGIN,f,g,h,k=!(null==(f=global.bmtConfig)?0:f.onSideEdge)&&0<(null==(g=global.bmtConfig)?void 0:null==(h=g.tabs)?void 0:h.length),l,n=null!=(l=b.bookmarkHeight)?l:70;k&&e<n&&(e=n);if(c&&2==global.staticAd.adPosition)if(e<d+20)e+=d+20;else{var p=BookInfo.top()-templateArea.getTopHeight();
e=Math.max(e,p)}tmpBookConfig.topMargin=e;var r=tmpBookConfig.ORIGIN_BOTTOM_MARGIN;c&&1==global.staticAd.adPosition&&r<d+20&&(r+=d+20);tmpBookConfig.bottomMargin=r;b.disableResize||"function"!=typeof global.onStageResize||onStageResize()}catch(B){console.log("setBookVerticalMargin error",B)}}
function checkStaticAdConfig(){if(!isPhone()&&!isPad()&&"Chinese"!=UserGroups&&global.staticAd&&global.staticAd.haveAd&&global.staticAd.adPosition){var b=global.staticAd.height||90;switch(global.staticAd.adPosition){case 1:tmpBookConfig.bottomMargin=tmpBookConfig.bottomMargin+b+20;break;case 2:tmpBookConfig.topMargin=tmpBookConfig.topMargin+b+20}}}
function checkBookmarkConfig(){global.bmtConfig||(bmtConfig=[]);void 0==bmtConfig.onSideEdge&&(bmtConfig.onSideEdge=!0);void 0==bmtConfig.showPage&&(bmtConfig.showPage=!1);void 0==bmtConfig.hasTexture&&(bmtConfig.hasTexture=!1)}
var isBool=function(b){if(!0===b||!1===b)return!0;if(void 0==b)return!1;var c=["false","no","hide","disable"];b=b.toLowerCase();return 0>["true","yes","show","enable"].indexOf(b)&&0>c.indexOf(b)?!1:!0},getValueFromConfig=function(b,c){b=function(d,e){DeConfig_Parse(d);getEditConfig(d);void 0!=e&&"string"==typeof e&&""!=e.trim()&&isBool(e)&&(e=parseBool(e));d=void 0!=tmpBookConfig[d]?tmpBookConfig[d]:getValueFromAliasConfig(d);return void 0==d?e:void 0==e?d:"number"==typeof e?Number(d):"boolean"==
typeof e?parseBool(d):"string"==typeof e&&"#"==e[0]?Color(d).toString():d}(b,c);"string"==typeof b&&(b=b.replaceAll("\\/","/",!0),b=b.replaceAll('\\"','"'),b.startsWith("[")&&b.endsWith("]")&&(b=eval(b)));return b},getConfigValue=function(b,c){c=getValueFromConfig(b,c);"string"==typeof c&&0<=c.indexOf("files")&&"normalPath"!=b&&"largePath"!=b&&"thumbPath"!=b&&(c=fixURLValue(c));return c};
function DeConfig_Parse(b){try{var c=Module._DeConfig_Get(window.key_index,allocateUTF8(b)),d=UTF8ToString(c);tmpBookConfig[b]="undefined"==d?void 0:d;return d}catch(e){}}function allocateUTF8(b){var c=lengthBytesUTF8(b)+1,d=_malloc(c);d&&stringToUTF8Array(b,HEAP8,d,c);return d}function getEditConfig(b){try{var c=window.editConfig||window.htmlConfig.editConfig;c&&void 0!=c[b]&&(tmpBookConfig[b]=c[b])}catch(d){}}
var getValueFromAliasConfig=function(b){if(global.aliasConfig&&(b=aliasConfig[b]))for(var c=0;c<b.length;c++){var d=b[c];if(void 0!=tmpBookConfig[d])return tmpBookConfig[d]}},fixDownloadURLValue=function(){""==tmpBookConfig.DownloadURL&&void 0!=tmpBookConfig.downloadURL&&""!=tmpBookConfig.downloadURL&&(tmpBookConfig.DownloadURL=tmpBookConfig.downloadURL)},checkURLValue=function(){tmpBookConfig.articleListPath=changeBookResourceBaseURL(tmpBookConfig.articleListPath);tmpBookConfig.articleConfigPath=
changeBookResourceBaseURL(tmpBookConfig.articleConfigPath);tmpBookConfig.bookArticleConfigPath=changeBookResourceBaseURL(tmpBookConfig.bookArticleConfigPath);tmpBookConfig.periodsConfigPath=changeBookResourceBaseURL(tmpBookConfig.periodsConfigPath);tmpBookConfig.userArticleConfigPath=changeBookResourceBaseURL(tmpBookConfig.userArticleConfigPath);tmpBookConfig.userListPath=changeBookResourceBaseURL(tmpBookConfig.userListPath)},fixURLValue=function(b){if(_agent_.browser.app||!tmpBookConfig.CreatedTime||
!b)return b;var c=function(e){return"string"!=typeof e?e:e=0<=e.indexOf("?")?e+"&"+tmpBookConfig.CreatedTime:e+"?"+tmpBookConfig.CreatedTime};if("string"!=typeof b)for(var d=0;d<b.length;d++)b[d]=c(b[d]),b[d]=changeBookResourceBaseURL(b[d]);else b=c(b),b=changeBookResourceBaseURL(b);return b},decodeAboutInfo=function(){if(tmpBookConfig.aboutContactInfoTxt){try{var b=$(tmpBookConfig.aboutContactInfoTxt)}catch(p){return}var c,d,e,f,g;b.find("title").text();var h=b.find("desc").text();var k=b.find("logo").text();
b=b.find("keys").children();for(var l=0;l<b.length;l++){var n=$(b[l]);"Phone"==n.attr("type")&&(c=n.text());"Link"==n.attr("type")&&(d=n.text());"Email"==n.attr("type")&&(e=n.text());"Address"==n.attr("type")&&(f=n.text());"Author"==n.attr("type")&&(g=n.text())}b=function(p){return String.parseUtf8(base64.decode(p))};f&&!tmpBookConfig.AboutAddress&&(tmpBookConfig.AboutAddress=b(f));e&&!tmpBookConfig.AboutEmail&&(tmpBookConfig.AboutEmail=b(e));c&&!tmpBookConfig.AboutMobile&&(tmpBookConfig.AboutMobile=
b(c));d&&!tmpBookConfig.AboutWebsite&&(tmpBookConfig.AboutWebsite=b(d));h&&!tmpBookConfig.AboutDescription&&(tmpBookConfig.AboutDescription=b(h),tmpBookConfig.AboutDescription=HTMLString.toLabel(tmpBookConfig.AboutDescription).replaceAll("&lt;br&gt;","<br>").replace(/\n/g,"<br>"));g&&!tmpBookConfig.AboutAuthor&&(tmpBookConfig.AboutAuthor=b(g));k&&!tmpBookConfig.CompanyLogoFile&&(tmpBookConfig.CompanyLogoFile=b(k));tmpBookConfig.CompanyLogoFile&&(tmpBookConfig.CompanyLogoFile=tmpBookConfig.CompanyLogoFile.replace(/\\/g,
"/"));tmpBookConfig.isFlipPdf&&tmpBookConfig.CompanyLogoFile.startsWith("./")&&(tmpBookConfig.CompanyLogoFile="."+tmpBookConfig.CompanyLogoFile)}},checkHtmlConfig=function(){for(var b="aliasConfig aliasLanguage fliphtml5_pages bmtConfig videoList staticAd language ols slideshow pageEditor flipByAudio downloadconfig assistantConfig phoneNumber bookPlugin shareObj textForPages positionForPages search_pages pages_information bookConfig phoneTemplate userList".split(" "),c=0;c<b.length;c++){var d=b[c];
window.htmlConfig&&window.htmlConfig[d]&&"bookConfig"!=d&&(window[d]=window.htmlConfig[d])}!window.htmlConfig||!window.htmlConfig.downloadConfig||window.htmlConfig.downloadconfig&&void 0==window.htmlConfig.downloadconfig.length||(window.downloadconfig=window.htmlConfig.downloadConfig);try{window.downloadconfig&&0==downloadconfig.isDownloadAttach&&(downloadconfig.attachments=null)}catch(e){}};checkHtmlConfig();
function initEncryptPreviewPages(){if(!(!tmpBookConfig.previewPages||tmpBookConfig.previewPagesArray&&tmpBookConfig.previewPagesArray.length)){for(var b=tmpBookConfig.previewPages.split(","),c=[],d=0;d<b.length;d++)if(-1<b[d].indexOf("-"))for(var e=b[d].split("-"),f=parseFloat(e[0]);f<=parseFloat(e[1]);f++)c.push(parseFloat(f));else b[d]&&c.push(parseFloat(b[d]));tmpBookConfig.previewPagesArray=c}}initEncryptPreviewPages();
var getBookInfo=function(){if(window.htmlConfig&&window.htmlConfig.bookConfig&&window.htmlConfig.bookConfig.bookBaseURL){var b=tmpBookConfig.bookBaseURL;b.endsWith("/")||(b+="/");$.ajax({url:b+"bookinfo.js",type:"get",crossDomain:!0,success:function(c){},error:function(c){}})}},toAbsURL=function(b){var c=document.createElement("a");c.href=b;return c.href},changeHostName=function(b,c){var d=document.createElement("a");d.href=b;return b=d.href.replace(d.host,c)},changeBookResourceBaseURL=function(b){if(!tmpBookConfig.bookResourceBaseURL||
0<=b.indexOf("http")||0<=b.indexOf("file:///"))return b;b=0<=b.indexOf("../")?b.remove("../"):b.remove("./");return toAbsURL(tmpBookConfig.bookResourceBaseURL+b)};
function resetFliphtml5URL(b){try{if(!b||0<=b.indexOf("none")||0<=b.indexOf(".zip")||0<=b.indexOf(".svg")||0<=b.indexOf(".js")||window.isSupportWebp&&0<=b.indexOf("webp")||0>b.indexOf("webp"))return b;b=b.removeStartFrom("?")+"";b=changeHostName(b,"online-a.wancaiinfo.com");var c="";c=window.isSupportWebp?"webp":getWebpOriginFormat(b);return b=b+"?image_process=format,"+c}catch(d){return b}}
function initImageBaseUrl(){global.uiBaseURL=tmpBookConfig.UIBaseURL;uiBaseURL&&"string"==typeof uiBaseURL&&(uiBaseURL.endsWith("/")||(uiBaseURL+="/"));global.phoneBaseURL=uiBaseURL+"style/phoneIcon/";global.soundBaseURL=uiBaseURL+"style/raw/";global.mbBaseURL=uiBaseURL+"style/mb_icon/";global.uiBaseURL=uiBaseURL+"style/icon/";tmpBookConfig.pageLoadingUrl=global.uiBaseURL+"loading.svg";isIE()&&(tmpBookConfig.pageLoadingUrl=global.uiBaseURL+"loading.gif")}
function changeBookConfigValue(b,c){tmpBookConfig[b]=c}
function resetYunzhanURL(b,c,d){if(!b||0<=b.indexOf("none")||0<=b.indexOf(".zip")||0<=b.indexOf(".svg")||0<=b.indexOf(".js"))return b;b=b.removeStartFrom("?")+"";window.isSupportWebp?0>b.indexOf("webp")&&(b+="?x-oss-process=image/format,webp"):0<=b.indexOf("webp")&&(b+="?x-oss-process=image/format,"+getWebpOriginFormat(b));if(!c||!d)return b;0>b.indexOf("x-oss-process=image")&&(b+="?x-oss-process=image");b="issuu"==bookConfig.FlipStyle?b+("/resize,m_fixed,h_"+parseInt(d)+",w_"+parseInt(c)):b+("/resize,h_"+
parseInt(d)+",w_"+parseInt(c));switch(bookConfig.textClarityEnhancement){case 1:b+="/sharpen,100";break;case 2:b+="/sharpen,150";break;case 3:b+="/sharpen,200"}return b}
function checkFliphtml5PagesConfig(){if(window.fliphtml5_pages&&0!=window.fliphtml5_pages.length)for(var b=window.fliphtml5_pages,c=0;c<b.length;c++)b[c].w&&b[c].h&&(window.pageList||(window.pageList=[]),.04>getAspectRatioDiff(tmpBookConfig.largePageWidth,tmpBookConfig.largePageHeight,b[c].w,b[c].h)||(pageList[c]={width:b[c].w,height:b[c].h}))}
function checkFlipStyleConfig(){!window.pageList||0==window.pageList.length||"flip"!=tmpBookConfig.FlipStyle||1==tmpBookConfig.FlipDirection||(isPhone()||isPad())&&tmpBookConfig.isSingleBookFullWindowOnMobile||tmpBookConfig.RightToLeft||tmpBookConfig.isTheBookOpen||tmpBookConfig.HardInnerPageEnable||!tmpBookConfig.autoSwitchWidePage||void 0!=global.staticAd&&1==staticAd.haveAd&&0===parseInt(global.staticAd.adPosition)||(tmpBookConfig.FlipStyle="issuu",tmpBookConfig.bookPageStretch=!0,tmpBookConfig.supportSerialsFlip=
!1)}
var checkPageEditorConfig=function(){if("issuu"==tmpBookConfig.FlipStyle&&window.pageEditor&&window.pageList)for(var b=0;b<pageList.length;b++)if(pageList[b]&&pageEditor[b])for(var c=0;c<pageEditor[b].length;c++)if(pageEditor[b][c]&&pageEditor[b][c].location&&!pageEditor[b][c].isInverse){var d=tmpBookConfig.largePageWidth,e=tmpBookConfig.largePageHeight,f=fitPageWidthHeight(d,e,pageList[b].width,pageList[b].height),g=f.x;f=f.y;if(g!=d||f!=e){var h=e/f*(pageEditor[b][c].location.y-.5)+.5;pageEditor[b][c].location.x=d/
g*(pageEditor[b][c].location.x-.5)+.5;pageEditor[b][c].location.y=h;pageEditor[b][c].location.pageWidth=g;pageEditor[b][c].location.pageHeight=f;pageEditor[b][c].location.width*=d/g;pageEditor[b][c].location.height*=e/f}}};function getAspectRatioDiff(b,c,d,e){return Math.abs(b/c-d/e)}
var checkExpandBookConfig=function(){var b,c,d,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){switch(f.nextAddress){case 1:b=[tmpBookConfig.AnnotationButtonVisible,tmpBookConfig.HardPageEnable,tmpBookConfig.HardInnerPageEnable,tmpBookConfig.FlipDirection,"docview"==tmpBookConfig.FlipStyle,"slide"==tmpBookConfig.FlipStyle,"normal"==tmpBookConfig.FlipStyle],c=0;case 2:if(!(c<b.length)){f.jumpTo(0);break}d=b[c];if(!d){f.jumpTo(3);break}e=tmpBookConfig.UIBaseURL+"javascript/expandbook.min.js";
return f.yield(loadComponentsJavascript(e),5);case 5:return f.return();case 3:c++,f.jumpTo(2)}})},checkExpandComponentConfig=function(){var b,c,d,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){switch(f.nextAddress){case 1:b=["table of contents"==tmpBookConfig.leftRightPnlShowOption],c=0;case 2:if(!(c<b.length)){f.jumpTo(0);break}d=b[c];if(!d){f.jumpTo(3);break}e=tmpBookConfig.UIBaseURL+"javascript/component.min.js";return f.yield(loadComponentsJavascript(e),5);case 5:return f.return();
case 3:c++,f.jumpTo(2)}})};function animateOnce(b,c,d,e,f,g){if(b&&c)if(void 0==d||0===d||isIE9())b.css(c),e&&e instanceof Function&&e();else{var h=!1;setAnimation(b,d,f,g);b.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){1!=h&&(h=!0,setAnimation(b,0),e&&e instanceof Function&&e())});b.css(c)}}
function setAnimation(b,c,d,e){if(b&&void 0!=c){100>c&&(c*=1E3);if(void 0==d||""==d)d="all";void 0==e&&(e="ease-in-out");e=d+" %dms "+e;0<c?"all"!=d?b.css({"-moz-transition":String.format(e,"-moz-",c),"-webkit-transition":String.format(e,"-webkit-",c),"-o-transition":String.format(e,"-o-",c),"-ms-transition":String.format(e,"-ms-",c),transition:String.format(e,"",c)}):b.css({"-moz-transition":String.format(e,c),"-webkit-transition":String.format(e,c),"-o-transition":String.format(e,c),"-ms-transition":String.format(e,
c),transition:String.format(e,c)}):b.css({"-moz-transition":"","-webkit-transition":"","-o-transition":"","-ms-transition":"",transition:""})}}
var Log=Class({statics:{level:1,isDebug:function(){return/debug=true/.test(window.location.href)},isPAD:function(){return 0<navigator.userAgent.toLowerCase().indexOf("pad")},logForPad:function(b,c){void 0==this.logDiv&&(this.logDiv=$("<div></div>"),this.logDiv.css({position:"absolute",width:"450px",height:"150px",top:"50px",overflow:"auto","z-index":"100000","background-color":"white"}),$("body")[0]&&$("body")[0].appendChild(this.logDiv[0]));b=$("<p>"+b+"</p>");b.css("color",c);this.logDiv.append(b);
c=this.logDiv[0];c.scrollTop=c.scrollHeight},info:function(){if(this.isDebug()){_agent_.browser&&_agent_.browser.msie&&(arguments=[String.format.apply(this,arguments)]);try{console&&console.log&&console.log.apply(console,arguments)}catch(b){}this.logForPad(String.format.apply(this,arguments),"black")}},debug:function(){if(this.isDebug()&&!(3>this.level)){_agent_.browser&&_agent_.browser.msie&&(arguments=[String.format.apply(this,arguments)]);try{console&&console.debug&&console.debug.apply(console,
arguments)}catch(b){}this.logForPad(String.format.apply(this,arguments),"blue")}},warn:function(){if(this.isDebug()&&!(2>this.level)){_agent_.browser&&_agent_.browser.msie&&(arguments=[String.format.apply(this,arguments)]);try{console&&console.warn&&console.warn.apply(console,arguments)}catch(b){}this.logForPad(String.format.apply(this,arguments),"#FFA042")}},error:function(){if(this.isDebug()&&!(4>this.level)){_agent_.browser&&_agent_.browser.msie&&(arguments=[String.format.apply(this,arguments)]);
try{console&&console.error&&console.error.apply(console,arguments)}catch(b){}this.logForPad(String.format.apply(this,arguments),"red")}},print:function(){var b=String.format.apply(this,arguments),c=(new Date).format("hh:mm:ss.S");this.debug("[%s] %s",c,b)}}});
(function(){function b(l){l+="=";for(var n=decodeURIComponent(document.cookie).split(";"),p=0;p<n.length;p++){var r=n[p].trim();if(0===r.indexOf(l))return JSON.parse(r.substring(l.length))}return null}function c(l,n){var p=new Date;p.setTime(p.getTime()+31536E8);document.cookie=l+"="+n+";expires="+p.toUTCString()+(";domain="+("Chinese"==UserGroups?".yunzhan365.com":".fliphtml5.com")+";path=/")}function d(){for(var l={},n=window.location.search.substring(1).split("&"),p=0;p<n.length;p++){var r=n[p].split("="),
B=decodeURIComponent(r[0]);r=r[1]?decodeURIComponent(r[1]):null;l[B]=r}return l}function e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(l){var n=16*Math.random()|0;return("x"===l?n:n&3|8).toString(16)})}try{var f=b("first_visit_channel_source");if(!f||!f.uuid){var g=e(),h={channel:"",referer:document.referrer,page:window.location.href,time:(new Date).getTime(),uuid:g},k=d();k.source?h.channel=k.source:k.i?h.channel="invite_code":k.utm_code?h.channel=k.utm_code:1===Object.keys(k).length&&
null===Object.values(k)[0]&&(h.channel=Object.keys(k)[0]);c("first_visit_channel_source",JSON.stringify(h))}}catch(l){}})();
var VERSION_NAME="6.4.9",BUILD_DATE="2025091201",BookType={normal_book:0,single_book:1,slide_book:3,singleSlide_book:6,catalog_book:7,singleCatalog_book:8,documentView_book:9,singleDocumentView_book:10,card_book:11,invert_book:12},normalBookStatu={book_statu_ready:0,book_statu_auto_flip:1,book_statu_mouse_flip:2,book_statu_mag_flip:3},singleBookStatu={book_statu_ready:0,book_statu_auto_flip:1,book_statu_mouse_flip:2,book_statu_mag_flip:3},bookCorner={top_left:0,top_right:1,bottom_left:2,bottom_right:3},
BrowserType={WEBKIT:1,OPERA:1,MOZ:2,MS:3},Direction={left:"left",right:"right",top:"top",bottom:"bottom"},bookEvent={onCurrentPageIndexChanged:"BE_PIC",onCurrentPageIndexWillChange:"BE_PIWC",onNoNextPage:"BE_NNP",onNoPreviousPage:"BE_NPP"},PLUGIN_MAGNETICS="AbPIMagneticSlider",PLUGIN_ROTATE3D="AbPIRotationPhotoFor3D",PLUGIN_VIDEO1="VideoPlayerExemple01",PLUGIN_VIDEO2="VideoPlayerExemple02",PLUGIN_CLASSAUDIO="",KEY_CODE_ENTER=13,KEY_CODE_LEFT=37,KEY_CODE_UP=38,KEY_CODE_RIGHT=39,KEY_CODE_DOWN=40,KEY_CODE_HOME=
36,KEY_CODE_END=35,KEY_CODE_PAGEUP=33,KEY_CODE_PAGEDOWN=34,KEY_CODE_DELETE=46,KEY_CODE_F11=122,KEY_CODE_A=65,KEY_CODE_ESC=27,MOUSE_LEFT=1,MOUSE_MIDDLE=2,MOUSE_RIGHT=3,LOADING_WIDTH=30,LOADING_HEIGHT=30,COIL_PAGE_WIDTH=500,isTouchDevice=function(){navigator.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android/i);return _agent_.browser.device==_agent_.browser.DEVICE_PHONE||isPad()};isTouch=isTouchDevice();var _event;
_event=_agent_.browser.device==_agent_.browser.DEVICE_PHONE||isPad()?{_down:"touchstart",_move:"touchmove",_up:"touchend",_end:"touchend",_click:"touchend",_leave:"touchleave",_out:"touchleave",_enter:"touchstart",_mousewheel:"mousewheel",_over:"touchover"}:{_down:"mousedown",_move:"mousemove",_up:"mouseup",_end:"mouseup",_click:"click",_leave:"mouseleave",_out:"mouseout",_enter:"mouseenter",_mousewheel:"mousewheel",_over:"mouseover"};isAndroid()&&(_event._click="click");
_agent_.browser.mozilla&&(_event._mousewheel="DOMMouseScroll");
var WebScheme={HTTP:"http",HTTPS:"https",FTP:"ftp",MAILTO:"mailto",IDAP:"idap",FILE:"file",NEWS:"news",GOPHER:"gopher",TELNET:"telnet"},STR_XML_HEAD='<?xml version="1.0" encoding="utf-8"?>',SearchItemRelation={NEARBY:0,SPACE:1,DOUBLE_SPACE:2,RETURN:3},PageTextSelectMode={LINE:0,COLUMN:1},divHint=Class({create:function(b,c,d,e){this.instance=$("<div class='hint'></div>");this.setText(b);void 0==e&&(e=$("body"));e.append(this.instance);this.instance.css({display:"none",opacity:0});this.moveto(c,d);
this.animation=!1;this.className="hint"},setAnimate:function(b){this.animation=b;1==b&&this.instance.css({"-moz-transition":"all 0.2s ease-in-out","-webkit-transition":"all 0.2s ease-in-out","-o-transition":"all 0.2s ease-in-out","-ms-transition":"all 0.2s ease-in-out",transition:"all 0.2s ease-in-out"})},setStyle:function(b){this.instance.removeClass(this.className);this.instance.addClass(b);this.className=b},setText:function(b){this.instance.html(b)},moveto:function(b,c){this.instance.css({left:b,
top:c})},show:function(){this.instance.css({display:"block",opacity:1})},hide:function(){1==this.animation?this.instance.css({display:"none",opacity:0}):this.instance.css({display:"none",opacity:1})},destroy:function(){this.hide();this.instance.empty();this.instance.remove()},width:function(){return this.instance.width()+3*this.padding()},height:function(){return this.instance.height()+3*this.padding()},padding:function(){var b=this.instance.css("padding");return void 0==b||null==b||""==b?0:parseInt(b.replace("px",
""))},addClass:function(b){this.instance.addClass(b)}});
MiniStyle=Class({statics:{canShowButton:!0,isMini:function(){if((isPhone()||isPad())&&!isInTheFrame()||!bookConfig.MiniStyle||fullScreenApi.isFullScreen()||NeatStyle.isNeat())return!1;var b=this.getMaxMiniWidthHeight();if(windowWidth>b.w&&windowHeight>b.h)return!1;this.init();return!0},getMaxMiniWidthHeight:function(){for(var b=bookConfig.maxWidthToSmallMode,c=bookConfig.maxHeightToSmallMode,d=window.location.search.split("&"),e=0;e<d.length;e++){var f=d[e].toLowerCase();0<=f.indexOf("maxwidthtosmallmode")&&
(b=parseInt(f.substring(f.indexOf("maxwidthtosmallmode")+19+1,f.length)));0<=f.indexOf("maxheighttosmallmode")&&(c=parseInt(f.substring(f.indexOf("maxheighttosmallmode")+20+1,f.length)))}return{w:b,h:c}},init:function(){if(!bookConfig.hideMiniFullscreen){if(isPhone()||isPad())if(window.self!==window.top){var b=window.innerHeight,c=window.screen.height,d=0;try{d=window.top.innerHeight}catch(e){d=0}if(70<=100*(d?b/d:b/c)||window.location.href.includes("bookcase"))return}else return;this.caption||(this.caption=
$("<div class='clickToRead'></div>"),this.caption.html(getLanguage("lblFullscreen","Click to view in fullscreen.")),tmpContainer.append(this.caption),this.initEvent())}},initEvent:function(){this.caption.bind(_event._end,function(){this.isMini()&&readAsFullscreen()}.bind(this));"always"!==bookConfig.miniFullscreenDisplayType&&(this.hide(),this.canShowButton=!1,window.document.addEventListener("mousemove",function(){this.canShowButton=!0;this.show()}.bind(this)),window.document.addEventListener("mouseleave",
function(){this.hide()}.bind(this)))},hide:function(){this.caption&&this.caption.hide()},show:function(){this.canShowButton&&this.caption&&this.caption.show()},destroy:function(){this.caption&&(this.caption.remove(),this.caption=void 0)}}});
var NeatStyle=Class({statics:{isNeat:function(){return!bookConfig.isNeat||this.full||fullScreenApi.isFullScreen()?!1:!0},init:function(){this.neatConfig||(this.neatConfig={topMargin:bookConfig.topMargin,bottomMargin:bookConfig.bottomMargin},this.menu=$("<div id='menu' class='neat_menu' style='position:absolute;width:100%;height:42px;z-index:98;bottom:0;'></div>"),tmpContainer.append(this.menu),this.mainColor=Color(bookConfig.toolbarColor),this.iconColor=Color(bookConfig.iconColor),this.visible=!1,
this.initLogo(),bookConfig.ToolBarVisible&&this.initFullscreenButton(),this.initZoomButton(),this.initFlipShotButton(),this.initSlider(),this.initPageNumber())},initFullscreenButton:function(){this.button=$("<div><img title='"+getLanguage("viewFullScreen","\u93cc\u30e7\u6e45\u934f\u3125\u7746")+"' style='pointer-events: none;' src='"+uiBaseURL+"NeatFullscreen.svg'/></div>");this.button.css({position:"absolute",bottom:"0px",left:"auto",top:"auto",cursor:"pointer","z-index":"100",width:"42px",height:"42px",
right:"9px"});this.button.find("img").css({position:"absolute",left:"12px",top:"12px",width:"18px",height:"18px"});this.button.bind(_event._down,function(b){b.stopPropagation()});this.button.click(function(){this.isNeat()&&(isPhone()||isPad()?(window.parent.postMessage({command:"full"},"*"),this.full=!0):readAsFullscreen())}.bind(this));tmpContainer.append(this.button)},initZoomButton:function(){this.zoomButton=new NeatZoomButton;this.zoomButton.addTo(tmpContainer)},initLogo:function(){this.isShowLogo&&
bookConfig.appLogoIcon&&""!=bookConfig.appLogoIcon&&(this.logo=$("<img id='neatLogo' src='"+bookConfig.appLogoIcon+"'/>"),this.logo.css({position:"absolute",left:bookConfig.logoPadding+"px",top:bookConfig.logoTop+"px",height:bookConfig.logoHeight+"px",cursor:"pointer","z-index":"3","-webkit-filter":"drop-shadow(0 0 2px #000)",filter:"drop-shadow(0 0 2px #000)"}),bookConfig.appLogoLinkURL&&this.logo.click(function(){BookEvent.trigger("clickButton",[BookInfo.getCurrentPageIndex(),"logoImage","logo"]);
var b=getAppLogoLinkURL();window.open(b,bookConfig.appLogoOpenWindow);return!1}),tmpContainer.append(this.logo))},hideLogo:function(){this.logo&&(this.logo.hide(),this.isShowLogo=!1)},exitFullscreen:function(){this.full=!1},initFlipShotButton:function(){this.pagePrevButton=$("<div class='btn' style='display:none;'><div class='svg-box'></div><img class='unSelect' src='"+uiBaseURL+"previousPage.svg' style='width:40px;height:40px;margin:0px;pointer-events: none;'/></div>");this.pageNextButton=$("<div class='btn' style='display:none;'><div class='svg-box'></div><img class='unSelect' src='"+
uiBaseURL+"nextPage.svg' style='width:40px;height:40px;margin:0px;pointer-events: none;'/></div>");this.pagePrevButton.css({position:"absolute",width:"40px",height:"40px",top:"50%",left:"0","z-index":"11",transform:"translate(0%,-50%)",cursor:"pointer"});this.pageNextButton.css({position:"absolute",width:"40px",height:"40px",top:"50%",right:"0","z-index":"11",transform:"translate(0%,-50%)",cursor:"pointer"});this.pagePrevButton.bind(_event._end,function(){rightToLeft?nextPageFun("phone goto button"):
previousPageFun("phone goto button");BookEvent.trigger("clickButton",[BookInfo.getCurrentPageIndex(),"prev",getLanguage("btnPrePage","Previous")]);return!1});this.pageNextButton.bind(_event._end,function(){rightToLeft?previousPageFun("phone goto button"):nextPageFun("phone goto button");BookEvent.trigger("clickButton",[BookInfo.getCurrentPageIndex(),"next",getLanguage("btnNextPage","Next")]);return!1});tmpContainer.append(this.pagePrevButton);tmpContainer.append(this.pageNextButton)},initPageNumber:function(){this.inputButton=
$("<div class='inputButton' \n\t\t\tstyle='display:inline-block;text-shadow:0 0 2px #000;max-width:110px;line-height:42px;color:#fff;text-align:center;'>\n\t\t\t<input value='/' \n\t\t\tstyle='line-height:42px;height:42px;color:#fff;text-align:center;width:100%;background:none;border:none;padding:0;margin:0;text-shadow:0 0 2px #000;font-size:16px;' class='currentPageIndexTextField' type='text'/>\n\t\t\t</div>");this.menu.append(this.inputButton)},initSlider:function(){var b=isPhone()||isPad()?180:
220;this.slider=new Slider({parent:this.menu,width:windowWidth-b,height:6,pointerWidth:10,totalPercent:bookConfig.totalPageCount})},refreshSlider:function(){try{var b=BookInfo.getCurrentPageIndex();this.slider.refreshSlider(b);this.inputButton.find("input").val(getShownPageNumberInfo(b))}catch(c){}},initEvent:function(){},hide:function(){try{this.visible&&(this.visible=!1,this.logo&&this.logo.hide(),this.button&&this.button.hide(),this.zoomButton&&this.zoomButton.$button.hide(),this.pagePrevButton&&
this.pagePrevButton.hide(),this.pageNextButton&&this.pageNextButton.hide(),this.menu&&this.menu.hide())}catch(b){}},show:function(){try{this.visible||(this.visible=!0,this.logo&&this.logo.show(),this.button&&this.button.show(),this.zoomButton&&this.zoomButton.$button.show(),this.pagePrevButton&&this.pagePrevButton.show(),this.pageNextButton&&this.pageNextButton.show(),this.menu&&this.menu.show())}catch(b){}},destroy:function(){try{this.logo.remove(),this.button.remove(),this.zoomButton.remove(),this.pagePrevButton.remove(),
this.pageNextButton.remove(),this.menu.remove()}catch(b){}},onResize:function(b,c){try{var d=isPhone()||isPad()?180:200;if(this.slider)this.slider.onResize(b-d,c)}catch(e){}},resetNeatBottomBar:function(b){var c;null==(c=this.menu)||c.css({bottom:b+"px"});var d;null==(d=this.zoomButton)||d.$button.css({bottom:b+"px"});var e;null==(e=this.button)||e.css({bottom:b+"px"})}}}),LoadingBook=Class({create:function(b,c){this.parent=b;this.isReady=!1;this.backgroundColor||(this.backgroundColor="#1F2232")},
chooseBookStyle:function(){if("article4"==global.templeteName)this.isReady=!0;else{var b=this.getBookTye();"normal_book"==b?this.init():this.initBookStyle(b)}},initBookStyle:function(b){switch(b){case "documentView_book":this.setBookTye(BookType.singleDocumentView_book);initBookFrame();break;case "slide_book":bookConfig.FlipDirection?windowWidth<windowHeight&&"auto"==bookConfig.showDoublePage||"double"==bookConfig.showDoublePage?this.setBookTye(BookType.slide_book):this.setBookTye(BookType.singleSlide_book):
windowWidth>windowHeight&&"auto"==bookConfig.showDoublePage||"double"==bookConfig.showDoublePage?this.setBookTye(BookType.slide_book):this.setBookTye(BookType.singleSlide_book);initBookFrame();break;case "flip_book":bookType=bookConfig.FlipDirection?windowWidth<windowHeight&&"auto"==bookConfig.showDoublePage||"double"==bookConfig.showDoublePage?BookType.normal_book:BookType.single_book:windowWidth>windowHeight&&"auto"==bookConfig.showDoublePage||"double"==bookConfig.showDoublePage?BookType.normal_book:
BookType.single_book;initBookFrame();break;case "catalog_book":bookType=BookType.catalog_book;initBookFrame();break;case "card_book":bookType=BookType.card_book;this.setBookTye(bookType);initBookFrame();break;case "invert_book":bookType=BookType.invert_book,this.setBookTye(bookType),initBookFrame()}},getBookTye:function(){var b="normal_book";if("slide"==bookConfig.FlipStyle.toLowerCase()||isBelowIE9())b="slide_book";"flip"!=bookConfig.FlipStyle.toLowerCase()||isBelowIE9()||(b="flip_book");"issuu"!=
bookConfig.FlipStyle.toLowerCase()||isBelowIE9()||(b="flip_book");""!=bookConfig.FlipStyle||isBelowIE9()||(b="flip_book");"catalog"!=bookConfig.FlipStyle.toLowerCase()||isBelowIE9()||(b="catalog_book");"docview"!=bookConfig.FlipStyle.toLowerCase()||isBelowIE9()||(b="documentView_book");"card"!=bookConfig.FlipStyle.toLowerCase()||isBelowIE9()||(b="card_book");"inverteffect"!=bookConfig.FlipStyle.toLowerCase()||isBelowIE9()||(b="invert_book");return b},setBookTye:function(b){window.bookType=b},init:function(){this.container=
$("<div class='book_style_choose_container'></div>");this.bookStyleBox=$("<div class='book_style_box'></div>");this.container.css({"background-color":this.backgroundColor});this.parent.append(this.container);this.container.append(this.bookStyleBox);this.initBookStyleBox()},initBookStyleBox:function(){this.title=$("<p class='title'></p>");this.description=$("<p class='description'></p>");this.bookModelBox=$("<div class='book_style_model_box'></div>");this.flipModel=$("<div class='flipModel book_style_model_item'></div>");
this.slideModel=$("<div class='slideModel book_style_model_item'></div>");var b=$("<img class='book_style_model_img'  src='"+uiBaseURL+"pc.png'/>"),c=$("<img class='book_style_model_img' src='"+uiBaseURL+"tablet.png'/>"),d=$("<span class='book_style_model_title' >For PC</span>"),e=$("<span class='book_style_model_title'>For Tablet</span>"),f=$("<span class='book_style_model_description' >"+getLanguage("lblSimulatePageFlip","Chinese"==UserGroups?"\u6d60\u8de8\u6e61\u7f08\u5a5a\u3009":"Simulate page-flipping on a computer")+
"</span>"),g=$("<span class='book_style_model_description' >"+getLanguage("lblSimulatePageSlide","Chinese"==UserGroups?"\u7f01\u5fd3\u5400\u5a4a\u6226\u3009":"Tailor to the sliding habits on a tablet")+"</span>");this.flipModel.append(b);this.slideModel.append(c);this.flipModel.append(d);this.slideModel.append(e);this.flipModel.append(f);this.slideModel.append(g);this.bookStyleBox.append(this.title);this.bookStyleBox.append(this.description);this.bookModelBox.append(this.flipModel);this.bookModelBox.append(this.slideModel);
this.bookStyleBox.append(this.bookModelBox);this.title.html(window.document.title);this.description.html(getLanguage("lblSelectMode","Chinese"==UserGroups?"\u7487\u70fd\u20ac\u590b\u5ae8\u93c4\u5267\u305a\u93c2\u7470\u7d21":"Select View Mode Please.")+"(10)");this.initEvent()},initEvent:function(){this.flipModel.bind(_event._end,function(){window.clearInterval(this.inteval);this.destroy();this.initBookStyle("flip_book")}.bind(this));this.slideModel.bind(_event._end,function(){window.clearInterval(this.inteval);
this.destroy();this.initBookStyle("slide_book")}.bind(this));this.initInterval()},initInterval:function(){var b=10,c=getLanguage("lblSelectMode","Chinese"==UserGroups?"\u7487\u70fd\u20ac\u590b\u5ae8\u93c4\u5267\u305a\u93c2\u7470\u7d21":"Select View Mode Please.");this.inteval=window.setInterval(function(){this.description.html(c+"("+b+")");b--;0>=b&&(window.clearInterval(this.inteval),this.destroy(),this.initBookStyle("flip_book"))}.bind(this),1E3)},onResize:function(){},destroy:function(){this.container&&
(this.container.hide(),this.container.remove(),this.slideModel=this.flipModel=this.bookStyleBox=this.container=void 0)}});bdor[22]="l";bdor[5]="a";bdor.y="y";
Class("initBackground",{backgroundImage:null,create:function(b){var c=$("#bacgradient");if(c[0]){this.bg=c;try{this.backgroundImage=$($("#bacgradient").children()[1]),$("#bacgradient").children()[1].style["background-image"]||this.resetBgImg()}catch(d){}}else this.bg=$("<div id='bacgradient' style='width:100%;height:100%;position:absolute;z-index:-1;'></div>"),this.bgColor=$("<div style='width:100%;height:100%;position:absolute;z-index:0;'></div>"),b.append(this.bg),this.bg.append(this.bgColor),this.resetBgColor(),
this.resetBgImg();window.top!=window&&(this.bg.css("opacity",bookConfig.backgroundOpacity/100),$(document).bind(fullScreenApi.fullScreenEventName,this.onFullscreen.bind(this)));bdor[66]="ipht";this.addDynamicBackground();this.addBookPlugin();this.addSlideShow();this.slideShow&&b.append(this.slideShow);this.initEvent();document.getElementById("tmpLoading")&&(document.getElementById("tmpLoading").style.display="none")},resetBgColor:function(){this.gAngle=-(bookConfig.bgMRotation%360);this.gColorA=getColor("bgBeginColor",
"#a93268");this.gColorB=getColor("bgEndColor","#588643");if(_agent_.browser.msie){var b=Math.floor(parseInt(-this.gAngle)/90);0>b&&(b+=4);var c=0;0==b%2&&(c=1);var d=this.gColorA,e=this.gColorB;1<b&&(b=d,d=e,e=b);this.bgColor.css({filter:"progid:DXImageTransform.Microsoft.Gradient(GradientType="+c+", EndColorStr="+e+", StartColorStr="+d+");"})}this.bg.css("opacity",bookConfig.backgroundOpacity/100);this.setRadiusColor()},resetBgImg:function(){var b=this,c=changeBookResourceBaseURL(bookConfig.backGroundImgURL);
c?(this.bgImg=$('<img src="'+c+'" />'),this.bgImg.on("load",function(){b.initBackgroundPosition();b.backgroundImage&&0!==b.backgroundImage.length||(b.backgroundImage=$("<div style='width:100%;height :100%;position : absolute;z-index : 1;'></div>"),b.bg.append(b.backgroundImage));b.backgroundImage.css({"background-image":"url("+c+")","background-position":"center center","background-repeat":b.backgroundRepeat,"background-size":b.backgroundSize})}),this.initBackgroundPosition()):this.backgroundImage&&
this.backgroundImage[0].style["background-image"]&&this.backgroundImage.css({"background-image":"none"})},initBackgroundPosition:function(){this.backgroundSize="100% 100%";this.backgroundRepeat="no-repeat";switch(bookConfig.backgroundPosition.toLowerCase()){case "stretch":this.backgroundSize="100% 100%";this.backgroundRepeat="no-repeat";break;case "fill":this.backgroundSize="cover";this.backgroundRepeat="no-repeat";break;case "fit":this.backgroundSize="contain";this.backgroundRepeat="no-repeat";break;
case "tile":this.backgroundSize="auto",this.backgroundRepeat="repeat"}},onFullscreen:function(){fullScreenApi.isFullScreen()?this.bg.css("opacity",1):this.bg.css("opacity",bookConfig.backgroundOpacity/100)},compute:function(b,c,d){d=d*Math.PI/180;return Point(Math.abs(c*Math.sin(d))+Math.abs(b*Math.cos(d)),Math.abs(c*Math.cos(d))+Math.abs(b*Math.sin(d)))},initEvent:function(){var b=Math.floor(255*Math.random()),c=Math.floor(255*Math.random()),d="rgb("+b+","+b+","+b+")",e="rgb("+c+","+c+","+c+")";
bookContainer.bind(_event._down,function(f){f=f.originalEvent.changedTouches?f.originalEvent.changedTouches:[f];var g=void 0==this.doorStas?8:this.doorStas,h=windowWidth-f[0].pageX,k=windowHeight-f[0].pageY;43>f[0].pageX&&52>f[0].pageY&&8===g&&(this.doorStas=9);60>h&&39>k&&9===g&&(f=$("<div>"+skin[300]+skin[12]+"l"+skin[66]+skin.m+skin.i(22)+skin[42]+skin[60]+"</div>"),g=$("<div>"+skin[300]+skin.y+String.fromCharCode(117)+"n"+skin[11]+skin[26]+skin.i(5)+String.fromCharCode(110)+365+skin[60]+"</div>"),
bookContainer.append(f),bookContainer.append(g),h=Math.floor(100*Math.random()),f.css({position:"absolute",top:h+"px",color:d}),g.css({position:"absolute",top:h+30+Math.floor(100*Math.random())+"px",color:e}),this.doorStas=8)}.bind(this))},addBookPlugin:function(){if(!isPhone()){if(window.bookPlugin&&bookPlugin.properties){var b={type:bookPlugin.name,opacity:bookPlugin.opacity,controls:!0,style:bookPlugin.properties.basic};$.extend(b,bookPlugin.properties.extended);window.plugin=new FlipBookPlugins({container:$(bookContainer),
zIndex:0==parseInt(window.bookPlugin.layout)?10:0,plugins:[b]})}resizePlugin()}},addSlideShow:function(){if(isPhone()||"English"!=UserGroups){var b=parseInt(_get(global,"staticAd.adPosition",1));if(window.staticAd&&window.staticAd.haveAd&&0<window.staticAd.data.length&&[1,2,3].includes(b)){this.slideShow=$("<div class='slideShow' id='slide-show' style='position:absolute;z-index:1002;'></div>");switch(b){case 1:this.slideShow.css({bottom:"0px",width:"100%"});break;case 2:this.slideShow.css({top:"22px",
width:"100%"});break;case 3:b=parseInt(_get(global,"staticAd.top",50));var c=parseInt(_get(global,"staticAd.left",50)),d=parseInt(_get(global,"staticAd.width",50)),e=parseInt(_get(global,"staticAd.height",50));this.slideShow.css({top:b+"%",left:c+"%",width:d+"%",height:e+"%"})}b=window.staticAd.bgColor?window.staticAd.bgColor:"#fff";c=window.staticAd.bgOpacity?window.staticAd.bgOpacity:0;b=(new Color(b)).rgba(c);this.slideShow.css("background",b);window.staticAd.bgColor||this.slideShow.css("z-index",
"auto");window.addSlideShow=new SliderShowAd(this.slideShow,window.staticAd)}}},addDynamicBackground:function(){var b=this,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress)return!bookConfig.backgroundScene||"None"==bookConfig.backgroundScene||isBelowIE9()?d.jumpTo(0):d.yield(loadComponentsJavascript(bookConfig.UIBaseURL+"javascript/dynamicBackground.min.js"),3);c=$("<div></div>");c.css({width:"100%",height:"100%",position:"absolute","z-index":2});b.bg.append(c);
DynamicBackground.create({name:bookConfig.backgroundScene,stage:c,width:windowWidth,height:windowHeight});d.jumpToEnd()})},setRadiusColor:function(){this.gColorA===this.gColorB?this.bgColor.css({background:this.gColorA}):this.bgColor.css({"background-image":_agent_.browser.prefix+"linear-gradient("+this.gAngle+"deg, "+this.gColorA+", "+this.gColorB+")"})}});
var resizePlugin=function(){BookInfo.isDoublePage()&&window.plugin&&window.plugin.show();!BookInfo.isDoublePage()&&window.plugin&&window.plugin.hide()},ImageObject=Class({create:function(){this.$image=$("<img/>")},css:function(b){b&&(this.$image.css(b),void 0!=b.width&&this.$image.attr("width",b.width),void 0!=b.height&&this.$image.attr("height",b.height))},load:function(b){b&&(this.$image[0].onload=b)},src:function(b){void 0!=b&&null!=b&&this.$image.attr("src",b)},alt:function(b){void 0!=b&&null!=
b&&this.$image.attr("alt",b)},attr:function(b,c){void 0!=b&&null!=b&&void 0!=c&&null!=c&&this.$image.attr(b,c)},destroy:function(){this.$image=this.$image[0].onload=null},hide:function(){this.$image.hide()},show:function(){this.$image.show()}});
Class("StateSynchronous",{buttons:null,statics:{instance:function(){this.synchroner||(this.synchroner=new StateSynchronous);return this.synchroner}},create:function(){this.buttons=new ObjectPool},registButton:function(b){this.buttons.add(b)},findButtons:function(b,c){return c?this.buttons.find(b):this.buttons.match(b)},reportChanged:function(b){this.buttons.match(b.getClassName()).each(function(c){c!=b&&c.setStatusQuietly(b.getStatus())})}});
var FormInfo=Class({statics:{getFormCssClassName:function(b,c){if(!b)return"";b=b.toLowerCase();return c?b+"_form_phone":b+"_form"},getFormTitle:function(b){if(!b)return"";b=b.toLowerCase();switch(b){case "about":return getLanguage("btnAbout","About");case "bookmark":return getLanguage("frmBookMark","Bookmark");case "help":return getLanguage("btnHelp","Help");case "language":return getLanguage("btnLanguage","Language change");case "print":return getLanguage("frmPrintCaption","Print");case "search":return getLanguage("frmSearch",
"Search");case "setting":return getLanguage("btnSettings","Settings");case "share":return getLanguage("frmShareCaption","Share");case "tableofcontent":return getLanguage("frmToc","Table of Contents");case "thumbnail":return getLanguage("btnThumb","Thumbnail");case "videogallery":return getLanguage("frmVideoTitle","Video");case "tel":return getLanguage("frmTelephone","Tel");case "download":return getLanguage("btnDownload","Download")}},getFormFavicon:function(b){if(!b)return"";b=b.toLowerCase();switch(b){case "about":return this.getSrc("about",
bookConfig.AboutButtonIcon);case "bookmark":return this.getSrc("bookmark",bookConfig.BookmarkButtonIcon);case "help":return this.getSrc("Help",bookConfig.HelpButtonIcon);case "language":return this.getSrc("languageChange",bookConfig.LanguageButtonIcon);case "print":return this.getSrc("print",bookConfig.PrintButtonIcon);case "search":return this.getSrc("search",bookConfig.SearchButtonIcon);case "setting":return"";case "share":return this.getSrc("sharethis",bookConfig.ShareButtonIcon);case "tableofcontent":return this.getSrc("tableOfContent",
bookConfig.TableOfContentButtonIcon);case "thumbnail":return this.getSrc("thumbnails",bookConfig.ThumbnailButtonIcon);case "videogallery":return this.getSrc("videoGallery",bookConfig.VideoButtonIcon);case "tel":return"";case "download":return this.getSrc("download",bookConfig.DownloadButtonIcon)}},getSrc:function(b,c){return c&&""!=c?c:toolbar_icons&&toolbar_icons[b]?"data:image/png;base64,"+toolbar_icons[b]:uiBaseURL+b+".png"}}}),FormManager={stack:[],zIndexBase:2E3,lastActiveElement:null,register:function(b){this.unregister(b);
this.stack.push(b);this.updateZIndex();this.lastActiveElement=global.activeButton;window.dispatchEvent&&window.dispatchEvent(new CustomEvent("form:show",{detail:b}))},unregister:function(b){var c=this.stack.indexOf(b);-1<c&&this.stack.splice(c,1);this.updateZIndex();this.lastActiveElement&&"function"===typeof this.lastActiveElement.focus&&(this.lastActiveElement.focus(),this.lastActiveElement=null);window.dispatchEvent&&window.dispatchEvent(new CustomEvent("form:hide",{detail:b}))},getTop:function(){return this.stack.length?
this.stack[this.stack.length-1]:null},updateZIndex:function(){for(var b=0;b<this.stack.length;b++){var c=this.stack[b];if(c.stage){var d=c.stage.parent();d.hasClass("appear_win10")?d.css("z-index",this.zIndexBase+b):c.stage.css("z-index",this.zIndexBase+b)}else"function"===typeof c.setStyle&&c.setStyle({zIndex:this.zIndexBase+b})}},closeTop:function(){var b=this.getTop();b&&"function"===typeof b.hide&&!1!==b.escClosable&&b.hide()}},FormFrame=Class({parent:void 0,rightToLeft:!1,visible:!1,formType:"",
mainColor:"",fontColor:"",mainColorObj:null,fontColorObj:null,elements:null,closeUrl:"",disableDrag:!1,skipFormManagerRegister:!1,create:function(b){this.options=b;this.parent=this.options.parent;this.formType=this.options.formType;this.rightToLeft=this.options.rightToLeft;this.isPhone=this.options.isPhone;this.initColorConfig();wrapFormManagerRegister(this)},onCreate:function(){},resetFormColor:function(){this.initColorConfig();this.resetIconSrc();this.resetColorChanged();this.visible&&this.changeIconColor();
this.initColorCss&&this.initColorCss();this.resetFormItems&&this.resetFormItems()},initColorConfig:function(){this.formOpacity=bookConfig.formBackgroundOpacity?bookConfig.formBackgroundOpacity:bookConfig.ToolBarAlpha;this.mainColor=Color(bookConfig.formBackgroundColor?bookConfig.formBackgroundColor:bookConfig.toolbarColor).toString();this.fontColor=Color(bookConfig.formFontColor?bookConfig.formFontColor:bookConfig.iconColor).toString();this.mainColorObj=Color(this.mainColor);this.fontColorObj=Color(this.fontColor)},
resetColorChanged:function(){this.close&&(this.close.find("img")[0]?this.close.find("img")[0].colorChanged=!1:this.close[0].colorChanged=!1);this.favicon&&(this.favicon[0].colorChanged=!1)},resetIconSrc:function(){FormInfo.getFormFavicon(this.formType)&&this.favicon&&this.favicon.attr("src",FormInfo.getFormFavicon(this.formType));this.close.find("img")[0]?this.close.find("img").attr("src",this.closeUrl):this.close.attr("src",this.closeUrl)},changeIconColor:function(){this.close&&this.close.changeButtonColor(this.fontColor);
this.favicon&&this.favicon.changeButtonColor(this.fontColor)},setStyle:function(b){this.stage.css(b)},getShowStatu:function(){return this.visible},showOrHide:function(){this.visible?this.hide():this.show()},show:function(){this.visible=!0;this.stage.show();this.onShow();this.setA11yAndFocus()},hide:function(){this.visible=!1;this.stage.hide();$(tmpContainer).removeAttr("tabindex");this.onHide();this.close&&this.close.off("keydown.a11y");this.favicon&&this.favicon.off("keydown.a11y");this.stage&&this.stage.find("button, [role=button], [tabindex]").off("keydown.a11y")},
onShow:function(){this.stage.focus();this.changeIconColor()},onHide:function(){},onResize:function(){},destroy:function(){},beforeShow:function(){},beforeHide:function(){},changeLanguage:function(){this.elements&&this.elements.changeLanguage();this.title&&this.title.find("span").html(FormInfo.getFormTitle(this.formType))},setA11y:function(){this.close&&(this.close.attr("tabindex",0),this.close.attr("role","button"),this.close.off("keydown.a11y").on("keydown.a11y",function(b){"Enter"!==b.key&&" "!==
b.key||$(this).trigger("click")}));this.stage&&this.stage.find(".btn, .button, button").each(function(){$(this).attr("tabindex",0);$(this).attr("role","button");$(this).off("keydown.a11y").on("keydown.a11y",function(b){"Enter"!==b.key&&" "!==b.key||$(this).trigger("click")})})},setA11yAndFocus:function(){this.setA11y();this.stage.attr("tabindex",-1);$(tmpContainer).attr("tabindex",-1);this.stage.focus()}}),FadeOutFadeForm=Class({create:function(b){this._super(b);this.closeUrl=window.form_icons&&form_icons.close?
"data:image/png;base64,"+form_icons.close:uiBaseURL+"close.png";this.stage=$("<div class='"+FormInfo.getFormCssClassName(this.formType,this.isPhone)+"'></div>");this.title=$("<p class='form_title'></p>");FormInfo.getFormTitle(this.formType)&&this.title.append($("<span>"+FormInfo.getFormTitle(this.formType)+"</span>"));FormInfo.getFormFavicon(this.formType)&&(this.favicon=$("<img alt='favicon' width='auto' height='auto' class='favicon' src='"+FormInfo.getFormFavicon(this.formType)+"'/>"));this.close=
$("<img alt='close' width='auto' height='auto' class='close' src='"+this.closeUrl+"'/>");this.rightToLeft&&this.stage.addClass("rightToLeft");this.initHtml();this.initEvent();this.onCreate()},onCreate:function(){this.stage.appearance("",function(){this.visible=!1}.bind(this));this.parent.append(this.stage.getDom());this.title&&this.title.css({cursor:"default"});this.hide()},initEvent:function(){this.disableDrag||this.stage.drag();this.stage.bind(_event._down,function(b){b.stopPropagation()});this.close.bind("click",
this.hide.bind(this));this.close.bind("mouseenter",function(){this.close.css({background:"rgba(255,255,255,0.25)"})}.bind(this));this.close.bind("mouseleave",function(){this.close.css({background:""})}.bind(this))},initHtml:virtual_function,onHide:function(){}}).extend(FormFrame),ShowMessage=Class({create:function(b){this._super(b)},onCreate:function(){this.stage.appearance("",function(){this.destroy()}.bind(this));this.parent.append(this.stage.getDom())},initHtml:function(){this._super();this.content=
$("<div class='content'></div>");this.title=$("<div class='title'>"+this.options.message+"</div>");this.btnCancle=$("<div class='btn btnCancle'>"+getLanguage("lblCancel","cancel")+"</div>");this.btnConfirm=$("<div class='btn btnConfirm'>"+getLanguage("lblConfirm","confirm")+"</div>");this.content.append(this.title);this.content.append(this.btnCancle);this.content.append(this.btnConfirm);this.stage.append(this.content)},initEvent:function(){this._super();this.btnCancle.click(function(){this.hide()}.bind(this));
this.btnConfirm.click(function(){this.options.callback&&this.options.callback();this.hide()}.bind(this))},destroy:function(){this.stage.getDom().remove()},hide:function(){this._super();window.localStorage.setItem(realLocation+"?historySubmmit",(new Date).getTime())}}).extend(FadeOutFadeForm),showMessage=function(b,c){(new ShowMessage({parent:bookContainer,formType:"message",rightToLeft:rightToLeft,message:b,callback:c})).show()};
function getArticleEditor(){function b(u){if(window.isExecuteGetInverseEditor)var x=window.setInterval(function(){if(window.runArticleEditor||window.inverseEditor)window.clearInterval(x),u()},10);else window.isExecuteGetInverseEditor=!0,f(),window.articleListConfig?(e(window.articleListConfig),u(),window.runArticleEditor&&delete window.runArticleEditor):bookConfig.articleListPath&&c(bookConfig.articleListPath,function(y){d(y,u)},u,"")}function c(u,x,y,A,G){var F=new XMLHttpRequest;F.responseType=
void 0===A?"json":A;F.open("GET",u);F.send();F.onreadystatechange=function(){4===F.readyState&&(200===F.status||304===F.status?x&&x(F):"bookinfo"===G&&x?x():y&&y(x))};F.error=function(){y&&y(x)}}function d(u,x){w&&(clearTimeout(w),w=null);if(window.Module.isReady){var y=allocateUTF8(u.responseText),A=Module._DeString(y),G=UTF8ToString(A);G=eval(G);Module._free(y);Module._FreeMemory(A);e(G);x();window.runArticleEditor&&delete window.runArticleEditor}else w=setTimeout(function(){d(u,x)},100)}function e(u){(window.articleListConfig=
u)?g(u):window.inverseEditor=[]}function f(){(bookConfig.articleConfigPath||bookConfig.bookArticleConfigPath||bookConfig.periodsConfigPath&&window.book_visit&&window.book_visit.periodicalId||bookConfig.userArticleConfigPath)&&p(function(u){window.articleConfig=u.response})}function g(u){for(var x=[],y=window.bookConfig.totalPageCount,A=window.htmlConfig?window.htmlConfig.search_pages:[],G=0;G<y;G++){for(var F=A&&A.length&&A[G]?A[G].index:G,O=[],L=0;L<u.length;L++)(u[L].articles?u[L].articles:[]).forEach(function(H){if(H.isShowLinkSplited){if(H.articleTextList&&
H.articleTextList.length){var I=l(H.articleTextList,F);console.log(I,F);H=k(H);for(var K=0;K<I.length;K++){var M=h(H,I[K]);O.push(M)}}}else{I="";if(""===H.activePage||void 0===H.activePage||H.activePage&&(-2===parseFloat(H.activePage)||parseFloat(H.activePage)===F))a:{I=F;K={};H.collapseArea&&(K=JSON.parse(H.collapseArea));if(K[I])I={rect:K[I]};else{if(!H.articleTextList||!H.articleTextList.length){I="";break a}I=n(H.articleTextList,I)}I="[object Object]"===Object.prototype.toString.call(I)?{tannoName:"link1",
x:I.rect.x,y:I.rect.y,width:I.rect.width,height:I.rect.height,rotation:"0",reflection:"false",reflectionType:"0",reflectionAlpha:"0",pageWidth:I.rect.pageWidth,pageHeight:I.rect.pageHeight}:""}I&&H.articleTextList&&H.articleTextList.length&&(H=k(H),M=h(H,I),O.push(M))}});x.push(O)}console.log("currentPageEditor",JSON.parse(JSON.stringify(x)));window.inverseEditor=x}function h(u,x){window.articleConfig||(window.articleConfig={});window.articleConfig.hotArea||(window.articleConfig.hotArea={overColor:"#4997ee",
downColor:"#4997ee",outColor:"#4997ee",overAlpha:"0.3",downAlpha:"0.5",outAlpha:"0"});var y=window.articleConfig.hotArea;return{action:{triggerEventType:"mouseDown",actionType:"com.mobiano.flipbook.pageeditor.TAnnoActionShowArticle",articleConfig:u,linkTarget:"showArticle"},annotype:"com.mobiano.flipbook.pageeditor.TAnnoLink",annoId:"202211710188056",isInverse:!0,alpha:"1",overColor:y.overColor,downColor:y.downColor,outColor:y.outColor,overAlpha:y.overAlpha,downAlpha:y.downAlpha,outAlpha:y.outAlpha,
pageViewedBool:"true",ellipseH:"0",ellipseW:"0",location:x,hint:{hintShapeColor:"0",hintShapeColor2:"8388736",hintShapeAlpha:"1",hintW:"0",hintH:"0",hintAuto:"true",hintShapeType:"2",text:""},shadow:{hasDropShadow:"false",shadowDistance:"4",shadowAngle:"270",shadowColor:"0",shadowAlpha:"0.6",shadowBlurX:"4",shadowBlurY:"4"},highlightsBool:"false",linkStatus:"1",mouseOver:"false",borderColor:"16737792"}}function k(u){u=JSON.parse(JSON.stringify(u));u.articleTextList.map(function(x){"text"===x.type&&
(x.text=x.text.replace(/\n[ ]+/g,"<br>&emsp;&emsp;"));return x});return{articleId:u.articleId,newTime:u.newTime,title:u.title,subTitle:u.subTitle,author:u.author,categoryId:u.categoryId,articleTextList:u.articleTextList}}function l(u,x){var y=[];u.forEach(function(A){-1!==x&&(A.pageIndex===x||A.mergeList&&A.mergeList.length&&A.mergeList.filter(function(G){return G.pageIndex===x}).length)&&(A.mergeList&&A.mergeList.length?(A=l(A.mergeList,x),A.length&&(y=[].concat($jscomp.arrayFromIterable(y),$jscomp.arrayFromIterable(A)))):
y.push(A.rect))});return y}function n(u,x){var y="";u.forEach(function(A){if(-1!==x&&(A.pageIndex===x||A.mergeList&&A.mergeList.length&&A.mergeList.filter(function(F){return F.pageIndex===x}).length))if(""===y)y=A.mergeList&&A.mergeList.length?n(A.mergeList,x):JSON.parse(JSON.stringify(A));else{if(A.mergeList&&A.mergeList.length){var G=[y].concat(A.mergeList);y=n(G,x)}y.rect.x>A.rect.x&&(y.rect.x=A.rect.x);y.rect.y>A.rect.y&&(y.rect.y=A.rect.y);y.rect.endX<A.rect.endX&&(y.rect.endX=A.rect.endX);y.rect.endY<
A.rect.endY&&(y.rect.endY=A.rect.endY);y.rect.width=y.rect.endX-y.rect.x;y.rect.height=y.rect.endY-y.rect.y}});return y}function p(u){bookConfig.articleConfigPath?c(bookConfig.articleConfigPath,u,r):r(u)}function r(u){bookConfig.bookArticleConfigPath?c(bookConfig.bookArticleConfigPath,u,B):B(u)}function B(u){if(bookConfig.periodsConfigPath&&window.book_visit&&window.book_visit.periodicalId){var x=bookConfig.periodsConfigPath;x=x.replace("%periodicalId%",window.book_visit.periodicalId);c(x,u,v)}else v(u)}
function v(u){bookConfig.userArticleConfigPath?c(bookConfig.userArticleConfigPath,u):u&&u()}var w;return $jscomp.asyncExecutePromiseGeneratorProgram(function(u){return u.return(new Promise(function(x,y){window.templeteName&&!window.templeteName.toLowerCase().match(/article/)?x():window.runArticleEditor||window.inverseEditor?x():(console.log("create getArticleEditor one time"),bookConfig.articleListPath?(y=bookConfig.bookBaseURL)?(y.endsWith("/")||(y+="/"),c(y+"bookinfo.js",function(A){A&&A.response&&
(eval(A.response),window.book_visit=book_visit);b(function(){window.runArticleEditor=1;x()})},"","text","bookinfo")):b(function(){window.runArticleEditor=1;x()}):(window.runArticleEditor=1,x(),window.runArticleEditor&&delete window.runArticleEditor))}))})}
HTML5AdSlider=Class({create:function(b,c){c&&c.data&&0!=c.data.length&&(this.parent=b,this.options=c,this.data=c.data,this.interval=c.interval?c.interval:3E3,this.outerContainer=$("<div></div>"),this.container=$("<div class='adSlider'></div>"),this.dots=$("<div></div>"),this.getDefaultValue(),this.getImgs(),this.setDots(),this.setSLider(),1<this.data.length&&this.outerContainer.append(this.dots),this.outerContainer.append(this.container),this.parent.append(this.outerContainer),this.setImgs(),this.autoPlay())},
getDefaultValue:function(){this.timer=null;this.imgs=[];this.wappers=[];this.currentIndex=1;this.dotWidth=this.dotHeight=14;this.dotsWidth=0;this.dotMargin=5;this.moving=!1;this.left=this.options.paddingLeft;this.top=this.options.paddingTop;this.width=$(this.parent).width()-this.left-this.options.paddingRight;this.height=$(this.parent).height()-this.top-this.options.paddingBottom},initCss:function(){this.outerContainer.css({position:"absolute",overflow:"hidden",padding:"0",margin:"0"});this.container.css({position:"absolute",
padding:"0",margin:"0"});this.dots.css({position:"absolute","text-align":"center",width:this.dotsWidth+"px","line-height":this.dotHeight+"px",height:this.dotHeight+"px",right:"20px",top:3*this.height/4+"px","z-index":"2",visibility:"visible"})},resize:function(){if(this.parent){this.width=this.parent.width()-this.options.paddingLeft-this.options.paddingRight;this.height=this.parent.height()-this.options.paddingTop-this.options.paddingBottom;this.container.css({width:this.width*this.data.length+"px",
height:this.height,left:-(this.currentIndex-1)*this.width+"px",top:0});this.outerContainer.css({width:this.width,height:this.height,left:this.left+"px",top:this.top+"px"});this.dots.css({top:3*this.height/4+"px"});for(var b=0;b<this.imgs.length;b++){var c=this.imgs[b];this.setImgCss(c);c.css({position:"absolute",width:this.imgWidth+"px",height:this.imgHeight+"px",left:this.imgLeft+"px",top:this.imgTop+"px"});this.wappers[b].find("a").css({width:this.imgWidth+"px",height:this.imgHeight+"px",left:this.imgLeft+
"px",top:this.imgTop+"px"});this.wappers[b].css({position:"absolute",left:this.width*b+"px",top:0,width:this.width+"px",height:this.height+"px",padding:"0",margin:"0",overflow:"hidden"})}this.initCss()}},setDots:function(){if(!(1>=this.data.length)){for(var b=0;b<this.data.length;b++)this.dotsWidth+=this.dotWidth+this.dotMargin,this.dot=$("<div>"+(b+1)+"</div>"),this.dot.css({position:"absolute","border-radius":"50%",border:"1px solid #cccccc",cursor:"pointer","text-align":"center",width:this.dotWidth+
"px","line-height":this.dotHeight+"px",height:this.dotHeight,"font-family":"Arial, serif, Tahoma","font-size":"60%","background-color":"#eeeeee",left:(this.dotWidth+this.dotMargin)*b+"px",top:0,"z-index":2}),this.initDotEvent(this.dot),this.dots.append(this.dot);this.dots.css({width:this.dotsWidth,visibility:"hidden"})}},setSLider:function(){for(var b=this,c=0;c<this.imgs.length;c++){if(c<this.data.length)if(this.data[c].url){var d=$("<a href="+this.getCorrectUrl(this.data[c].url)+' target="view_window"></a>');
d.bind(_event._down,function(){var e;BookEvent.trigger("jumpLink",["adSlider",BookInfo.getCurrentPages().join("-"),null==(e=b.data[c])?void 0:e.url])});this.a=d}else this.a=$("<a></a>");else this.data[0].url?(d=$("<a href="+this.getCorrectUrl(this.data[0].url)+' target="view_window"></a>'),d.bind(_event._down,function(){var e;BookEvent.trigger("jumpLink",["adSlider",BookInfo.getCurrentPages().join("-"),null==(e=b.data[0])?void 0:e.url])}),this.a=d):this.a=$("<a></a>");this.a.css({position:"absolute",
"z-index":"1",margin:"0px",padding:"0px"});this.dataWrapper=$("<div class='AsSliderDataWrapper' wrapperNum="+(c+1)+"></div>");this.dataWrapper.css({position:"absolute",left:this.width*c+"px",top:0,width:this.width+"px",height:this.height+"px",padding:"0",margin:"0",overflow:"hidden"});this.dataWrapper.append(this.imgs[c],this.a);this.wappers.push(this.dataWrapper);this.container.append(this.dataWrapper)}},getCorrectUrl:function(b){return getRealURL(b)},getImgs:function(){for(var b=0;b<this.data.length;b++)this.img=
$("<img/>"),this.img.attr("src",this.data[b].src),this.img.css({width:this.width+"px",height:this.height+"px",visibility:"hidden"}),this.imgs.push(this.img);this.img=$("<img/>");this.img.attr("src",this.data[0].src);this.img.css({width:this.width+"px",height:this.height+"px",visibility:"hidden"});this.imgs.push(this.img)},setImgs:function(){for(var b=0;b<this.imgs.length;b++){var c=this.imgs[b];c.on("load",function(d,e,f){return function(){d.setImgCss(e);e.css({position:"absolute",width:d.imgWidth+
"px",height:d.imgHeight+"px",left:d.imgLeft+"px",top:d.imgTop+"px",visibility:"visible"});d.wappers[f].find("a").css({position:"absolute",width:d.imgWidth+"px",height:d.imgHeight+"px",left:d.imgLeft+"px",top:d.imgTop+"px"});d.wappers[f].css({position:"absolute",left:d.width*f+"px",top:0,width:d.width+"px",height:d.height+"px",padding:"0",margin:"0"})}}(this,c,b))}},setImgCss:function(b){this.imgWidth=b[0].naturalWidth;this.imgHeight=b[0].naturalHeight;this.pageRadio=this.width/this.height;this.naturalRadio=
this.imgWidth/this.imgHeight;this.imgLeft=this.imgTop=0;this.naturalRadio>=this.pageRadio?(b=this.width/this.imgWidth,this.imgWidth=this.width,this.imgHeight*=b,this.imgTop=(this.height-this.imgHeight)/2,this.imgLeft=0):(b=this.height/this.imgHeight,this.imgHeight=this.height,this.imgWidth*=b,this.imgTop=0,this.imgLeft=(this.width-this.imgWidth)/2)},autoPlay:function(){1>=this.data.length||(this.timer=setInterval(function(){this.oneStep(this.currentIndex)}.bind(this),this.interval))},oneStep:function(b){this.moving||
(this.moving=!0,this.dots.find("div").css({background:"#eee",color:"#333"}),this.container.animate({left:-this.width*(b-1)+"px"},this.options.effectDuration,function(){this.currentIndex==this.data.length+1&&(this.currentIndex=1,this.container.css({left:0}));this.currentIndex+=1;this.moving=!1}.bind(this)),b==this.data.length+1?$(this.dots).find("div:nth-child(1)").css({background:"#333",color:"#fff"}):$(this.dots).find("div:nth-child("+b+")").css({background:"#333",color:"#fff"}))},initDotEvent:function(b){b.bind("click",
function(){clearInterval(this.timer);this.timer=null;var c=parseInt(b.html());this.moving||(this.oneStep(c),this.currentIndex=c);this.autoPlay()}.bind(this));b.bind("mouseenter",function(){b.css({opacity:"0.5"})}.bind(this));b.bind("mouseleave",function(){b.css({opacity:"1"})}.bind(this))}});
var StaticAd=Class({create:function(b){this.parent=b;this.adContainer=$("<div id='adContainer'></div>");this.adContainer.css({position:"absolute",zIndex:3});b=staticAd.height?staticAd.height:isPhone()||isPad()?60:90;switch(staticAd.adPosition){case 0:b=this.parent.css("left");b=parseInt(b.replace("px",""));var c=parseInt(this.parent.css("top")),d=parseInt(this.parent.css("width"));rightToLeft&&(b+=d/2);this.hash=this.getHash();this.setStyle({left:b,top:c,zIndex:1<this.hash?1:3});break;case 1:var e=
isPhone()||isPad()?(null==(c=toolBar)?void 0:null==(d=c.bottomBar)?void 0:d.height())||60:templateArea.getBottomHeight()+20;this.setStyle({left:"50%",transform:"translate(-50%,"+-e+"px)",bottom:"0",height:b+"px",width:"80%"});break;case 2:var f;c=isPhone()||isPad()?(null==(e=toolBar)?void 0:null==(f=e.topBar)?void 0:f.height())||40:templateArea.getTopHeight()+20;this.setStyle({left:"50%",transform:"translate(-50%,"+c+"px)",top:"0",height:b+"px",width:"80%"})}this.adInstance=new HTML5AdSlider(this.adContainer,
{paddingLeft:30,paddingTop:staticAd.adPosition?0:30,paddingRight:30,paddingBottom:staticAd.adPosition?0:30,loop:!1,interval:staticAd.interval,effectDuration:1E3,data:staticAd.data});bookContainer.append(this.adContainer);this.bindEvent()},onResize:function(){this.adContainer.css({width:.8*this.parent.width()+"px"});this.adInstance.resize()},getHash:function(){var b=window.location.hash;return""!=b&&3<b.length&&"#p="==b.substr(0,3)?parseInt(getRealPageNumber(decodeURIComponent(b.substr(3,b.length-
3)))):null},bindEvent:function(){var b=this;BookEvent.bindEvent("showToolbar",function(){var c,d,e=isPC()?templateArea.getBottomHeight():(null==(c=toolBar)?void 0:null==(d=c.bottomBar)?void 0:d.height())||60,f,g;c=isPC()?templateArea.getTopHeight():(null==(f=toolBar)?void 0:null==(g=f.topBar)?void 0:g.height())||40;switch(staticAd.adPosition){case 1:b.setStyle({transform:"translate(-50%,"+-e+"px)"});break;case 2:b.setStyle({transform:"translate(-50%,"+c+"px)"})}});BookEvent.bindEvent("hideToolbar",
function(){staticAd.adPosition&&b.setStyle({transform:"translate(-50%,0)"})})},setStyle:function(b){b&&this.adContainer&&this.adContainer.css(b)},onResize:function(){this.adInstance&&this.adInstance.resize()},show:function(){this.adContainer&&this.adContainer.show()},hide:function(){this.adContainer&&this.adContainer.hide()},getHeight:function(){var b;return(null==(b=this.adContainer)?void 0:b.height())||0}}),thickessPerBar=1,totalheight=300;
function drawThickeness(b,c,d,e,f){totalheight=d;d=thickessPerBar/8/1.5;for(var g,h=0,k;h<c;){k=getColorAtIdx(h,c);var l=d*h;g=totalheight-2*l;for(k=k.toString(16);6>k.length;)k="0"+k;b.fillStyle="#"+k;b.fillRect(e+f*h,l,1,g);b.fill();h++}}var COLOR_0=243,COLOR_1_1=209,COLOR_1_2=231,COLOR_2_1=209,COLOR_2_2=213;
function getColorAtIdx(b,c){var d=Math.max(3,c/6+c/4);d=Math.min(11,d);d=0==d%2?d-1:d;var e=Color(bookConfig.thicknessColor).split();c=e.r/255;var f=e.g/255;e=e.b/255;0==b?b=COLOR_0:b<d?b=0==b%2?COLOR_1_2:COLOR_1_1:(b=(b-d)/2,d=4<b/2?24:6*Math.floor(b/2),b=0==b%2?COLOR_2_1-d:COLOR_2_2-d);return b*e|b*f<<8|b*c<<16}
var Thickness=Class({create:function(b,c){this.thicknessWidth=getMaxThicknessWidth();this.totalPageCount=bookConfig.totalPageCount;this.endIndex=this.startIndex=this.pageCount=0;this.parent=b;this.isLeft=c;this.scale=1;this.init();this.initShadow();this.initEvent()},init:function(){this.thickness=$("<div class='thickness'></div>");this.thicknessCanvas=$("<canvas style='position:absolute;top:0;left:0;'>");this.isLeft?this.thickness.addClass("left_thickness"):this.thickness.addClass("right_thickness");
this.thickness.css({"z-index":5});this.thickness.append(this.thicknessCanvas);this.parent.append(this.thickness);this.context=this.thicknessCanvas[0].getContext("2d")},initShadow:function(){this.shadow||_agent_.browser.msie&&11>_agent_.browser.version||(this.shadow=$("<div class='shadow'></div>"),this.thickness.append(this.shadow))},refresh:function(b,c){this.startIndex=b;this.endIndex=c;this.pageCount=this.endIndex-this.startIndex;this.width=this.getThicknessWidth(Math.abs(this.pageCount));this.thickness.css({width:this.width+
"px"});this.thicknessCanvas.attr("width",this.width+"px");this.context.clearRect(0,0,this.thicknessWidth,this.height);this.isLeft?(this.thickness.css({left:-this.width+"px"}),drawThickeness(this.context,this.width,this.height,this.width,-1)):drawThickeness(this.context,this.width,this.height,0,1)},onResize:function(b,c){this.resizeThickness(b,c);this.resizeShadow(b,c)},show:function(){this.thickness.show()},hide:function(){this.thickness.hide()},hideCanvas:function(){this.thicknessCanvas.hide()},
showCanvas:function(){this.thicknessCanvas.show()},resizeShadow:function(b,c){},resizeThickness:function(b,c){this.height=c;var d="100%";this.isLeft&&(d=-this.width+"px");this.thickness.css({left:d});this.thicknessCanvas.attr("height",c+"px");this.thicknessCanvas.attr("width",this.thicknessWidth+"px");this.context.clearRect(0,0,this.thicknessWidth,this.height);this.isLeft?drawThickeness(this.context,this.thicknessWidth,c,this.thicknessWidth,-1):drawThickeness(this.context,this.thicknessWidth,c,0,
1);this.resetTotalWidth(b,c);b=transformCSS({scale:{x:1,y:1},tran:{x:0,y:0}});this.setTransform(b)},resetTotalWidth:function(b,c){this.totalWidth=oneSideTotalThicknessWidth()},getPageIndexByPosition:function(b){b=this.getDistance(b);return this.startIndex+parseInt(b*this.pageCount/this.width)},getDistance:function(b){b=b.pageX;var c=$(this.thickness).offset().left;return b-c},getThicknessWidth:function(b){this.totalWidth||this.resetTotalWidth();return this.width=Math.floor(this.totalWidth*b/this.totalPageCount)},
getWidth:function(){return this.width},getHeight:function(){return this.height},initEvent:function(){this.thickness.bind("mouseup touchstart",function(b){b.stopPropagation()}.bind(this));this.thickness.click(function(b){0!=this.pageCount&&(b=this.getPageIndexByPosition(b),!b||0>=b||gotoPageFun(b,!1,"thickness"))}.bind(this));isPhone()||isPad()||(this.thickness.bind("mousemove",function(b){if(0!=this.pageCount){var c=this.getPageIndexByPosition(b);if(!c||0>=c)this.hint&&this.hint.hide();else{c=" "+
getShownPageNumber(c)+" ";var d=b.pageX;b=b.pageY-30;this.hint||(this.hint=new divHint(c,d,b));this.hint.setText(c);this.hint.show(d,b);this.hint.moveto(d,b)}}}.bind(this)),this.thickness.bind("mouseleave",function(){null!=this.hint&&this.hint.hide()}.bind(this)))},doSetMovingScale:function(b,c,d,e,f,g,h){if(!isPhone()&&!isPad()||bookConfig.HardPageEnable||BookInfo.isDoublePage())if(!this.totalWidth||0>=this.totalWidth)this.setScale(1,g,h);else if(f=f?0:Math.min(4/this.totalWidth,1),1==f)this.setScale(1,
g,h);else if((1!=b&&1!=c||bookConfig.isTheBookOpen&&BookInfo.isDoublePage())&&b!=totalPageCount&&c!=totalPageCount)this.setScale(1,g,h);else{var k=1,l=1;(1!=b||bookConfig.isTheBookOpen&&BookInfo.isDoublePage())&&b!=totalPageCount||(k=f);(1!=c||bookConfig.isTheBookOpen&&BookInfo.isDoublePage())&&c!=totalPageCount||(l=f);b=$.easing.easeInOutSine(null,d,k,l-k,e);this.setScale(b,g,h)}else this.setScale(1,g,h)},setScale:function(b,c,d){void 0==b&&(b=1);void 0==c&&(c=1);void 0==d&&(d=0);c=transformCSS({scale:{x:b,
y:c},tran:{x:d,y:0}});this.thickness.css(c);this.scale=b},setTransform:function(b){this.thickness.css(b)}}),totalThicknessWidth=function(b){return b||bookConfig.showThicknessOnMobile?totalWidth=oneSideTotalThicknessWidth():0},oneSideTotalThicknessWidth=function(){var b=getMaxThicknessWidth(),c=$.easing.easeOutQuad(null,Math.min(bookConfig.totalPageCount,100),0,b,100);c=Math.floor(c);b=$.easing.swing(null,Math.max(c-8,0),1,0,b-8);return c=Math.floor(c*b)},getMaxThicknessWidth=function(){switch(bookConfig.thicknessWidthType){case "none":return 0;
case "thinner":return 5;case "thin":return 15;case "thicker":return 40}return 20},ThicknessManager=Class({create:function(b,c){this.book=c;this.leftThickness=new Thickness(b,!0);this.rightThickness=new Thickness(b,!1)},setAttachmentBefore:function(b){bookConfig.RightToLeft?this.book.currentPageIndex<b?this.leftThickness&&this.leftThickness.refresh(bookConfig.totalPageCount,this.getMaxCurrentIndex(b)):this.rightThickness&&this.rightThickness.refresh(this.getMinCurrentIndex(b),0):this.book.currentPageIndex<
b?this.rightThickness&&this.rightThickness.refresh(this.getMaxCurrentIndex(b),bookConfig.totalPageCount):this.leftThickness&&this.leftThickness.refresh(0,this.getMinCurrentIndex(b))},afterCurling:function(){this.refreshThickness()},setAttachmentIn:function(b){},setAttachmentAfter:function(){this._super();this.afterCurling()},followToPoint:function(b,c,d){this.leftThickness&&this.leftThickness.doSetMovingScale(b,c,d,this.book.width,bookConfig.HardPageEnable);this.rightThickness&&this.rightThickness.doSetMovingScale(b,
c,d,this.book.width,bookConfig.HardPageEnable)},refreshThickness:function(){bookConfig.RightToLeft?(this.leftThickness&&this.leftThickness.refresh(bookConfig.totalPageCount,this.getMaxCurrentIndex()),this.rightThickness&&this.rightThickness.refresh(this.getMinCurrentIndex(),0)):(this.leftThickness&&this.leftThickness.refresh(0,this.getMinCurrentIndex()),this.rightThickness&&this.rightThickness.refresh(this.getMaxCurrentIndex(),bookConfig.totalPageCount));this.leftThickness&&this.leftThickness.doSetMovingScale(this.book.currentPageIndex,
this.book.currentPageIndex,this.book.width,this.book.width,bookConfig.HardPageEnable);this.rightThickness&&this.rightThickness.doSetMovingScale(this.book.currentPageIndex,this.book.currentPageIndex,this.book.width,this.book.width,bookConfig.HardPageEnable)},onResize:function(b,c){if(this.leftThickness)this.leftThickness.onResize(b,c);if(this.rightThickness)this.rightThickness.onResize(b,c);this.refreshThickness()},hideCanvas:function(){this.leftThickness&&this.leftThickness.hideCanvas();this.rightThickness&&
this.rightThickness.hideCanvas()},showCanvas:function(){this.leftThickness&&this.leftThickness.showCanvas();this.rightThickness&&this.rightThickness.showCanvas()},getThicknessWidth:function(){return[this.leftThickness.getWidth()*this.leftThickness.scale,this.rightThickness.getWidth()*this.rightThickness.scale]},getMinCurrentIndex:function(b){if(void 0==b||null==b)b=this.book.currentPageIndex;return BookInfo.getMinPageIndex(b)},getMaxCurrentIndex:function(b){if(void 0==b||null==b)b=this.book.currentPageIndex;
b=BookInfo.getMaxPageIndex(b);return Math.min(b,bookConfig.totalPageCount)},show:function(){},hide:function(){}}),SingleBookThicknessManager=Class({create:function(b,c){this.book=c;rightToLeft&&(this.leftThickness=new Thickness(b,!0));rightToLeft||(this.rightThickness=new Thickness(b,!1))},setAttachmentBefore:function(b){bookConfig.RightToLeft?this.book.currentPageIndex<b?this.leftThickness&&this.leftThickness.refresh(bookConfig.totalPageCount,this.getMaxCurrentIndex(b)):this.rightThickness&&this.rightThickness.refresh(this.getMinCurrentIndex(b),
0):this.book.currentPageIndex<b?this.rightThickness&&this.rightThickness.refresh(this.getMaxCurrentIndex(b),bookConfig.totalPageCount):this.leftThickness&&this.leftThickness.refresh(0,this.getMinCurrentIndex(b))},followToPoint:function(b,c,d){b>c&&(d=2*this.book.width-d);this.leftThickness&&this.leftThickness.doSetMovingScale(b,c,d,2*this.book.width,bookConfig.HardPageEnable);this.rightThickness&&this.rightThickness.doSetMovingScale(b,c,d,2*this.book.width,bookConfig.HardPageEnable)},refreshThickness:function(){bookConfig.RightToLeft?
(this.leftThickness&&this.leftThickness.refresh(bookConfig.totalPageCount,this.getMaxCurrentIndex()),this.rightThickness&&this.rightThickness.refresh(this.getMinCurrentIndex(),0)):(this.leftThickness&&this.leftThickness.refresh(0,this.getMinCurrentIndex()),this.rightThickness&&this.rightThickness.refresh(this.getMaxCurrentIndex(),bookConfig.totalPageCount));this.leftThickness&&this.leftThickness.doSetMovingScale(this.book.currentPageIndex,this.book.currentPageIndex,this.book.width,this.book.width,
bookConfig.HardPageEnable);this.rightThickness&&this.rightThickness.doSetMovingScale(this.book.currentPageIndex,this.book.currentPageIndex,this.book.width,this.book.width,bookConfig.HardPageEnable)},resizeAttachment:function(b,c){if(this.leftThickness)this.leftThickness.onResize(b,c);if(this.rightThickness)this.rightThickness.onResize(b,c);this.refreshThickness()},getThicknessWidth:function(){if(rightToLeft)return[this.leftThickness.getWidth()*this.leftThickness.scale,0];if(!rightToLeft)return[0,
this.rightThickness.getWidth()*this.rightThickness.scale]},getMinCurrentIndex:function(b){if(void 0==b||null==b)b=this.book.currentPageIndex;return b},getMaxCurrentIndex:function(b){if(void 0==b||null==b)b=this.book.currentPageIndex;return Math.min(b,bookConfig.totalPageCount)}}).extend(ThicknessManager),FlipShotBarManager=Class({create:function(b,c){this.book=c;this.leftFlipShotBar=new FlipShotBar(!0);this.rightFlipShotBar=new FlipShotBar(!1)},appendTo:function(b){b.append(this.leftFlipShotBar.getContainer());
b.append(this.rightFlipShotBar.getContainer())},setVisibleByIndex:function(b){bookConfig.RightToLeft?(b>=this.book.currentPageIndex&&this.leftFlipShotBar.setVisibleByIndex(b),b<=this.book.currentPageIndex&&this.rightFlipShotBar.setVisibleByIndex(b)):(b<=this.book.currentPageIndex&&this.leftFlipShotBar.setVisibleByIndex(b),b>=this.book.currentPageIndex&&this.rightFlipShotBar.setVisibleByIndex(b))},refresh:function(){this.leftFlipShotBar&&this.leftFlipShotBar.setVisibleByIndex(this.book.currentPageIndex);
this.rightFlipShotBar&&this.rightFlipShotBar.setVisibleByIndex(this.book.currentPageIndex)},onResize:function(b,c){if(this.leftFlipShotBar)this.leftFlipShotBar.onResize(b,c);if(this.rightFlipShotBar)this.rightFlipShotBar.onResize(b,c)},getWidth:function(){return this.leftFlipShotBar?this.leftFlipShotBar.width:this.rightFlipShotBar?this.rightFlipShotBar.width:0},getHeight:function(){return this.leftFlipShotBar?this.leftFlipShotBar.height:this.rightFlipShotBar?this.rightFlipShotBar.height:0},resizeAttachment:function(b,
c,d){this.leftFlipShotBar&&this.leftFlipShotBar.setScale(d);this.rightFlipShotBar&&this.rightFlipShotBar.setScale(d);if(this.leftFlipShotBar)this.leftFlipShotBar.onResize(b,c);if(this.rightFlipShotBar)this.rightFlipShotBar.onResize(b,c)}}),BookShadow=Class({create:function(b){this.background=$("<div class='bookShadow'></div>");bookConfig.FlipDirection&&(this.background=$("<div class='bookShadow-vertical'></div>"));if("side2"==bookConfig.BindingType){var c=$("<div class='article-shadow'></div>");this.background.append(c);
this.background.css({"-webkit-box-shadow":"0 0 5px rgba(40, 40, 40, 0.05)","-moz-box-shadow":"0 0 5px rgba(40, 40, 40, 0.05)","-o-box-shadow":"0 0 5px rgba(40, 40, 40, 0.05)","-ms-box-shadow":"0 0 5px rgba(40, 40, 40, 0.05)","box-shadow":"0 0 5px rgba(40, 40, 40, 0.05)"})}$(b).append(this.background);this.visible=!0},doubleWidth:function(b){bookConfig.FlipDirection?$(this.background).attr("class",b?"doubleHeight":"singleHeight"):$(this.background).attr("class",b?"doubleWidth":"singleWidth");$(this.background).addClass("bookShadow")},
doubleHeight:function(b){$(this.background).attr("class",b?"doubleHeight":"singleHeight");$(this.background).addClass("bookShadow-vertical")},right:function(b){$(this.background).css({right:"auto"});b&&$(this.background).css({right:"0px"})},down:function(b){$(this.background).css({bottom:"auto"});b&&$(this.background).css({bottom:"0px"})},show:function(){this.visible||($(this.background).show(),this.visible=!0)},hide:function(){this.visible&&($(this.background).hide(),this.visible=!1)},onResize:function(){}});
bdor[26]="h";
Class("BookmarkList",{create:function(){this.bookmarks=[];this.bookPageCount=bookConfig.totalPageCount},reload:function(){this.bookmarks=[];this.loadBasicData();this.loadUserData();this.sort()},loadBasicData:function(){if(global.bmtConfig){var b=bmtConfig;bmtConfig.tabs&&(b=bmtConfig.tabs);for(var c=0;c<b.length;c++)this.isShow(b[c])&&this.bookmarks.push(b[c])}},loadUserData:function(){for(var b=Instance.parse(this.getUserDataFromLocal(),[]),c=0;c<b.length;c++)this.isShow(b[c])&&this.bookmarks.push(b[c])},isShow:function(b){return parseInt(b.pageIndex)<=
this.bookPageCount&&!this.exists(b)},getUserDataFromLocal:function(){var b=window.location.href.replace(window.location.hash,"").replace(window.location.search,"")+"BookMark";try{if(window.localStorage&&window.localStorage[b])return window.localStorage.getItem(b)}catch(c){}},sort:function(){this.bookmarks=this.bookmarks.sort(function(b,c){return parseInt(b.pageIndex)-parseInt(c.pageIndex)})},count:function(){return this.bookmarks.length},item:function(b){return this.bookmarks[b]},exists:function(b){for(var c=
0;c<this.count();c++)if(this.item(c).pageIndex==b.pageIndex)return!0;return!1}});
Class("BookmarkTabItem",{$body:null,$parent:null,zIndex:0,create:function(b){this.data=b;this.$body=$("<span class='bookmark_item bookmark_caption'></span>");this.initStyle();this.update()},initStyle:function(){bmtConfig.showPage&&this.$body.attr("title",getShownPageNumber(this.data.pageIndex));bmtConfig.hasTexture&&this.$body.css({"background-image":"url("+(uiBaseURL+"leather1.png)"),"background-repeat":"repeat"});bookConfig.enableCustomizedBookmarkWidth&&bookConfig.customizedBookmarkWidth&&this.$body.css({width:bookConfig.customizedBookmarkWidth+
"px"})},getData:function(){return this.data},setData:function(b){this.data=b;this.update()},update:function(){var b=(bookConfig.tabAlpha?bookConfig.tabAlpha:100)/100;this.$body.css("background-color",Color(this.data.color).rgba(b));this.data.fontColor&&this.$body.css("color",Color(this.data.fontColor).toString());this.$body.html(this.data.caption)},moveTo:function(b){this.$parent!=b&&(this.remove(),this.$parent=b,this.$parent.append(this.$body),this.$body.bind("click",this.onBookmarkClick.bind(this)),
this.$body.bind("mouseenter",this.onBookmarkMouseEnter.bind(this)),this.$body.bind("mouseleave",this.onBookmarkMouseLeave.bind(this)),this.$body.bind("pointerdown pointermove pointerup pointerenter",function(c){c.stopPropagation()}),this.$body.bind("mousedown mousemove mouseup mouseenter",function(c){c.stopPropagation()}))},remove:function(){null!=this.$parent&&(this.$body.remove(),this.$body.unbind(),this.$parent=null)},onBookmarkClick:function(b){gotoPageFun(this.data.pageIndex,!1,"bookmark tab")},
onBookmarkMouseEnter:function(b){this.zIndex=this.$body.css("z-index");this.$body.stop(!0,!0).animate({top:"0px"},300);this.$body.css({"align-items":"center","z-index":999})},onBookmarkMouseLeave:function(b){this.$body.stop(!0,!0).animate({top:"30px"},300);this.$body.css({"align-items":"flex-start","z-index":this.zIndex})},setPosition:function(b){this.$body.css({left:"",right:"","z-index":""});this.$body.css(b)},getWidth:function(){return this.$body.width()}});
Class("BookmarkItemPool",{create:function(){this.items=[]},getBookmarkItem:function(b){var c=this.getItemFromList(b);c||(c=this.createNewItem(b));return c},getItemFromList:function(b){for(var c=0;c<this.items.length;c++){var d=this.items[c];if(d.getData().pageIndex==b.pageIndex)return d.setData(b),d}return null},createNewItem:function(b){b=new BookmarkTabItem(b);this.items.push(b);return b},clean:function(b){for(var c=0;c<this.items.length;c++){var d=this.items[c],e=d.getData();b.exists(e)||d.remove()}}});
Class("BookmarkTab",{$parent:null,visible:!0,onSideEdge:!0,zIndex:0,create:function(b,c){this.$parent=b;this.hideSmallTab=!!c;this.onSideEdge=bmtConfig.onSideEdge;bookConfig.FlipDirection&&(this.onSideEdge=!0);this.zIndex=6;this.bookmarkPool=new BookmarkItemPool;this.bookmarkList=new BookmarkList;this.initBookmarkBar();this.reload();isPhone()||isPad()||this.onSideEdge||!this.bookmarkList.count()||setBookVerticalMargin({bookmarkHeight:70})},initBookmarkBar:function(){bookConfig.FlipDirection?(this.leftBar=
$("<div class='up_bookmark_bar'></div>"),this.rightBar=$("<div class='down_bookmark_bar'></div>")):(this.leftBar=$("<div class='left_bookmark_bar'></div>"),this.rightBar=$("<div class='right_bookmark_bar'></div>"));this.leftBar.on("mouseup touchstart",function(b){b.stopPropagation()});this.rightBar.on("mouseup touchstart",function(b){b.stopPropagation()});this.onSideEdge&&(this.leftBar.addClass("vertical"),this.rightBar.addClass("vertical"));this.leftBar.css("z-index",this.zIndex);this.rightBar.css("z-index",
this.zIndex);this.$parent.append(this.leftBar);this.$parent.append(this.rightBar)},reload:function(){0!=this.visible&&(this.bookmarkList.reload(),this.refresh())},refresh:function(){0!=this.visible&&(this.separate(),this.adjustBar(),this.onResize())},separate:function(){this.refreshShownPage();this.bookmarkPool.clean(this.bookmarkList);for(var b=0;b<this.bookmarkList.count();b++){var c=this.bookmarkList.item(b),d=this.bookmarkPool.getBookmarkItem(c);c.pageIndex>=this.bigShownPage?rightToLeft?d.moveTo(this.leftBar):
d.moveTo(this.rightBar):c.pageIndex<=this.smallShownPage&&(rightToLeft?d.moveTo(this.rightBar):d.moveTo(this.leftBar))}},refreshShownPage:function(){var b=BookInfo.getCurrentPages();1==b.length?(this.smallShownPage=b[0],this.bigShownPage=b[0]):(this.smallShownPage=Math.min(b[0],b[1]),this.bigShownPage=Math.max(b[0],b[1]))},isTheFirstPage:function(){this.refreshShownPage();return 1==this.bigShownPage},isTheLastPage:function(){this.refreshShownPage();return this.smallShownPage==totalPageCount},setAttachmentBefore:function(b){1>=
b&&(parseBool(bookConfig.RightToLeft)?this.hideRightBar():this.hideLeftBar());b>=originTotalPageCount&&(parseBool(bookConfig.RightToLeft)?this.hideLeftBar():this.hideRightBar())},adjustBar:function(){var b=this.leftBar.children().length,c=this.rightBar.children().length;this.hideSmallTab?rightToLeft?(this.hideRightBar(),0==b?this.hideLeftBar():this.showLeftBar()):(this.hideLeftBar(),0==c?this.hideRightBar():this.showRightBar()):rightToLeft?(0==c||this.isTheFirstPage()?this.hideRightBar():this.showRightBar(),
0==b||this.isTheLastPage()?this.hideLeftBar():this.showLeftBar()):(0==b||this.isTheFirstPage()?this.hideLeftBar():this.showLeftBar(),0==c||this.isTheLastPage()?this.hideRightBar():this.showRightBar());bookConfig.HardPageEnable&&this.adjustZindex()},adjustZindex:function(){this.leftBar.css("z-index",this.zIndex);this.rightBar.css("z-index",this.zIndex);rightToLeft?(this.isTheLastPage()&&this.rightBar.css("z-index",1),this.isTheFirstPage()&&this.leftBar.css("z-index",1)):(this.isTheLastPage()&&this.leftBar.css("z-index",
1),this.isTheFirstPage()&&this.rightBar.css("z-index",1))},onResize:function(){if(this.onSideEdge){var b=this.$parent.height(),c=this.$parent.width();bookConfig.FlipDirection&&!this.hideSmallTab&&(b/=2);this.leftBar.css({width:b+"px",left:-b+"px"});this.rightBar.css({width:b+"px",left:c+"px"});bookConfig.FlipDirection&&this.rightBar.css({left:c-b+"px"});rightToLeft?(this.resizeItemsOfBar(this.rightBar,"left",1),this.resizeItemsOfBar(this.leftBar,"right",-1)):(this.resizeItemsOfBar(this.leftBar,"right",
1),this.resizeItemsOfBar(this.rightBar,"left",-1))}else{b=this.$parent.width();this.$parent.width();var d=c=b;this.hideSmallTab||("issuu"!=bookConfig.FlipStyle?(c=b/2,d=b/2):(b=flipBook.getCurrentPageIndex(),b=flipBook.getFitWHByIndex(b),c=b[0].x,d=b[1].x));this.leftBar.css({width:c+"px",left:"0px"});this.rightBar.css({width:d+"px",left:"auto",right:0});rightToLeft?(this.resizeItemsOfBar(this.rightBar,"left",1),this.resizeItemsOfBar(this.leftBar,"left",-1)):(this.resizeItemsOfBar(this.leftBar,"left",
1),this.resizeItemsOfBar(this.rightBar,"left",-1))}this.setScale(1,1,0,0,1,1,0,0)},resizeItemsOfBar:function(b,c,d){for(var e=b.width(),f=0,g=0,h=0;h<this.bookmarkList.count();h++){var k=this.bookmarkList.item(h),l=this.bookmarkPool.getBookmarkItem(k);l.$parent==b&&(f=l.getWidth()+22,g+=l.getWidth()+22)}g+=2;h=b.children().length;Number.between(Math.floor((e-4-f)/(h-1)),10,65);var n=f=0,p=0;for(h=0;h<this.bookmarkList.count();h++)if(k=this.bookmarkList.item(h),l=this.bookmarkPool.getBookmarkItem(k),
l.$parent==b){var r={};g>=e?(0<p&&(n=l.getWidth()>2*p/3?n+(p/2+10):n+(p-l.getWidth()/2+10)),r[c]=n,p=l.getWidth()):(r[c]=f,f+=l.getWidth()+22);r["z-index"]=d*k.pageIndex;l.setPosition(r)}},show:function(){this.visible=!0;this.refresh()},hide:function(){this.hideLeftBar();this.hideRightBar();this.visible=!1},showLeftBar:function(){0<this.leftBar.children().length?this.leftBar.css("display","block"):this.leftBar.css("display","none")},hideLeftBar:function(){this.leftBar.css("display","none")},showRightBar:function(){0<
this.rightBar.children().length?this.rightBar.css("display","block"):this.rightBar.css("display","none")},hideRightBar:function(){this.rightBar.css("display","none")},getHeight:function(){if(!this.visible||!this.bookmarkList.count())return 0;var b,c;return(null==(b=this.leftBar)?void 0:b.height())||(null==(c=this.rightBar)?void 0:c.height())||0},refreshSideEdge:function(){isPad()||isPhone()||this.onSideEdge||!this.bookmarkList.count()||setBookVerticalMargin({disableResize:!0,bookmarkHeight:70})},
doSetMovingScale:function(b,c,d,e,f,g,h){this.setScale(1,g,h)},setScale:function(b,c,d,e,f,g,h,k){void 0==c&&(c=1);void 0==d&&(d=0);void 0==g&&(g=1);void 0==h&&(h=0);this.onSideEdge?(f=this.$parent.height(),c=transformCSS({scale:{x:c,y:1},tran:{x:d,y:(1-c)*f/2},rotate:-90}),g=transformCSS({scale:{x:g,y:1},tran:{x:h,y:(1-g)*f/2},rotate:90})):(c=transformCSS({scale:{x:b,y:1},tran:{x:d,y:e},origin:{x:0,y:100}}),g=transformCSS({scale:{x:f,y:1},tran:{x:h,y:k},origin:{x:100,y:100}}));0<this.leftBar.children().length&&
this.leftBar.css(c);0<this.rightBar.children().length&&this.rightBar.css(g);this.scale=1}});
var GrayShadow=Class({create:function(b){this.grayShadow=$("<div class='grayShadow'></div>");var c=$("<div class='kong edgeShadow' ></div>");this.grayShadow.append(c);b.append(this.grayShadow)},show:function(){this.grayShadow.show()},hide:function(){this.grayShadow.hide()},onResize:function(){}}),PageHighlightsFlipShadow=Class({create:function(b,c){this.parent=b;this.pageIndex=c;this.init()},init:function(){bookConfig.FlipDirection?(this.flipBackShadow=$("<div class='flip-vertical-shadowB'></div>"),
this.flipFrontShadow=$("<div class='flip-vertical-topshadow2'></div>"),this.flipFrontHighlightShadow=$("<div class='flip-vertical-top-hightlight-shadow'></div>"),this.flipFrontEdgeShadow=$("<div class='flip-vertical-top-edge-shadow'></div>"),this.flipFrontTopHighlightShadow=$("<div class='flip-vertical-front-top-hightlight-shadow'></div>")):(this.flipBackShadow=$("<div class='flip-shadowB2'></div>"),this.flipFrontShadow=$("<div class='flip-topshadow2'></div>"),this.flipFrontHighlightShadow=$("<div class='flip-top-hightlight-shadow'></div>"),
this.flipFrontEdgeShadow=$("<div class='flip-top-edge-shadow'></div>"),this.flipFrontTopHighlightShadow=$("<div class='flip-front-top-hightlight-shadow'></div>"));this.parent.append(this.flipBackShadow);this.parent.append(this.flipFrontShadow);this.parent.append(this.flipFrontEdgeShadow);this.parent.append(this.flipFrontHighlightShadow);this.parent.append(this.flipFrontTopHighlightShadow)},flip:function(b,c,d){var e=b.shadowRate;d=b.rotate;var f=.9<e?1+2*(1-e)/.1:3*e/.9;e=.9<e?(1-e)/.1:.1>e?1*e/.1:
1;var g=1,h=(b.frontShadowDistance-(90<d?0:260*Math.min(1,b.frontShadowDistance/260)))/Math.cos(d*Math.PI/180),k=(b.frontShadowDistance-3-(90<d?0:18))/Math.cos(d*Math.PI/180),l=(b.frontShadowDistance-(90<d?0:3))/Math.cos(d*Math.PI/180),n=(b.frontShadowDistance-23*Math.min(1,b.frontShadowDistance/260)-(90<d?0:78*Math.min(1,b.frontShadowDistance/260)))/Math.cos(d*Math.PI/180);21>=b.frontShadowDistance&&(g=b.frontShadowDistance/21,l=(b.frontShadowDistance-(90<d?0:3*g))/Math.cos(d*Math.PI/180),k=(b.frontShadowDistance-
3*g-(90<d?0:18*g))/Math.cos(d*Math.PI/180));bookConfig.FlipDirection?(h=transformCSS({scaleY:Math.min(1,b.frontShadowDistance/260),rotate:-d,tran:{x:0,y:h}}),k=transformCSS({scaleY:g,rotate:-d,tran:{x:0,y:k}}),g=transformCSS({scaleY:g,rotate:-d,tran:{x:0,y:l}}),n=transformCSS({scaleY:Math.min(1,b.frontShadowDistance/260),rotate:-d,tran:{x:0,y:n}}),f=transformCSS({scaleY:f,rotate:d,tran:{x:-b.maskTranY,y:b.maskTranX}})):(h=transformCSS({scaleX:Math.min(1,b.frontShadowDistance/260),rotate:-d,tran:{x:h,
y:0}}),k=transformCSS({scaleX:g,rotate:-d,tran:{x:k,y:0}}),g=transformCSS({scaleX:g,rotate:-d,tran:{x:l,y:0}}),n=transformCSS({scaleX:Math.min(1,b.frontShadowDistance/260),rotate:-d,tran:{x:n,y:0}}),f=transformCSS({scaleX:f,rotate:d,tran:{x:b.maskTranX,y:b.maskTranY}}));this.flipBackShadow.css(f);this.flipFrontShadow.css(h);this.flipFrontHighlightShadow.css(k);this.flipFrontEdgeShadow.css(g);this.flipFrontTopHighlightShadow.css(n);this.beforeFlip(d,c);c=.34*b.frontShadowDistance/260;260<b.frontShadowDistance&&
(c=.34*e);this.flipFrontEdgeShadow.css({opacity:.5*e});this.flipFrontHighlightShadow.css({opacity:.34*e});this.flipFrontShadow.css({opacity:c});this.flipBackShadow.css({opacity:.3*e});this.flipFrontTopHighlightShadow.css({opacity:c})},beforeFlip:function(b,c){var d={};c?(this.flipBackShadow&&this.flipBackShadow.css({visibility:"hidden"}),d.visibility="visible"):(this.flipBackShadow&&this.flipBackShadow.css({visibility:"visible"}),d.visibility="hidden");bookConfig.FlipDirection?(90<b?(d.bottom="0px",
this.flipBackShadow.css({top:"100%"})):(d.bottom="auto",this.flipBackShadow.css({top:"0px"})),c=0<=b&&180>b?100/3:100*(this.width+this.maskWidth)/(3*this.maskWidth),b=90<b?100:0):(90<b?(d.right="0",this.flipBackShadow.css({left:"100%"})):(d.right="auto",this.flipBackShadow.css({left:"0px"})),c=90<b?100:0,b=0<=b&&180>b?100*(this.height+this.maskWidth)/(3*this.maskWidth):100/3);d["transform-origin"]=c+"% "+b+"%";d["-webkit-transform-origin"]=c+"% "+b+"%";d["-moz-transform-origin"]=c+"% "+b+"%";d["-ms-transform-origin"]=
c+"% "+b+"%";this.flipFrontShadow.css(d);this.flipFrontHighlightShadow.css(d);this.flipFrontEdgeShadow.css(d);this.flipFrontTopHighlightShadow.css(d)},clear:function(){this.flipBackShadow&&this.flipBackShadow.css({visibility:"hidden"});this.flipFrontShadow&&this.flipFrontShadow.css({visibility:"hidden"});this.flipFrontHighlightShadow&&this.flipFrontHighlightShadow.css({visibility:"hidden"});this.flipFrontEdgeShadow&&this.flipFrontEdgeShadow.css({visibility:"hidden"});this.flipFrontTopHighlightShadow&&
this.flipFrontTopHighlightShadow.css({visibility:"hidden"})},resize:function(b,c){this.width=b;this.height=c;this.maskWidth=parseInt(Math.sqrt(Math.pow(b,2)+Math.pow(c,2)));bookConfig.FlipDirection?(this.flipFrontShadow.css({width:3*this.maskWidth,left:-this.maskWidth}),this.flipFrontTopHighlightShadow.css({width:3*this.maskWidth,left:-this.maskWidth}),this.flipFrontEdgeShadow.css({width:3*this.maskWidth,left:-this.maskWidth}),this.flipFrontHighlightShadow.css({width:3*this.maskWidth,left:-this.maskWidth}),
this.flipBackShadow.css({width:this.maskWidth,left:(this.width-this.maskWidth)/2})):(this.flipFrontTopHighlightShadow.css({height:3*this.maskWidth,top:-this.maskWidth}),this.flipFrontEdgeShadow.css({height:3*this.maskWidth,top:-this.maskWidth}),this.flipFrontHighlightShadow.css({height:3*this.maskWidth,top:-this.maskWidth}),this.flipFrontShadow.css({height:3*this.maskWidth,top:-this.maskWidth}),this.flipBackShadow.css({height:this.maskWidth,top:(this.height-this.maskWidth)/2}))}}),PageFlipShadow=
Class({create:function(b,c){this.parent=b;this.pageIndex=c;this.init()},init:function(){bookConfig.FlipDirection?(this.flipBackShadow=$("<div class='flip-vertical-shadowB'></div>"),this.flipFrontShadow=$("<div class='flip-vertical-topshadow'></div>")):(this.flipBackShadow=$("<div class='flip-shadowB'></div>"),this.flipFrontShadow=$("<div class='flip-topshadow'></div>"));this.parent.append(this.flipBackShadow);this.parent.append(this.flipFrontShadow)},flip:function(b,c,d){var e=b.shadowRate;d=b.rotate;
var f=.9<e?1+2*(1-e)/.1:3*e/.9;if(isPhone()||isPad())f=1;e=.9<e?.2*(1-e)/.1:.1>e?.2*e/.1:.2;if(bookConfig.FlipDirection){var g=transformCSS({scaleY:f,rotate:-d,tran:{x:0,y:(b.frontShadowDistance-100*(90<d?0:f))/Math.cos(d*Math.PI/180)}});b=transformCSS({scaleY:f,rotate:d,tran:{x:-b.maskTranY,y:b.maskTranX}})}else g=transformCSS({scaleX:f,rotate:-d,tran:{x:(b.frontShadowDistance-100*(90<d?0:f))/Math.cos(d*Math.PI/180),y:0}}),b=transformCSS({scaleX:f,rotate:d,tran:{x:b.maskTranX,y:b.maskTranY}});this.flipFrontShadow.css(g);
this.flipBackShadow.css(b);this.beforeFlip(d,c);isPhone()||isPad()||(this.flipFrontShadow.css({opacity:e}),this.flipBackShadow.css({opacity:e}))},beforeFlip:function(b,c){c?(this.flipBackShadow&&this.flipBackShadow.css({visibility:"hidden"}),this.flipFrontShadow&&this.flipFrontShadow.css({visibility:"visible"})):(this.flipBackShadow&&this.flipBackShadow.css({visibility:"visible"}),this.flipFrontShadow&&this.flipFrontShadow.css({visibility:"hidden"}));bookConfig.FlipDirection?(90<b?(this.flipFrontShadow.css({bottom:"0px"}),
this.flipBackShadow.css({top:"100%"})):(this.flipFrontShadow.css({bottom:"auto"}),this.flipBackShadow.css({top:"0px"})),c=0<=b&&180>b?100/3:100*(this.width+this.maskWidth)/(3*this.maskWidth),b=90<b?100:0):(90<b?(this.flipFrontShadow.css({right:"0px"}),this.flipBackShadow.css({left:"100%"})):(this.flipFrontShadow.css({right:"auto"}),this.flipBackShadow.css({left:"0px"})),c=90<b?100:0,b=0<=b&&180>b?100*(this.height+this.maskWidth)/(3*this.maskWidth):100/3);this.flipFrontShadow.css({"transform-origin":c+
"% "+b+"%","-webkit-transform-origin":c+"% "+b+"%","-moz-transform-origin":c+"% "+b+"%","-ms-transform-origin":c+"% "+b+"%"})},clear:function(){this.flipBackShadow&&this.flipBackShadow.css({visibility:"hidden"});this.flipFrontShadow&&this.flipFrontShadow.css({visibility:"hidden"})},resize:function(b,c){this.width=b;this.height=c;this.maskWidth=parseInt(Math.sqrt(Math.pow(b,2)+Math.pow(c,2)));bookConfig.FlipDirection?(this.flipFrontShadow.css({width:3*this.maskWidth,left:-this.maskWidth}),this.flipBackShadow.css({width:this.maskWidth,
left:(this.width-this.maskWidth)/2})):(this.flipFrontShadow.css({height:3*this.maskWidth,top:-this.maskWidth}),this.flipBackShadow.css({height:this.maskWidth,top:(this.height-this.maskWidth)/2}))}}),HardPageFlipShadow=Class({init:function(){this._super();var b=Color(bookConfig.thicknessColor);this.flipThickWidth=getMaxThicknessWidth()/5;this.flipThick=bookConfig.FlipDirection?$("<div class='flip-vertical-thick'></div>"):$("<div class='flip-thick'></div>");this.flipThick.css({background:b.reduce(50)});
this.parent.append(this.flipThick)},flip:function(b,c){var d=b.shadowRate?b.shadowRate:0;d=.5>d?2*d:2*(1-d);var e={"background-image":"none","box-shadow":"rgba(0,0,0,0.3) 0 0 2000px 5000px inset",width:"100%",height:"100%",top:0,left:0};this.flipFrontShadow.css(e);this.flipFrontShadow.css({opacity:d});this.flipBackShadow.css(e);this.flipBackShadow.css({opacity:d});b=bookConfig.FlipDirection?transformCSS({perspective:5E3,rotateX:-b.rotate,scaleY:this.flipThickWidth/6*d}):transformCSS({perspective:5E3,
rotateY:-b.rotate,scaleX:this.flipThickWidth/6*d});this.flipThick.css(b);c?(this.flipBackShadow&&this.flipBackShadow.css({visibility:"hidden"}),this.flipFrontShadow&&this.flipFrontShadow.css({visibility:"visible"})):(this.flipBackShadow&&this.flipBackShadow.css({visibility:"visible"}),this.flipFrontShadow&&this.flipFrontShadow.css({visibility:"hidden"}));this.flipThick&&this.flipThick.css({visibility:"visible"})}}).extend(PageFlipShadow),CoverShadow=Class({create:function(b,c){this.parent=b;this.direction=
bookConfig.FlipDirection;this.init()},init:virtual_function,destroy:virtual_function,onResize:function(){this.direction?(this.parentWidth=this.parent.height(),this.parentHeight=this.parent.width(),this.rotate.delay(this,1)):(this.parentWidth=this.parent.width(),this.parentHeight=this.parent.height())},rotate:function(){var b=transformCSS({rotate:90,tran:{x:this.parentHeight,y:0},origin:{x:0,y:0}});this.flip&&(b=transformCSS({scaleX:-1,rotate:90,tran:{x:this.parentHeight,y:this.parentWidth},origin:{x:0,
y:0}}));this.coverShadow&&(this.coverShadow.css({width:this.parentWidth+"px",height:this.parentHeight+"px"}),this.coverShadow.css(b))}}),HardCoverShadow=Class({init:function(){this.coverShadow=$('<div class="cover_shadow"></div>');isBelowIE11()&&this.coverShadow.css("z-index",3);this.leftBorder=$("<div></div>");this.topBorder=$('<div class="hard_top_border"></div>');this.bottomBorder=$('<div class="hard_bottom_border hard_bottom_border_width"></div>');this.rightBorder=$('<div class="hard_right_border"></div>');
this.parent.append(this.coverShadow);this.coverShadow.append(this.leftBorder);this.coverShadow.append(this.topBorder);this.coverShadow.append(this.bottomBorder);this.coverShadow.append(this.rightBorder)},onResize:function(){this._super();this.rightBorder.css({height:this.parentHeight-3+"px"})},destroy:function(){this.coverShadow.empty();this.coverShadow.remove()}}).extend(CoverShadow),OuterHardCoverShadow=Class({create:function(b,c,d){this.style=c;this.flip=!!d;this._super(b)},init:function(){this._super();
this.leftBorder.addClass("hard_left_border");this.leftBody=$('<div class="hard_left_body"></div>');this.coverShadow.append(this.leftBody);this.coverShadow.addClass(this.style);this.flip&&this.coverShadow.addClass("flip_x");this.onResize()}}).extend(HardCoverShadow),InnerHardCoverShadow=Class({create:function(b,c,d,e,f){this.style=c;this.flip=!!d;void 0==e&&(e=0);this.borderWidth=e;this.showLeftShadow=f;this._super(b)},init:function(){this._super();this.showLeftShadow?(this.leftBorder.addClass("hard_inner_left_border"),
this.leftCoverBorder=$('<div class="hard_left_cover_border"></div>'),this.coverShadow.append(this.leftCoverBorder)):this.leftBorder.css({display:"none"});this.flip&&this.coverShadow.addClass("flip_x");this.onResize()},onResize:function(){this._super();this.showLeftShadow&&(this.bottomBorder.css({left:"0px",width:"100%"}),this.leftBorder.css({top:this.borderWidth+"px",height:this.parentHeight-2*this.borderWidth+"px"}));this.flip?0!=bookConfig.LeftShadowAlpha&&0!=bookConfig.LeftShadowWidth||this.coverShadow.css("z-index",
-1):0!=bookConfig.RightShadowAlpha&&0!=bookConfig.RightShadowWidth||this.coverShadow.css("z-index",-1)}}).extend(HardCoverShadow),NormalCoverShadow=Class({create:function(b,c,d){this.style=c;this.flip=!!d;this._super(b)},init:function(){this.coverShadow=$('<div class="cover_shadow"></div>');this.coverShadow.addClass(this.style);isBelowIE11()&&this.coverShadow.css("z-index",3);this.leftBorder=$('<div class="normal_left_border"></div>');this.leftBody=$('<div class="normal_left_body"></div>');this.parent.append(this.coverShadow);
this.coverShadow.append(this.leftBorder);this.coverShadow.append(this.leftBody);if("saddle"==this.style){var b=$("<div class='top_nail'></div>"),c=$("<div class='bottom_nail'></div>");"book"==bookConfig.pageHighlightType&&(this.leftBorder.css({"background-image":"url("+uiBaseURL+"left-shadow1.png)"}),this.leftBody.css({left:0}));this.leftBody.append(b);this.leftBody.append(c)}this.flip&&this.coverShadow.addClass("flip_x");this.onResize()},destroy:function(){this.coverShadow.empty();this.coverShadow.remove()},
onResize:function(){this._super();if("saddle"==this.style){var b=Math.min(parseInt(87/450*this.parentWidth),87);this.leftBorder.css("width",b+"px");this.leftBody.find("div").css({width:Math.round(2/600*this.parentWidth)+"px",height:Math.round(.075*this.parentHeight)+"px"})}}}).extend(CoverShadow),PageShadow=Class({create:function(b,c,d){this.parent=b;this.pageIndex=c;this.isLeftPage=d;this.isHardPage=parseBool(bookConfig.HardPageEnable)&&!isBelowIE11();this.bindingType=bookConfig.BindingType;this.bindingType||
(this.bindingType="side");this.midShadow=this.coverShadow=null},addShadow:function(){this.isEmpty()||this.destroy();this.addCoverShadow();var b=parseBool(bookConfig.addPaperCoil);null!=this.coverShadow||b||bookConfig.HardInnerPageEnable?this.hidePageShadow():this.addPageShadow();this.onResize()},isEmpty:function(){return null==this.coverShadow&&null==this.midShadow},addCoverShadow:function(){this.coverShadow=this.createCoverShadow()},createCoverShadow:virtual_function,addPageShadow:function(){this.midShadow=
this.findPageShadow();if(!this.midShadow&&(this.midShadow=$("<div name='midShadow'></div>"),_agent_.system.name==_agent_.system.IOS)){var b=transformCSS({tran:{x:0,y:0},rotate:0},!0);this.midShadow.css(b)}this.isLeftPage?(bookConfig.FlipDirection?this.midShadow.attr("class","upShadow"):this.midShadow.attr("class","leftShadow"),b=bookConfig.LeftShadowAlpha):(bookConfig.FlipDirection?this.midShadow.attr("class","downShadow"):this.midShadow.attr("class","rightShadow"),b=bookConfig.RightShadowAlpha);
"magazine"==bookConfig.pageHighlightType?this.midShadow.addClass("magazine"):this.midShadow.addClass("book");this.midShadow.css({opacity:b});this.parent.append(this.midShadow)},findPageShadow:function(){if(this.midShadow)return this.midShadow;var b=this.parent.children("div[name=midShadow]");return b[0]?$(b[0]):null},hidePageShadow:function(){(this.midShadow=this.findPageShadow())&&this.midShadow.css({display:"none"})},resizePageShadow:function(b){this.midShadow=this.findPageShadow();if(null!=this.midShadow){var c=
bookConfig.LeftShadowWidth;this.isLeftPage||(c=bookConfig.RightShadowWidth);c=parseInt(c/450*b);bookConfig.FlipDirection?this.midShadow.css({height:c+"px"}):this.midShadow.css({width:c+"px"})}},onResize:function(b,c){void 0==b?(this.parentWidth=this.parent.width(),this.parentHeight=this.parent.height()):(this.parentWidth=b,this.parentHeight=c);if(this.coverShadow)this.coverShadow.onResize();this.resizePageShadow(this.parentWidth)},destroy:function(){null!=this.coverShadow&&(this.coverShadow.destroy(),
this.coverShadow=null);null!=this.midShadow&&(this.midShadow.remove(),this.midShadow=null)}}),NormalPageShadow=Class({create:function(b,c,d){this._super(b,c,d);this.evenPageCount=totalPageCount},createCoverShadow:function(){var b=1==this.pageIndex&&!bookConfig.isTheBookOpen,c=2==this.pageIndex&&!bookConfig.isTheBookOpen||1==this.pageIndex&&bookConfig.isTheBookOpen,d=this.pageIndex==this.evenPageCount,e=this.pageIndex==this.evenPageCount-1,f=4<this.evenPageCount&&!bookConfig.isTheBookOpen||3<this.evenPageCount&&
bookConfig.isTheBookOpen,g=this.isLeftPage;if(this.isHardPage){if(b||d)return new OuterHardCoverShadow(this.parent,this.bindingType,g);if(c||e)return new InnerHardCoverShadow(this.parent,this.bindingType,g,bookConfig.hardCoverBorderWidth,f)}else if(b||d)return new NormalCoverShadow(this.parent,this.bindingType,g);return null}}).extend("PageShadow"),SinglePageShadow=Class({create:function(b,c,d){this._super(b,c,d);this.isRightToLeft=parseBool(bookConfig.RightToLeft)},createCoverShadow:function(){var b=
1==this.pageIndex,c=this.pageIndex==bookConfig.totalPageCount;if(this.isHardPage){if(b)return new OuterHardCoverShadow(this.parent,this.bindingType,this.isRightToLeft);if(c)return new InnerHardCoverShadow(this.parent,this.bindingType,this.isRightToLeft,bookConfig.hardCoverBorderWidth,!0)}else if(b)return new NormalCoverShadow(this.parent,this.bindingType,this.isRightToLeft);return null}}).extend("PageShadow"),CatalogPageShadow=Class({create:function(b,c,d){this._super(b,c,d);this.evenPageCount=totalPageCount;
this.bindingType="catalog"},createCoverShadow:function(){var b=1==this.pageIndex&&!bookConfig.isTheBookOpen,c=2==this.pageIndex&&!bookConfig.isTheBookOpen||1==this.pageIndex&&bookConfig.isTheBookOpen,d=this.pageIndex==this.evenPageCount,e=this.pageIndex==this.evenPageCount-1,f=4<this.evenPageCount&&!bookConfig.isTheBookOpen||3<this.evenPageCount&&bookConfig.isTheBookOpen,g=this.isLeftPage;if(this.isHardPage){if(b||d)return new OuterHardCoverShadow(this.parent,this.bindingType,g);if(c||e)return new InnerHardCoverShadow(this.parent,
this.bindingType,g,0,f)}else if(b||d)return new NormalCoverShadow(this.parent,this.bindingType,g);return null}}).extend("PageShadow"),SlidePageShadow=Class({createCoverShadow:function(){},addShadow:function(){}}).extend("PageShadow"),DocViewPageShadow=Class({createCoverShadow:function(){},addShadow:function(){}}).extend("PageShadow"),CardPageShadow=Class({createCoverShadow:function(){},addShadow:function(){}}).extend("PageShadow"),InvertPageShadow=Class({createCoverShadow:function(){},addShadow:function(){}}).extend("PageShadow"),
PageTexture=Class({create:function(b,c,d){this.parent=b;this.pageIndex=c;this.isLeftPage=d;this.isHardPage=parseBool(bookConfig.HardPageEnable)&&!isBelowIE11();this.borderWidth=bookConfig.hardCoverBorderWidth-4;this.initResource()},initResource:function(){this.name=bookConfig.coverTexture;this.resource=PageTextureResource[this.name]},render:function(){this.isEmpty()||this.destroy();this.isCover&&this.renderCover()},isEmpty:function(){return null==this.texture},renderPage:function(){this.texture=null},
renderCover:function(){this.resource&&(this.renderTexture(),this.renderSewing(),this.onResize())},renderTexture:function(){this.texture=$("<div id='page_texture'></div>");this.texture.css({position:"absolute","pointer-events":"none","z-index":1,width:"100%",height:"100%"});this.parent.append(this.texture);var b=uiBaseURL+this.resource.texture;this.isOutCover?this.texture.css({"background-image":"url("+b+")","background-repeat":"repeat"}):this.parent.css({"background-image":"url("+b+")","background-repeat":"repeat"})},
renderSewing:function(){if(!(0>=this.borderWidth)&&this.resource.sewing){var b=this.resource.sewing;this.isInnerCover&&(b=BorderSewing.flat);bookConfig.FlipDirection?(this.left_texture=$("<div id='left_texture'></div>"),this.left_texture.css({position:"absolute",top:this.borderWidth+"px",left:this.borderWidth+"px",width:b.right.width+"px","background-image":"url("+uiBaseURL+b.left.url+")","background-repeat":"repeat-y"}),this.texture.append(this.left_texture)):(this.top_texture=$("<div id='top_texture'></div>"),
this.top_texture.css({position:"absolute",top:this.borderWidth+"px",left:this.borderWidth+"px",height:b.top.height+"px","background-image":"url("+uiBaseURL+b.top.url+")","background-repeat":"repeat-x"}),this.texture.append(this.top_texture));this.right_texture=$("<div id='right_texture'></div>");this.right_texture.css({position:"absolute",top:this.borderWidth+"px",right:this.borderWidth+"px",width:b.right.width+"px","background-image":"url("+uiBaseURL+b.right.url+")","background-repeat":"repeat-y"});
this.texture.append(this.right_texture);this.bottom_texture=$("<div id='bottom_texture'></div>");this.bottom_texture.css({position:"absolute",bottom:this.borderWidth+"px",right:this.borderWidth+"px",height:b.bottom.height+"px","background-image":"url("+uiBaseURL+b.bottom.url+")","background-repeat":"repeat-x"});this.texture.append(this.bottom_texture);this.isLeftPage&&(bookConfig.FlipDirection?(this.bottom_texture.addClass("flip_y"),this.bottom_texture.css({top:this.borderWidth+"px",bottom:"auto"}),
this.left_texture&&this.left_texture.css({bottom:this.borderWidth+"px",top:"auto"}),this.right_texture.css({bottom:this.borderWidth+"px",top:"auto"})):(this.right_texture.addClass("flip_x"),this.right_texture.css({left:this.borderWidth+"px",right:"auto"}),this.top_texture&&this.top_texture.css({right:this.borderWidth+"px",left:"auto"}),this.bottom_texture.css({right:this.borderWidth+"px",left:"auto"})));this.resource.sewing.renderBorder&&this.renderBorder()}},renderBorder:function(){0!=this.borderWidth&&
(bookConfig.FlipDirection?(this.left_texture_border=$("<div id='left_texture_border'></div>"),this.left_texture_border.css({position:"absolute",left:"0px",width:this.borderWidth+"px",height:"100%","background-image":_agent_.browser.prefix+"linear-gradient(left, rgba(220,220,220,0) 0%, rgba(220,220,220,0.2) 50%, rgba(220,220,220,0) 100%)"}),this.texture.append(this.left_texture_border)):(this.top_texture_border=$("<div id='top_texture_border'></div>"),this.top_texture_border.css({position:"absolute",
top:"0px",width:"100%",height:this.borderWidth+"px","background-image":_agent_.browser.prefix+"linear-gradient(top, rgba(220,220,220,0) 0%, rgba(220,220,220,0.2) 50%, rgba(220,220,220,0) 100%)"}),this.texture.append(this.top_texture_border)),this.right_texture_border=$("<div id='right_texture_border'></div>"),this.right_texture_border.css({position:"absolute",right:"0px",width:this.borderWidth+"px",height:"100%","background-image":_agent_.browser.prefix+"linear-gradient(right, rgba(220,220,220,0) 0%, rgba(220,220,220,0.2) 50%, rgba(220,220,220,0) 100%)"}),
this.texture.append(this.right_texture_border),this.bottom_texture_border=$("<div id='bottom_texture_border'></div>"),this.bottom_texture_border.css({position:"absolute",bottom:"0px",width:"100%",height:this.borderWidth+"px","background-image":_agent_.browser.prefix+"linear-gradient(bottom, rgba(220,220,220,0) 0%, rgba(220,220,220,0.2) 50%, rgba(220,220,220,0) 100%)"}),this.texture.append(this.bottom_texture_border),this.isLeftPage&&(bookConfig.FlipDirection?this.bottom_texture_border.css({top:"0px",
bottom:"auto"}):this.right_texture_border.css({left:"0px",right:"auto"})))},onResize:function(){this.parentWidth=this.parent.width();this.parentHeight=this.parent.height();this.top_texture&&this.top_texture.css({width:this.parentWidth-2*this.borderWidth+"px"});this.left_texture&&this.left_texture.css({height:this.parentHeight-2*this.borderWidth+"px"});this.right_texture&&this.right_texture.css({height:this.parentHeight-2*this.borderWidth+"px"});this.bottom_texture&&this.bottom_texture.css({width:this.parentWidth-
2*this.borderWidth+"px"})},destroy:function(){this.texture&&(this.texture.remove(),this.texture=null);this.top_texture&&(this.top_texture.remove(),this.top_texture=null);this.left_texture&&(this.left_texture.remove(),this.left_texture=null);this.right_texture&&(this.right_texture.remove(),this.right_texture=null);this.bottom_texture&&(this.bottom_texture.remove(),this.bottom_texture=null);this.left_texture_border&&(this.left_texture_border.remove(),this.left_texture_border=null);this.top_texture_border&&
(this.top_texture_border.remove(),this.top_texture_border=null);this.right_texture_border&&(this.right_texture_border.remove(),this.right_texture_border=null);this.bottom_texture_border&&(this.bottom_texture_border.remove(),this.bottom_texture_border=null)}}),NormalPageTexture=Class({create:function(b,c,d){this._super(b,c,d);this.isOutCover=1==c&&!bookConfig.isTheBookOpen||c==totalPageCount;this.isInnerCover=2==c&&!bookConfig.isTheBookOpen||1==c&&bookConfig.isTheBookOpen||c==totalPageCount-1;this.isCover=
this.isOutCover||this.isInnerCover}}).extend("PageTexture"),SinglePageTexture=Class({create:function(b,c,d){this._super(b,c,d);this.isOutCover=1==c;this.isInnerCover=c==bookConfig.totalPageCount;this.isCover=this.isOutCover||this.isInnerCover}}).extend("PageTexture"),CatalogPageTexture=Class({create:function(b,c,d){this._super(b,c,d);this.isOutCover=1==c&&!bookConfig.isTheBookOpen||c==totalPageCount;this.isInnerCover=2==c&&!bookConfig.isTheBookOpen||1==c&&bookConfig.isTheBookOpen||c==totalPageCount-
1;this.isCover=this.isOutCover||this.isInnerCover}}).extend("PageTexture"),SlidePageTexture=Class({create:function(b,c,d){this._super(b,c,d);this.isCover=!1}}).extend("PageTexture"),DocViewPageTexture=Class({create:function(b,c,d){this._super(b,c,d);this.isCover=!1}}).extend("PageTexture"),CardPageTexture=Class({create:function(b,c,d){this._super(b,c,d);this.isCover=!1}}).extend("PageTexture"),InvertPageTexture=Class({create:function(b,c,d){this._super(b,c,d);this.isCover=!1}}).extend("PageTexture"),
BorderSewing={deep:{top:{url:"deep_top_sewing.png",width:28,height:42},left:{url:"deep_left_sewing.png",width:71,height:28},right:{url:"deep_right_sewing.png",width:71,height:28},bottom:{url:"deep_bottom_sewing.png",width:28,height:42},renderBorder:!0},normal:{top:{url:"normal_top_sewing.png",width:28,height:10},left:{url:"normal_left_sewing.png",width:10,height:28},right:{url:"normal_right_sewing.png",width:10,height:28},bottom:{url:"normal_bottom_sewing.png",width:28,height:20},renderBorder:!0},
flat:{top:{url:"flat_top_sewing.png",width:28,height:10},left:{url:"flat_left_sewing.png",width:10,height:28},right:{url:"flat_right_sewing.png",width:10,height:28},bottom:{url:"flat_bottom_sewing.png",width:28,height:10},renderBorder:!1}},PageTextureResource={leather1:{texture:"leather1.png",sewing:BorderSewing.deep},leather2:{texture:"leather2.png",sewing:BorderSewing.normal},cloth1:{texture:"cloth1.png",sewing:BorderSewing.flat},cloth2:{texture:"cloth2.png",sewing:BorderSewing.flat},cloth3:{texture:"cloth3.png",
sewing:BorderSewing.flat},cloth4:{texture:"cloth4.png",sewing:BorderSewing.normal},cardboard1:{texture:"cardboard1.png",sewing:null},cardboard2:{texture:"cardboard2.png",sewing:null},cardboard3:{texture:"cardboard3.png",sewing:null},silk1:{texture:"silk1.png",sewing:BorderSewing.flat},silk2:{texture:"silk2.png",sewing:BorderSewing.flat},silk3:{texture:"silk3.png",sewing:BorderSewing.flat},silk4:{texture:"silk4.png",sewing:BorderSewing.flat},wood1:{texture:"wood1.png",sewing:null},wood2:{texture:"wood2.png",
sewing:null}},PageRendering=Class({create:function(b,c,d){this.parent=b;this.pageIndex=c;this.isLeftPage=getPageDirection(c,d);this.pageShadow=getPageShadow(b,c,this.isLeftPage,d);this.pageTexture=getPageTexture(b,c,this.isLeftPage,d);this.grayshadow=getGrayShadow(b,c,this.isLeftPage,d)},render:function(){this.addCoil();this.addPageShadow();this.addPageTexture()},addCoil:function(){if("loose2"==bookConfig.BindingType)this.addCoil2();else if(parseBool(bookConfig.addPaperCoil)){var b=$("<div class='coil'></div>");
this.midCoil=$("<div style='z-index:6;'></div>");bookConfig.FlipDirection?this.isLeftPage?(b.attr("class","upPaperCoil"),this.midCoil.attr("class","upPaperCoil_bg")):(b.attr("class","downPaperCoil"),this.midCoil.attr("class","downPaperCoil_bg")):this.isLeftPage?(b.attr("class","leftPaperCoil"),this.midCoil.attr("class","leftPaperCoil_bg")):(b.attr("class","rightPaperCoil"),this.midCoil.attr("class","rightPaperCoil_bg"));this.midCoil.append(b);!bookConfig.HardPageEnable||1!=this.pageIndex&&this.pageIndex!=
totalPageCount||this.midCoil.css("background-image","none");this.parent.append(this.midCoil)}},addCoil2:function(){if(parseBool(bookConfig.addPaperCoil)){var b=$("<div class='coil'></div>");this.midCoil=$("<div style='z-index:6;'></div>");bookConfig.FlipDirection?this.isLeftPage?(b.attr("class","upPaperCoil2"),this.midCoil.attr("class","upPaperCoil2_bg")):(b.attr("class","downPaperCoil2"),this.midCoil.attr("class","downPaperCoil2_bg")):this.isLeftPage?(b.attr("class","leftPaperCoil2"),this.midCoil.attr("class",
"leftPaperCoil2_bg")):(b.attr("class","rightPaperCoil2"),this.midCoil.attr("class","rightPaperCoil2_bg"));this.midCoil.append(b);this.midCoil.append(b.clone());!bookConfig.HardPageEnable||1!=this.pageIndex&&this.pageIndex!=totalPageCount||this.midCoil.css("background-image","none");this.parent.append(this.midCoil)}},addPageShadow:function(){this.pageShadow.addShadow()},addPageTexture:function(){this.pageTexture.render()},hideMiddleShadow:function(){this.pageShadow.hidePageShadow()},onResize:function(b,
c){if(this.pageShadow)this.pageShadow.onResize(b,c);if(this.pageTexture)this.pageTexture.onResize(b,c);this.midCoil&&(bookConfig.FlipDirection?this.resizeCoilVertical(b,c):(!bookConfig.HardPageEnable||2!=this.pageIndex&&this.pageIndex!=totalPageCount-1||this.midCoil.css({height:c+"px",top:0,bottom:0,margin:"auto"}),"loose2"==bookConfig.BindingType?(b=Math.min(60*parseInt(c/3/60),180),this.midCoil.find("div").css({height:b+"px"}),$(this.midCoil.find("div")[0]).css({top:"67%","margin-top":"-30px",bottom:"auto"}),
$(this.midCoil.find("div")[1]).css({bottom:"67%","margin-bottom":"-30px",top:"auto"})):(b=50*parseInt(c/50),this.midCoil.find("div").css({height:b+"px"}))))},resizeCoilVertical:function(b,c){!bookConfig.HardPageEnable||2!=this.pageIndex&&this.pageIndex!=totalPageCount-1||this.midCoil.css({width:b+"px",left:0,right:0,margin:"auto"});"loose2"==bookConfig.BindingType?(b=Math.min(60*parseInt(b/3/60),180),this.midCoil.find("div").css({width:b+"px"}),$(this.midCoil.find("div")[0]).css({left:"67%","margin-left":"-30px",
right:"auto"}),$(this.midCoil.find("div")[1]).css({right:"67%","margin-right":"-30px",left:"auto"})):(b=50*parseInt(b/50),this.midCoil.find("div").css({width:b+"px"}))},destroy:function(){this.pageShadow&&(this.pageShadow.destroy(),this.pageShadow=null);this.pageTexture&&(this.pageTexture.destroy(),this.pageTexture=null);this.midCoil&&(this.midCoil.remove(),this.midCoil=null)}});
function getGrayShadow(b,c,d,e){if(!_agent_.browser.msie&&!_agent_.browser.safari&&bookConfig.ShowTopLeftShadow&&e==BookType.normal_book&&d)return new GrayShadow(b)}
function getPageShadow(b,c,d,e){if(e==BookType.normal_book)return new NormalPageShadow(b,c,d);if(e==BookType.single_book)return new SinglePageShadow(b,c,d);if(e==BookType.catalog_book)return new CatalogPageShadow(b,c,d);if(e==BookType.slide_book||e==BookType.singleSlide_book)return new SlidePageShadow(b,c,d);if(e==BookType.documentView_book||e==BookType.singleDocumentView_book)return new DocViewPageShadow(b,c,d);if(e==BookType.card_book)return new CardPageShadow(b,c,d);if(e==BookType.invert_book)return new InvertPageShadow(b,
c,d)}
function getPageTexture(b,c,d,e){if(e==BookType.normal_book)return new NormalPageTexture(b,c,d);if(e==BookType.single_book)return new SinglePageTexture(b,c,d);if(e==BookType.catalog_book)return new CatalogPageTexture(b,c,d);if(e==BookType.slide_book||e==BookType.singleSlide_book)return new SlidePageTexture(b,c,d);if(e==BookType.documentView_book||e==BookType.singleDocumentView_book)return new DocViewPageTexture(b,c,d);if(e==BookType.card_book)return new CardPageTexture(b,c,d);if(e==BookType.invert_book)return new InvertPageTexture(b,c,
d)}function getPageDirection(b,c){switch(c){case BookType.single_book:if(bookConfig.RightToLeft)return!0;break;case BookType.singleSlide_book:if(bookConfig.RightToLeft)return!0;break;default:return BookInfo.isLeftPage(b,!0)}return!1}
var PageInfo=Class({create:function(b){this.getPageInfoArray(b)},getPageInfoArray:function(b){if(this.pageInfoArray)return this.pageInfoArray;this.initPageInfo(b);return this.pageInfoArray},initPageInfo:function(b){this.pageInfoArray=[{}];for(var c=1;c<=totalPageCount;c++){var d=this.getPageInfo(c,b),e=this.getNextPageInfo(c,b);e&&(d.pageWidth=Math.max(d.pageWidth,e.pageWidth),d.pageHeight=Math.max(d.pageHeight,e.pageHeight),d.opacity=Math.max(d.opacity,e.opacity),1!=d.pageWidth||1!=d.pageWidth||
1!=d.pageWidth)&&(d.isMiniPage=!0);this.pageInfoArray.push(d)}},getNextPageInfo:function(b,c){if(!c)return b=bookConfig.isTheBookOpen?0==b%2?b+1:b-1:0==b%2?b-1:b+1,this.getPageInfo(b,c)},getPageInfo:function(b,c){if(!(0>=b||b>totalPageCount)){var d=c=1,e=1;window.fliphtml5_pages&&window.fliphtml5_pages[b-1]&&(e=window.fliphtml5_pages[b-1],c=e.w?Math.min(e.w,1):1,d=e.h?Math.min(e.h,1):1,e=e.o?Math.min(e.o,1):1);if(1==b||b==totalPageCount)d=c=1;return{pageWidth:c,pageHeight:d,opacity:e}}},statics:{getPageColor:function(b){return window.pages_information&&
window.pages_information[b-1]&&window.pages_information[b-1].pageColor?window.pages_information[b-1].pageColor:bookConfig.pageBackgroundColor},pageIsStrech:function(b){return window.pages_information&&window.pages_information[b-1]&&window.pages_information[b-1].pageIsStrech?parseBool(window.pages_information[b-1].pageIsStrech):bookConfig.bookPageStretch}}}),accessControlImagesPool={},accessControlPostImagesPool=[],PageLoadTask=Class({statics:{task:null,taskList:{normal:[],large:[],thumb:[],previewPage:[]},
pageLength:20,addTask:function(b,c){b=parseInt((b-1)/this.pageLength);this.taskList[c]&&this.taskList[c][b]&&(this.taskList[c][b].running||this.taskList[c][b].completed&&this.taskList[c][b].completedAll)||this.createTask(b,c)},createTask:function(b,c){this.taskList[c][b]={completed:!1,completedAll:!1,running:!0};var d=this.getPostUrls(b,c);this.postYunzhanUrls(b,c,d)},getPostUrls:function(b,c){var d=(b+1)*this.pageLength,e=[];for(b=b*this.pageLength+1;b<=d;b++){var f=pageDirWidthPath(b,c);f=this.removeParamFromUrl(f);
e=e.concat(f)}return e},postYunzhanUrls:function(b,c,d){var e=this,f=d;"string"==typeof d&&(f=[d]);if(f&&0!=f.length){var g=[];for(d=0;d<f.length;d++){var h=toAbsURL(f[d])+(window.isSupportWebp?"":"?x-oss-process=image/format,jpg");g.push(h)}d=BookRestrict.getRestrictToken();$.ajax({type:"get",url:restrictUrl,dataType:"json",data:{urls:JSON.stringify(g),token:d},success:function(k){if("OK"==k.code){for(var l=!0,n=0;n<f.length;n++){var p=g[n];accessControlImagesPool[f[n]]=k.data[p];k.data[p]||(l=!1)}e.completedTask(b,
c);l&&e.completedAllTask(b,c);e.clearTaskTimer||(e.clearTaskTimer=setInterval(function(){e.clearTask()},174E4))}else window.encryptionPannel&&!window.encryptionPannel.visible&&window.encryptionPannel.show()},error:function(){window.encryptionPannel&&!window.encryptionPannel.visible&&window.encryptionPannel.show()}})}else this.completedTask(b,c)},isCompleted:function(b,c){b=parseInt((b-1)/this.pageLength);return this.taskList[c]&&this.taskList[c][b]&&this.taskList[c][b].completed?!0:!1},completedTask:function(b,
c){try{this.taskList[c][b].completed=!0,this.taskList[c][b].running=!1}catch(d){}},completedAllTask:function(b,c){try{this.taskList[c][b].completedAll=!0}catch(d){}},getUrls:function(b){if("object"==typeof b){for(var c=[],d=[],e=0;e<b.length;e++){var f=b[e],g=f.removeStartFrom("?");f=f.remove(g);f=f.remove("?");d.push(f)}for(e=0;e<b.length;e++)f=b[e],g=f.removeStartFrom("?"),0<=f.indexOf("none")?c.push("none"):c.push(accessControlImagesPool[g]?this.mergeParamFromUrl(accessControlImagesPool[g],d[e]):
f);return c}if(0<=b.indexOf("none"))return"none";g=b.removeStartFrom("?");f=b.remove(g);f=f.remove("?");return accessControlImagesPool[g]?this.mergeParamFromUrl(accessControlImagesPool[g],f):accessControlImagesPool[g]?this.mergeParamFromUrl(accessControlImagesPool[g],f):b},mergeParamFromUrl:function(b,c){return b},removeParamFromUrl:function(b){if("object"==typeof b){for(var c=[],d=0;d<b.length;d++){var e=b[d],f=e.removeStartFrom("?");0>e.indexOf("none")&&!accessControlImagesPool[f]&&c.push(f)}return c}if(0<=
b.indexOf("none"))return[];c=[];f=b.removeStartFrom("?");c.push(f.toString());return accessControlImagesPool[f]?[]:c},clearTask:function(){this.taskList={normal:[],large:[],thumb:[],previewPage:[]}}}}),adjustPageURL=function(b,c,d){b=parseInt(b)-1;global.fliphtml5_pages||(global.fliphtml5_pages=[]);global.fliphtml5_pages[b]||(global.fliphtml5_pages[b]={});switch(c){case 0:global.fliphtml5_pages[b].l=d;break;case 1:global.fliphtml5_pages[b].n=d;break;case 2:global.fliphtml5_pages[b].t=d;break;case 3:global.fliphtml5_pages[b].p=
d}},useTheFliphtml5Service=function(){if(bookConfig.useTheFliphtml5Service)for(var b=bookConfig.totalPageCount,c=1;c<=b;c++){var d=pageDirWidthPath(c,"normal",b),e=pageDirWidthPath(c,"large",b),f=pageDirWidthPath(c,"thumb",b),g=pageDirWidthPath(c,"previewPage",b);if("string"!=typeof d)for(var h=0;h<d.length;h++)d[h]=resetFliphtml5URL(d[h]);else d=resetFliphtml5URL(d);e=resetFliphtml5URL(e);f=resetFliphtml5URL(f);g=resetFliphtml5URL(g);adjustPageURL(c,0,e);adjustPageURL(c,1,d);adjustPageURL(c,2,f);
adjustPageURL(c,3,g)}},useTheAliCloudChart=function(b,c){if(bookConfig.useTheAliCloudChart){if(isPad()||isPhone())try{b*=devicePixelRatio,c*=devicePixelRatio}catch(n){}for(var d=bookConfig.totalPageCount,e=1;e<=d;e++){var f=realPageDir(e,"normal",d),g=realPageDir(e,"large",d),h=realPageDir(e,"thumb",d),k=realPageDir(e,"previewPage",d);if("string"!=typeof f)for(var l=0;l<f.length;l++)f[l]=resetYunzhanURL(f[l],b,c);else f=resetYunzhanURL(f,b,c);g=resetYunzhanURL(g);h=resetYunzhanURL(h);k=resetYunzhanURL(k);
adjustPageURL(e,0,g);adjustPageURL(e,1,f);adjustPageURL(e,2,h);adjustPageURL(e,3,k)}}},useTheAliCloudChartOnIsuuBook=function(b,c){if(bookConfig.useTheAliCloudChart&&"issuu"==bookConfig.FlipStyle)for(var d=bookConfig.totalPageCount,e=1;e<=d;e++){var f=realPageDir(e,"normal",d),g=realPageDir(e,"large",d),h=realPageDir(e,"thumb",d),k=realPageDir(e,"previewPage",d);c=BookInfo.getBook().getPagesFitWHByIndex(e);b=c.x;c=c.y;if(isPad()||isPhone())try{b*=devicePixelRatio,c*=devicePixelRatio}catch(n){}if("string"!=
typeof f)for(var l=0;l<f.length;l++)f[l]=resetYunzhanURL(f[l],b,c);else f=resetYunzhanURL(f,b,c);g=resetYunzhanURL(g);h=resetYunzhanURL(h);k=resetYunzhanURL(k);adjustPageURL(e,0,g);adjustPageURL(e,1,f);adjustPageURL(e,2,h);adjustPageURL(e,3,k)}};
function getPageDir(b,c,d,e,f){var g,h,k,l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress){if("restrict"==BookRestrict.isRestrictPage(b))return g=1==b?getMeta("og:image"):bookConfig.pageRestrictUrl,n.return(g);h=pageDirWidthPath(b,c,d,e,f);if(!bookConfig.isEncryptionBook){if("string"==typeof h)h=changeBookResourceBaseURL(h);else{k=[];for(l=0;l<h.length;l++)k.push(changeBookResourceBaseURL(h[l]));h=k}return n.jumpTo(2)}return n.yield(getYunzhanUrl(h,b,c),3)}2!=n.nextAddress&&
(h=n.yieldResult);return n.return(h)})}
var pageDirWidthPath=function(b,c,d,e,f){var g=realPageDir(b,c,d,e,f);g||"previewPage"!=c||(g=realPageDir(b,"thumb",d,e,f));if(g)if("string"==typeof g)g=fixURLValue(g);else{b=[];d=getPagePathName(c);for(e=0;e<g.length;e++)f=window.fliphtml5_pages&&fliphtml5_pages[d]&&void 0!=fliphtml5_pages[d][e]?fliphtml5_pages[d][e]:"string"==typeof bookConfig[d]?bookConfig[d]:bookConfig[d][e],0<=g[e].indexOf("files/")&&(f=""),0<=g[e].indexOf("http")&&(f=""),b.push(f+g[e]);g=1==g.length&&"normal"==c?fixURLValue(b[0]):
fixURLValue(b.clone())}return g},realPageDir=function(b,c,d,e,f){if(0>=b||void 0!=d&&b>d)return"";if(bookConfig.getPageURL){var g=0;"normal"==c&&(g=1);"thumb"==c&&(g=2);"previewPage"==c&&(g=3);return bookConfig.getPageURL(b,g,d,e,f)}d=getFileFormat(b,c);var h=global.fliphtml5_pages;if(void 0!=h&&0<h.length&&(h=h[b-1],void 0!=h&&null!=h))switch(c){case "normal":g=void 0==h.n?h.l:h.n;break;case "large":g=h.l;break;case "thumb":g=h.t;break;case "previewPage":g=h.p}return void 0==g?defaultRealPageDir(c,
b,d,e,f):g},defaultRealPageDir=function(b,c,d,e,f){var g="";switch(b){case "normal":g=getNormalPageDirByWidthHeight(b,c,d,e,f);break;case "large":g=bookConfig.largePath+c+d;break;case "thumb":g=bookConfig.thumbPath+c+d}return g},getPagePathName=function(b){switch(b){case "normal":return"normalPath";case "large":return"normalPath";case "thumb":return"thumbPath";case "previewPage":return"normalPath"}},getNormalPageDirByWidthHeight=function(b,c,d,e,f){b=getPageSize(c,b);if(!b)return bookConfig.normalPath+
c+d;e||(e=0);f||(f=0);if(isPhone()||isPad())f=e=1E4;e=findCloseNum(b,Math.max(e,f));return bookConfig.normalPath+c+"_"+e+d};function findCloseNum(b,c){for(var d=0,e=Number.MAX_VALUE,f=0;f<b.length;f++){var g=Math.abs(b[f]-c);g<=e&&!(g===e&&b[f]<b[d])&&(d=f,e=g)}return b[d]}
var getPageSize=function(b,c,d){if(0>=b||void 0!=d&&b>d)return null;d=global.fliphtml5_pages;if(void 0!=d&&0<d.length){b=d[b-1];if(void 0!=b&&null!=b)switch(c){case "normal":var e=b.normalSize}if(void 0==e)switch(c){case "normal":e=bookConfig.normalSize}return e?e.increasing():null}switch(c){case "normal":return(e=bookConfig.normalSize)?e.increasing():null}return null};
function getYunzhanUrl(b,c,d){return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(!bookConfig.isEncryptionBook||"none"==BookRestrict.isRestrictPage(c))return e.return(b);PageLoadTask.addTask(c,d);return e.return(new Promise(function(f,g){var h=window.setInterval(function(){if(PageLoadTask.isCompleted(c,d)){window.clearInterval(h);var k=PageLoadTask.getUrls(b,c);f(k)}},50)}))})}
function loadJsonFile(b){var c,d,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){switch(f.nextAddress){case 1:return f.setCatchFinallyBlocks(2),f.yield(fetch(b),4);case 4:c=f.yieldResult;if(!c.ok)throw Error("HTTP error! status: "+c.status);return f.yield(c.json(),5);case 5:return d=f.yieldResult,f.return(d);case 2:e=f.enterCatchBlock(),console.error("Error loading JSON file:",e),f.jumpToEnd()}})}
function getArticleImage(b){return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){b=changeBookResourceBaseURL(b);return bookConfig.isEncryptionBook?c.return(new Promise(function(d,e){var f=[];f.push(toAbsURL(b));e=BookRestrict.getRestrictToken();$.ajax({type:"get",url:restrictUrl,dataType:"json",data:{urls:JSON.stringify(f),token:e},success:function(g){"OK"==g.code?d(g.data[f[0]]):d("")},error:function(){d("")}})})):c.return(b)})}
var globalImages=[],canvasData=[],canvasLoad=function(b,c,d,e,f,g){var h=$("<canvas class='test'></canvas>"),k=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){e&&e(c,c,h,b);l.jumpToEnd()})};(function(){var l=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){$.ajax({url:c,type:"GET",dataType:"json",success:function(p){canvasData[b]="string"==typeof p?JSON.parse(p):p;globalImages[b]=[];(function(){if(0==canvasData[b].resources.length)k();else for(var r=0,
B=0;B<canvasData[b].resources.length;B++)if(1!=canvasData[b].resources[B].type)r++,r>=canvasData[b].resources.length&&k();else{var v=new Image;v.src=getResource(b,B);globalImages[b][B]=v;v.onload=function(){r++;r>=canvasData[b].resources.length&&k()}}})()}.bind(l),error:function(){}});n.jumpToEnd()})})()},objectLoad=function(b,c,d,e,f,g){var h,k,l,n,p,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(B){h=0;k=$("<div style='position:relative;'></div>");k.css({width:bookConfig.largePageWidth+
"px",height:bookConfig.largePageHeight+"px"});l=function(v){bookConfig.largePageWidth/bookConfig.largePageHeight>v[0].naturalWidth/v[0].naturalHeight?v.css({width:"auto",height:"100%"}):v.css({width:"100%",height:"auto"})};for(n=0;n<c.length;n++)p=c[n],p=p.removeStartFrom("?"),r=$("<img style='position:absolute;left:0;top:0;bottom:0;right:0;margin:auto;'></img>"),r.attr("src",p),k.append(r),r[0].onload=function(v){l($(this));h++;h==c.length&&e&&e(c,c,k,b)},r[0].onerror=function(v){h++;h==c.length&&
e&&e(c,c,k,b)};B.jumpToEnd()})},noneLoad=function(b,c,d,e,f,g){var h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){h=$("<div style='width:100%;height:100%;background:"+bookConfig.pageBackgroundColor+";'></div>");e&&e(c,c,h,b);return k.return()})},jsLoad=function(b,c,d,e,f,g){var h,k,l,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){h=function(r,B){return!r||passwardType()&&bookConfig.excludeFrontPages&&B>parseInt(bookConfig.excludeFrontPages)&&!verifyPassward()?!1:
!0};if(!h(c,b))return!window.userList&&1<passwardType()&&loadJavascript(fixURLValue(bookConfig.userListPath),function(){pageResourceLoad(b,d,e)},function(){}),p.return();if(k=global[decodeDatabasePrefix(d)+b]&&"string"==typeof global[decodeDatabasePrefix(d)+b])return l=dataBase64Str(b,d),n=$("<img src='"+l+"'/>"),n[0].onload=function(){e&&e(l,c,this,b)},p.return();loadJavascript(c,function(r){var B=dataBase64Str(b,d,r);$("<img src='"+B+"'/>")[0].onload=function(){e&&e(B,c,this,b)}},function(){});
return p.return()})},zipLoad=function(b,c,d,e,f,g){var h=this,k,l,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(!window.printLoadStack)return p.return();k=f?f:BookInfo.getBook().pageWidth;l=g?g:BookInfo.getBook().pageHeight;n=new PdfLoadingTask(b,d,k,l,function(r){var B=r.toDataURL("image/png"),v=$("<img src='"+B+"'/>");v[0].onload=function(){e&&e(B,B,v,b)}}.bind(h));window.printLoadStack.push(n);return p.return()})},svgLoad=function(b,c,d,e,f,g){var h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){bookConfig.useTheAliCloudChart&&
BookInfo.getBook().status_zoom&&(c=c.removeStartFrom("?"));h=$("<img src='"+c+"'/>");h[0].onload=function(){var l=$("<object data='"+c+"' type='image/svg+xml'></object>")[0];e&&e(c,c,l,b)};k.jumpToEnd()})},imgLoad=function(b,c,d,e,f,g){var h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){bookConfig.useTheAliCloudChart&&BookInfo.getBook().status_zoom&&(c=c.removeStartFrom("?"));h=$("<img src='"+c+"'/>");h[0].onload=function(){e&&e(c,c,this,b)};k.jumpToEnd()})},pageResourceLoad=function(b,
c,d,e,f){var g,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return b&&c?k.yield(getPageDir(b,c,originTotalPageCount),2):k.return();g=k.yieldResult;h="img";"normal"==c&&bookConfig.usePdfJs&&(h="canvas");"object"==typeof g?h="object":"string"==typeof g&&(g.match(/^none/)&&(h="none"),-1<g.indexOf(".js")&&(h="js"),-1<g.indexOf(".zip")&&(h="zip"),-1<g.indexOf(".svg")&&(h="svg"));switch(h){case "canvas":canvasLoad(b,g,c,d,e,f);break;case "object":objectLoad(b,g,c,
d,e,f);break;case "none":noneLoad(b,g,c,d,e,f);break;case "js":jsLoad(b,g,c,d,e,f);break;case "zip":zipLoad(b,g,c,d,e,f);break;case "svg":svgLoad(b,g,c,d,e,f);break;case "img":imgLoad(b,g,c,d,e,f)}k.jumpToEnd()})},getFileFormat=function(b,c){var d="";return!passwardType()||!bookConfig.excludeFrontPages||b<=parseInt(bookConfig.excludeFrontPages)?("normal"==c&&(global.fliphtml5_pages&&0<fliphtml5_pages.length&&(b=fliphtml5_pages[b-1])&&b.suffix&&(d=b.suffix),d||(d=bookConfig.normalSuffix?bookConfig.normalSuffix:
".jpg")),"string"==typeof d&&d||(d=".jpg"),"."!=d[0]&&(d="."+d),d):".js"},decodeBase64=function(b,c){var d=encodeDatabasePrefix(c);if(global[d+b]&&"string"==typeof global[d+b]&&(c=getRealkey()))return b=base64.decode(global[d+b]),b=rc4(c,b),base64.encode(b)},dataBase64Str=function(b,c,d){if(verifyPassward()){var e=decodeDatabasePrefix(c),f=encodeDatabasePrefix(c);if(global[e+b])return global[f+b]=null,d&&$(d).remove(),global[e+b];c="data:image/jpg;base64,"+decodeBase64(b,c);global[e+b]=c;global[f+
b]=null;d&&$(d).remove();return c}},decodeDatabasePrefix=function(b){switch(b){case "normal":return"dataBase";case "large":return"dataBase";case "thum":return"dataBaseThum";case "thumb":return"dataBaseThum"}},encodeDatabasePrefix=function(b){switch(b){case "normal":return"page";case "large":return"page";case "thum":return"thumb";case "thumb":return"thumb"}},userList,getRealkey=function(){if(1==passwardType())return getSingleRealKey();if(userList){var b=getPassward(),c=getUsername();if(b&&c&&userList&&
"string"==typeof userList[c])return getListRealKey(c,b,userList[c])}},getSingleRealKey=function(){if(bookConfig.singlePasswordKey&&"string"==typeof bookConfig.singlePasswordKey){var b=getPassward();if(b){var c=parsHexToNormalString(bookConfig.singlePasswordKey);return rc4(b,c)}}},getListRealKey=function(b,c,d){b=(b+String.fromCharCode(9)+c).MD5(32);b=parsHexToNormalString(b);b=base64.encode(b);d=d.remove(b);d=d.replace(/==?$/,"");if(d=base64.decode(d))return c=(b+c).cycleToLength(128),rc4(c,d)},verifyPassward=
function(b,c){if(!passwardType())return!0;b=b?b:getPassward();c=c?c:getUsername();if(1==passwardType())return b?b.MD5(32).toLowerCase()===bookConfig.singlePasswordMD5.toLowerCase():void 0;if(bookConfig.userListPath&&(userList||loadJavascript(fixURLValue(bookConfig.userListPath),verifyPassward,function(){}),userList&&b&&c&&"string"==typeof userList[c]))return b=(c+String.fromCharCode(9)+b).MD5(32),b=parsHexToNormalString(b),b=base64.encode(b),userList[c].substring(0,24)===b},passwardType=function(){if(!tmpBookConfig.securityType||
1==parseInt(tmpBookConfig.securityType))return 0;if(tmpBookConfig.securityType&&2==parseInt(tmpBookConfig.securityType))return 1;if(tmpBookConfig.securityType&&3==parseInt(tmpBookConfig.securityType))return 2},getPassward=function(){try{return window.localStorage[realLocation+"?passward"]}catch(b){}},getUsername=function(){try{return window.localStorage[realLocation+"?username"]}catch(b){}},NoneLoad=Class({create:function(b,c,d,e,f,g){window.setTimeout(function(){d&&d("none","none",null,b)},1)}}),
JsLoad=Class({index:0,type:0,pageWidth:0,pageHeight:0,width:0,height:0,$image:null,imageURL:"",isMirrorSide:"",create:function(b,c,d,e,f,g){var h=this,k,l,n,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress)return h.index=b,h.type=c,h.pageWidth=e,h.pageHeight=f,h.isMirrorSide=g,r.yield(getPageDir(b,c,originTotalPageCount),2);k=r.yieldResult;h.imageURL=k;if(!h.fillImageOrNot(k,b))return!window.userList&&1<passwardType()&&loadJavascript(fixURLValue(bookConfig.userListPath),
function(){this.create(b,c,d)}.bind(h),function(){}),r.return();if(l=global[decodeDatabasePrefix(c)+b]&&"string"==typeof global[decodeDatabasePrefix(c)+b])return n=dataBase64Str(b,c),h.$image=$("<img src='"+n+"'/>"),h.$image[0].onload=function(){d&&d(n,k,this.$image[0],b);this.width=this.$image[0].naturalWidth;this.height=this.$image[0].naturalHeight;this.onResize(this.pageWidth,this.pageHeight)}.bind(h),r.return();p=h;loadJavascript(k,function(B){var v=dataBase64Str(b,c,B);p.$image=$("<img src='"+
v+"'/>");p.$image[0].onload=function(){d&&d(v,k,this.$image[0],b);this.width=this.$image[0].naturalWidth;this.height=this.$image[0].naturalHeight;this.onResize(this.pageWidth,this.pageHeight)}.bind(p)},function(){});r.jumpToEnd()})},fillImageOrNot:function(b,c){return!b||"string"!=typeof b||passwardType()&&bookConfig.excludeFrontPages&&c>parseInt(bookConfig.excludeFrontPages)&&!verifyPassward()?!1:!0},zoomIn:function(){(isPhone()||isPad())&&bookConfig.highDefinitionConversion&&this.highDefinition()},
zoomOut:function(){},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;if(this.$image){if((isPhone()||isPad())&&!this.isMirrorSide){if(_agent_.system.name!=_agent_.system.ANDROID&&!bookConfig.highDefinitionConversion){this.resizeOnMobile();return}if(bookConfig.highDefinitionConversion&&BookInfo.getBook().status_zoom){this.highDefinition();return}}b/=c;c=this.width/this.height;this.$image.css({width:"100%",height:"100%",position:"absolute",top:0,bottom:0,left:0,right:0,margin:"auto"});.01<=
b-c&&!PageInfo.pageIsStrech(this.index)&&this.$image.css({width:"auto"});-.01>=b-c&&!PageInfo.pageIsStrech(this.index)&&this.$image.css({height:"auto"});b=transformCSS({scale:1,origin:{x:0,y:0}});this.$image.css(b)}},resizeOnMobile:function(){var b=1024,c=1024;BookInfo.isDoublePage()&&this.type==BookType.normal_book&&(c=b=768);b=fitPageWidthHeight(b,c,this.width,this.height);this.scale(Math.ceil(b.x),Math.ceil(b.y))},highDefinition:function(){var b=Math.min(6*Math.min(windowWidth,windowHeight),this.width),
c=Math.min(6*Math.min(windowWidth,windowHeight),this.height);_agent_.system.name==_agent_.system.ANDROID&&(b=Math.min(1024,b),c=Math.min(1024,c));isPad()&&(b=Math.min(3*Math.min(windowWidth,windowHeight),this.width),c=Math.min(3*Math.min(windowWidth,windowHeight),this.height));b=fitPageWidthHeight(b,c,this.width,this.height);this.scale(Math.ceil(b.x),Math.ceil(b.y))},scale:function(b,c){var d=this.pageWidth/this.pageHeight>this.width/this.height?this.pageHeight/c:this.pageWidth/b;this.$image.css({width:b+
"px",height:c+"px",position:"absolute",left:(this.pageWidth-b*d)/2+"px",bottom:"auto",top:(this.pageHeight-c*d)/2+"px",right:"auto"});b=transformCSS({scale:d,origin:{x:0,y:0}});this.$image.css(b)}}),CanvasLoad=Class({create:function(b,c,d,e,f){var g=$("<canvas></canvas>");this.pageWidth=e;this.pageHeight=f;var h=function(){var l;return $jscomp.asyncExecutePromiseGeneratorProgram(function(n){if(1==n.nextAddress)return n.yield(getPageDir(b,c,originTotalPageCount),2);l=n.yieldResult;d&&d(l,l,g,b);n.jumpToEnd()})},
k=this.loadAllImage;(function(){var l=this,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return p.yield(getPageDir(b,c,originTotalPageCount),2);n=p.yieldResult;$.ajax({url:n,type:"get",async:!1,success:function(r){canvasData[b]=configForPages.pages[b-1].data;globalImages[b]=[];k(b,h)}.bind(l),error:function(){}});p.jumpToEnd()})})()},loadAllImage:function(b,c){for(var d=0,e=0;e<canvasData[b].resources.length;e++)if(1!=canvasData[b].resources[e].type)d++,d>=canvasData[b].resources.length&&
c();else{var f=new Image;f.src=getResource(b,e);globalImages[b][e]=f;f.onload=function(){d++;d>=canvasData[b].resources.length&&c()}}},zoomIn:function(){},zoomOut:function(){},onResize:function(){},renderCnvas:function(b,c,d,e,f,g,h){if(bookConfig.usePdfJs&&d){this.renderInterval&&(window.clearInterval(this.renderInterval),this.renderInterval=void 0);this.render&&(this.render.taskPool.stop(),this.render=void 0);var k=canvasData[e],l=k.page,n=f,p=g,r=f/g,B=l.width/l.height;.01<=r-B&&!PageInfo.pageIsStrech(this.pageIndex)&&
(n=l.width*g/l.height);-.01>=r-B&&!PageInfo.pageIsStrech(this.pageIndex)&&(p=f*l.height/l.width);if(!window.devicePixelRatio||isPC())window.devicePixelRatio=1;f=n*devicePixelRatio/l.width;d.attr("width",n*devicePixelRatio);d.attr("height",p*devicePixelRatio);d.css("height",p+"px");d.css("width",n+"px");d.css({position:"absolute",top:0,bottom:0,left:0,right:0,margin:"auto"});g=d[0].getContext("2d");g.save();g.imageSmoothingEnabled=!0;l.background&&(g.fillStyle=int2color(l.background),g.fillRect(0,
0,n,p));this.render=new RenderPage(d[0],k,e,f);this.renderInterval=window.setInterval(function(){BookInfo.getBook().flipping||BookInfo.getBook().flipBook.parameters.zoomming?this.render.taskPool.pause():this.render.taskPool.start();this.render.taskPool.end()&&(h&&h(b,c,d),window.clearInterval(this.renderInterval))}.bind(this),200)}}}),SvgLoad=Class({index:0,pageWidth:0,pageHeight:0,create:function(b,c,d,e,f){var g=this,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(1==k.nextAddress)return g.index=
b,g.type=c,g.pageWidth=e,g.pageHeight=f,k.yield(getPageDir(b,c,originTotalPageCount),2);h=k.yieldResult;g.sideImage=$("<img src='"+h+"'/>");g.sideImage[0].onload=function(){this.$svgDiv=$("<div style='position:absolute;width:100%;height:100%;left:0;top:0;'></div>");this.$svgDiv.append(this.sideImage);this.$svg=$("<canvas></canvas>");this.$svgDiv.append(this.$svg);this.width=this.sideImage[0].naturalWidth;this.height=this.sideImage[0].naturalHeight;this.onResize(this.pageWidth,this.pageHeight);this.$svg.attr("width",
this.width+"px");this.$svg.attr("height",this.height+"px");var l=this.$svg[0].getContext("2d");l.beginPath();l.drawImage(this.sideImage[0],0,0);l.closePath();BookInfo.getBook().status_zoom?this.zoomIn():this.zoomOut();this.reDraw();d&&d(h,h,this.$svgDiv,b)}.bind(g);k.jumpToEnd()})},beginToFlip:function(){},afterFlip:function(){},reDraw:function(){if(!isPC()){var b=this.$svg[0].getContext("2d"),c=function(){b.beginPath();b.clearRect(0,0,this.width,this.height);b.drawImage(this.sideImage[0],0,0,this.width,
this.height);b.closePath();console.log("reDraw:"+this.index)}.bind(this);this.interval=window.setTimeout(function(){c();this.interval=window.setTimeout(function(){c();this.interval=window.setTimeout(function(){c()}.bind(this),2E3)}.bind(this),1E3)}.bind(this),500)}},zoomIn:function(){this.sideImage&&this.sideImage.show();this.$svg&&this.$svg.hide()},zoomOut:function(){this.sideImage&&this.sideImage.hide();this.$svg&&this.$svg.show()},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;b/=c;
c=this.width/this.height;this.sideImage&&this.sideImage.css({width:"100%",height:"100%",position:"absolute",top:0,left:0});this.$svg&&this.$svg.css({width:"100%",height:"100%",position:"absolute",top:0,left:0});var d=fitPageWidthHeight(this.pageWidth,this.pageHeight,this.width,this.height);.01<=b-c&&!PageInfo.pageIsStrech(this.index)&&(this.$svg&&this.$svg.css({width:"auto",left:Math.round((this.pageWidth-d.x)/2)+"px"}),this.sideImage&&this.sideImage.css({width:"auto",left:Math.round((this.pageWidth-
d.x)/2)+"px"}));-.01>=b-c&&!PageInfo.pageIsStrech(this.index)&&(this.$svg&&this.$svg.css({height:"auto",top:Math.round((this.pageHeight-d.y)/2)+"px"}),this.sideImage&&this.sideImage.css({height:"auto",top:Math.round((this.pageHeight-d.y)/2)+"px"}))},destroy:function(){this.interval&&window.clearInterval(this.interval)}});function randomString(b){b=b||32;for(var c="",d=0;d<b;d++)c+="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678".charAt(Math.floor(48*Math.random()));return c}
function canvasReload(b,c,d,e){var f=b.width,g=b.height;c=Math.round(c);d=Math.round(d);var h=f/c,k=g/d,l=Math.ceil(h/2),n=Math.ceil(k/2),p=b.getContext("2d"),r=p.getImageData(0,0,f,g),B=p.createImageData(c,d);r=r.data;for(var v=B.data,w=0;w<d;w++)for(var u=0;u<c;u++){for(var x=4*(u+w*c),y,A=0,G=0,F=0,O=0,L=0,H=0,I=(w+.5)*k,K=Math.ceil((w+1)*k),M=Math.floor(w*k);M<K;M++){var W=Math.abs(I-(M+.5))/n,Z=(u+.5)*h;W*=W;for(var aa=Math.ceil((u+1)*h),T=Math.floor(u*h);T<aa;T++)if(y=Math.abs(Z-(T+.5))/l,y=
Math.sqrt(W+y*y),!(1<=y)){y=2*y*y*y-3*y*y+1;var U=4*(T+M*f);H+=y*r[U+3];G+=y;255>r[U+3]&&(y=y*r[U+3]/250);F+=y*r[U];O+=y*r[U+1];L+=y*r[U+2];A+=y}}v[x]=F/A;v[x+1]=O/A;v[x+2]=L/A;v[x+3]=H/G}!0===e?(b.width=c,b.height=d):p.clearRect(0,0,f,g);p.putImageData(B,0,0)}
var ImageLoad=Class({index:0,type:0,pageWidth:0,pageHeight:0,width:0,height:0,$image:null,imageURL:"",isMirrorSide:"",canvasDom:null,create:function(b,c,d,e,f,g,h){var k=this,l,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return k.index=b,k.type=c,k.pageWidth=e,k.pageHeight=f,k.isMirrorSide=g,k.parent=h,k.callback=d,p.yield(getPageDir(b,c,originTotalPageCount),2);l=p.yieldResult;k.imageURL=l;bookConfig.useTheAliCloudChart&&BookInfo.getBook().status_zoom&&(l=
l.removeStartFrom("?"));k.realImageURL=l;k.id=randomString(10);k.imageObject=new ImageObject;k.imageObject.attr("id",k.id);k.imageObject.alt(k.id);k.imageObject.src(k.realImageURL);k.$image=k.imageObject.$image;bookConfig.textSharpening&&(n="-webkit-optimize-contrast",_agent_.browser.firefox&&(n="-moz-crisp-edges"),_agent_.browser.opera&&(n="-o-crisp-edges"),k.$image.css({"image-rendering":n,"-ms-interpolation-mode":"nearest-neighbor"}));k.$image[0].onload=k.onLoad.bind(k);k.enableRecognizeQRcode();
k.setTextSharpening();p.jumpToEnd()})},onLoad:function(){this.width=this.$image[0].naturalWidth;this.height=this.$image[0].naturalHeight;if(!(this.width>1.25*this.pageWidth&&this.height>1.25*this.pageHeight)||!0!==bookConfig.canvasRender&&"true"!==bookConfig.canvasRender||isPhone()||isPad())this.width=this.$image[0].naturalWidth,this.height=this.$image[0].naturalHeight,this.callback&&this.callback(this.realImageURL,this.realImageURL,this.$image[0],this.index),this.onResize(this.pageWidth,this.pageHeight);
else try{this.canvasDom=document.createElement("canvas");this.canvasDom.setAttribute("id","pageCanvas");this.canvasDom.setAttribute("width",this.width);this.canvasDom.setAttribute("height",this.height);var b=this.canvasDom.getContext("2d");b.width=this.width;b.height=this.height;b.drawImage(this.$image[0],0,0);canvasReload(this.canvasDom,this.pageWidth,this.pageHeight,!0);this.callback&&this.callback(this.realImageURL,this.realImageURL,this.canvasDom,this.index)}catch(c){this.width=this.$image[0].naturalWidth,
this.height=this.$image[0].naturalHeight,this.callback&&this.callback(this.realImageURL,this.realImageURL,this.$image[0],this.index),this.onResize(this.pageWidth,this.pageHeight)}},enableRecognizeQRcode:function(){bookConfig.EnableRecognizeQRcodePressOnMobile&&this.setImageCss({"-webkit-touch-callout":"default"})},setTextSharpening:function(){if(bookConfig.textSharpening){var b="-webkit-optimize-contrast";_agent_.browser.firefox&&(b="-moz-crisp-edges");_agent_.browser.opera&&(b="-o-crisp-edges");
this.setImageCss({"image-rendering":b,"-ms-interpolation-mode":"nearest-neighbor"})}},zoomIn:function(b){bookConfig.useTheAliCloudChart&&this.switchLargeImage(b);isPhone()||isPad()?this.highDefinition():_agent_.browser.safari&&this.$image.css("image-rendering","auto")},zoomOut:function(b,c){bookConfig.useTheAliCloudChart&&this.switchNormalImage(b,c);isPhone()||isPad()?this.resize():_agent_.browser.safari&&this.$image.css("image-rendering","-webkit-optimize-contrast")},onResize:function(b,c){try{if(!(!0!==
bookConfig.canvasRender&&"true"!==bookConfig.canvasRender||isPhone()||isPad())&&this.canvasDom){this.pageWidth=b;this.pageHeight=c;this.canvasDom.setAttribute("width",this.width);this.canvasDom.setAttribute("height",this.height);var d=this.canvasDom.getContext("2d");d.width=this.width;d.width=this.height;d.drawImage(this.$image[0],0,0);canvasReload(this.canvasDom,this.pageWidth,this.pageHeight,!0);return}}catch(e){console.log("this function cross-domain !")}if((isPhone()||isPad())&&!this.isMirrorSide&&
BookInfo.getBook().status_zoom)this.highDefinition();else{this.pageWidth=b;this.pageHeight=c;b/=c;c=this.width/this.height;this.setImageCss({width:"100%",height:"100%",position:"absolute",top:0,left:0});d=fitPageWidthHeight(this.pageWidth,this.pageHeight,this.width,this.height);PageInfo.pageIsStrech(this.index)||(.01<=b-c&&this.setImageCss({width:"auto",left:Math.round((this.pageWidth-d.x)/2)+"px"}),-.01>=b-c&&this.setImageCss({height:"auto",top:Math.round((this.pageHeight-d.y)/2)+"px"}),.01>Math.abs(b-
c)&&isPC()&&bookConfig.useTheAliCloudChart&&(b>c?this.setImageCss({width:"auto",left:Math.round((this.pageWidth-this.pageHeight*this.width/this.height)/2)+"px"}):this.setImageCss({height:"auto",top:Math.round((this.pageHeight-this.pageWidth*this.height/this.width)/2)+"px"})));b=!1;if(isPhone()||isPad())b=!0;b=transformCSS({scale:1,origin:{x:0,y:0}},b);this.setImageCss(b)}},resize:function(){var b=this.pageWidth/this.pageHeight,c=this.width/this.height;this.setImageCss({width:"100%",height:"100%",
position:"absolute",top:0,left:0});var d=fitPageWidthHeight(this.pageWidth,this.pageHeight,this.width,this.height);PageInfo.pageIsStrech(this.index)||(.01<=b-c&&this.setImageCss({width:"auto",left:Math.round((this.pageWidth-d.x)/2)+"px"}),-.01>=b-c&&this.setImageCss({height:"auto",top:Math.round((this.pageHeight-d.y)/2)+"px"}));b=!1;if(isPhone()||isPad())b=!0;b=transformCSS({scale:1,origin:{x:0,y:0}},b);this.setImageCss(b)},highDefinition:function(){this.scale(this.width,this.height)},scale:function(b,
c){var d=this.pageWidth/this.pageHeight,e=this.width/this.height;var f=this.pageHeight/c;var g=this.pageWidth/b;.01<=d-e&&!PageInfo.pageIsStrech(this.index)&&(g=f=this.pageHeight/c);-.01>=d-e&&!PageInfo.pageIsStrech(this.index)&&(f=g=this.pageWidth/b);this.setImageCss({width:b+"px",height:c+"px",position:"absolute",left:Math.round((this.pageWidth-b*g)/2)+"px",bottom:"auto",top:Math.round((this.pageHeight-c*f)/2)+"px",right:"auto"});b=!1;if(isPhone()||isPad())b=!0;g=transformCSS({scale:{x:g,y:f},origin:{x:0,
y:0}},b);this.setImageCss(g)},switchLargeImage:function(b){if(bookConfig.useTheAliCloudChart){var c=this.imageURL.removeStartFrom("?");window.isSupportWebp?0>c.indexOf("webp")?c+="?x-oss-process=image/format,webp":bookConfig.textClarityEnhancement&&(c+="?x-oss-process=image"):c+="?x-oss-process=image/format,"+getWebpOriginFormat(c);switch(bookConfig.textClarityEnhancement){case 1:c+="/sharpen,100";break;case 2:c+="/sharpen,150";break;case 3:c+="/sharpen,200"}if(isPhone()||isPad())if(this.largeImageObject)this.largeImageObject&&
this.largeImageObject.show();else{this.largeImageObject=new ImageObject;this.largeImageObject.attr("id",this.id);this.largeImageObject.alt(this.id);this.largeImageObject.src(c);var d=this.largeImageObject.$image;bookConfig.isStopMouseMenu&&$(d).css({"pointer-events":"none"});d[0].onload=function(){this.onResize(this.pageWidth,this.pageHeight);this.parent.append(d)}.bind(this)}else b&&(this.callback=b),this.imageObject.attr("src",c)}},switchNormalImage:function(b,c){var d=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==
f.nextAddress)return bookConfig.useTheAliCloudChart?b?f.yield(getPageDir(d.index,"normal",originTotalPageCount),3):f.jumpTo(2):f.return();if(2!=f.nextAddress){e=f.yieldResult;if(e==d.imageURL)return f.return();d.imageURL=e}isPhone()||isPad()?d.largeImageObject&&d.largeImageObject.hide():(c&&(d.callback=c),d.imageObject.attr("src",d.imageURL));f.jumpToEnd()})},setImageCss:function(b){this.imageObject&&this.imageObject.css(b);this.largeImageObject&&this.largeImageObject.css(b)}}),PdfLoadArray=Class({create:function(b){this.stacks=
[];this.limitCount=b;this.id=0;this.running=!1},push:function(b){if(b&&b.start){for(var c=0;c<this.stacks.length;c++)if(this.stacks[c]==b){console.log(b.isRepeat());if(b.isRepeat())return;this.stacks[c].pause();this.stacks.remove(c);c--;this.running=!1}try{this.stacks.push(b),this.start()}catch(d){}}},pop:function(b){if(this.running&&this.stacks[this.id]==b)this.stacks.remove(this.id),this.running=!1,this.runFirstTask();else for(var c=0;c<this.stacks.length;c++)if(this.stacks[c]==b){this.stacks.remove(c);
break}},start:function(){this.runFirstTask()},runFirstTask:function(){if(!this.running){for(var b=0;b<this.stacks.length;b++)if(this.stacks[b]&&this.stacks[b].start&&!this.stacks[b].rendered){this.id=b;this.running=!0;this.stacks[b].start().then(function(){this.stacks.remove(this.id);this.running=!1;this.runFirstTask()}.bind(this));return}this.running=!1}},next:function(){this.id++;this.id==this.stacks.length?this.running=!1:this.stacks&&this.stacks[this.id]&&this.stacks[this.id].start&&!this.stacks[this.id].rendered?
this.stacks[this.id].start().then(function(){this.stacks[this.id]&&this.next()}.bind(this)):this.next()},destroy:function(){this.stacks&&0<this.stacks.length&&(this.stacks.forEach(function(b){b.pause();b.destroy()}),this.stacks=[],this.id=0,this.running=!1)}}),PdfLoadingTask=Class({create:function(b,c,d,e,f){this.page=this.loadingTask=null;this.loaded=this.rendered=!1;this.index=b;this.type=c;this.pageWidth=d;this.pageHeight=e;this.callback=f;this.renderHeight=this.renderWidth=0},start:function(){var b=
this.index,c=this.type;return new Promise(function(d,e){var f=this,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress){if(!b||0>b||b>bookConfig.totalPageCount)return e(),h.return();if(f.page)return f.loaded=!0,f.renderCanvas(f.pageWidth,f.pageHeight).then(function(k){this.callback&&this.callback(k);this.rendered=!0;d(k)}.bind(f)),h.return();f.loadingTask&&(f.loadingTask.destroy(),f.loadingTask=null);return h.yield(getPageDir(b,c,originTotalPageCount),2)}g=h.yieldResult;
"object"==typeof g&&(g=g[0]);getBlob(g).then(function(k){this.loadingTask=pdfjsLib.getDocument({url:k.url,cMapUrl:"https://unpkg.com/pdfjs-dist@latest/cmaps/",cMapPacked:!0,password:k.password});this.loadingTask.promise.then(function(l){l.getPage(1).then(function(n){this.loaded=!0;this.page=n;this.renderCanvas(this.pageWidth,this.pageHeight).then(function(p){this.rendered=!0;this.callback&&this.callback(p);d(p)}.bind(this))}.bind(this))}.bind(this))}.bind(f));h.jumpToEnd()})}.bind(this))},renderCanvas:function(b,
c){this.rendered=!1;return new Promise(function(d,e){this.renderWidth=b;this.renderHeight=c;this.renderTask&&(this.renderTask.cancel(),this.renderTask=null);var f=$("<canvas><canvas/>")[0],g=f.getContext("2d"),h=window.devicePixelRatio||1,k=this.page,l=k.getViewport({scale:1});l=fitPageWidthHeight(b,c,l.width,l.height).x/l.width;l=k.getViewport({scale:l});var n=l.width,p=l.height;isPC()||(n>p?3E3<n*h&&(h=3E3/n):3E3<p*h&&(h=3E3/p));f.width=n*h;f.height=p*h;1==h?(f.style.width=f.width+"px",f.style.height=
f.height+"px"):(f.style.width=n+"px",f.style.height=p+"px");g={canvasContext:g,transform:1!==h?[h,0,0,h,0,0]:null,viewport:l};try{this.renderTask=k.render(g),this.renderTask.promise.then(function(){this.rendered=!0;d(f)}.bind(this))}catch(r){e(r)}}.bind(this))},remove:function(){},destroy:function(){this.loadingTask&&(this.loadingTask.destroy(),this.loadingTask=null);this.renderTask&&(this.renderTask.cancel(),this.renderTask=null);this.loaded=this.rendered=!1},isRepeat:function(){return this.loaded?
this.pageWidth==this.renderWidth&&this.pageHeight==this.renderHeight?!0:!1:!1},pause:function(){this.loaded&&this.renderTask&&(this.renderTask.cancel(),this.renderTask=null,this.rendered=!1)},enterSide:function(){},leaveSide:function(){},changeRenderWH:function(b,c){if(this.pageWidth!=b||this.pageHeight!=c)this.pageWidth=b,this.pageHeight=c,this.rendered=!1}});window.pdfPages={normal:[],thumb:[],large:[]};
function getBlob(b){return new Promise(function(c,d){d=new XMLHttpRequest;d.open("get",b,!0);d.responseType="blob";d.onload=function(){if(4==this.readyState&&200==this.status){(new Date).getTime();window.response=this.response;var e=new FileReader;e.onload=function(){window.arrayBuffer=new Uint8Array(this.result)};e.readAsArrayBuffer(response);var f=response.slice(1083,response.size-1003,"application/pdf"),g="",h=response.slice(1080,1083),k=response.slice(response.size-1003,response.size-1E3);e=new FileReader;
e.onload=function(){g=this.result+g;var l=new FileReader;l.onload=function(){g+=this.result;var n=f.slice(0,4E3),p=new FileReader;p.onload=function(){var r=new Uint8Array(this.result);for(i=0;i<this.result.byteLength;++i)r[i]=255-r[i];r=new Blob([new Blob([r.buffer]),f.slice(4E3,f.size)],{type:"application/pdf"});r=window.URL.createObjectURL(r);c({url:r,password:g})};p.readAsArrayBuffer(n)};l.readAsText(k)};e.readAsText(h)}};d.send()}.bind(this))}
function blobToUint8Array(b){var c=URL.createObjectURL(b);b=new XMLHttpRequest;b.open("GET",c,!1);b.send();URL.revokeObjectURL(c);var d=new Uint8Array(b.response.length);for(c=0;c<b.response.length;++c)d[c]=255-b.response.charCodeAt(c);return d}
var PdfLoad=Class({index:0,pageWidth:0,pageHeight:0,create:function(b,c,d,e,f,g,h){var k=this,l,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return k.index=b,k.type=c,k.pageWidth=e,k.pageHeight=f,k.renderWidth=e,k.renderHeight=f,k.callback=d,k.parent=h,l=k,p.yield(getPageDir(b,c,originTotalPageCount),2);if(3!=p.nextAddress)return l.imageURL=p.yieldResult,n=k,p.yield(getPageDir(b,"thumb",originTotalPageCount),3);n.thumbUrl=p.yieldResult;k.$content=$("<div style='position:absolute;left:0;top:0;width:100%;height:100%;'></div>");
k.pdfLoadingTask=new PdfLoadingTask(k.index,k.type,e,f,k.loaded.bind(k));window.pdfLoadStack||(window.pdfLoadStack=new PdfLoadArray(3));window.pdfLoadStack&&pdfLoadStack.push(k.pdfLoadingTask);p.jumpToEnd()})},loaded:function(b){this.pdfLoaded=!0;this.changeImageSrc(b)},enterSide:function(){this.enter=!0},leaveSide:function(){this.enter=!1;this.pdfLoadingTask&&this.pdfLoadingTask.leaveSide()},zoomIn:function(){isPhone()||isPad()},zoomOut:function(){isPhone()||isPad()},resizeSvg:function(b,c){this.renderWidth=
b;this.renderHeight=c;this.resizeImage(b,c);window.pdfLoadStack&&(isPC()||isSlideBook()||0<=BookInfo.getCurrentPages().indexOf(this.index))&&(this.pdfLoadingTask.changeRenderWH(b,c),pdfLoadStack.push(this.pdfLoadingTask))},onResize:function(b,c){if(b!=this.pageWidth||c!=this.pageHeight)this.pageWidth=b,this.pageHeight=c,this.renderWidth=b,this.renderHeight=c,this.resizeImage(b,c),window.pdfLoadStack&&(isPC()||isSlideBook()||0<=BookInfo.getCurrentPages().indexOf(this.index)||bookConfig.upsideOnMobile())&&
this.pdfLoadingTask&&(this.pdfLoadingTask.changeRenderWH(b,c),pdfLoadStack.push(this.pdfLoadingTask))},resizeImage:function(b,c){if(this.width&&this.height){var d={width:"100%",height:"100%",position:"absolute",top:0,left:0},e=fitPageWidthHeight(b,c,this.width,this.height);.01<=(b-e.x)/c&&!PageInfo.pageIsStrech(this.index)&&(d.width=e.x+"px",d.left=Math.round((b-e.x)/2)+"px");.01<=(c-e.y)/b&&!PageInfo.pageIsStrech(this.index)&&(d.height=e.y+"px",d.top=Math.round((c-e.y)/2)+"px");e=transformCSS({scaleX:this.pageWidth/
b,scaleY:this.pageHeight/c,origin:{x:0,y:0}},!1);this.$content.css(e);this.$content.css({width:b+"px",height:c+"px"});this.$canvas.css(d)}},changeImageSrc:function(b){var c=this,d,e,f,g,h;return $jscomp.asyncExecutePromiseGeneratorProgram(function(k){if(!c.pdfLoaded)return k.return();d=c.renderWidth;e=c.renderHeight;c.width=parseFloat(b.style.width);c.height=parseFloat(b.style.height);c.$canvas=$(b);f={position:"absolute",top:0,left:0};fitPageWidthHeight(d,e,c.width,c.height);f.left=Math.round((d-
c.width)/2)+"px";f.top=Math.round((e-c.height)/2)+"px";c.$canvas.css(f);c.$content.empty().append(c.$canvas);g=d-c.width;h=e-c.height;(0!==g||0!==h)&&4>=g&&4>=h&&(c.$thumb||(c.$thumb=$('<img src="'+c.thumbUrl+'" style="z-index:-1;width:100%;height:100%;position:absolute;top:0;left:0;"/>')),c.$content.append(c.$thumb));c.callback&&c.callback(c.imageURL,c.imageURL,c.$content,c.index);k.jumpToEnd()})},destroy:function(){this.pdfLoadingTask&&(window.pdfLoadStack&&pdfLoadStack.pop(this.pdfLoadingTask),
this.pdfLoadingTask.destroy(),this.pdfLoadingTask=null)}}),ImageArrayLoadImage=Class({index:0,type:0,pageWidth:0,pageHeight:0,width:0,height:0,$image:null,imageURL:"",isMirrorSide:"",create:function(b,c,d,e,f,g,h,k,l){var n=this,p,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(B){n.index=b;n.type=d;n.i=l;n.callback=e;n.errorCallback=f;n.pageWidth=g;n.pageHeight=h;n.isMirrorSide=k;p=c;bookConfig.useTheAliCloudChart&&BookInfo.getBook().status_zoom&&(p=p.removeStartFrom("?"));n.imageURL=
p;n.imageObject=new ImageObject;n.imageObject.alt(n.index);n.imageObject.src(n.imageURL);n.imageObject.css({"z-index":0});n.$image=n.imageObject.$image;bookConfig.EnableRecognizeQRcodePressOnMobile&&n.imageObject.css({"-webkit-touch-callout":"default"});n.loaded=!1;n.$image[0].onload=function(){this.loaded=!0;this.callback&&this.callback(this.$image);this.width=this.$image[0].naturalWidth;this.height=this.$image[0].naturalHeight;this.onResize(this.pageWidth,this.pageHeight)}.bind(n);n.$image[0].onerror=
function(){this.loaded=!0;this.errorCallback&&this.errorCallback(this.$image)}.bind(n);bookConfig.textSharpening&&(r="-webkit-optimize-contrast",_agent_.browser.firefox&&(r="-moz-crisp-edges"),_agent_.browser.opera&&(r="-o-crisp-edges"),n.$image.css({"image-rendering":r,"-ms-interpolation-mode":"nearest-neighbor"}));B.jumpToEnd()})},zoomIn:function(b){bookConfig.useTheAliCloudChart&&isPC()?this.switchLargeImage(b):(isPhone()||isPad())&&this.highDefinition()},zoomOut:function(b,c){bookConfig.useTheAliCloudChart&&
isPC()?this.switchNormalImage(b,c):(isPhone()||isPad())&&this.resize()},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;if((isPhone()||isPad())&&!this.isMirrorSide&&BookInfo.getBook().status_zoom)this.highDefinition();else{b/=c;c=this.width/this.height;this.imageObject.css({width:"100%",height:"100%",position:"absolute",top:0,left:0});var d=fitPageWidthHeight(this.pageWidth,this.pageHeight,this.width,this.height);.01<=b-c&&!PageInfo.pageIsStrech(this.index)&&this.imageObject.css({width:"auto",
left:Math.round((this.pageWidth-d.x)/2)+"px"});-.01>=b-c&&!PageInfo.pageIsStrech(this.index)&&this.imageObject.css({height:"auto",top:Math.round((this.pageHeight-d.y)/2)+"px"});.01>Math.abs(b-c)&&isPC()&&(b>c?this.imageObject.css({width:"auto",left:Math.round((this.pageWidth-this.pageHeight*this.width/this.height)/2)+"px"}):this.imageObject.css({height:"auto",top:Math.round((this.pageHeight-this.pageWidth*this.height/this.width)/2)+"px"}));b=!1;if(isPhone()||isPad())b=!0;b=transformCSS({scale:1,origin:{x:0,
y:0}},b);this.imageObject.css(b)}},resize:function(){var b=this.pageWidth/this.pageHeight,c=this.width/this.height;this.imageObject.css({width:"100%",height:"100%",position:"absolute",top:0,left:0});var d=fitPageWidthHeight(this.pageWidth,this.pageHeight,this.width,this.height);.01<=b-c&&!PageInfo.pageIsStrech(this.index)&&this.imageObject.css({width:"auto",left:Math.round((this.pageWidth-d.x)/2)+"px"});-.01>=b-c&&!PageInfo.pageIsStrech(this.index)&&this.imageObject.css({height:"auto",top:Math.round((this.pageHeight-
d.y)/2)+"px"});b=!1;if(isPhone()||isPad())b=!0;b=transformCSS({scale:1,origin:{x:0,y:0}},b);this.imageObject.css(b)},highDefinition:function(){this.scale(this.width,this.height)},scale:function(b,c){var d=this.pageWidth/this.pageHeight,e=this.width/this.height;var f=this.pageHeight/c;var g=this.pageWidth/b;.01<=d-e&&(g=f=this.pageHeight/c);-.01>=d-e&&(f=g=this.pageWidth/b);this.imageObject.css({width:b+"px",height:c+"px",position:"absolute",left:Math.round((this.pageWidth-b*g)/2)+"px",bottom:"auto",
top:Math.round((this.pageHeight-c*f)/2)+"px",right:"auto"});b=!1;if(isPhone()||isPad())b=!0;g=transformCSS({scale:{x:g,y:f},origin:{x:0,y:0}},b);this.imageObject.css(g)},switchLargeImage:function(b){if(bookConfig.useTheAliCloudChart){b=this.imageURL.removeStartFrom("?");window.isSupportWebp?0>b.indexOf("webp")?b+="?x-oss-process=image/format,webp":bookConfig.textClarityEnhancement&&(b+="?x-oss-process=image"):b+="?x-oss-process=image/format,"+getWebpOriginFormat(b);switch(bookConfig.textClarityEnhancement){case 1:b+=
"/sharpen,100";break;case 2:b+="/sharpen,150";break;case 3:b+="/sharpen,200"}this.loaded&&(this.callback=void 0);this.imageObject.attr("src",b)}},switchNormalImage:function(b,c){var d=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return bookConfig.useTheAliCloudChart?b?f.yield(getPageDir(d.index,"normal",originTotalPageCount)[d.i],3):f.jumpTo(2):f.return();if(2!=f.nextAddress){e=f.yieldResult;if(!e||e==d.imageURL)return f.return();d.imageURL=e}d.loaded&&
(d.callback=void 0);d.imageObject.attr("src",d.imageURL);f.jumpToEnd()})},destroy:function(){this.imageObject.destroy()}}),ImageArrayLoadSvg=Class({index:0,type:0,pageWidth:0,pageHeight:0,width:0,height:0,$image:null,imageURL:"",isMirrorSide:"",create:function(b,c,d,e,f,g,h,k,l){var n=this,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){n.index=b;n.type=d;n.i=l;n.callback=e;n.errorCallback=f;n.pageWidth=g;n.pageHeight=h;n.isMirrorSide=k;p=c;bookConfig.useTheAliCloudChart&&!bookConfig.isEncryptionBook&&
(p=p.removeStartFrom("?"));n.imageURL=p;n.$image=$("<img src='"+n.imageURL+"' style='z-index:0;'/>");bookConfig.EnableRecognizeQRcodePressOnMobile&&n.$image.css({"-webkit-touch-callout":"default"});n.$image[0].onload=function(){this.callback&&this.callback(this.$image);this.width=this.$image[0].naturalWidth;this.height=this.$image[0].naturalHeight;this.onResize(this.pageWidth,this.pageHeight)}.bind(n);n.$image[0].onerror=function(){this.errorCallback&&this.errorCallback(this.$image)}.bind(n);r.jumpToEnd()})},
zoomIn:function(b){},zoomOut:function(b,c){},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;b/=c;c=this.width/this.height;this.$image.css({width:"100%",height:"100%",position:"absolute",top:0,left:0});var d=fitPageWidthHeight(this.pageWidth,this.pageHeight,this.width,this.height);.01<=b-c&&!PageInfo.pageIsStrech(this.index)&&this.$image.css({width:"auto",left:Math.round((this.pageWidth-d.x)/2)+"px"});-.01>=b-c&&!PageInfo.pageIsStrech(this.index)&&this.$image.css({height:"auto",top:Math.round((this.pageHeight-
d.y)/2)+"px"});b=!1;if(isPhone()||isPad())b=!0;b=transformCSS({scale:1,origin:{x:0,y:0}},b);_agent_.system.name!=_agent_.system.ANDROID&&this.$image.css(b)},scale:function(b,c){var d=this.pageWidth/this.pageHeight>b/c?this.pageHeight/c:this.pageWidth/b;this.$image.css({width:b+"px",height:c+"px",position:"absolute",left:(this.pageWidth-b*d)/2+"px",bottom:"auto",top:(this.pageHeight-c*d)/2+"px",right:"auto"});b=!1;if(isPhone()||isPad())b=!0;d=transformCSS({scale:d,origin:{x:0,y:0}},b);this.$image.css(d)},
destroy:function(){this.$image=this.$image[0].onload=null},resizeSvg:function(b,c){if(isPhone()||isPad())b=fitPageWidthHeight(b,c,this.width,this.height),this.scale(b.x,b.y)}}),ImageArrayLoad=Class({index:0,type:0,pageWidth:0,pageHeight:0,width:0,height:0,$image:null,imageURL:"",isMirrorSide:"",create:function(b,c,d,e,f,g){var h=this,k,l,n,p,r,B;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return h.index=b,h.type=c,h.pageWidth=e,h.pageHeight=f,h.isMirrorSide=
g,h.callback=d,h.$images=[],h.loadArray=[],v.yield(getPageDir(b,c,originTotalPageCount),2);k=v.yieldResult;h.imagesURL=k;l=0;n=function(){l++;this.callback&&l==k.length&&this.callback(k,k,this.$images,this.index)}.bind(h);p=function(w){l++;this.$images.removeElement(w);this.callback&&l==k.length&&this.callback(k,k,this.$images,this.index)}.bind(h);for(r=0;r<k.length;r++)B=-1<k[r].indexOf(".svg")?new ImageArrayLoadSvg(b,k[r],c,n,p,e,f,g,r):new ImageArrayLoadImage(b,k[r],c,n,p,e,f,g,r),h.$images.push(B.$image),
h.loadArray.push(B);v.jumpToEnd()})},zoomIn:function(b){for(var c=0;c<this.loadArray.length;c++)this.loadArray[c].zoomIn&&this.loadArray[c].zoomIn(b)},zoomOut:function(b,c){for(var d=0;d<this.loadArray.length;d++)this.loadArray[d].zoomOut&&this.loadArray[d].zoomOut(b,c)},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;for(var d=0;d<this.loadArray.length;d++)if(this.loadArray[d].onResize)this.loadArray[d].onResize(b,c)},destroy:function(){for(var b=0;b<this.loadArray.length;b++)this.loadArray[b].destroy&&
this.loadArray[b].destroy()},resizeSvg:function(b,c){for(var d=0;d<this.loadArray.length;d++)this.loadArray[d].resizeSvg&&this.loadArray[d].resizeSvg(b,c)}}),ImageStageLoad=Class({index:0,type:0,pageWidth:0,pageHeight:0,width:0,height:0,$image:null,imageURL:"",isMirrorSide:!1,create:function(b,c,d,e,f){this.index=b;this.type=c;this.pageWidth=e;this.pageHeight=f;this.callback=d;this.$image=$("<img/>");bookConfig.EnableRecognizeQRcodePressOnMobile&&this.$image.css({"-webkit-touch-callout":"default"});
bookConfig.textSharpening&&(c="-webkit-optimize-contrast",_agent_.browser.firefox&&(c="-moz-crisp-edges"),_agent_.browser.opera&&(c="-o-crisp-edges"),this.$image.css({"image-rendering":c,"-ms-interpolation-mode":"nearest-neighbor"}));this.added=!1;this.$image[0].onload=function(){this.callback&&this.callback(this.imageURL,this.imageURL,this.$image[0],b);this.width=this.$image[0].naturalWidth;this.height=this.$image[0].naturalHeight;this.resizeImage();this.added=!0}.bind(this);this.onResize(e,f)},
zoomIn:function(b){},zoomOut:function(b,c){},onResize:function(b,c){var d=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return d.pageWidth=b,d.pageHeight=c,d.resizeImage(),f.yield(d.getImageUrl(),2);e=f.yieldResult;e!=d.imageURL?d.changeImageSrc(e):d.resize();f.jumpToEnd()})},changeImageSrc:function(b){this.imageURL=b;this.supportCanvas()?(this.$canvasImage||(this.$canvasImage=$("<img style=''/>")),this.$canvasImage[0].crossOrigin="Anonymous",this.$canvasImage.attr("src",
b),this.$canvasImage[0].onload=function(){this.renderCanvas()}.bind(this)):this.$image.attr("src",b)},resize:function(){this.supportCanvas()&&this.renderCanvas()},supportCanvas:function(){return 0<=window.location.href.indexOf("file:///")?!1:!0},renderCanvas:function(){var b=$("<canvas><canvas/>")[0],c=b.getContext("2d"),d=window.devicePixelRatio||1,e=this.$canvasImage,f=fitPageWidthHeight(this.pageWidth,this.pageHeight,e[0].naturalWidth,e[0].naturalHeight),g=f.x;f=f.y;b.width=g*d;b.height=f*d;b.style.width=
g+"px";b.style.height=f+"px";c.drawImage(e[0],0,0,g*d,f*d);b=b.toDataURL("image/jpeg",1);$(this.$image[0]).attr("src",b)},resizeImage:function(){var b={width:"100%",height:"100%",position:"absolute",top:0,left:0},c=fitPageWidthHeight(this.pageWidth,this.pageHeight,this.width,this.height);.01<=(this.pageWidth-c.x)/this.pageHeight&&!PageInfo.pageIsStrech(this.index)&&(b.width="auto",b.left=Math.round((this.pageWidth-c.x)/2)+"px");.01<=(this.pageHeight-c.y)/this.pageWidth&&!PageInfo.pageIsStrech(this.index)&&
(b.height="auto",b.top=Math.round((this.pageHeight-c.y)/2)+"px");c=transformCSS({scale:1,origin:{x:0,y:0}},!1);this.$image.css(c);this.$image.css(b)},getImageUrl:function(){var b=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){return 1==c.nextAddress?c.yield(getPageDir(b.index,b.type,originTotalPageCount,b.pageWidth,b.pageHeight),2):c.return(c.yieldResult)})}}),PageBackground=Class({create:function(b,c,d,e,f,g,h){var k=this,l,n,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==
r.nextAddress){if(!b||!c)return r.return();k.type=c;return r.yield(getPageDir(b,c,originTotalPageCount),2)}l=r.yieldResult;n=getPageSize(b,c);k.imageURL=l;k.load=null;k.parent=h;p=k.getUrlType(l,n);k.urlType=p;switch(p){case 0:k.load=new CanvasLoad(b,c,d,e,f,g,h);break;case 1:k.load=new ImageLoad(b,c,d,e,f,g,h);break;case 2:k.load=new JsLoad(b,c,d,e,f,g,h);break;case 3:k.load=new SvgLoad(b,c,d,e,f,g,h);break;case 4:k.load=new ImageArrayLoad(b,c,d,e,f,g,h);break;case 5:k.load=new PdfLoad(b,c,d,e,f,
g,h);break;case 6:k.load=new ImageStageLoad(b,c,d,e,f,g,h);break;case 7:k.load=new NoneLoad(b,c,d,e,f,g,h)}r.jumpToEnd()})},getUrlType:function(b,c){return this.isPdf(b)?5:c&&isPC()?6:"object"==typeof b?4:"normal"==this.type&&bookConfig.usePdfJs?0:-1<b.indexOf("none")?7:-1<b.indexOf(".js")?2:-1<b.indexOf(".svg")?3:1},isPdf:function(b){return-1<b.indexOf(".pdf")||-1<b.indexOf(".zip")?!0:!1},onResize:function(b,c){if(this.load&&this.load.onResize)this.load.onResize(b,c)},zoomIn:function(b,c){this.load&&
this.load.zoomIn&&this.load.zoomIn(b,c)},zoomOut:function(b,c){this.load&&this.load.zoomOut&&this.load.zoomOut(b,c)},destroy:function(){this.load&&this.load.destroy&&this.load.destroy()},resizeSvg:function(b,c){this.load&&this.load.resizeSvg&&this.load.resizeSvg(b,c)},enterSide:function(){this.load&&this.load.enterSide&&this.load.enterSide()},leaveSide:function(){this.load&&this.load.leaveSide&&this.load.leaveSide()}}),Side=Class({bookType:0,pageIndex:0,width:0,height:0,pageWidth:0,pageHeight:0,visible:!0,
$annotation:null,sideImage:null,sideContent:null,side:null,create:function(b,c,d,e){this.bookType=d;this.pageIndex=b;this.isMirrorSide=e;this.side=$("<div style='position:absolute;will-change:transform;-webkit-backface-visibility:hidden;backface-visibility:hidden;'></div>");this.side.attr("id",c+b);b=PageInfo.getPageColor(this.pageIndex);this.sideContent=$("<div class='side-content' style='background-color : "+b+";'></div>");this.side.append(this.sideContent);this.sideImage=$("<div class='side-image' style='position:absolute;z-index:0;width:100%;height:100%;top:0;left:0;'/>");
this.sideContent.append(this.sideImage)},setCSSByStyle:function(b){this.side.css(b)},setCSSByName:function(b){this.side.attr("class",b)},enterSide:virtual_function,leaveSide:virtual_function,remove:virtual_function,zoomInSideImage:virtual_function,zoomOutSideImage:virtual_function,switchLargeImage:virtual_function,switchNormalImage:virtual_function,loading:virtual_function,unLoading:virtual_function,mirrorSide:virtual_function,setFlipShadow:virtual_function,addFlipShadow:virtual_function,resizeFlipShadow:virtual_function,
clearFlipShadow:virtual_function,fillContent:virtual_function,fillPage:virtual_function,initSelectTextEvent:virtual_function,destroySelect:virtual_function,initMagnifierEvent:virtual_function,destroyMagnifier:virtual_function,pauseAnimation:virtual_function,startAnimation:virtual_function,addHistoryTexts:virtual_function,highlightSearch:virtual_function,clearHighlight:virtual_function,resetSlider:virtual_function}),BookRestrict=Class({statics:{unLimitPages:[],open:!1,isLoaded:!1,isRestrictPage:function(b){if(!bookConfig.isEncryptionBook)return"none";
if(this.open)return"open";var c=this.unLimitPages;return c&&c[b]?c[b]:"restrict"},setRestrictLoaded:function(b){this.isLoaded=b;BookEvent.trigger("onLoadBookRestrict",["onLoadBookRestrict",this.isLoaded])},getRestrictToken:function(){try{if(!bookConfig.isEncryptionBook||!window.bookId)return"";(new Date).format("yyyy-MM-dd",!0);var b=window.localStorage.getItem("restrictToken_"+window.bookId);return b?b:""}catch(c){}},setRestrictToken:function(b){try{if(!bookConfig.isEncryptionBook||!window.bookId)return"";
(new Date).format("yyyy-MM-dd",!0);window.localStorage.setItem("restrictToken_"+window.bookId,b)}catch(c){}},fillBookContent:function(){this.open=!0;this.loading=!1;this.fillBooks("flipBook");this.fillBooks("singlePageBook");this.fillBooks("catalogBook");this.fillBooks("slideBook");this.fillBooks("singleSlideBook");this.fillBooks("singleDocumentViewBook");this.fillBooks("cardBook");this.fillBooks("invertBook");BookEvent.trigger("fillBookRestrict",["fillBookRestrict",this.open])},fillBooks:function(b){if(b=
global[b])b.loading(),b.fillBookContent()},setRestrictPages:function(b){try{for(var c=1;c<=bookConfig.totalPageCount;c++){a:{var d=c;try{for(var e=b.split(";"),f=0;f<e.length;f++){var g=e[f];if(0<=g.indexOf("-")){var h=g.split("-");if(Number.isBetween(d,parseInt(h[0]),parseInt(h[1]))){var k=!1;break a}}else if(d==parseInt(g)){k=!1;break a}}}catch(l){}k=!0}k?BookRestrict.unLimitPages[c]="restrict":BookRestrict.unLimitPages[c]="open"}}catch(l){}}}}),Page=Class({create:function(b,c,d,e){this._super(b,
c,d,e);this.renderPage();this.addFlipShadow()},remove:function(){this.sideImage&&this.sideImage.remove();this.side.remove();this.sideImage=this.side=void 0;this.pageBackground&&this.pageBackground.destroy();this.render&&(this.render.taskPool.stop(),this.renderInterval&&(window.clearInterval(this.renderInterval),this.renderInterval=void 0));this.hasReader&&this.destroySlider()},destroy:function(){this.pageBackground&&this.pageBackground.destroy();this.sideImage=this.side=void 0;this.hasReader&&this.destroySlider()},
hasReader:function(){return window.readerConfig&&0<window.readerConfig.pages.length&&window.readerConfig.pages.length>=this.pageIndex&&(this.hasReaderItems()||window.inverseEditor&&window.inverseEditor.length&&window.inverseEditor[this.pageIndex-1]&&window.inverseEditor[this.pageIndex-1].length)?!0:!1},hasReaderItems:function(){var b=window.readerConfig.pages[this.pageIndex-1];return b&&0!==Object.values(b).filter(function(c){return Array.isArray(c)&&c.length}).length},loading:function(){"restrict"==
BookRestrict.isRestrictPage(this.pageIndex)||this.originalImageLoaded||this.removeLoad||(this.loadingImage||(this.loadingImage=$("<div class='loadingOuter'><img alt='loadingOuter' width='auto' height='auto' class='loadingImage' src='"+bookConfig.pageLoadingUrl+"'/></div>")),this.sideContent.append(this.loadingImage))},unLoading:function(b){this.hasReader()&&!b||!this.loadingImage||(this.loadingImage.css({display:"none"}),this.loadingImage.remove(),this.loadingImage=null)},restrict:function(){if(!this.restrictImage){this.restrictImage=
$("<div class='loadingOuter'></div>");var b=1==this.pageIndex?getMeta("og:image"):bookConfig.pageRestrictUrl;this.restrictImage.css({"background-image":"url("+b+")"});1==this.pageIndex?this.restrictImage.css({"background-size":"contain"}):this.restrictImage.css({"background-size":"auto"});this.mirrorRestrict();this.sideContent.append(this.restrictImage)}},unRestrict:function(){this.restrictImage&&(this.restrictImage.remove(),this.restrictImage=null)},mirrorRestrict:function(){if(this.isMirrorSide&&
this.restrictImage){var b="scaleX(-1)";bookConfig.FlipDirection&&(b="scaleY(-1)");this.restrictImage.css({"-webkit-transform":b,"-moz-transform":b,"-o-transform":b,"-ms-transform":b,opacity:.2})}},mirrorSide:function(){this.isMirrorSide=!0;var b="scaleX(-1)";bookConfig.FlipDirection&&(b="scaleY(-1)");this.sideImage.css({"-webkit-transform":b,"-moz-transform":b,"-o-transform":b,"-ms-transform":b,opacity:.2});this.rendering&&(this.rendering.destroy(),this.rendering=null);this.unLoading()},fillPreviewImage:function(){var b=
this,c,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return bookConfig.loadPreviewImage?b.isMirrorSide||window.sliderJS&&window.sliderJS[b.pageIndex-1]&&sliderJS[b.pageIndex-1].elements&&sliderJS[b.pageIndex-1].elements.length?e.jumpTo(0):e.yield(getPageDir(b.pageIndex,"previewPage",originTotalPageCount),3):e.return();c=e.yieldResult;c.startsWith("none")||(b.sideImage.css({"background-image":"url("+c+")","background-size":"contain","background-repeat":"no-repeat",
"background-position":"center"}),bookConfig.removeLoad&&(d=$("<img src='"+c+"'/>"),d[0].onload=function(){this.unLoading();this.unRestrict();this.removeLoad=!0}.bind(b)));e.jumpToEnd()})},setFlipShadow:function(b,c,d){this.pageFlipShadow&&this.pageFlipShadow.flip(b,c,d)},addFlipShadow:function(){bookConfig.HardInnerPageEnable?this.addHardFlipShadow():this.pageFlipShadow||(this.pageFlipShadow="magazine"==bookConfig.pageHighlightType?new PageHighlightsFlipShadow(this.side,this.pageIndex):new PageFlipShadow(this.side,
this.pageIndex))},addHardFlipShadow:function(){this.pageFlipShadow||(this.pageFlipShadow=new HardPageFlipShadow(this.side))},clearFlipShadow:function(){this.pageFlipShadow&&this.pageFlipShadow.clear();this.side.removeClass("boxShadow")},resizeFlipShadow:function(b,c){this.pageFlipShadow&&this.pageFlipShadow.resize(b,c)},centerPage:function(){this.isLeft=!1;this.side.attr("class","center-side")},setLeftOrRight:function(b){(this.isLeft=b)?this.side.attr("class","left-side"):this.side.attr("class","right-side")},
setUpOrDown:function(b){(this.isUp=b)?this.side.attr("class","up-side"):this.side.attr("class","down-side")},renderPage:function(){this.rendering&&(this.rendering.destroy(),this.rendering=null);this.rendering=new PageRendering(this.side,this.pageIndex,this.bookType);this.rendering.onResize(this.width,this.height);this.rendering.render()},hideMiddleShadow:function(){this.rendering&&this.rendering.hideMiddleShadow()},fillContent:function(b){"restrict"==BookRestrict.isRestrictPage(this.pageIndex)?this.restrict():
this.fillPage(this.pageIndex,b)},fillPage:function(b,c,d){this.isMirrorSide&&!bookConfig.showMirrorSide||b!=this.pageIndex||this.originalImageLoaded||(d||(d="normal",this.isMirrorSide&&(d="thumb")),"normal"==d&&(bookConfig.usePdfJs?(b=function(e,f,g){this.pageBackground.load.renderCnvas(e,f,g,this.pageIndex,this.pageWidth,this.pageHeight,this.initContents.bind(this))}.bind(this),this.initPageBackground(c,"normal",b)):this.initPageBackground(c,"normal",this.initContents.bind(this))),"thumb"==d&&(this.type=
"thumb",this.initPageBackground(c,"thumb",this.onMirrorSideLoaded.bind(this))))},initPageBackground:function(b,c,d){if(!this.pageBackground||b)this.pageBackground=new PageBackground(this.pageIndex,c,d,this.pageWidth,this.pageHeight,this.isMirrorSide,this.sideImage),this.imageURL=this.pageBackground.imageURL},initContents:function(b,c,d){imageLoaded[this.pageIndex]=!0;this.isReaderConfigLoaded(function(){try{this.onOriginalImageLoaded(b,c,d)}catch(e){}}.bind(this))},onMirrorSideLoaded:function(b,c,
d){b&&(this.originalImageLoaded=!1,this.unLoading(),this.unRestrict(),isPhone()||isPad()?bookConfig.EnableRecognizeQRcodePressOnMobile||$(d).css({"pointer-events":"none"}):bookConfig.isStopMouseMenu&&$(d).css({"pointer-events":"none"}),this.sideImage&&this.sideImage.empty().append(d))},onOriginalImageLoaded:function(b,c,d){var e=this,f,g,h,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(!b)return l.return();e.originalImageLoaded=!0;e.unLoading();e.unRestrict();if(e.sideImage&&
("string"==typeof c&&!c.startsWith("none")||"string"!=typeof c))if("string"==typeof c||"object"==typeof c&&0<=c[0].indexOf(".zip"))isPhone()||isPad()?bookConfig.EnableRecognizeQRcodePressOnMobile||$(d).css({"pointer-events":"none"}):bookConfig.isStopMouseMenu&&$(d).css({"pointer-events":"none"}),e.sideImage.empty().append(d);else for(e.sideImage.empty(),f=0;f<d.length;f++)isPhone()||isPad()?bookConfig.EnableRecognizeQRcodePressOnMobile||$(d).css({"pointer-events":"none"}):bookConfig.isStopMouseMenu&&
$(d).css({"pointer-events":"none"}),e.sideImage.append(d[f]);g=fitPageWidthHeight(e.pageWidth,e.pageHeight,e.imageWidth,e.imageHeight);!bookConfig.isSingleBookFullWindowOnMobile||1!=e.bookType||!isPhone()&&!isPad()||e.imageWidth||e.imageHeight||(g=fitPageWidthHeight(e.pageWidth,e.pageHeight,bookConfig.largePageWidth,bookConfig.largePageHeight),h=bookConfig.largePageWidth/bookConfig.largePageHeight,k=e.pageWidth/e.pageHeight,.01>h-k&&-.01<h-k&&(g.x=e.pageWidth,g.y=e.pageHeight),e.imageWidth=g.x,e.imageHeight=
g.y);e.pageAttachments||(e.pageAttachments=new PageAttachmentsParser(e.sideContent,e.imageWidth?e.imageWidth:e.pageWidth,e.imageHeight?e.imageHeight:e.pageHeight,e.pageWidth,e.pageHeight,e.pageIndex,e.bookType,e,function(){if(this.onPageLoaded)this.onPageLoaded(this.pageIndex)}.bind(e)));l.jumpToEnd()})},isReaderConfigLoaded:function(b){var c=this,d,e,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){switch(g.nextAddress){case 1:g.setCatchFinallyBlocks(2);d=function(){try{var h=window.setInterval(function(){window.readerConfigLoaded&&
(window.clearInterval(h),b&&b())},100)}catch(k){}};window.htmlConfig&&htmlConfig.pages_editor&&(window.readerConfig=htmlConfig.pages_editor,initReaderPopDom());if(!(window.readerConfigLoaded&&window.readerConfig&&window.readerConfig.pages&&window.readerConfig.pages[c.pageIndex-1]&&"string"==typeof window.readerConfig.pages[c.pageIndex-1])){g.jumpTo(4);break}return g.yield(getArticleImage(fixURLValue(window.readerConfig.pages[c.pageIndex-1])),5);case 5:return e=g.yieldResult,g.yield(c.loadJsonFile(e),
6);case 6:return f=g.yieldResult,window.readerConfig.pages[c.pageIndex-1]=f,d(),g.return();case 4:d();g.leaveTryBlock(0);break;case 2:g.enterCatchBlock(),g.jumpToEnd()}})},loadJsonFile:function(b){var c=this,d,e,f;return $jscomp.asyncExecutePromiseGeneratorProgram(function(g){switch(g.nextAddress){case 1:return g.setCatchFinallyBlocks(2),g.yield(fetch(b),4);case 4:d=g.yieldResult;if(!d.ok)throw Error("HTTP error! status: "+d.status);return g.yield(d.json(),5);case 5:return e=g.yieldResult,"string"==
typeof e&&(e=c.decodePage(e)),g.return(e);case 2:f=g.enterCatchBlock(),console.error("Error loading JSON file:",f),g.jumpToEnd()}})},decodePage:function(b){if(!b)return null;try{var c=this.decrypt(b);return JSON.parse(c)}catch(d){return console.error("\u6924\u7538\u6f70\u7459\uff45\u7611\u6fb6\u8fab\u89e6:",d),null}},decrypt:function(b){if(!b)return"";try{var c=atob(b);b="";for(var d=0;d<c.length;d++){var e="mobiano"[d%7],f=c.charCodeAt(d)^e.charCodeAt(0);b+=String.fromCharCode(f)}return decodeURIComponent(atob(b))}catch(g){return console.error("\u7459\uff45\u7611\u6fb6\u8fab\u89e6:",
g),""}},onPageLoaded:function(){var b=this.pageIndex;BookInfo.getBook().getRealBookIndex&&(b=BookInfo.getBook().getRealBookIndex(this.pageIndex));BookInfo.getBook().onBookPageLoaded(b)},enterSide:function(){this.pageAttachments&&this.pageAttachments.enterSide();this.pageBackground&&this.pageBackground.enterSide();window.vuePopDom&&window.vuePopDom.enterPage&&window.vuePopDom.enterPage()},leaveSide:function(){this.pageAttachments&&this.pageAttachments.leaveSide();this.pageBackground&&this.pageBackground.leaveSide();
window.vuePopDom&&window.vuePopDom.leavePage&&window.vuePopDom.leavePage()},initSelectTextEvent:function(){this.pageAttachments&&this.pageAttachments.select()},destroySelect:function(){this.pageAttachments&&this.pageAttachments.destroySelect()},initMagnifierEvent:function(){this.pageAttachments&&this.pageAttachments.initMagnifierEvent()},destroyMagnifier:function(){this.pageAttachments&&this.pageAttachments.destroyMagnifier()},pauseAnimation:function(){this.pageAttachments&&this.pageAttachments.pauseAnimation()},
startAnimation:function(){this.pageAttachments&&this.pageAttachments.startAnimation()},resetSlider:function(){this.pageAttachments&&this.pageAttachments.resetSlider()},destroySlider:function(){this.pageAttachments&&this.pageAttachments.destroySlider()},addHistoryTexts:function(){this.pageAttachments&&this.pageAttachments.addHistoryTexts()},highlightSearch:function(){this.pageAttachments&&this.pageAttachments.highlightSearch()},clearHighlight:function(){this.pageAttachments&&this.pageAttachments.clearHighlight()},
initReaderOrSlider:function(){this.pageAttachments&&this.pageAttachments.initReaderOrSlider()},onResize:function(b,c){this.resizePage(b,c);this.resizeFlipShadow(b,c);if(this.rendering)this.rendering.onResize(b,c);this.pageAttachments&&(b=fitPageWidthHeight(this.pageWidth,this.pageHeight,this.imageWidth,this.imageHeight),this.pageAttachments.onResize(b.x,b.y,this.pageWidth,this.pageHeight))},resizePage:function(b,c){this.width=b;this.height=c;this.pageWidth=parseInt(100*b/(-parseFloat(bookConfig.visibleAreaLeft)+
parseFloat(bookConfig.visibleAreaRight)));this.pageHeight=parseInt(100*c/(parseFloat(bookConfig.visibleAreaBottom)-parseFloat(bookConfig.visibleAreaTop)));this.side.css({width:b,height:c});this.sideContent.css({width:this.pageWidth,height:this.pageHeight,top:-this.pageHeight*parseFloat(bookConfig.visibleAreaTop)/100,left:-this.pageWidth*parseFloat(bookConfig.visibleAreaLeft)/100});if(this.pageBackground)this.pageBackground.onResize(this.pageWidth,this.pageHeight)},zoomInSideImage:function(){this.pageBackground.zoomIn()},
zoomOutSideImage:function(){this.pageBackground.zoomOut()},switchLargeImage:function(){this.pageBackground&&this.pageBackground.zoomIn(this.onSwitchImage.bind(this))},switchNormalImage:function(b){this.pageBackground&&this.pageBackground.zoomOut(b,this.onSwitchImage.bind(this))},onSwitchImage:function(b,c,d){if(!this.originalImageLoaded)this.initContents(b,c,d);else if(b)if("string"==typeof c)isPhone()||isPad()?bookConfig.EnableRecognizeQRcodePressOnMobile||$(d).css({"pointer-events":"none"}):bookConfig.isStopMouseMenu&&
$(d).css({"pointer-events":"none"}),this.sideImage.empty().append(d),this.imageWidth=d.naturalWidth,this.imageHeight=d.naturalHeight;else{this.sideImage.empty();for(b=0;b<d.length;b++)isPhone()||isPad()?bookConfig.EnableRecognizeQRcodePressOnMobile||$(d).css({"pointer-events":"none"}):bookConfig.isStopMouseMenu&&$(d).css({"pointer-events":"none"}),this.sideImage.append(d[b]);this.imageWidth=d[b][0].naturalWidth;this.imageHeight=d[b][0].naturalHeight}},resizeSvg:function(b,c){try{this.pageBackground.resizeSvg(b,
c)}catch(d){}}}).extend(Side),PageAttachment=Class({create:function(){},onResize:function(){},enterSide:function(){},leaveSide:function(){}}),PageMagnifier=Class({create:function(b,c,d,e,f,g){this.$container=b;this.pageIndex=d;this.width=e;this.height=f;this.$parent=c;this.bookType=g;this.sideImage=c.find(".side-image");this.initMagnifierEvent()},initMagnifierEvent:function(){this.$container.bind("mouseenter",function(b){global.canMagnifierZoom&&global.magnifierZoomBox&&(global.magnifierZoomBox.show(),
global.magnifierZoomBox.setImg(this.sideImage,this.sideImage.find("img"),b))}.bind(this));this.$container.bind("mouseleave",function(){global.canMagnifierZoom&&global.magnifierZoomBox&&global.magnifierZoomBox.hide()}.bind(this));this.$container.bind("mousemove",function(b){global.canMagnifierZoom&&global.magnifierZoomBox&&(global.magnifierZoomBox.show(),global.magnifierZoomBox.drawBg(b))}.bind(this))},destroyMagnifier:function(){this.$container&&this.$container.remove();this.$container=void 0},onResize:function(){}}).extend(PageAttachment),
PageHighlight=Class({create:function(b,c,d,e,f,g){this.$container=b;this.pageIndex=d;this.width=e;this.height=f;this.$parent=c;this.bookType=g;this.highlightSearch()},highlightSearch:function(){var b=this,c,d,e,f,g;return $jscomp.asyncExecutePromiseGeneratorProgram(function(h){if(1==h.nextAddress){global.slideHightLightList[b.pageIndex]&&b.searchTxtFromSlider();c=getSearchRealPageIndex(b.pageIndex);if(-1==c)return h.return();d=!1;for(e=0;e<positionForPages.length;e++)if(positionForPages[e]&&positionForPages[e].page&&
positionForPages[e].page==c){d=!0;break}if(d)return highlightSearchFun(b.$container,c),h.jumpTo(0);f=String.format(bookConfig.searchPositionJS,c);1<b.pageIndex&&(f=f.replace("[1]","["+c+"]"));g=/\.*\/?(\w+\/)*\w+(\[|\()?\d+(\]|\))?\.js/gi;return f.match(g)?h.yield(getArticleImage(fixURLValue(f)),3):h.return()}if(4!=h.nextAddress)return(f=h.yieldResult)?h.yield(loadAndFixPositionScript(c,f),4):h.return();highlightSearchFun(b.$container,c);h.jumpToEnd()})},clearHighlight:function(){this.$container.css({"background-image":""});
this.$container.remove();clearHighlightFun(this.$container);this.clearSliderHighLight()},searchTxtFromSlider:function(){if(BookInfo.getBook().pageArray[this.pageIndex]&&BookInfo.getBook().pageArray[this.pageIndex].page&&BookInfo.getBook().pageArray[this.pageIndex].page.pageAttachments&&BookInfo.getBook().pageArray[this.pageIndex].page.pageAttachments.pageAnimation){var b=BookInfo.getBook().pageArray[this.pageIndex].page.pageAttachments.pageAnimation;b&&b.searchSliderHighLight()}},clearSliderHighLight:function(){if(BookInfo.getBook().pageArray[this.pageIndex]&&
BookInfo.getBook().pageArray[this.pageIndex].page&&BookInfo.getBook().pageArray[this.pageIndex].page.pageAttachments&&BookInfo.getBook().pageArray[this.pageIndex].page.pageAttachments.pageAnimation){var b=BookInfo.getBook().pageArray[this.pageIndex].page.pageAttachments.pageAnimation;b&&b.clearSliderHighLight()}},onResize:function(){}}).extend(PageAttachment),PageAnnotation=Class({create:function(b,c,d,e,f,g){this.$container=b;this.pageIndex=d;this.width=e;this.height=f;this.$parent=c;this.bookType=
g;this.pageAnnotation=new Annotation(this.$container,d,e,f);global.annotationCookie||this.bookType!=BookInfo.getBookType()||(global.annotationCookie=new AnnotationCookie(b,this.width,this.height));this.enterSide()},enterSide:function(){isBelowIE9()&&$(this.$container).css({"background-image":"url('aaaa.a')"});global.annotationCookie&&this.bookType==BookInfo.getBookType()&&global.annotationCookie.repaintCookie(this.width,this.height,this.pageIndex-1,this.$container)},leaveSide:function(){},onResize:function(b,
c){if(b!=this.width||c!=this.height)this.width=b,this.height=c,this.pageAnnotation.onResize(b,c,1,this.$container),global.annotationCookie&&this.bookType==BookInfo.getBookType()&&global.annotationCookie.repaintCookie(b,c,this.pageIndex-1,this.$container)}}).extend(PageAttachment),PageSelect=Class({create:function(b,c,d,e,f,g){this.$container=b;this.pageIndex=d;this.width=e;this.height=f;this.$parent=c;this.bookType=g;this.initEvent()},initEvent:function(){var b=new Hammer.Manager(this.$container[0]);
b.add(new Hammer.Pan({threshold:0}));b.add(new Hammer.Tap);b.on("panstart panmove panend",this.selectText.bind(this));b.on("tap",this.onTap.bind(this))},onTap:function(){this.$container&&this.$container.empty();this.hint&&this.hint.hide()},destroySelect:function(){this.$container&&this.$container.remove();this.hint&&this.hint.destroy();this.$container=this.hint=void 0},selectText:function(b){if(!BookInfo.getBook().flipping&&global.positionForPages){var c;for(c=0;c<positionForPages.length;c++)if(positionForPages[c]&&
positionForPages[c].page&&positionForPages[c].page==getSearchRealPageIndex(this.pageIndex)){var d=positionForPages[c].positions;break}this.$container.empty();if(d){this.searchTextHighlight||(this.searchTextHighlight=new SearchTextHighlight(this.width,this.height,rightToLeft),this.searchTextHighlight.loadFromPage(d),this.highlightDOM=new SearchHighlightDOM(this.$container));d=this.getArea(b);d=this.searchTextHighlight.selectText(d);this.highlightText="";if(d){c=d.getRects();for(var e=0;e<c.length;){for(var f=
[],g=0;4>g;g++)f[g]=c[e+g];this.highlightDOM.addHighlight(f);e+=4}this.highlightText=d.getText()}"panend"==b.type&&(isPhone()||isPad()?this.highlightText&&(global.phoneCopyForm||(phoneCopyForm=new CopyForm({parent:tmpContainer,formType:"copy",rightToLeft:rightToLeft})),phoneCopyForm.fillText(this.highlightText),phoneCopyForm.show()):(d=b.srcEvent.pageX,b=b.srcEvent.pageY,this.hint||(this.hint=new divHint(getLanguage("lblCopy","Copy"),d,b),this.hint.addClass("hint_active"),this.hint.instance.bind(_event._end,
function(){this.highlightText&&this.copyToClipboard(this.highlightText)}.bind(this))),this.highlightText?(this.hint.show(d,b),this.hint.moveto(d,b)):this.hint.hide()))}}},copyToClipboard:function(b){global.tmpCopyInput||(global.tmpCopyInput=$("<textarea style='position:absolute;top:-100%;right:-50px;'></textarea>"),$("body").append(global.tmpCopyInput));global.tmpCopyInput.val(b);copyFromObj(global.tmpCopyInput)},getArea:function(b){"panstart"==b.type&&(this.selectStartPoint=this.getRealPoint(b.srcEvent));
var c=this.$container.width(),d=this.$container.height();var e=bookType===BookType.documentView_book||bookType===BookType.singleDocumentView_book?BookInfo.getBook().docViewBook.parameters?BookInfo.getBook().docViewBook.parameters.scale:1:bookType===BookType.card_book?BookInfo.getBook().flipBookElement.parameters?BookInfo.getBook().flipBookElement.parameters.scale:1:bookType===BookType.invert_book?BookInfo.getBook().showPage&&BookInfo.getBook().showPage.parameters&&BookInfo.getBook().showPage.parameters.scale?
BookInfo.getBook().showPage.parameters.scale:1:BookInfo.getBook().flipBook.parameters?BookInfo.getBook().flipBook.parameters.scale:1;var f=this.selectStartPoint[0]/(c*e),g=this.selectStartPoint[1]/(d*e),h=b.deltaX,k=b.deltaY;bookConfig.upsideOnMobile()&&(h=b.deltaY,k=-b.deltaX);return{left:f,top:g,right:(this.selectStartPoint[0]+h)/(c*e),bottom:(this.selectStartPoint[1]+k)/(d*e)}},getRealPoint:function(b){if((b=b.originalEvent&&b.originalEvent.changedTouches?b.originalEvent.changedTouches:b.changedTouches?
b.changedTouches:[b])&&!(3<=b.length)){var c=this.$container.offset().left,d=this.$container.offset().top;var e=bookType===BookType.documentView_book||bookType===BookType.singleDocumentView_book?BookInfo.getBook().docViewBook.parameters?BookInfo.getBook().docViewBook.parameters.scale:1:bookType===BookType.card_book?BookInfo.getBook().flipBookElement.parameters?BookInfo.getBook().flipBookElement.parameters.scale:1:bookType===BookType.invert_book?BookInfo.getBook().showPage&&BookInfo.getBook().showPage.parameters&&
BookInfo.getBook().showPage.parameters.scale?BookInfo.getBook().showPage.parameters.scale:1:BookInfo.getBook().flipBook.parameters?BookInfo.getBook().flipBook.parameters.scale:1;this.$container.width();e*=this.$container.height();var f=b[0].pageX;b=b[0].pageY;return bookConfig.upsideOnMobile()?[b-d,e-(f-c)]:[f-c,b-d]}},onResize:function(){}}).extend(PageAttachment),PageAnimation=Class({create:function(b){this.$container=b.$container;this.pageIndex=b.pageIndex;this.page=b.page;this.width=b.width;this.height=
b.height;this.$parent=b.$parent;this.bookType=b.bookType;this.callback=b.callback},pauseAnimation:function(){},startAnimation:function(){},enterSide:function(){},leaveSide:function(){},onResize:function(b,c){},resetSlider:function(){},destroySlider:function(){},initReaderOrSlider:function(){},refreshEvent:function(){}}),PageEditorLoad=Class({statics:{isLoading:!1,isCompleted:function(){try{if(window.PageItem&&window.PageItem.HtmlVideo)return!0}catch(b){}}}}),PageHisliderLoad=Class({statics:{isLoading:!1,
isCompleted:function(){try{if(window.hiSliderFactory)return!0}catch(b){}}}}),PageEditorAnimation=Class({create:function(b){this.$container=b.$container;this.pageIndex=b.pageIndex;this.page=b.page;this.width=b.width;this.height=b.height;this.$parent=b.$parent;this.bookType=b.bookType;this.callback=b.callback;this.Items=new ObjectPool;this.needLoadResource()?this.loadResource():this.initPageEditor()},needLoadResource:function(){if(PageEditorLoad.isCompleted())return!0;for(var b=this.getPageAnnos()[this.pageIndex-
1],c=0;c<b.length;c++){var d=b[c];if(d)if(d.annotype==PageEditor.AnnoType.ANNO_LINK){var e=c=b=void 0,f=void 0;if((null==(b=d.action)?void 0:b.actionType)!=PageEditor.ActionType.GOTO_PAGE&&(null==(c=d.action)?void 0:c.actionType)!=PageEditor.ActionType.OPEN_URL&&(null==(e=d.action)?void 0:e.actionType)!=PageEditor.ActionType.SHOW_ARTICLE&&(null==(f=d.action)?void 0:f.actionType)!=PageEditor.ActionType.SLIDE_SHOW)return!0;break}else return!0}return!1},getPageAnnos:function(){var b=global.pageEditor;
b instanceof Array||(b=b.pageAnnos);if(this.hasInverseEditor()){var c=b;b.length<inverseEditor.length&&(c=inverseEditor);for(var d=0;d<c.length;d++){b[d]||(b[d]=[]);inverseEditor[d]||(inverseEditor[d]=[]);var e=inverseEditor[d];e&&e.length&&(e=e.map(function(f){return getInverseItem(f,this.width,this.height)}.bind(this)));b[d]=b[d].concat(e);inverseEditor[d]=[]}}return b},hasInverseEditor:function(){return window.inverseEditor&&window.inverseEditor&&window.inverseEditor.length},loadResource:function(){var b=
this;this.loadInterval=window.setInterval(function(){PageEditorLoad.isCompleted()&&(window.clearInterval(b.loadInterval),b.initPageEditor())},50)},initPageEditor:function(){this.initInterval=window.setInterval(function(){global.PageEditorParser&&window.clearInterval(this.initInterval);global.PageEditorParser&&(this.Items=(new PageEditorParser(this.$container,this.width,this.height)).createItemsForPage(this.pageIndex),this.Items.find("Youtube").each(function(b){b.hide()}),this.preventMMBackEvent(),
this.onResize(this.width,this.height),this.callback())}.bind(this),100)},preventMMBackEvent:function(){document.body.ondragstart=function(){return!1};var b="mousedown touchstart pointerdown mouseover mousemove";if(isPhone()||isPad())b="mousedown touchstart mouseover mousemove";$(this.$container).on(b,".hi-action",function(c){c.stopPropagation()});$(this.$container).on(b,".slider-action",function(c){c.stopPropagation()});$(this.$container).on(b,".flip-action",function(c){c.stopPropagation()})},pauseAnimation:function(){this.Items.each(function(b){b.nameLike&&
(b.nameIs("EmbeddedSlideshow","AlphaTransitionBanner","Carousel","TextAmin","AText","StarText","HotSpots","Banner")&&(b.pause&&b.pause(),b.stop&&b.stop(),b.stopFlash&&b.stopFlash()),b.nameLike("Button")&&b.stopAnimation&&b.stopAnimation())})},startAnimation:function(){this.Items.each(function(b){b.nameLike&&(b.nameIs("EmbeddedSlideshow","AlphaTransitionBanner","Carousel","TextAmin","AText","StarText","HotSpots","Banner")&&b.play&&b.play(),b.nameLike("Button")&&b.runAnimation&&b.runAnimation())})},
enterSide:function(){this.Items.each(function(b){b.showAnimate&&b.showAnimate();b.audio&&b.audio.enterPlay&&b.audio.play&&b.audio.play();if(b.nameLike){b.nameLike("youtube","flashSwf","button","Video","LoopControlVideo")&&b.show&&b.show();(b.nameLike("youtube")||b.nameLike("vimeo"))&&b.playVideo&&b.getPlayEvt()==PageEditor.PlayEvt.EVT_PLAY&&b.playVideo();b.nameLike("audio")&&(b.isReplay()&&b.backTime(),b.getPlayEvt()==PageEditor.PlayEvt.EVT_PLAY&&b.playAudio(),b.background&&b.isBackgroundAudio()&&
b.playAudio());if(b.nameIs("Video")||b.nameIs("LoopControlVideo"))b.isReplay()&&b.backTime(),b.getPlayEvt()==PageEditor.PlayEvt.EVT_PLAY&&b.playVideo();b.nameIs("EmbeddedSlideshow","AlphaTransitionBanner","Carousel","TextAmin","AText","StarText","HotSpots","EffectText","Banner")&&b.play&&b.play();b.nameIs("Link")&&b.flash();b.nameLike("Image")&&(b.resetImgSrc(),b.showEffect());b.nameLike("Button")&&b.runAnimation&&b.runAnimation()}})},leaveSide:function(){this.Items.each(function(b){b.pause&&b.pause();
b.stop&&b.stop();b.stopFlash&&b.stopFlash();b.audio&&b.audio.stop&&b.audio.stop();b.dialog&&b.dialog.hide();b.nameLike&&(b.nameLike("youtube","flashSwf","button","Video","LoopControlVideo")&&b.hide&&b.hide(),b.nameLike("youtube","vimeo")&&b.pauseVideo&&b.pauseVideo(),b.nameLike("audio")&&b.pauseAudio&&b.pauseAudio(),b.nameIs("LoopControlVideo")&&b.pauseVideo&&b.pauseVideo(),b.nameIs("Video")&&b.getStopEvt()==PageEditor.PlayEvt.EVT_STOP&&b.pauseVideo(),b.nameLike("Image")&&(b.removeImgSrc(),b.hideEffect()),
b.nameLike("Button")&&b.stopAnimation&&b.stopAnimation(),b.nameLike("zoom")&&global.popZoomBox&&(global.popZoomBox.popZoom.hide(),global.popZoomBox.visible=!0))})},onResize:function(b,c){this.width=b;this.height=c;this.Items.each(function(d){d.onResize(b,c);d.onResizePopup(windowWidth,windowHeight)})},destroySlider:function(){this.initInterval&&window.clearInterval(this.initInterval);this.loadInterval&&window.clearInterval(this.loadInterval)},refreshEvent:function(){this.Items&&this.Items.length&&
this.Items.each(function(b){b.initEvents&&b.initEvents()})}}).extend(PageAnimation),PageHislider=Class({create:function(b){this.$container=b.$container;this.pageIndex=b.pageIndex;this.page=b.page;this.width=b.width;this.height=b.height;this.$parent=b.$parent;this.bookType=b.bookType;this.callback=b.callback;this.initSlider()},initSlider:function(){window.hiSliderFactory&&(this.slider=window.hiSliderFactory({container:this.$container,slide:sliderJS[this.pageIndex-1],initialWidth:this.width,initialHeight:this.height,
focusOnFunc:this.focusOn.bind(this),resetFocusFunc:this.resetFocus.bind(this)}),this.slider.resize(this.width,this.height),this.preventMMBackEvent(),setTimeout(this.callback.bind(this),100))},preventMMBackEvent:function(){document.body.ondragstart=function(){return!1};var b="mousedown touchstart pointerdown mouseover mousemove";if(isPhone()||isPad())b="mousedown touchstart mouseover mousemove";$(this.$container).on(b,".hi-action",function(c){c.stopPropagation()});$(this.$container).on(b,".slider-action",
function(c){c.stopPropagation()});$(this.$container).on(b,".flip-action",function(c){c.stopPropagation()})},playSlider:function(){this.slider&&this.slider.play()},replaySlider:function(){this.slider&&this.slider.replay()},resetSlider:function(){this.resetFocus(0);this.slider&&this.slider.reset()},destroySlider:function(){this.slider&&(this.slider.destoryed&&this.slider.destoryed(),this.slider=null,this.$container.find(".app").remove())},pauseAnimation:function(){this.slider&&(this.pauseSlider(),this.slider&&
this.slider.startFlip&&this.slider.startFlip())},startAnimation:function(){this.slider&&(this.playSlider(),this.slider&&this.slider.endFlip&&this.slider.endFlip())},pauseSlider:function(){this.slider&&this.slider.pause()},onResize:function(b,c){this.width=b;this.height=c;this.slider&&this.bookType===BookInfo.getBookType()&&this.slider.resize(b,c)},enterSide:function(){this.slider&&this.replaySlider();this.slider&&this.slider.endFlip&&this.slider.endFlip()},leaveSide:function(){this.slider&&this.slider.startFlip&&
this.slider.startFlip()},focusOn:function(b){this.option=b;this.focusIng=!0;var c=b.pageWidth,d=b.duration/1E3,e=this.width/(b.width*this.width/c);c=-b.left*e*this.width/c;b=-b.top*e*this.height/b.pageHeight;e=Math.max(1,e);c=Number.between(c,(1-e)*this.width,0);b=Number.between(b,(1-e)*this.height,0);e=transformCSS({origin:{x:0,y:0},tran:{x:c,y:b},scale:e});animateOnce(this.$parent,e,d,function(){},"%stransform")},resetFocus:function(b){if(this.focusIng){b||(b=0);var c=transformCSS({origin:{x:0,
y:0},tran:{x:0,y:0},scale:1});animateOnce(this.$parent,c,b/1E3,function(){this.focusIng=!1}.bind(this),"%stransform")}}}).extend(PageAnimation),PageReader=Class({sliderPlayerArray:[],create:function(b){this.$container=b.$container;this.pageIndex=b.pageIndex;this.page=b.page;this.width=b.width;this.height=b.height;this.$parent=b.$parent;this.bookType=b.bookType;this.callback=b.callback;this.initReader()},initReader:function(){this.slider||this.isAddReader||(this.isAddReader=!0,this.$container.addClass(this.getBookPageStr()+
"_animatePanel_"+(this.pageIndex-1)),this.$readerContainer=$("<div class='reader reader_"+(this.pageIndex-1)+"' style='width:100%;height:100%;position:absolute;left:0;top:0;'></div>"),this.$container.append(this.$readerContainer),this.$container.show(),this.createVueDom())},createVueDom:function(){var b=BookInfo.getCurrentPages();window.setVueDom({lazy:-1===b.indexOf(this.pageIndex),dom:"."+this.getBookPageStr()+"_animatePanel_"+(this.pageIndex-1)+" .reader_"+(this.pageIndex-1),pageStr:this.getBookPageStr(),
pageIndex:this.pageIndex-1,width:this.width,height:this.height}).then(function(c){this.slider=c;this.slider.resize(this.width,this.height);c.reset();this.page.unLoading(!0);this.slider.getAutoPlayArray&&(this.sliderPlayerArray=this.slider.getAutoPlayArray());this.callback()}.bind(this))},getBookPageStr:function(){var b="double";1===this.bookType&&(b="single");return b},playSlider:function(){this.clearSliderTimeout();this.slider?(this.playTimeout&&(clearTimeout(this.playTimeout),this.playTimeout=null),
this.slider.play()):this.playTimeout=setTimeout(this.playSlider.bind(this),100)},replaySlider:function(){this.clearSliderTimeout();this.slider?(this.playTimeout&&(clearTimeout(this.playTimeout),this.playTimeout=null),this.slider.replay()):this.playTimeout=setTimeout(this.replaySlider.bind(this),100)},destroySlider:function(){this.slider&&(this.slider.destoryed&&this.slider.destoryed(),this.slider=null,this.isAddReader=!1,this.$container.find(".app").remove())},pauseAnimation:function(){this.pauseSlider();
this.slider&&this.slider.startFlip&&this.slider.startFlip()},startAnimation:function(){this.playSlider();this.slider&&this.slider.endFlip&&this.slider.endFlip()},pauseSlider:function(){this.slider&&this.slider.pause()},onResize:function(b,c){this.width=b;this.height=c;this.slider&&this.bookType===BookInfo.getBookType()&&this.slider.resize(b,c)},sliderEnterPage:function(){try{window.vuePopDom&&window.vuePopDom.sliderEnterPage&&window.vuePopDom.sliderEnterPage()}catch(b){}},sliderLeavePage:function(){try{window.vuePopDom&&
window.vuePopDom.sliderLeavePage&&window.vuePopDom.sliderLeavePage(),this.slider&&this.slider.sliderLeavePage&&this.slider.sliderLeavePage()}catch(b){}},enterSide:function(){this.slider&&(this.replaySlider(),this.slider&&this.slider.endFlip&&this.slider.endFlip())},leaveSide:function(){this.slider&&(this.slider.startFlip&&this.slider.startFlip(),this.sliderLeavePage())},searchSliderHighLight:function(){this.slider&&global.search_Text&&!Array.isArray(global.search_Text)&&this.slider.searchText(search_Text)},
clearSliderHighLight:function(){this.slider&&this.slider.clearHighLight()},clearSliderTimeout:function(){this.playTimeout&&(clearTimeout(this.playTimeout),this.playTimeout=null)},refreshEvent:function(){this.slider&&this.slider.refreshEvent&&this.slider.refreshEvent()}}).extend(PageAnimation),hddr=[],a=hddr.soo2,i=0,PageAnimationFactory=Class({create:function(b){this.$container=b.$container;this.pageIndex=b.pageIndex;this.page=b.page;this.width=b.width;this.height=b.height;this.$parent=b.$parent;
this.bookType=b.bookType;this.callback=b.callback;this.option=b;this.isHiddenEditor()||this.initAnimation()},initAnimation:function(){this.hasReader()?window.setVueDom?this.initReader():this.loadPageReader():this.hasPageEditor()&&(this.pageEditor=new PageEditorAnimation(this.option));this.hasSlider()&&(window.hiSliderFactory?this.initSlider():this.loadPageSlider())},initReader:function(){this.pageReader||BookInfo.getBookType()!=this.bookType||this.pageReader||(this.pageReader=new PageReader(this.option))},
initSlider:function(){this.hasSlider()&&!this.pageHislider&&(this.pageHislider=new PageHislider(this.option))},initReaderOrSlider:function(){this.hasReader()&&(window.setVueDom?this.initReader():this.loadPageReader());this.hasSlider()&&(window.hiSliderFactory?this.initSlider():this.loadPageSlider())},loadPageReader:function(){var b=this;this.loadReaderInterval=window.setInterval(function(){window.setVueDom&&(b.destroyReaderInterval(),b.initReader())},100)},destroyReaderInterval:function(){this.loadReaderInterval&&
(window.clearInterval(this.loadReaderInterval),this.loadReaderInterval=null)},loadPageSlider:function(){var b=this;this.loadSliderInterval=window.setInterval(function(){window.hiSliderFactory&&(b.destroySliderInterval(),b.initSlider())},100)},destroySliderInterval:function(){this.loadSliderInterval&&(window.clearInterval(this.loadSliderInterval),this.loadSliderInterval=null)},hasPageEditor:function(){if(this.judgeHasPageEditor()||window.inverseEditor&&window.inverseEditor.length&&window.inverseEditor[this.pageIndex-
1]&&window.inverseEditor[this.pageIndex-1].length)return!0},judgeHasPageEditor:function(){var b=this.pageIndex-1;return window.pageEditor&&(!pageEditor.pageAnnos&&pageEditor[b]&&0<pageEditor[b].length||pageEditor.pageAnnos&&pageEditor.pageAnnos[b]&&0<pageEditor.pageAnnos[b].length)?!0:!1},isHiddenEditor:function(){return bookConfig.previewPagesArray&&Array.isArray(bookConfig.previewPagesArray)&&-1===bookConfig.previewPagesArray.indexOf(this.pageIndex)?!0:!1},hasReader:function(){return window.readerConfig&&
0<window.readerConfig.pages.length&&window.readerConfig.pages.length>=this.pageIndex&&(this.hasReaderItems()||window.inverseEditor&&window.inverseEditor.length&&window.inverseEditor[this.pageIndex-1]&&window.inverseEditor[this.pageIndex-1].length)?!0:!1},hasReaderItems:function(){var b=window.readerConfig.pages[this.pageIndex-1];return b&&0!==Object.values(b).filter(function(c){return Array.isArray(c)&&c.length}).length},hasSlider:function(){return window.sliderJS&&window.sliderJS[this.pageIndex-
1]&&window.sliderJS[this.pageIndex-1].elements&&0<sliderJS[this.pageIndex-1].elements.length?!0:!1},onResize:function(b,c){this.width=b;this.height=c;if(this.pageEditor)this.pageEditor.onResize(b,c);if(this.pageHislider)this.pageHislider.onResize(b,c);if(this.pageReader)this.pageReader.onResize(b,c)},searchSliderHighLight:function(){this.pageReader&&(Array.isArray(global.search_Text)||global.frmSearch.isCrossBookSearch&&global.frmSearch.isCrossBookSearch()||this.pageReader.searchSliderHighLight())},
clearSliderHighLight:function(){this.pageReader&&this.pageReader.clearSliderHighLight()},enterSide:function(){this.pageEditor&&this.pageEditor.enterSide();this.pageHislider&&this.pageHislider.enterSide();this.pageReader&&this.pageReader.enterSide();global.frmSearch&&global.frmSearch.visible&&global.search_Text&&!(Array.isArray(global.search_Text)||global.frmSearch.isCrossBookSearch&&global.frmSearch.isCrossBookSearch())&&this.searchSliderHighLight()},leaveSide:function(){this.pageEditor&&this.pageEditor.leaveSide();
this.pageHislider&&this.pageHislider.leaveSide();this.pageReader&&this.pageReader.leaveSide();global.frmSearch&&global.frmSearch.visible&&global.search_Text&&this.clearSliderHighLight()},pauseAnimation:function(){this.pageEditor&&this.pageEditor.pauseAnimation();this.pageHislider&&this.pageHislider.pauseAnimation();this.pageReader&&this.pageReader.pauseAnimation()},startAnimation:function(){this.pageEditor&&this.pageEditor.startAnimation();this.pageHislider&&this.pageHislider.startAnimation();this.pageReader&&
this.pageReader.startAnimation()},resetSlider:function(){this.pageEditor&&this.pageEditor.resetSlider();this.pageHislider&&this.pageHislider.resetSlider();this.pageReader&&this.pageReader.resetSlider()},destroySlider:function(){this.pageEditor&&this.pageEditor.destroySlider();this.pageHislider&&this.pageHislider.destroySlider();this.pageReader&&this.pageReader.destroySlider();this.pageHislider=this.pageReader=null;this.destroyReaderInterval();this.destroySliderInterval()},refreshEvent:function(){this.pageEditor&&
this.pageEditor.refreshEvent();this.pageHislider&&this.pageHislider.refreshEvent();this.pageReader&&this.pageReader.refreshEvent()}}),PageAttachmentsFactory=Class({createAttachment:function(b,c,d,e,f,g,h,k,l){k=this.initOptions(b,c,d,e,f,g,h,k,l);switch(b){case "animation":var n=new PageAnimationFactory(k);break;case "annotation":n=new PageAnnotation(c,g,f,d,e,h);break;case "highlight":n=new PageHighlight(c,g,f,d,e,h);break;case "magnifier":n=new PageMagnifier(c,g,f,d,e,h);break;case "select":n=new PageSelect(c,
g,f,d,e,h)}return n},initOptions:function(b,c,d,e,f,g,h,k,l){return{$container:c,pageIndex:f,page:k,width:d,height:e,$parent:g,bookType:h,callback:l}}}),PageAttachmentsParser=function(b,c,d,e,f,g,h,k,l){this.parent=b;this.width=c;this.page=k;this.height=d;this.pageWidth=e;this.pageHeight=f;this.pageIndex=g;this.bookType=h;this.callback=l;this.createAttachmentsForPage()};
PageAttachmentsParser.prototype.createAttachmentsForPage=function(){this.Items=new ObjectPool;this.factory=new PageAttachmentsFactory;this.isHiddenEditor()||getArticleEditor().then(this.createAnimation.bind(this));this.createAnnotation();this.highlightSearch()};PageAttachmentsParser.prototype.isHiddenEditor=function(){return!bookConfig.isPreview||bookConfig.previewPages&&-1!==(Array.isArray(bookConfig.previewPages)&&bookConfig.previewPages.indexOf(this.pageIndex))?!1:!0};
PageAttachmentsParser.prototype.createAnimation=function(){this.hasAnimation()&&(this.createAnimationDom(),this.pageAnimation=this.factory.createAttachment("animation",this.$animation,this.width,this.height,this.pageIndex,this.parent,this.bookType,this.page,function(){this.callback();this.onResizeAnimation(this.width,this.height,this.pageWidth,this.pageHeight)}.bind(this)),this.Items.add(this.pageAnimation))};
PageAttachmentsParser.prototype.createAnimationDom=function(){this.$animation||(this.$animation=$("<div id='animation"+this.bookType+"-"+this.pageIndex+"' style='width:100%;height:100%;position:absolute;bottom:0;right:0;left:0;top:0;z-index:4;'></div>"),this.$animation.css({width:this.width+"px",height:this.height+"px"}),this.parent.append(this.$animation))};
PageAttachmentsParser.prototype.hasAnimation=function(){var b=this.pageIndex-1;return this.isHiddenEditor()?!1:global.pageEditor&&(!pageEditor.pageAnnos&&pageEditor[b]&&0<pageEditor[b].length||pageEditor.pageAnnos&&pageEditor.pageAnnos[b]&&0<pageEditor.pageAnnos[b].length)||global.sliderJS&&sliderJS[b]&&0<sliderJS[b].elements.length||global.inverseEditor&&global.inverseEditor.length&&global.inverseEditor[b]&&global.inverseEditor[b].length||window.assistantConfig||global.readerConfig&&global.readerConfig.pages&&
0<global.readerConfig.pages.length&&this.hasReaderItems()?!0:!1};PageAttachmentsParser.prototype.hasReaderItems=function(){var b=window.readerConfig.pages[this.pageIndex-1];return b&&0!==Object.values(b).filter(function(c){return Array.isArray(c)&&c.length}).length};PageAttachmentsParser.prototype.isHiddenEditor=function(){return!bookConfig.isPreview||bookConfig.previewPages&&-1!==(Array.isArray(bookConfig.previewPages)&&bookConfig.previewPages.indexOf(this.pageIndex))?!1:!0};
PageAttachmentsParser.prototype.select=function(){this.pageSelect||(this.$select=$("<div id='select"+this.bookType+"-"+this.pageIndex+"' style='cursor:text;width:100%;height:100%;position:absolute;left:0;top:0;z-index:4;'></div>"),this.$select.css({width:this.width+"px",height:this.height+"px",bottom:0,right:0,margin:"auto"}),this.pageSelect=this.factory.createAttachment("select",this.$select,this.width,this.height,this.pageIndex,this.parent,this.bookType),this.Items.add(this.pageSelect),this.parent.append(this.$select))};
PageAttachmentsParser.prototype.destroySelect=function(){this.Items.find("PageSelect").each(function(b){b.destroySelect()});this.Items.remove(this.pageSelect);this.$select=void 0;this.pageSelect=null};
PageAttachmentsParser.prototype.initMagnifierEvent=function(){this.pageMagnifier||(this.$magnifier=$("<div class='mgnifierBox' style='width:100%;height:100%;position:absolute;z-index:10;cursor:none;top:0;bottom:0;left:0;right:0;margin:auto;'></div>"),this.$magnifier.css({width:this.width+"px",height:this.height+"px",bottom:0,right:0,margin:"auto"}),this.pageMagnifier=this.factory.createAttachment("magnifier",this.$magnifier,this.width,this.height,this.pageIndex,this.parent,this.bookType),this.Items.add(this.pageMagnifier),
this.parent.append(this.$magnifier))};PageAttachmentsParser.prototype.destroyMagnifier=function(){this.Items.find("PageMagnifier").each(function(b){b.destroyMagnifier()});this.Items.remove(this.pageMagnifier);this.$magnifier=void 0;this.pageMagnifier=null};PageAttachmentsParser.prototype.addHistoryTexts=function(){this.Items.find("PageAnnotation").each(function(b){b.enterSide()})};
PageAttachmentsParser.prototype.highlightSearch=function(){if(bookConfig.SearchButtonVisible&&window.frmSearch&&!this.pageHighlight){var b=!0;window.frmSearch&&frmSearch.visible&&0<frmSearch.getList().length&&(b=!1);window.frmSearch&&(isPhone()||isPad())&&window.frmSearch.input.val()&&(b=!1);b||(this.$highlight=$("<div id='highlight"+this.bookType+"-"+this.pageIndex+"' style='pointer-events:none;width:100%;height:100%;position:absolute;left:0;top:0;z-index:4;' class='kong'></div>"),this.$highlight.css({width:this.width+
"px",height:this.height+"px",bottom:0,right:0,margin:"auto"}),this.pageHighlight=this.factory.createAttachment("highlight",this.$highlight,this.width,this.height,this.pageIndex,this.parent,this.bookType),this.Items.add(this.pageHighlight),this.parent.append(this.$highlight))}};PageAttachmentsParser.prototype.clearHighlight=function(){this.Items.find("PageHighlight").each(function(b){b.clearHighlight()});this.Items.remove(this.pageHighlight);this.$highlight=void 0;this.pageHighlight=null};
PageAttachmentsParser.prototype.createAnnotation=function(){if(bookConfig.AnnotationButtonVisible&&!this.pageAnnotation){var b=fitPageWidthHeight(this.pageWidth,this.pageHeight,bookConfig.largePageWidth,bookConfig.largePageHeight);this.$annotation=this.parent;this.pageAnnotation=this.factory.createAttachment("annotation",this.$annotation,b.x,b.y,this.pageIndex,this.parent,this.bookType);this.Items.add(this.pageAnnotation);this.onResizeAnimation(this.width,this.height,this.pageWidth,this.pageHeight)}};
PageAttachmentsParser.prototype.enterSide=function(){this.Items.each(function(b){b.enterSide()})};PageAttachmentsParser.prototype.leaveSide=function(){this.Items.each(function(b){b.leaveSide()});this.destroySelect();global.annotationPannel&&global.annotationPannel.resetAnnoConfig()};PageAttachmentsParser.prototype.pauseAnimation=function(){this.Items.find("PageAnimation").each(function(b){b.pauseAnimation()})};PageAttachmentsParser.prototype.startAnimation=function(){this.Items.find("PageAnimation").each(function(b){b.startAnimation()})};
PageAttachmentsParser.prototype.resetSlider=function(){this.Items.find("PageAnimation").each(function(b){b.resetSlider()})};PageAttachmentsParser.prototype.destroySlider=function(){this.Items.find("PageAnimation").each(function(b){b.destroySlider()})};PageAttachmentsParser.prototype.initReaderOrSlider=function(){this.Items.each(function(b){b.initReaderOrSlider&&b.initReaderOrSlider()})};PageAttachmentsParser.prototype.removeAttachment=function(){this.attachment&&this.destroyMM()};
PageAttachmentsParser.prototype.onResize=function(b,c,d,e){this.width=b;this.height=c;this.pageWidth=d;this.pageHeight=e;this.onResizeAnimation(b,c,d,e);this.onResizeAnnotation(b,c,d,e);this.$select&&this.$select.css({width:this.width+"px",height:this.height+"px"});this.$magnifier&&this.$magnifier.css({width:this.width+"px",height:this.height+"px"});this.$highlight&&this.$highlight.css({width:this.width+"px",height:this.height+"px"});this.Items.each(function(f){if(f!=this.pageAnimation&&f!=this.pageAnnotation)f.onResize(b,
c)}.bind(this))};PageAttachmentsParser.prototype.onResizeAnimation=function(b,c,d,e){if(this.pageAnimation){b=fitPageWidthHeight(d,e,bookConfig.largePageWidth,bookConfig.largePageHeight);c=bookConfig.largePageWidth/bookConfig.largePageHeight;var f=d/e;.01>c-f&&-.01<c-f&&(b.x=d,b.y=e);this.$animation.css({width:b.x+"px",height:b.y+"px",left:(d-b.x)/2+"px",top:(e-b.y)/2+"px"});this.pageAnimation.onResize(b.x,b.y)}};
PageAttachmentsParser.prototype.onResizeAnnotation=function(b,c,d,e){this.pageAnnotation&&(b=fitPageWidthHeight(d,e,bookConfig.largePageWidth,bookConfig.largePageHeight),this.$annotation.css({width:b.x+"px",height:b.y+"px",left:(d-b.x)/2+"px",top:(e-b.y)/2+"px"}),this.pageAnnotation.onResize(b.x,b.y))};
PageAttachmentsParser.prototype.resizeOnMobile=function(){var b=1024,c=1024;BookInfo.isDoublePage()&&this.bookType==BookType.normal_book&&(c=b=768);b=fitPageWidthHeight(b,c,bookConfig.largePageWidth,bookConfig.largePageHeight);this.pageAnimation.onResize(Math.ceil(b.x),Math.ceil(b.y));this.scale(Math.ceil(b.x),Math.ceil(b.y))};
PageAttachmentsParser.prototype.highDefinition=function(){var b=6*Math.min(windowWidth,windowHeight),c=6*Math.min(windowWidth,windowHeight);isPad()&&(b=3*Math.min(windowWidth,windowHeight),c=3*Math.min(windowWidth,windowHeight));b=fitPageWidthHeight(b,c,bookConfig.largePageWidth,bookConfig.largePageHeight);this.pageAnimation.onResize(Math.ceil(b.x),Math.ceil(b.y));this.scale(Math.ceil(b.x),Math.ceil(b.y))};
PageAttachmentsParser.prototype.scale=function(b,c){var d=fitPageWidthHeight(this.pageWidth,this.pageHeight,bookConfig.largePageWidth,bookConfig.largePageHeight).y/c;this.$animation.css({width:b+"px",height:c+"px",left:(this.pageWidth-b*d)/2+"px",top:(this.pageHeight-c*d)/2+"px"});b=!1;if(isPhone()||isPad())b=!0;d=transformCSS({scale:d,origin:{x:0,y:0}},b);this.$animation.css(d)};var BookPage=Class({}).extend(Page),imageLoaded=[];bdor[33]=function(b,c){return b/bdor[30](c,20)};bdor[36]=36;
global.bdor[35]=function(){return 3}();global.bdor[37]=80;
var PageInterface=Class({zIndex:0,pageIndex:0,visible:!1,pageWidth:0,pageHeight:0,maskWidth:0,maskHeight:0,pageMask:null,page:null,isSingleBook:!1,bookType:0,isHardPage:!1,$page:null,opacity:1,scaleX:1,scaleY:1,create:function(b,c,d,e,f){this.pageIndex=b;this.visible=!0;this.isSingleBook=d;this.bookType=e;this.newPage(b,c,e,f)},newPage:function(b,c,d,e){var f=this.isSingleBook?window.singleCachePages:window.cachePages;e&&(f=window.mirrorSideCachePages);if(f&&f[b]){this.page=f[b];try{this.page.pageAttachments.pageAnimation&&
this.page.pageAttachments.pageAnimation.refreshEvent&&this.page.pageAttachments.pageAnimation.refreshEvent()}catch(g){}}else this.page="issuu"==bookConfig.FlipStyle?new IssuuPage(b,c,d,e):new BookPage(b,c,d,e);isPhone()||isPad()||!bookConfig.isCachePages||(this.isSingleBook&&!e?(window.singleCachePages||(window.singleCachePages=[]),window.singleCachePages[b]=this.page):e?(window.mirrorSideCachePages||(window.mirrorSideCachePages=[]),window.mirrorSideCachePages[b]=this.page):(window.cachePages||(window.cachePages=
[]),window.cachePages[b]=this.page))},clearTran:function(){try{var b=transformCSS({rotate:0,tran:{x:0,y:0}});this.$page.css(b);this.$pageMask&&this.$pageMask.css(b)}catch(c){}},setCSSByStyle:function(b){this.$page.css(b)},setCSSByName:function(b){this.$page.attr("class",b)},setLeftOrRight:virtual_function,setUpOrDown:virtual_function,setVisible:function(b){this.$page&&(bookConfig.HardInnerPageEnable?b?this.$page.show():this.$page.hide():b?this.$page.css("visibility","visible"):this.$page.css("visibility",
"hidden"));this.visible=b},onResize:virtual_function,getWidth:function(){return this.width},setZIndex:function(b){this.zIndex=b;this.$page.css({"z-index":b})},getZIndex:function(){return this.zIndex},beginToFlip:virtual_function,enterSide:function(){this.page&&this.page.enterSide()},leaveSide:function(){this.page&&this.page.leaveSide()},remove:function(){this.page.remove();this.page=void 0;this.$page.remove();this.$page=void 0},zoomInSideImage:function(){this.page&&this.page.zoomInSideImage()},zoomOutSideImage:function(){this.page&&
this.page.zoomOutSideImage()},switchLargeImage:function(){this.page&&this.page.switchLargeImage()},switchNormalImage:function(b){this.page&&this.page.switchNormalImage(b)},resizeSvg:function(b,c){this.page&&this.page.resizeSvg(b,c)},loading:function(){this.page&&this.page.loading()},mirrorSide:function(){this.page&&this.page.mirrorSide()},fillPreviewImage:function(){this.page&&this.page.fillPreviewImage()},setFlipShadow:function(b,c,d){this.page&&this.page.setFlipShadow(b,c,d)},addFlipShadow:function(){},
clearFlipShadow:function(){this.page&&this.page.clearFlipShadow()},addAttachment:function(){this.page&&this.page.addAttachment()},fillContent:function(){this.page&&this.page.fillContent()},fillPage:function(b,c){this.page&&this.page.fillPage(b,c)},initSelectTextEvent:function(){this.page&&this.page.initSelectTextEvent()},destroySelect:function(){this.page&&this.page.destroySelect()},initMagnifierEvent:function(){this.page&&this.page.initMagnifierEvent()},destroyMagnifier:function(){this.page&&this.page.destroyMagnifier()},
pauseAnimation:function(){this.page&&this.page.pauseAnimation()},startAnimation:function(){this.page&&this.page.startAnimation()},addHistoryTexts:function(b){this.page&&this.page.addHistoryTexts(b)},highlightSearch:function(){this.page&&this.page.highlightSearch()},clearHighlight:function(){this.page&&this.page.clearHighlight()},resetSlider:function(){this.page&&this.page.resetSlider()},initReaderOrSlider:function(){this.page&&this.page.initReaderOrSlider()},destroySlider:function(){this.page&&this.page.destroySlider()}});
bdor[30]=function(b,c){return bdor[b]-c};bdor[38]=function(){return bdor[30](37,40)}();
var NormalPage=Class({create:function(b,c,d,e,f){this._super(b,c,d,e,f);this.$page=$("<div style='will-change: transform;-webkit-backface-visibility:hidden;backface-visibility:hidden;'></div>");this.$page.attr("id",c+"Mask"+b);this.setMaskCss();this.$page.append(this.page.side)},setMaskCss:function(){if(bookConfig.FlipDirection){var b="vertical-mask";this.isSingleBook&&rightToLeft&&(b="single-book-right-vertical-mask");this.isSingleBook&&!rightToLeft&&(b="single-book-vertical-mask")}else b="mask",
this.isSingleBook&&rightToLeft&&(b="single-book-right-mask"),this.isSingleBook&&!rightToLeft&&(b="single-book-mask");this.setCSSByName(b)},onResize:function(b,c,d){this.pageWidth=b;this.pageHeight=c;d||(d=1);var e=parseInt(Math.sqrt(Math.pow(b,2)+Math.pow(c,2)));0!=(e-c)%2&&(e+=1);this.width=e;this.$page.css({width:e,height:e,opacity:d});if(this.page)this.page.onResize(b,c);bookConfig.FlipDirection?(this.$page.css({left:"50%","margin-left":-this.width/2+"px"}),this.page&&this.page.side.css({left:(this.width-
b)/2})):(this.$page.css({top:"50%","margin-top":-this.width/2+"px"}),this.page&&this.page.side.css({top:(this.width-c)/2}))},setLeftOrRight:function(b){var c=this.isSingleBook?"left-single-mask-side":"left-mask-side";b||(c=this.isSingleBook?"right-single-mask-side":"right-mask-side");this.setCSSByName(c);this.page&&this.page.setLeftOrRight(b)},setUpOrDown:function(b){var c=this.isSingleBook?"up-single-mask-side":"up-mask-side";b||(c=this.isSingleBook?"down-single-mask-side":"down-mask-side");this.setCSSByName(c);
this.page&&this.page.setUpOrDown(b)},beginToFlip:function(){this.setMaskCss()}}).extend(PageInterface);bdor[39]=function(){return 8}();var bookMouseDown=!1,nBookStatu=0;global.bdor[200]=function(b){return bdor[b]};
var Book=Class({bookType:void 0,parent:null,width:0,height:0,flippingTime:600,currentPageIndex:1,rightToLeft:!1,pageArray:null,pageWidth:0,pageHeight:0,visible:!1,create:function(b){this.init(b)},init:function(b){this.options=b;this.parent=b.parent;this.currentPageIndex=b.currentPageIndex;this.flippingTime=1E3*b.flippingTime;this.rightToLeft=b.rightToLeft;this.pageArray=[]},getBookType:function(){return this.bookType},onBookPageLoaded:function(b){if(!this.flipping&&this.visible&&BookInfo.getBook()==
this){var c=this.getCurrentPages();if(c)for(var d=0;d<c.length;d++){var e=c[d];this.pageArray[e]&&b==e&&this.pageArray[e].enterSide()}}},fillBookContent:function(){if(!this.flipping){var b=this.pageArray;if(b)for(var c=0;c<b.length;c++){var d=b[c];d&&d.fillContent(c)}if(b=this.pageBackArray)for(c=0;c<b.length;c++)(d=b[c])&&d.fillContent(c,!0)}},adjustBookPosition:function(){onStageResize()},getBook:virtual_function,getCurrentPages:function(){return[]},initBook:virtual_function,gotoPage:virtual_function,
show:virtual_function,hide:virtual_function,onResize:virtual_function,destroy:virtual_function}),NoteAdd=Class({create:function(b){this.noteAdd=$("<div class='anno-noteAdd'></div>");this.noteAdd.bind("mousedown mouseup pointerdown",function(c){c.stopPropagation()}.bind(this));this.noteAdd.bind(_event._down,function(){this.noteAdd.css({opacity:"0.7"})}.bind(this));this.noteAdd.bind(_event._up,function(c){c.stopPropagation();this.noteAdd.css({opacity:""});global.annotationPannel&&global.annotationPannel.noteEvent(this.noteAdd)}.bind(this));
b.append(this.noteAdd)},show:function(){this.noteAdd.css({display:"block"})},hide:function(){this.noteAdd.css({display:"none"})},getPageWidth:function(){var b=BookInfo.getBook().currentPageIndex,c="";if(BookInfo.getBook().pageArray.length&&BookInfo.getBook().pageArray[b])return"slide"==bookConfig.FlipStyle.toLocaleLowerCase()&&BookInfo.isDoublePage(BookInfo.getBookType())?(BookInfo.getBook().pageArray[b].leftPage?c=BookInfo.getBook().pageArray[b].leftPage:BookInfo.getBook().pageArray[b].rightPage&&
(c=BookInfo.getBook().pageArray[b].rightPage),rightToLeft&&BookInfo.getBook().pageArray[b].rightPage&&(c=BookInfo.getBook().pageArray[b].rightPage)):c=BookInfo.getBook().pageArray[b].page,{width:c.pageWidth,height:c.pageHeight}},isFirstOrLastPage:function(){return this.isFirstPage()||this.isLastPage()?!0:!1},isCurrentDoublePage:function(){return 1<BookInfo.getPagesByIndex(BookInfo.getCurrentPageIndex()).length},isLastPage:function(){var b=BookInfo.getBook().currentPageIndex,c=bookConfig.totalPageCount;
"slide"==bookConfig.FlipStyle.toLocaleLowerCase()&&(c=BookInfo.getBook().pageLength());return b==c},isFirstPage:function(){return 1===BookInfo.getBook().currentPageIndex},onResize:function(b,c){var d=this.getPageWidth();if(d&&(b=d.width,c=d.height,bookConfig.AnnotationButtonVisible&&!isPhone()&&!isPad())){d=windowHeight-c-templateArea.getTopHeight()-templateArea.getBottomHeight();var e=BookInfo.isDoublePage(BookInfo.getBookType())?windowWidth-2*b-templateArea.getRightWidth()-templateArea.getLeftWidth():
windowWidth-b-templateArea.getRightWidth()-templateArea.getLeftWidth();if("slide"==bookConfig.FlipStyle.toLocaleLowerCase()&&BookInfo.isDoublePage(BookInfo.getBookType())&&this.isFirstOrLastPage()&&!this.isCurrentDoublePage()){var f=BookInfo.getBook().width,g=BookInfo.getBook().height;b=(f-b)/2;c=(g-c)/2;rightToLeft?24<b+e?this.noteAdd.css({display:"block",top:"0",right:"auto",left:b-24+"px"}):24<c+d?this.noteAdd.css({display:"block",top:c-24+"px",right:"auto",left:"0"}):this.noteAdd.css({display:"none"}):
24<b+e?this.noteAdd.css({display:"block",top:"0",right:b-24+"px",left:"auto"}):24<c+d?this.noteAdd.css({display:"block",top:c-24+"px",right:"0",left:"auto"}):this.noteAdd.css({display:"none"})}else 24>e/2&&24>d/2?this.noteAdd.css({display:"none"}):24<=e/2?rightToLeft?(this.noteAdd.css({display:"block",top:"0",right:"auto",left:"-22px"}),this.isLastPage()&&1<bookConfig.totalPageCount&&(this.isCurrentDoublePage()?this.noteAdd.css({left:"auto",right:"-22px"}):this.noteAdd.css({right:"-22px",left:"auto"}))):
(this.noteAdd.css({display:"block",top:"0",left:"auto",right:"-22px"}),this.isLastPage()&&1<bookConfig.totalPageCount&&(this.isCurrentDoublePage()?this.noteAdd.css({right:"-22px",left:"auto"}):this.noteAdd.css({left:"-22px",right:"auto"}))):rightToLeft?(this.noteAdd.css({display:"block",top:"-22px",right:"auto",left:"0"}),this.isLastPage()&&this.noteAdd.css({left:"auto",right:"0"})):(this.noteAdd.css({display:"block",top:"-22px",left:"auto",right:"0"}),this.isLastPage()&&this.noteAdd.css({right:"auto",
left:"0"}))}}}),ZoomHint=Class({create:function(b){var c=this;this.mouseInBook=new Point(-1,-1);this.oldMouseInBook=new Point(-1,-1);this.zoomHint=null;this.trackMousePoint=function(d){d=isTouch?d.originalEvent.touches:[d];var e=d[0].pageY;c.mouseInBook.x=d[0].pageX;c.mouseInBook.y=e};bookContainer.bind(_event._move,this.trackMousePoint);this.zoomHintTimer=window.setInterval(function(){if(bookType!=BookType.normal_book)c.clearZoomHintTimer();else if(null==c.zoomHint)if(-1==c.oldMouseInBook.x)c.oldMouseInBook.x=
c.mouseInBook.x,c.oldMouseInBook.y=c.mouseInBook.y;else if(c.oldMouseInBook.x==c.mouseInBook.x&&c.oldMouseInBook.y==c.mouseInBook.y){var d=c.globalToBook(!0,c.mouseInBook.x,c.mouseInBook.y);if(!(0>d.x||d.x>c.width||0>d.y||d.y>c.height)){d=c.mouseInBook.x+15;var e=c.mouseInBook.y;c.zoomHint=new divHint(getLanguage("lblDoubleClickToZoomIn","Double click to zoom in."),d,e,b);c.zoomHint.show();c.hideCount=0}}else c.oldMouseInBook.x=c.mouseInBook.x,c.oldMouseInBook.y=c.mouseInBook.y;else 2==++c.hideCount&&
(bookContainer.unbind(_event._move,c.trackMousePoint),c.zoomHint.destroy(),c.zoomHint=null,window.clearInterval(c.zoomHintTimer))},1500)},globalToBook:function(b,c,d){switch(bookType){case BookType.single_book:var e=Point(c-singlePageBook.getLeft(),d-singlePageBook.getTop());break;case BookType.normal_book:e=Point(c-((b?0:flipBook.getPageWidth())+flipBook.getLeft()),d-flipBook.getTop());break;case BookType.catalog_book:e=catalogBook.getTran(),b=c-((b?0:catalogBook.getPageWidth())+catalogBook.getCssLeft())-
e.x,d=d-catalogBook.getCssTop()-e.y,e=Point(b,d)}return e},clearZoomHintTimer:function(){try{window.clearInterval(this.zoomHintTimer)}catch(b){}null!=this.zoomHint&&(bookContainer.unbind(_event._move,this.trackMousePoint),this.zoomHint.destroy(),this.zoomHint=null)}}),TipsBox=Class({create:function(b,c){this.visible=!1;this.option=b;this.duration=b.duration?b.duration:1500;this.background=$("<div class='tipsBox tipsBoxShadow tipsBoxRadius'></div>");$(c).append(this.background)},setTimer:function(){this.timer=
window.setInterval(function(){this.hideTipsBox();window.clearInterval(this.timer)}.bind(this),this.duration)},resetTimer:function(){window.clearInterval(this.timer);this.setTimer()},setPosition:function(b,c,d){void 0==d&&(d=["left","top"]);$(this.background).css(d[0],b+"px");$(this.background).css(d[1],c+"px")},onResize:function(b,c){},getWidth:function(){return $(this.background).width()},getHeight:function(){return $(this.background).height()},setCaption:function(b){this.background.html(b)},showTipsBox:function(){this.visible?
this.resetTimer():(this.setTimer(),this.visible=!0,$(this.background).show(),$(this.background).animate({opacity:this.option.opacity?this.option.opacity:.5},300))},hideTipsBox:function(){this.visible&&(this.visible=!1,$(this.background).animate({opacity:0},300,function(){$(this.background).hide()}.bind(this)))}}),BookMiniFullscreen=Class({create:function(){},init:function(){if(!isIE()){if(isPhone()||isPad()){if(!bookConfig.isShowMobileBottomFullscreenPrompts)return}else if(MiniStyle.isMini()||bookConfig.hideMiniFullscreen)return;
fullScreenApi.supportsFullScreen&&fullScreenApi.isFullScreen()||this.miniFullScreen||(this.miniFullScreen=$("<div class='miniFullscreen' id='miniFullscreen'></div>"),this.miniFullScreen.html(getLanguage("lblFullscreen","Click to view in fullscreen.")),this.onResize(),bookContainer.append(this.miniFullScreen),this.miniFullscreenEnter=!1,bookConfig.alwaysShowBottomFullscreenPrompt||(this.miniFullscreenTimeout&&window.clearTimeout(this.miniFullscreenTimeout),this.miniFullscreenTimeout=window.setTimeout(function(){this.removeMiniFullScreen()}.bind(this),
1E3*bookConfig.bottomFullscreenPromptDisplayDuration)),this.initMiniFullScreenEvent())}},initMiniFullScreenEvent:function(){this.miniFullScreen.bind(_event._end,function(){bookType==BookType.catalog_book&&global.catalogBook&&catalogBook.guidBar&&catalogBook.guidBar.fullscreenBtn?catalogBook.guidBar.fullscreenBtn.trigger(_event._end):readAsFullscreen();this.miniFullScreen.remove();this.miniFullScreen=void 0}.bind(this));this.miniFullScreen.bind(_event._enter,function(){this.miniFullscreenEnter=!0}.bind(this));
this.miniFullScreen.bind(_event._leave,function(){this.miniFullscreenEnter=!1;bookConfig.alwaysShowBottomFullscreenPrompt||(this.miniFullscreenTimeout&&window.clearTimeout(this.miniFullscreenTimeout),this.miniFullscreenTimeout=window.setTimeout(function(){this.removeMiniFullScreen()}.bind(this),1E3*bookConfig.bottomFullscreenPromptDisplayDuration))}.bind(this))},removeMiniFullScreen:function(){if(this.miniFullScreen&&!this.miniFullscreenEnter){var b={alpha:.7};$(b).animate({alpha:0},{duration:300,
easing:"easeOutSine",step:function(){this.miniFullScreen&&this.miniFullScreen.css({opacity:b.alpha})}.bind(this),complete:function(){this.miniFullScreen&&this.miniFullScreen.remove();this.miniFullScreen&&(this.miniFullScreen=void 0)}.bind(this)})}},onResize:function(){if(this.miniFullScreen)if(!MiniStyle.isMini()||isPhone()||isPad()){var b=BookInfo.top();this.miniFullScreen.css({top:b+BookInfo.height()-80+"px"})}else this.miniFullScreen.remove(),this.miniFullScreen=void 0},show:function(){this.miniFullScreen&&
this.miniFullScreen.show()},hide:function(){this.miniFullScreen&&this.miniFullScreen.hide()},remove:function(){this.miniFullScreen&&this.miniFullScreen.remove();this.miniFullScreen=void 0},setStyle:function(b){b&&this.miniFullScreen&&this.miniFullScreen.css(b)}}),BookPageNumberForFlip=Class({create:function(){},init:function(){if(bookConfig.updatePageNumberForFlip){var b=-1==BookInfo.getCurrentPageIndex()?1:BookInfo.getCurrentPageIndex();this.miniFullScreen?this.miniFullScreen.html(getShownPageNumberInfo(b)):
(this.miniFullScreen=$("<div class='miniFullscreen' id='pageNumberForFlip'></div>"),this.miniFullScreen.html(getShownPageNumberInfo(b)),this.onResize(),bookContainer.append(this.miniFullScreen),this.miniFullscreenEnter=!1,this.miniFullscreenTimeout&&window.clearTimeout(this.miniFullscreenTimeout),this.miniFullscreenTimeout=window.setTimeout(function(){this.removeMiniFullScreen()}.bind(this),3E3),this.initMiniFullScreenEvent())}},initMiniFullScreenEvent:function(){},removeMiniFullScreen:function(){if(this.miniFullScreen&&
!this.miniFullscreenEnter){var b={alpha:.5};$(b).animate({alpha:0},{duration:300,easing:"easeOutSine",step:function(){this.miniFullScreen&&this.miniFullScreen.css({opacity:b.alpha})}.bind(this),complete:function(){this.miniFullScreen&&this.miniFullScreen.remove();this.miniFullScreen&&(this.miniFullScreen=void 0)}.bind(this)})}},onResize:function(){if(this.miniFullScreen)if(MiniStyle.isMini())this.miniFullScreen.remove(),this.miniFullScreen=void 0;else{var b=BookInfo.top();this.miniFullScreen.css({top:b+
BookInfo.height()-40+"px"})}},show:function(){this.miniFullScreen&&this.miniFullScreen.show()},hide:function(){this.miniFullScreen&&this.miniFullScreen.hide()},remove:function(){this.miniFullScreen&&this.miniFullScreen.remove();this.miniFullScreen=void 0},setStyle:function(b){b&&this.miniFullScreen&&this.miniFullScreen.css(b)}}),BookAttachmentsFactory=Class({create:function(b,c,d,e){this.isDoublePage=e;this.container=b;this.book=d;this.pageIndex=c},createAttachment:function(b,c){switch(b){case "thickness":var d=
c?new ThicknessManager(this.container,this.book):new SingleBookThicknessManager(this.container,this.book);d.refreshThickness();break;case "bookshadow":d=new BookShadow(this.container);break;case "zoomhint":d=new ZoomHint(this.parent);break;case "minifullscreen":d=new BookMiniFullscreen;0<=BookInfo.getCurrentPages().indexOf(1)&&d.init();break;case "bookpagenumber":d=new BookPageNumberForFlip;break;case "staticad":d=new StaticAd(this.container);break;case "zoommap":d=new ZoomMap(this.book);d.fillContent(this.pageIndex);
break;case "bookmarktab":d=new BookmarkTab(this.container,!this.isDoublePage);break;case "noteadd":d=new NoteAdd(this.container)}return d}}),BookAttachmentsBuilder=Class({Package:"BookAttachment",create:function(b,c,d,e){this.parent=b;this.pageIndex=c;this.book=d;this.isDoublePage=e;this.Items=this.createAttachmentsForBook()},createAttachmentsForBook:function(){var b=new ObjectPool;this.factory=new BookAttachmentsFactory(this.parent,this.pageIndex,this.book,this.isDoublePage);return b},thickness:function(b){this.bookThickness=
this.factory.createAttachment("thickness",b);this.Items.add(this.bookThickness)},bookshadow:function(){this.bookShadow=this.factory.createAttachment("bookshadow");this.Items.add(this.bookShadow)},grayshadow:function(){_agent_.browser.msie||_agent_.browser.safari||!bookConfig.ShowTopLeftShadow||this.book.bookType!=BookType.normal_book||(this.grayshadow=this.factory.createAttachment("grayshadow"),this.Items.add(this.grayshadow))},miniFullscreen:function(){this.miniFullscreen=this.factory.createAttachment("minifullscreen");
this.Items.add(this.miniFullscreen)},bookpagenumber:function(){this.bookPageNumber=this.factory.createAttachment("bookpagenumber");this.bookPageNumber.init();this.Items.add(this.bookPageNumber)},staticad:function(){void 0!=global.staticAd&&1==staticAd.haveAd&&(this.staticAd=this.factory.createAttachment("staticad"),this.Items.add(this.staticAd))},zoommap:function(){isPad()||isPhone()||!bookConfig.ZoomMapVisible||(this.zoomMap=this.factory.createAttachment("zoommap"),this.Items.add(this.zoomMap))},
bookmarktab:function(){(function(){isPhone()||isPad()||(this.bookMarkTab=this.factory.createAttachment("bookmarktab"),this.Items.add(this.bookMarkTab))}).delay(this,1)},noteadd:function(){!bookConfig.AnnotationButtonVisible||isPhone()||isPad()||(this.noteAdd=this.factory.createAttachment("noteadd"),this.Items.add(this.noteAdd))},zoomhint:function(){isTouchDevice()},hide:function(){this.Items.find("StaticAd").each(function(b){b.hide()});this.Items.find("ZoomMap").each(function(b){b.hide()});this.Items.find("BookMiniFullscreen").each(function(b){b.hide()});
this.Items.find("BookPageNumberForFlip").each(function(b){b.hide()})},show:function(){this.Items.find("BookMiniFullscreen").each(function(b){b.show()});this.Items.find("BookPageNumberForFlip").each(function(b){b.show()});this.Items.find("BookmarkTab").each(function(b){b.refresh()});this.Items.find("StaticAd").each(function(b){b.show()});this.book.flipping||1!=this.book.currentPageIndex||bookConfig.isTheBookOpen||this.Items.find("StaticAd").each(function(b){b.setStyle({"z-index":3})}.bind(this))},
onResize:function(b,c){this.width=b;this.height=c;if(this.book.getCssLeft)var d=this.book.getCssLeft();if(this.book.getCssTop)var e=this.book.getCssTop();this.Items.find("StaticAd").each(function(f){rightToLeft&&(d+=b);f.setStyle({width:b+"px"});0===staticAd.adPosition&&f.setStyle({left:d,top:e,height:c+"px"})});this.Items.each(function(f){f.onResize(b,c)}.bind(this));this.Items.find("ZoomMap").each(function(f){f.refreshArea()}.bind(this))},afterCurling:function(){this.isDoublePage&&this.Items.find("BookmarkTab").each(function(b){b.adjustBar()});
this.Items.find("ThicknessManager").each(function(b){b.refreshThickness()});this.book.flipping||1!=this.book.currentPageIndex||bookConfig.isTheBookOpen||this.Items.find("StaticAd").each(function(b){b.setStyle({"z-index":3})}.bind(this))},setAttachmentBeforeFlipTo:function(b){this.Items.find("ThicknessManager").each(function(c){c.setAttachmentBefore(b)});this.Items.find("StaticAd").each(function(c){0===staticAd.adPosition&&c.setStyle({"z-index":1})}.bind(this));this.isDoublePage&&this.Items.find("BookmarkTab").each(function(c){c.setAttachmentBefore(b)}.bind(this))},
setAttachmentAfterFlipTo:function(b){this.Items.find("ThicknessManager").each(function(c){c.refreshThickness()});this.Items.find("BookmarkTab").each(function(c){c.refresh()}.bind(this));this.Items.find("ZoomMap").each(function(c){c.fillContent(b);c.refreshArea()}.bind(this));this.book.flipping||1!=this.book.currentPageIndex||bookConfig.isTheBookOpen||this.Items.find("StaticAd").each(function(c){c.setStyle({"z-index":3})}.bind(this))},afterZoomIn:function(b,c){isPhone()||isPad()||this.Items.find("ThicknessManager").each(function(d){d.onResize(b,
c)}.bind(this));this.Items.find("BookmarkTab").each(function(d){d.onResize()}.bind(this));this.Items.find("ZoomMap").each(function(d){d.refreshArea()}.bind(this));this.Items.find("noteadd").length&&this.Items.find("noteadd").get(0).hide()},getItemByName:function(b){var c;return null==(c=this.Items.find(b))?void 0:c.get(0)}}),FlipPage=Class({downMask:null,upMask:null,currentIndex:0,nextIndex:0,hardPage:!1,coverPage:!1,coordinate:null,startPoint:null,toPoint:null,fromPoint:null,AliceToLeft:!1,AliceToRight:!1,
loosen:!0,flipping:!1,dragMoveToFlip:!1,fallback:!1,pageWidth:0,pageHeight:0,maskWidth:0,create:function(b){this.book=b},startToFlip:function(){this.loosen=this.flipping=!0;this.fallback=this.AliceToRight=this.AliceToLeft=!1},meetFlipCondition:function(){var b=this.toPoint&&this.startPoint&&(this.book.mouseMoveDirection==this.book.moveDirectionType.MOVE_LEFT&&0<this.startPoint.x||this.book.mouseMoveDirection==this.book.moveDirectionType.MOVE_RIGHT&&0>this.startPoint.x);return this.toPoint&&this.startPoint&&
(this.toPoint.x<this.book.MiddleX&&0<this.startPoint.x||this.toPoint.x>this.book.MiddleX&&0>this.startPoint.x)||b},flipToPoint:function(b,c,d){if(b&&c)if(1==this.hardPage)this.flipToHardPoint(b,c);else if(this.downMask&&this.upMask&&this.downMask.page&&this.upMask.page){this.coordinate=c;var e=this.pageWidth,f=computePoint(e,this.pageHeight,this.maskWidth,b,c);if(f){var g=transformCSS({rotate:f.rotate,tran:{x:f.maskTranX,y:f.maskTranY}}),h=transformCSS({rotate:f.rotate,tran:{x:f.maskTranX,y:f.maskTranY}}),
k=transformCSS({rotate:-f.rotate,tran:{x:-f.pageTranX,y:0}}),l=transformCSS({rotate:f.rotate,tran:{x:f.pageTranX,y:0}});this.downMask&&this.downMask.setCSSByStyle(g);this.upMask&&this.upMask.setCSSByStyle(h);this.downMask&&this.downMask.page&&this.downMask.page.setCSSByStyle(k);this.upMask&&this.upMask.page&&this.upMask.page.setCSSByStyle(l);this.setFlipAlpha(e,b,c);this.setFlipShadow(f,d);this.book.followToPoint(this,b,c)}}},flipToHardPoint:function(b,c){if(b&&c){var d=this.pageWidth,e=this.pageHeight,
f=this.maskWidth;c.x>d&&(c.x=d);c.x<-d&&(c.x=-d);this.coordinate=c;if(e=computePoint(d,e,f,b,c)){f=-90+90*Math.abs(c.x/b.x);0>c.x&&(f=90-90*Math.abs(c.x/b.x));var g=transformCSS({perspective:6E3,rotateY:f}),h=transformCSS({perspective:6E3,rotateY:f});e.rotate=f;this.downMask&&this.downMask.setCSSByStyle(g);this.upMask&&this.upMask.setCSSByStyle(h);0>c.x/b.x?this.setPagesVisible(!1):this.setPagesVisible(!0);this.setHardFlipShadow(e);this.setFlipAlpha(d,b,c);this.book.followToPoint(this,b,c)}}},setPagesVisible:function(b){},
setHardFlipShadow:function(b){b&&(this.upMask&&this.upMask.setFlipShadow(b,!0),this.downMask&&this.downMask.setFlipShadow(b,!1))},setFlipAlpha:function(b,c,d){},setFlipShadow:function(b,c){b&&(this.upMask.page&&this.upMask.page.setFlipShadow(b,!0,c),this.nextPage&&!this.isMiniPage()&&this.nextPage.setFlipShadow(b,!1,c))},isMiniPage:function(){return 1<Math.abs(this.pageWidth-this.book.pageWidth)||1<Math.abs(this.pageHeight-this.book.pageHeight)},resetWidthHeight:function(){var b=this.getPageWidthHeight().width,
c=this.getPageWidthHeight().height,d=parseInt(Math.sqrt(Math.pow(b,2)+Math.pow(c,2)));0!=(d-c)%2&&(d+=1);this.pageWidth=b;this.pageHeight=c;this.maskWidth=d},getPageWidthHeight:function(){if(this.downMask)return{width:this.downMask.pageWidth,height:this.downMask.pageHeight};if(this.upMask)return{width:this.upMask.pageWidth,height:this.upMask.pageHeight}},setPageZIndex:function(){},setFlipOriginPoint:function(){},endFlipByIndex:function(){},isDragMoveToFlip:function(){this.dragMoveToFlip=!1;this.coordinate&&
this.startPoint&&this.coordinate.x!=this.startPoint.x&&(this.dragMoveToFlip=!0)},endFlip:function(){this.flipping=!1},destroy:function(){}}),SingleFlipPage=Class({flipToHardPoint:function(b,c){if(b&&c){this.coordinate=c;var d=this.pageWidth,e=computePoint(d,this.pageHeight,this.maskWidth,b,c);if(e){var f=-90+90*Math.abs(c.x/b.x);0>c.x&&(f=90-90*Math.abs(c.x/b.x));var g=transformCSS({perspective:6E3,rotateY:f});f=transformCSS({perspective:6E3,rotateY:f});this.downMask&&this.downMask.setCSSByStyle(g);
this.upMask&&this.upMask.setCSSByStyle(f);0>c.x/b.x?(this.upMask.setVisible(!1),this.downMask.setVisible(!1)):(this.upMask.setVisible(!1),this.downMask.setVisible(!0));this.setHardFlipShadow(e);this.setFlipAlpha(d,b,c);this.book.followToPoint(this,b,c)}}},setHardFlipShadow:function(b){b&&(this.upMask&&this.upMask.setFlipShadow(b,!0),this.downMask&&this.downMask.setFlipShadow(b,!1))},setPageZIndex:function(){var b=this.downMask.pageIndex,c=this.upMask.pageIndex,d=originTotalPageCount+5+c,e=originTotalPageCount+
5-b;if(bookConfig.HardPageEnable){if(c==totalPageCount||1==c)d=2*(bookConfig.totalPageCount+5)+10;if(b==totalPageCount||1==b)e=2*(bookConfig.totalPageCount+5)+10}this.upMask.setZIndex(d);this.downMask.setZIndex(e)},setFlipAlpha:function(b,c,d){},setFlipOriginPoint:function(){this.dragMoveToFlip||rightToLeft||(this.fromPoint={x:this.pageWidth,y:this.pageHeight});!this.dragMoveToFlip&&rightToLeft&&(this.fromPoint={x:-this.pageWidth,y:this.pageHeight});this.toPoint="left"==this.book.flipToDirection?
{x:-this.pageWidth,y:this.fromPoint.y}:{x:this.pageWidth,y:this.fromPoint.y};this.startPoint||(this.startPoint={x:0,y:0});this.startPoint.x=-this.toPoint.x;this.startPoint.y=this.toPoint.y},endFlipByIndex:function(b){b=transformCSS({rotate:0,tran:{x:0,y:0}});this.upMask.setCSSByStyle(b);this.upMask.page&&this.upMask.page.setCSSByStyle(b);this.downMask.setCSSByStyle(b);this.downMask.page&&this.downMask.page.setCSSByStyle(b);this.upMask.setLeftOrRight(rightToLeft);this.downMask.setLeftOrRight(rightToLeft);
this.book.setZIndexByPageIndex(this.upMask);this.book.setZIndexByPageIndex(this.downMask);this.upMask.clearFlipShadow();this.downMask.clearFlipShadow()}}).extend(FlipPage),DoubleFlipPage=Class({setPagesVisible:function(b){b?(this.upMask.setVisible(!1),this.downMask.setVisible(!0)):(this.upMask.setVisible(!0),this.downMask.setVisible(!1))},setPageZIndex:function(b){var c=this.downMask.pageIndex,d=this.upMask.pageIndex,e=originTotalPageCount+5+d,f=originTotalPageCount+5-c;"min"==b.flipTo&&(e=2*originTotalPageCount+
5-d);"min"==b.flipTo&&(f=5+c);if(bookConfig.HardPageEnable){if(d==totalPageCount||1==d)e=2*(bookConfig.totalPageCount+5)+10;if(c==totalPageCount||1==c)f=2*(bookConfig.totalPageCount+5)+10}this.upMask.setZIndex(e);this.downMask.setZIndex(f)},setFlipOriginPoint:function(b){this.dragMoveToFlip||"left"!=b||(this.fromPoint={x:this.pageWidth,y:this.pageHeight});this.dragMoveToFlip||"right"!=b||(this.fromPoint={x:-this.pageWidth,y:this.pageHeight});this.toPoint={x:-this.fromPoint.x,y:this.fromPoint.y};this.startPoint||
(this.startPoint={x:0,y:0});this.startPoint.x=this.fromPoint.x;this.startPoint.y=this.fromPoint.y},endFlipByIndex:function(b){var c=transformCSS({rotate:0,tran:{x:0,y:0}});this.upMask.setCSSByStyle(c);this.upMask.page&&this.upMask.page.setCSSByStyle(c);this.downMask.setCSSByStyle(c);this.downMask.page&&this.downMask.page.setCSSByStyle(c);b?(this.downMask.setLeftOrRight(!0),this.upMask.setLeftOrRight(!0)):(this.downMask.setLeftOrRight(!1),this.upMask.setLeftOrRight(!1));this.book.setZIndexByPageIndex(this.upMask);
this.book.setZIndexByPageIndex(this.downMask);this.upMask.clearFlipShadow();this.downMask.clearFlipShadow()}}).extend(FlipPage),FlipPageManager=Class({create:function(b){this.book=b;this.array=[];this.pinDownCurlingArray=[];this.fallbackArray=[];this.flipArray=[];this.zoomArray=[];this.resizeArray=[];this.hardFlipArray=[];this.softFlipArray=[];this.coverFlipArray=[]},initFlipPageByIndex:function(b,c,d){if(this.book.isCoverPage(b,c))return this.initCoverFlipByIndex(b,c,d);if(this.book.isHardPage(b,
c))return this.initHardFlipByIndex(b,c,d);d=this.book.getDownUpPage(b,c,d);var e=b+"-"+c;this[e]||(this[e]=this.book.newFlipPage());this[e].downMask=d[0];this[e].upMask=d[1];this[e].currentIndex=b;this[e].nextIndex=c;this[e].hardPage=!1;this[e].resetWidthHeight();0>this.array.indexOf(e)&&this.array.push(e);0>this.softFlipArray.indexOf(e)&&this.softFlipArray.push(e);return this[e]},initHardFlipByIndex:function(b,c,d){d=this.book.getDownUpHardPage(b,c,d);var e=b+"-"+c;this[e]||(this[e]=this.book.newFlipPage());
this[e].downMask=d[0];this[e].upMask=d[1];this[e].currentIndex=b;this[e].nextIndex=c;this[e].hardPage=!0;this[e].resetWidthHeight();0>this.array.indexOf(e)&&this.array.push(e);0>this.hardFlipArray.indexOf(e)&&this.hardFlipArray.push(e);return this[e]},initCoverFlipByIndex:function(b,c,d){d=this.book.getDownUpHardPage(b,c,d);var e=b+"-"+c;this[e]||(this[e]=this.book.newFlipPage());this[e].downMask=d[0];this[e].upMask=d[1];this[e].currentIndex=b;this[e].nextIndex=c;this[e].hardPage=!0;this[e].coverPage=
!0;this[e].resetWidthHeight();0>this.array.indexOf(e)&&this.array.push(e);0>this.coverFlipArray.indexOf(e)&&this.coverFlipArray.push(e);return this[e]},checkFlipping:function(){for(var b=this.array.length,c=0;c<b;c++)if(this.array[c]){var d=this.array[c];if(this[d]&&this[d].flipping)return!0}return!1},removeFlipArrayByIndex:function(b){b=b.currentIndex+"-"+b.nextIndex;this[b]&&this[b].nextPage&&this[b].nextPage.clearFlipShadow();this[b]&&delete this[b];this.array&&this.array.removeElement(b);this.flipArray&&
this.flipArray.removeElement(b);this.hardFlipArray&&this.hardFlipArray.removeElement(b);this.softFlipArray&&this.softFlipArray.removeElement(b);this.coverFlipArray&&this.coverFlipArray.removeElement(b);this.pinDownCurlingArray&&this.pinDownCurlingArray.removeElement(b);this.fallbackArray&&this.fallbackArray.removeElement(b)},endFlip:function(){if(this.array&&0!=this.array.length)for(var b=this.array.length,c=0;c<b;c++)if(this.array[c]){var d=this[this.array[c]];d&&(d.endFlipByIndex(),this.removeFlipArrayByIndex(d))}},
doNotMeetPageConditions:function(b){if(this.hasBeenMonitor()||this.hasUnLoosenPage()||this.fallbackArray&&0<this.fallbackArray.length||0<=this.book.getPagesByIndex(b).indexOf(this.book.currentPageIndex))return!0;var c=!1;!rightToLeft&&b>this.book.currentPageIndex&&(c=!0);rightToLeft&&b<this.book.currentPageIndex&&(c=!0);return this.isReverseSeriesFlip(c)||this.isReversePinDownCurlingArray(c,b)?!0:this.existMutexPages(b)?(this.monitorMutexFlipSituation(b),!0):this.crossFlipMode(b)?(this.book.gotoNearPage(b),
window.setTimeout(function(){gotoPageFun(b,!1,"cross page")},20),!0):this.crossPageMode(b)?(window.setTimeout(function(){gotoPageFun(b,!1,"cross page")},20),!0):!1},hasBeenMonitor:function(){return this.monitorMutexFlipInterval?!0:!1},hasUnLoosenPage:function(){var b=this.book.optionPage;return b&&this[b]&&!this[b].loosen?!0:!1},isReverseSeriesFlip:function(b){if(b&&this.book.flipping&&this.book.flipToDirection==this.book.direction_right||!b&&this.book.flipping&&this.book.flipToDirection==this.book.direction_left)return!0},
isReversePinDownCurlingArray:function(b,c){if(!this.pinDownCurlingArray||0>=this.pinDownCurlingArray.length)return!1;c=this.book.getPagesByIndex(c);for(var d=this.pinDownCurlingArray.length,e=0;e<d;e++){var f=this[this.pinDownCurlingArray[e]];if(b&&f&&f.AliceToRight||!b&&f&&f.AliceToLeft||f&&0>c.indexOf(f.nextIndex))return!0}return!1},existMutexPages:function(b){return this.hardFlipArray&&0<this.hardFlipArray.length&&(this.toSoftPage(b)||this.toCoverPage(b))||this.softFlipArray&&0<this.softFlipArray.length&&
(this.toHardPage(b)||this.toCoverPage(b))||this.coverFlipArray&&0<this.coverFlipArray.length&&(this.toHardPage(b)||this.toSoftPage(b))?!0:!1},monitorMutexFlipSituation:function(b){this.monitorMutexFlipInterval||(this.monitorMutexFlipInterval=window.setInterval(function(){this.existMutexPages(b)||(window.clearInterval(this.monitorMutexFlipInterval),this.monitorMutexFlipInterval=void 0,gotoPageFun(b,!1,"cross page"))}.bind(this),20))},toSoftPage:function(b){return this.book.toSoftPage(b)},toHardPage:function(b){return this.book.toHardPage(b)},
toCoverPage:function(b){return this.book.toCoverPage(b)},crossFlipMode:function(b){return this.book.crossFlipMode(b)?!0:!1},crossPageMode:function(b){var c=this.book.getFlipTo(b),d=c.minIndex,e=c.maxIndex,f=c.toIndex;if("max"==c.flipTo){if(this.book.pageInfoArray[e].isMiniPage&&!(0<=this.book.getPagesByIndex(e+1).indexOf(b)))return nextPageFun("cross page"),!0;if(this.book.pageInfoArray[f].isMiniPage&&!(0<=this.book.getPagesByIndex(e+1).indexOf(b)))return gotoPageFun(f-1,!1,"cross page"),!0}if("min"==
c.flipTo){if(this.book.pageInfoArray[d].isMiniPage&&!(0<=this.book.getPagesByIndex(d-1).indexOf(b)))return previousPageFun("cross page"),!0;if(this.book.pageInfoArray[f].isMiniPage&&!(0<=this.book.getPagesByIndex(d-1).indexOf(b)))return gotoPageFun(f+1,!1,"cross page"),!0}},beyondPageRange:function(b){return 0>=b||b>originTotalPageCount?!0:!1},beforeFlip:function(b,c){try{var d=this.book.beforeFlipTo(b,!0);this.isDragMoveToFlip(d);if(!d.dragMoveToFlip){var e=this.book.getFromStartPointByIndex(b,d);
d.flipToPoint(e[0],e[1],!0)}var f=d.currentIndex+"-"+d.nextIndex;this.book.optionPage==f&&(this.book.optionPage=null);0<this.pinDownCurlingArray.indexOf(f)&&(d.dragMoveToFlip=!0);0>this.flipArray.indexOf(f)&&this.flipArray.push(f);this.fallbackArray.removeElement(f);this.pinDownCurlingArray.removeElement(f);d.startToFlip();this.book.flipping=!0;return d}catch(g){}},isDragMoveToFlip:function(b){b.dragMoveToFlip=!1;b.coordinate&&b.startPoint&&b.coordinate.x!=b.startPoint.x&&(b.dragMoveToFlip=!0)}}),
FlipBookIntervalManager=Class({create:function(b){this.book=b;this.flippingTime=1E3*bookConfig.flippingTime},flipIntervalTmp:function(b,c,d,e){if(b){this.book.flipping=!0;b.flipping=!0;var f=.05;if(isIE()||isFirefox())f=0;b.setFlipOriginPoint(e);b.coordinate||(b.coordinate=b.startPoint);var g=b.coordinate.x,h=b.coordinate.y,k,l=this.flippingTime;l=l*Math.abs(b.toPoint.x-g)/Math.abs(b.toPoint.x-b.startPoint.x);e=isAndroidWeChat()||isAndroidDefault()||isIE()||isFirefox()?function(){var p=0;k=function(){n(p,
25,"Sine");p++}.interval(this,l/25)}.bind(this):function(){k=function(p,r){n(p,r,"Sine")}.animation(this,l)}.bind(this);var n=function(p,r,B){if(!b)return!1;var v=b.pageWidth,w=b.pageHeight,u=$.easing["easeInOut"+B],x=$.easing["easeOut"+B];B=x(null,p,g,b.toPoint.x-g,r);x=x(null,p,h,b.toPoint.y-h,r);b.dragMoveToFlip||(B=u(null,p,g,b.toPoint.x-g,r),x=bookConfig.FlipDirection?f*Math.sqrt(w*w-B*B):w-f*Math.sqrt(v*v-B*B));p<r?this.flipToPoint(b,c,d,b.fromPoint,{x:B,y:x}):(this.flipToPoint(b,c,d,b.fromPoint,
b.toPoint),this.book.afterFlipTo(b,d),BookEvent.trigger("afterFlipPage",[d]),k.stop())}.bind(this);e()}},setFlipInterval:function(){this.flipInterval=function(){if(!this.flipIntervalManager.flipInterval||!this.flipIntervalManager.flipInterval.stop){if(this.flipPageManager&&this.flipPageManager.array&&0!=this.flipPageManager.array.length)for(var b=0;b<this.flipPageManager.array.length;b++){var c=this.flipPageManager.array[b];if(c){var d=this.flipPageManager[c];if(!this.flipPageManager[c])this.flipPageManager.array.removeElement(c),
b--;else if(this.flipPageManager[c].fromPoint&&this.flipPageManager[c].startPoint&&this.flipPageManager[c].toPoint&&this.flipPageManager[c].downMask&&this.flipPageManager[c].upMask&&!this.flipPageManager[c].flipping){this.flipPageManager[c].Alice=!0;this.flipPageManager[c].coordinate||(this.flipPageManager[c].coordinate=this.flipPageManager[c].startPoint);var e=.22*(d.toPoint.x-d.coordinate.x),f=e+this.flipPageManager[c].coordinate.x;d=e/((d.coordinate.x-d.toPoint.x)/(d.coordinate.y-d.toPoint.y))+
this.flipPageManager[c].coordinate.y;e=this.flipPageManager[c].downMask.pageIndex;var g=this.flipPageManager[c].upMask.pageIndex;this.flipIntervalManager.flipToPoint(this.flipPageManager[c],e,g,this.flipPageManager[c].fromPoint,{x:f,y:d});!this.flipPageManager[c].flipping&&this.flipPageManager[c].loosen&&(1>Math.abs(f.toFixed(2)-this.flipPageManager[c].toPoint.x)&&1>Math.abs(d.toFixed(2)-this.flipPageManager[c].toPoint.y)||isNaN(f)||isNaN(d))&&(this.flipPageManager[c].Alice=!1,f=this.flipPageManager[c].toPoint.x,
d=this.flipPageManager[c].toPoint.y,this.flipIntervalManager.flipToPoint(this.flipPageManager[c],e,g,this.flipPageManager[c].fromPoint,{x:f,y:d}),this.flipPageManager[c].endFlipByIndex(0>this.flipPageManager[c].toPoint.x),this.flipPageManager.removeFlipArrayByIndex(this.flipPageManager[c]),this.afterCurling(),b--)}}}else this.flipIntervalManager.flipInterval.stop=!0,this.flipIntervalManager.flipInterval=void 0;this.flipIntervalManager.flipInterval&&(isAndroidWeChat()||isAndroidDefault()||isIE()||
isFirefox()?window.setTimeout(this.flipIntervalManager.flipInterval,30):window.requestAnimationFrame(this.flipIntervalManager.flipInterval))}}.bind(this.book);this.flipInterval()},flipToPoint:function(b,c,d,e,f,g){b&&b.flipToPoint(e,f,g);c=Math.abs(f.x-e.x)*this.book.pageWidth/b.pageWidth;(!this.book.movedLength||Math.abs(this.book.movedLength)>c||!b.loosen||b.flipping)&&this.book.movetoCenter(b.currentIndex,b.nextIndex,c)},endFlip:function(){},destroy:function(){}}),computePoint=function(b,c,d,e,
f){if(!e||!f)return{rotate:0,pageTranX:0,maskTranX:0,maskTranY:0};f.x>b&&(f.x=b);f.x<-b&&(f.x=-b);isAndroidDefault()&&(e.y=f.y);if(e.x==f.x){var g=0;0>e.x&&(g+=180);return{rotate:g,pageTranX:0,maskTranX:e.x,maskTranY:0}}g=Math.sqrt(Math.pow(e.y-c,2)+Math.pow(e.x-0,2));if(Math.sqrt(Math.pow(f.y-c,2)+Math.pow(f.x-0,2))>g){var h=Math.atan((f.y-c)/(f.x-0)),k=Math.abs(Math.cos(h)*g);f.y=c-Math.abs(Math.sin(h)*g);f.x=0<f.x?k:-k}g=Math.sqrt(Math.pow(e.y-0,2)+Math.pow(e.x-0,2));Math.sqrt(Math.pow(f.y-0,2)+
Math.pow(f.x-0,2))>g&&(h=Math.atan((f.y-0)/(f.x-0)),k=Math.abs(Math.cos(h)*g),f.y=Math.abs(Math.sin(h)*g),f.x=0<f.x?k:-k);var l=(f.y-e.y)/(f.x-e.x),n=Math.atan(l);g=180*n/Math.PI;var p=(f.x+e.x)/2,r=(f.y+e.y)/2;h=b/2;k=c/2;0>e.x&&(g+=180,h=-b/2);f=Math.sqrt(Math.pow(e.y-f.y,2)+Math.pow(e.x-f.x,2))/2;f=0<=g&&180>g?Math.abs((c-Math.abs(e.y))*Math.sin(n))+f:Math.abs(e.y*Math.sin(n))+f;d=Math.abs(f/(Math.sin(Math.atan(b/c)+Math.abs(n))*d));d=Math.min(1,d);e=((p-h)*l+k+Math.pow(l,2)*r)/(1+Math.pow(l,2));
l=l*(r-e)+p;k=Math.sqrt(Math.pow(h-l,2)+Math.pow(k-e,2));Math.abs(l)<Math.abs(h)&&(k=-k);return{frontShadowDistance:f,shadowRate:d,rotate:g,pageTranX:k-b/2,maskTranX:l-0,maskTranY:e-c/2}},FlipBook=Class({coordinate_bottom_left:"bl",coordinate_top_left:"tl",coordinate_bottom_right:"br",coordinate_top_right:"tr",direction_left:"left",direction_right:"right",flipPageManager:null,maskWidth:0,create:function(b){this._super(b);this.flipPageManager=new FlipPageManager(this);this.toPageIndex=this.currentPageIndex;
this.initBook();this.initEvent();this.flipIntervalManager=new FlipBookIntervalManager(this);this.pageInfoArray=(new PageInfo(!this.doublePage)).pageInfoArray},initBook:function(){this.flipBook=$("<div class='book'></div>");this.parent.append(this.flipBook);this.initAttachments()},initAttachments:function(){this.showPage=this.flipBook;this.bookAttachments=new BookAttachmentsBuilder(this.flipBook,this.currentPageIndex,this,this.options.isDoublePage);this.options.thickness&&this.bookAttachments.thickness(!0);
this.options.bookshadow&&this.bookAttachments.bookshadow();this.options.grayshadow&&this.bookAttachments.grayshadow();this.options.miniFullscreen&&this.bookAttachments.miniFullscreen();this.options.bookpagenumber&&this.bookAttachments.bookpagenumber();this.options.staticad&&this.bookAttachments.staticad();this.options.zoommap&&this.bookAttachments.zoommap();this.options.bookmarktab&&this.bookAttachments.bookmarktab();this.options.noteadd&&this.bookAttachments.noteadd();this.resetBookShadow(this.currentPageIndex)},
resetPages:function(){},getBook:function(){return this.flipBook},addPageArray:function(b){if(b&&this.pageArray)for(var c=0;c<b.length;c++)if(!(0>=b[c]||b[c]>originTotalPageCount||(this.pageArray[b[c]]&&this.fillContent(b[c]),this.pageArray[b[c]]))){var d=this.newPage(b[c]);d.fillPreviewImage();var e=this.pageInfoArray[b[c]];d.onResize(this.pageWidth*e.pageWidth,this.pageHeight*e.pageHeight,e.opacity);this.pageArray[b[c]]=d;this.fillContent(b[c]);this.flipBook.append(d.$page)}},onResize:function(b,
c){this.resizeBook(b,c);0==this.pageArray.length&&this.resetPages(this.currentPageIndex);isPhone()||isPad()||this.switchNormalImage(!0);this.resizeAttachments(b,c);this.showPages()},resizeAttachments:function(b,c){},loading:function(){if(!this.flipping){var b=this.getCurrentPages();if(b&&!(0>=b.length))for(var c=b.length,d=0;d<c;d++)b[d]&&this.pageArray[b[d]]&&this.pageArray[b[d]].loading()}},fillContent:function(b,c){this.flipping||!bookConfig.preloadNextPage&&0>this.getCurrentPages().indexOf(b)||
(this.pageArray[b]&&!c&&this.pageArray[b].fillContent(),this.pageBackArray&&this.pageBackArray[b]&&c&&this.pageBackArray[b].fillContent())},fillPage:function(b,c){if(b)for(var d=this.pageArray.length,e=0;e<d;e++)this.pageArray[e]&&this.pageArray[e].fillPage(b,c),this.pageBackArray&&this.pageBackArray[e]&&this.pageBackArray[e].fillPage(b,c)},removePage:function(b){!isNaN(b)&&this.pageArray[b]&&(this.pageArray[b].remove(),this.pageArray[b]=void 0)},unWrapPageExcludeArray:function(b){if(b&&this.pageArray)for(var c=
this.pageArray.length,d=0;d<c;d++)!this.pageArray[d]||0<=b.indexOf(d)||(this.pageArray[d].remove(),this.pageArray[d]=void 0)},unWrapPageBackExcludeArray:function(b){if(b&&this.pageBackArray)for(var c=this.pageBackArray.length,d=0;d<c;d++)!this.pageBackArray[d]||0<=b.indexOf(d)||(this.pageBackArray[d].remove(),this.pageBackArray[d]=void 0)},resizePage:function(b,c){if(this.pageArray)for(var d=this.pageArray.length,e=0;e<d;e++)if(this.pageArray[e]){var f=this.pageInfoArray[e];this.pageArray[e].onResize(b*
f.pageWidth,c*f.pageHeight,f.opacity)}if(this.pageBackArray)for(d=this.pageBackArray.length,e=0;e<d;e++)this.pageBackArray[e]&&(f=this.pageInfoArray[e],this.pageBackArray[e].onResize(b*f.pageWidth,c*f.pageHeight,f.opacity))},crossFlipMode:function(b,c){return!1},toSoftPage:function(b){return!0},toHardPage:function(b){return!1},toCoverPage:function(){return!1},isCoverPage:function(){return!1},isHardPage:function(){return!1},beforeFlipTo:function(b,c){b=this.getFlipTo(b);var d=b.minIndex,e=b.maxIndex,
f=b.toIndex,g;"max"==b.flipTo&&(g=this.flipToMax(e,f,c,rightToLeft));"min"==b.flipTo&&(g=this.flipToMin(d,f,c,!rightToLeft));this.setAttachmentBeforeFlipTo(f);this.hidePagesBeforeFlip&&this.hidePagesBeforeFlip(g);g.setPageZIndex(b);return g},afterFlipTo:function(b,c){b&&b.downMask&&b.upMask&&(b.endFlipByIndex(),this.flipPageManager.removeFlipArrayByIndex(b),this.checkFlipping(),b.downMask.pageIndex<c?this.afterFlipToMax(c,!rightToLeft):this.afterFlipToMin(c,rightToLeft),this.setAttachmentAfterFlipTo(c),
this.showPagesAfterFlip&&this.showPagesAfterFlip())},checkFlipping:function(){this.flipping=!1;this.flipPageManager.checkFlipping()?this.flipping=!0:(this.startAnimation(),this.flipToDirection="",this.loading())},followToPoint:function(b,c,d){},endFlip:function(){this.flipPageManager&&this.flipPageManager.endFlip()},getCurrentPageIndex:function(){return this.currentPageIndex},getPageWidth:function(b){if(void 0==b)return this.pageWidth;this.pageWidth=b},getPageHeight:function(b){if(void 0==b)return this.pageHeight;
this.pageHeight=b},getWidth:function(){return this.width},getHeight:function(){return this.height},getScale:function(){return this.flipBook.parameters.toScale},getLeft:function(){return this.flipBook.offset().left},getTop:function(){return this.flipBook.offset().top},getCssLeft:function(){return parseInt(this.flipBook.css("left"))},getCssTop:function(){return parseInt(this.flipBook.css("top"))},setCSS:function(b){if(b){void 0!=b.width&&this.flipBook.css("width",b.width+"px");void 0!=b.height&&this.flipBook.css("height",
b.height+"px");void 0!=b.left&&this.flipBook.css("left",b.left+"px");void 0!=b.top&&this.flipBook.css("top",b.top+"px");void 0!=b.display&&this.flipBook.css("display",b.display);if(b.tran||void 0!=b.scale||b.origin){var c=transformCSS(b);this.flipBook.css(c)}this.flipBook.registerPatamers&&this.flipBook.registerParamers(b)}},setPosition:function(b,c,d){void 0==d&&(d=["left","top"]);this.flipBook.css(d[0],b+"px");this.flipBook.css(d[1],c+"px")},translate:function(b,c){b=transformCSS({});this.flipBook.css(b)},
supportSerialsFlip:function(){return isPhone()||isPad()||!bookConfig.supportSerialsFlip?!1:!0},gotoPage:function(b,c){if(b&&(this.toPageIndex=b,!this.flipBook.parameters||!this.flipBook.parameters.zoomming))if(this.status_zoom&&(isPhone()||isPad()||"issuu"==bookConfig.FlipStyle))c={pointers:[{pageX:windowWidth/2,pageY:windowHeight/2}]},this.flipBook.onDoubleTap.bind(this.flipBook)(c);else if(!this.flipPageManager.beyondPageRange(b)&&!this.flipPageManager.doNotMeetPageConditions(b)&&(this.supportSerialsFlip()&&
!this.status_zoom||!this.flipping)){this.flipping=!0;this.stopMedia();this.flipIntervalManager&&this.flipIntervalManager.flipInterval&&(this.flipIntervalManager.flipInterval.stop=!0,this.flipIntervalManager.flipInterval=void 0);var d=this.flipPageManager.beforeFlip(b,!0);fromPageIndex=this.currentPageIndex;var e=this.flipToDirection;!c&&flipHistory&&flipHistory.addFromCurrentIndex(b);this.flippingTo(b,c);playFlipSound();bookConfig.restorePageVisible&&window.localStorage.setItem(realLocation+"?historyPageIndex",
b);(function(){this.flipIntervalManager.flipIntervalTmp(d,fromPageIndex,b,e)}).delay(this,50);0<=BookInfo.getPagesByIndex(b).indexOf(1)?this.bookAttachments.Items.find("BookMiniFullscreen").each(function(f){f.init()}):this.bookAttachments.Items.find("BookMiniFullscreen").each(function(f){f.remove()});this.bookAttachments.Items.find("BookPageNumberForFlip").each(function(f){f.init()})}},afterCurling:function(){this.showPagesAfterFlip&&this.showPagesAfterFlip();this.startAnimation()},startAnimation:function(){var b=
BookInfo.getCurrentPages();if(void 0!=b&&null!=b)for(var c=0;c<b.length;c++){var d=b[c];this.pageArray[d]&&this.pageArray[d].startAnimation()}},pauseAnimation:function(){for(var b=this.pageArray.length,c=0;c<b;c++)this.pageArray[c]&&this.pageArray[c].pauseAnimation()},openShownMedia:function(){var b=BookInfo.getCurrentPages();if(void 0!=b&&null!=b)for(var c=0;c<b.length;c++){var d=b[c];this.pageArray[d]&&this.pageArray[d].enterSide();this.pageArray[d]&&this.pageArray[d].addHistoryTexts()}},stopMedia:function(){for(var b=
this.pageArray.length,c=0;c<b;c++)this.pageArray[c]&&this.pageArray[c].leaveSide()},resetSlider:function(){for(var b=this.pageArray.length,c=0;c<b;c++)this.pageArray[c]&&this.pageArray[c].resetSlider()},destroySlider:function(){for(var b=this.pageArray.length,c=0;c<b;c++)this.pageArray[c]&&this.pageArray[c].destroySlider()},select:function(){this.selected=!0;var b=BookInfo.getCurrentPages();if(void 0!=b&&null!=b){for(var c=0;c<b.length;c++){var d=b[c];this.pageArray[d]&&this.pageArray[d].initSelectTextEvent()}this.flipBook.parameters&&
(this.flipBook.parameters.eventCancel=!0)}},unSelect:function(){this.selected=!1;var b=BookInfo.getCurrentPages();if(void 0!=b&&null!=b){for(var c=0;c<b.length;c++){var d=b[c];this.pageArray[d]&&this.pageArray[d].destroySelect()}StateSynchronous.instance().findButtons("SelectTextButton",!0).each(function(e){e.setAsUnSelect();e.executeCallback()});this.flipBook.parameters&&(this.flipBook.parameters.eventCancel=!1)}},magnifierZoom:function(){this.selected=!0;var b=BookInfo.getCurrentPages();if(void 0!=
b&&null!=b)for(var c=0;c<b.length;c++){var d=b[c];this.pageArray[d]&&this.pageArray[d].initMagnifierEvent()}},unMagnifierZoom:function(){this.selected=!1;var b=BookInfo.getCurrentPages();if(void 0!=b&&null!=b){for(var c=0;c<b.length;c++){var d=b[c];this.pageArray[d]&&this.pageArray[d].destroyMagnifier()}bookConfig.MagnifierButtonVisible&&window.magnifierZoomBox&&window.magnifierZoomBox.hide();StateSynchronous.instance().findButtons("magnifier",!0).each(function(e){e.setAsZoomin()})}},switchLargeImage:function(){for(var b=
this.pageArray.length,c=0;c<b;c++)this.pageArray[c]&&this.pageArray[c].switchLargeImage()},switchNormalImage:function(b){for(var c=this.pageArray.length,d=0;d<c;d++)this.pageArray[d]&&this.pageArray[d].switchNormalImage(b)},hide:function(){Log.debug("normal book hide.");this.visible=!1;this.setCSS({display:"none"});this.stopMedia();this.destroySlider();this.controlBar&&this.controlBar.setVisible(!1);this.bookAttachments&&this.bookAttachments.hide()},show:function(){Log.debug("normal book show.");
this.visible=!0;this.setCSS({display:"block"});this.enterPage();this.bookAttachments&&this.bookAttachments.show()},enterPage:function(){this.afterChangeBookType();this.openShownMedia();this.addSearchHighlight()},afterChangeBookType:function(){for(var b=this.pageArray.length,c=0;c<b;c++)this.pageArray[c]&&this.pageArray[c].initReaderOrSlider()},addSearchHighlight:function(){var b=this.currentPageIndex;b=0==b%2?b+1:b-1;this.pageArray[b]&&this.pageArray[b].highlightSearch();this.pageArray[b+1]&&this.pageArray[b+
1].highlightSearch();this.pageArray[b-1]&&this.pageArray[b-1].highlightSearch();this.pageArray[b+2]&&this.pageArray[b+2].highlightSearch()},clearSearchHighlight:function(){for(var b=this.pageArray.length,c=0;c<b;c++)this.pageArray[c]&&this.pageArray[c].clearHighlight()},destroy:function(){this.flipBook.remove()},adjustBookPosition:function(){if(!this.status_zoom&&!this.flipping&&this.width&&this.height){this.pageWidthHeight=this.getFitWH();var b=this.getTranY(),c=this.pageWidthHeight.x/this.width,
d=this.getTranX(c);this.flipBook.animateToTransform.bind(this.flipBook)(c,{x:d,y:b},{x:50,y:0})}},getTranX:function(b){if(!bookConfig.retainBookCenter)return 0;var c=0;b=this.width*b/4;1!=this.currentPageIndex||bookConfig.isTheBookOpen||(c=rightToLeft?b:-b);this.currentPageIndex==totalPageCount&&(c=rightToLeft?-b:b);b=this.getCssLeft();var d=this.getSpace(!0);return d.left+(windowWidth-d.left-d.right-this.width)/2-b+c},getTranY:function(){var b=this.getCssTop(),c=this.getSpace(!0);return c.top+(windowHeight-
c.top-c.bottom-this.pageWidthHeight.y)/2-b}}).extend(Book);bdor[32]=function(b,c){return b+c};bdor[41]=function(){return bdor[32](bdor[30](37,0),bdor[38]/bdor[40])}();
var ZoomMonitor=Class({options:void 0,target:void 0,beforeZoomIn:void 0,afterZoomIn:void 0,beforeZoomOut:void 0,afterZoomOut:void 0,beforePan:void 0,afterPan:void 0,create:function(){},register:function(b,c){this.options=b;this.target=b.target;this.beforeZoomIn=b.beforeZoomIn;this.afterZoomIn=b.afterZoomIn;this.beforeZoomOut=b.beforeZoomOut;this.afterZoomOut=b.afterZoomOut;this.beforePan=b.beforePan;this.afterPan=b.afterPan;this.target.zoom({zoomIn:this.beforeZoomIn,onPan:this.beforePan,beforeZoomOut:this.beforeZoomOut,
zoomOut:this.afterZoomOut,onZoomed:this.afterZoomIn},c)}});
FlipBook.expand({initEvent:function(){this.moveDirectionType={MOVE_LEFT:-1,MOVE_RIGHT:1,MOVE_NONE:0};this.mouseMoveDirection=this.moveDirectionType.MOVE_NONE;this.hammerEventModular();this.mouseWheelFlip();this.mouseZoomEvent()},hammerEventModular:function(){var b=new Hammer.Manager(this.flipBook[0],{touchAction:window.self!==window.top?"pan-y":"none"});b.add(new Hammer.Pan);b.add((new Hammer.Swipe({velocity:.03,threshold:.5})).recognizeWith(b.get("pan")));b.add(new Hammer.Press({time:"1000"}));b.add(new Hammer.Pinch);
b.add(new Hammer.Tap({event:"doubletap",taps:2}));b.add(new Hammer.Tap);b.on("panstart panmove panend",this.onPan.bind(this));b.on("press",this.onPress.bind(this));if(_agent_.browser.device!==_agent_.browser.DEVICE_PC)this.flipBook.bind("click",this.onTap.bind(this));else b.on("tap",this.onTap.bind(this));b.on("swipeleft swiperight swipedown swipeup",this.onSwipe.bind(this));this.flipBook.bind("mouseover mousemove",this.onOver.bind(this));this.flipBook.bind("mousedown touchstart",this.onDown.bind(this));
$("body").bind("mouseup touchend",this.onUp.bind(this));$("body").bind("mouseleave touchleave",this.onUp.bind(this));this.zoomMonitor=new ZoomMonitor;this.zoomMonitor.register({target:this.flipBook,beforeZoomIn:this.beforeZoomIn.bind(this),afterZoomIn:this.afterZoomIn.bind(this),beforePan:this.beforePan.bind(this),afterPan:this.afterPan.bind(this),beforeZoomOut:this.beforeZoomOut.bind(this),afterZoomOut:this.afterZoomOut.bind(this)},!0);$(this.flipBook).bind("mouseup touchstart",function(c){onWindowClick(c)})},
onDown:function(){this.fingleDown=!0},onUp:function(b){this.fingleDown=!1;this.selected||this.status_zoom||this.isZoomming||bookType!=this.bookType||(b=this.realPoint(b)[0],b=this.aroundCorner(b),bookConfig.CurlingPageCorner&&b&&0<=b.indexOf("l")&&this.optionPage&&this.flipPageManager[this.optionPage]&&this.flipPageManager[this.optionPage].AliceToRight||bookConfig.CurlingPageCorner&&b&&0<=b.indexOf("r")&&this.optionPage&&this.flipPageManager[this.optionPage]&&this.flipPageManager[this.optionPage].AliceToLeft||
(this.optionPage&&(this.flipPageManager[this.optionPage]&&this.flipPageManager[this.optionPage].meetFlipCondition()&&this.pageDragToFlip(),this.flipPageManager[this.optionPage]&&(this.flipPageManager[this.optionPage].loosen=!0),this.optionPage=null),this.unCurling()))},onPinch:function(b){this.selected||this.status_zoom||this.isZoomming||this.status_zoom||this.status_resize||this.flipping||"pinchout"!=b.type||(this.endFlip(),this.zoomToPage(this.currentPageIndex))},onDoubleTap:function(b){if(!this.selected&&
!this.status_resize&&!this.flipping){var c=this.realPoint(b.srcEvent)[0];this.aroundCorner(c)||b.srcEvent[0].pageX>$("#flipBook").offset().left+$("#flipBook").outerWidth()||b.srcEvent[0].pageX<$("#flipBook").offset().left||b.srcEvent[0].pageY>$("#flipBook").offset().top+$("#flipBook").outerHeight()||b.srcEvent[0].pageY<$("#flipBook").offset().top||(this.endFlip(),this.zoomToPage(this.currentPageIndex,b.srcEvent.pageX,b.srcEvent.pageY))}},onPan:function(b){if("panend"!=b.type&&!(this.selected||this.status_zoom||
this.isZoomming||bookType!=this.bookType||this.status_zoom||this.status_resize||this.flipping||this.flipPageManager.fallbackArray&&0<this.flipPageManager.fallbackArray.length)&&bookConfig.mouseDragFlip){var c=this.realPoint(b.srcEvent)[0],d=this.aroundCorner(c);this.optionPage?(this.flipPageManager[this.optionPage].toPoint=c,this.lastMousePoint&&(this.mouseMoveDirection=0<=c.x-this.lastMousePoint.x?this.moveDirectionType.MOVE_RIGHT:this.moveDirectionType.MOVE_LEFT),this.lastMousePoint=c):bookConfig.FlipDirection||
bookConfig.upsideOnMobile()?("panstart"==b.type&&d||30<Math.abs(b.deltaY)&&(c.x<this.MiddleX&&0<b.deltaY||c.x>this.MiddleX&&0>b.deltaY))&&this.curling(c,d):("panstart"==b.type&&d||30<Math.abs(b.deltaX)&&(c.x<this.MiddleX&&0<b.deltaX||c.x>this.MiddleX&&0>b.deltaX))&&this.curling(c,d)}},onPress:function(b){if(!(bookConfig.EnableRecognizeQRcodePressOnMobile&&(isPhone()||isPad())||this.selected||this.status_zoom||this.isZoomming||bookType!=this.bookType||this.status_zoom||this.status_resize||this.flipping||
this.flipPageManager.fallbackArray&&0<this.flipPageManager.fallbackArray.length)&&bookConfig.mouseDragFlip){b=this.realPoint(b.srcEvent)[0];var c=this.aroundCorner(b);this.optionPage?this.flipPageManager[this.optionPage].toPoint=b:(c||(c=b.x>this.MiddleX?"r":"l"),this.curling(b,c))}},onRotate:function(b){},onSwipe:function(b){if(!(this.selected||this.status_zoom||this.isZoomming||this.dragToFlip)&&bookConfig.mouseDragFlip)if(bookConfig.FlipDirection||bookConfig.upsideOnMobile())switch(b.type){case "swipeup":this.flipFromDirection(this.coordinate_bottom_right,
"swipe to flip");break;case "swipedown":this.flipFromDirection(this.coordinate_bottom_left,"swipe to flip")}else switch(b.type){case "swipeleft":this.flipFromDirection(this.coordinate_bottom_right,"swipe to flip");break;case "swiperight":this.flipFromDirection(this.coordinate_bottom_left,"swipe to flip")}},onTap:function(b){var c=b;b.srcEvent&&(c=b.srcEvent);if(this.selected||this.status_zoom||this.isZoomming)b=this.realPoint(c)[0],this.aroundFlipBound(b)&&onWindowTap(c);else if(bookType==this.bookType&&
!this.status_zoom&&!this.status_resize){b=this.realPoint(c)[0];var d=this.aroundFlipCorner(b);!d||bookConfig.BanFlipFromDirection?this.aroundFlipBound(b)&&onWindowTap(c):(this.flipPageManager[this.optionPage]&&(this.flipPageManager[this.optionPage].loosen=!0),this.optionPage=null,this.flipFromDirection(d,"direction"))}},onOver:function(b){if(!(isPhone()||isPad()||this.selected||this.status_zoom||this.isZoomming||bookType!=this.bookType||this.fingleDown||this.flipping)&&bookConfig.CurlingPageCorner){b=
this.realPoint(b)[0];var c=this.aroundCorner(b);c?this.curling(b,c):(this.flipPageManager[this.optionPage]&&(this.flipPageManager[this.optionPage].loosen=!0),this.optionPage=null);this.unCurling()}},aroundFlipCorner:function(b){var c=this.aroundCorner(b);if(c)return c;if(!this.doublePage){var d=this.getCurrentPageWidthHeight(b.x);bookConfig.FlipDirection?(c=d.pageHeight,d=d.pageWidth):(c=d.pageWidth,d=d.pageHeight);0>this.MiddleX&&(b.x=-b.x);if(!(b.x>c-1||1>b.x||b.y>d-1||1>b.y||b.x<.8*c&&b.x>.2*c||
b.y>.2*d&&b.y<.8*d)){var e=Math.sqrt(Math.pow(.2*d,2)-Math.pow((c-Math.abs(b.x))*d/c,2));c=Math.sqrt(Math.pow(.2*d,2)-Math.pow(Math.abs(b.x)*d/c,2));if(b.y<c&&b.x<this.MiddleX&&0<this.MiddleX)return"tl";if(b.y<c&&b.x<-this.MiddleX&&0>this.MiddleX||b.y<e&&b.x>this.MiddleX&&0<this.MiddleX)return"tr";if(b.y<e&&b.x>-this.MiddleX&&0>this.MiddleX)return"tl";if(b.y>d-c&&b.x<this.MiddleX&&0<this.MiddleX)return"bl";if(b.y>d-c&&b.x<-this.MiddleX&&0>this.MiddleX||b.y>d-e&&b.x>this.MiddleX&&0<this.MiddleX)return"br";
if(b.y>d-e&&b.x>-this.MiddleX&&0>this.MiddleX)return"bl"}}},aroundCorner:function(b){this.edgeX();var c=this.getCurrentPageWidthHeight(b.x);if(bookConfig.FlipDirection){var d=c.pageHeight;c=c.pageWidth}else d=c.pageWidth,c=c.pageHeight;if(!(Math.abs(b.x)>d-1||b.y>c-1||1>b.y||Math.abs(b.x)<.8*d||b.y>.2*c&&b.y<.8*c)){d=Math.sqrt(Math.pow(.2*c,2)-Math.pow((d-Math.abs(b.x))*c/d,2));if(b.y<d&&b.x<this.MiddleX)return"tl";if(b.y<d&&b.x>this.MiddleX)return"tr";if(b.y>c-d&&b.x<this.MiddleX)return"bl";if(b.y>
c-d&&b.x>this.MiddleX)return"br"}},aroundFlipBound:function(b){this.edgeX();var c=this.getCurrentPageWidthHeight(b.x);if(bookConfig.FlipDirection){var d=c.pageHeight;c=c.pageWidth}else d=c.pageWidth,c=c.pageHeight;return Math.abs(b.x)>d||Math.abs(b.y)>c||0>b.y?!1:!0},getCurrentPageWidthHeight:function(b){this.edgeX();var c=this.getCurrentPages();if(1==c.length||b<=this.MiddleX&&!rightToLeft||b>=this.MiddleX&&rightToLeft)return{pageWidth:this.pageInfoArray[c[0]].pageWidth*this.pageWidth,pageHeight:this.pageInfoArray[c[0]].pageHeight*
this.pageHeight};if(b<=this.MiddleX&&rightToLeft||b>=this.MiddleX&&!rightToLeft)return{pageWidth:this.pageInfoArray[c[1]].pageWidth*this.pageWidth,pageHeight:this.pageInfoArray[c[1]].pageHeight*this.pageHeight}},pageDragToFlip:function(){bookConfig.mouseDragFlip&&(this.flipPageManager[this.optionPage].toPoint.y=this.flipPageManager[this.optionPage].startPoint.y,this.flipPageManager[this.optionPage].toPoint.x=-this.flipPageManager[this.optionPage].startPoint.x,this.mouseMoveDirection=this.moveDirectionType.MOVE_NONE,
this.flipPageManager[this.optionPage].startToFlip(),this.flipPageManager[this.optionPage].dragMoveToFlip=!0,this.flipToDirection=0>this.flipPageManager[this.optionPage].startPoint.x?"right":"left",this.tmpDragToFlipTimeout&&window.clearTimeout(this.tmpDragToFlipTimeout),this.dragToFlip=!0,this.tmpDragToFlipTimeout=window.setTimeout(function(){this.dragToFlip=!1}.bind(this),500),this.getNextPage("drag to flip"))},flipFromDirection:function(b,c){if(!(this.flipPageManager.fallbackArray&&0<this.flipPageManager.fallbackArray.length))if(0<=
b.indexOf("l")){if(!this.flipping||this.flipToDirection!=this.direction_left){if(this.flipPageManager.pinDownCurlingArray&&0<this.flipPageManager.pinDownCurlingArray.length){b=this.flipPageManager.pinDownCurlingArray.length;for(var d=0;d<b;d++)if(this.flipPageManager.pinDownCurlingArray[d].AliceToLeft)return}this.flipToDirection=this.direction_right;this.getNextPage(c)}}else if(0<=b.indexOf("r")&&(!this.flipping||this.flipToDirection!=this.direction_right)){if(this.flipPageManager.pinDownCurlingArray&&
0<this.flipPageManager.pinDownCurlingArray.length)for(b=this.flipPageManager.pinDownCurlingArray.length,d=0;d<b;d++)if(this.flipPageManager.pinDownCurlingArray[d].AliceToRight)return;this.flipToDirection=this.direction_left;this.getNextPage(c)}},hidePages:function(){var b=this.pageArray.length,c=this.getCurrentPages();this.zoomPageArray=[];for(var d=0;d<b;d++)this.pageArray[d]&&0>c.indexOf(d)&&this.pageArray[d].visible&&(this.zoomPageArray.push(this.pageArray[d]),this.pageArray[d].setVisible(!1)),
this.pageBackArray&&this.pageBackArray[d]&&(this.zoomPageArray.push(this.pageBackArray[d]),this.pageBackArray[d].setVisible(!1))},showPages:function(){if(this.zoomPageArray){for(var b=this.zoomPageArray.length,c=0;c<b;c++){var d=this.zoomPageArray[c];d&&d.setVisible(!0)}this.zoomPageArray=[]}},beforeZoomIn:function(){if(!isPhone()&&!isPad()){bookConfig.ZoomToolbarVisible&&!this.controlBar&&(this.controlBar=bookType!=BookType.catalog_book?new ZoomControlBar(this.parent):new CatalogZoomControlBar(this.parent));
if(this.controlBar){var b="lite"==bookConfig.ToolbarViewMode&&bookType==BookType.catalog_book?50:0;this.controlBar.setPosition((windowWidth-this.controlBar.width)/2,templateArea.getTopHeight()+b+5);this.controlBar.setVisible(bookConfig.isZoomControlBarVisible)}this.bookAttachments&&this.bookAttachments.Items.find("ZoomMap").each(function(c){c.show();c.fillContent(this.currentPageIndex)});bookConfig.AnnotationButtonVisible&&global.annotationCookie&&global.annotationCookie.saveCookie()}window.toolBar&&
window.toolBar.btnZoom&&window.toolBar.changeZoomIcon(!1);this.status_zoom=!0;this.hidePages();global.canMagnifierZoom&&this.unMagnifierZoom();StateSynchronous.instance().findButtons("ZoomButton",!0).each(function(c){c.setAsZoomout();c.executeCallback()});this.bookAttachments&&this.bookAttachments.Items.find("StaticAd").each(function(c){c.setStyle({"z-index":1})});this.bookAttachments&&this.bookAttachments.Items.find("BookmarkTab").each(function(c){c.hide()})},beforeZoomOut:function(){bookConfig.AnnotationButtonVisible&&
global.annotationCookie&&global.annotationCookie.saveCookie()},afterZoomOut:function(){this.resetZoomConfig();(isPhone()||isPad())&&this.showPages();(isPhone()||isPad()||"issuu"==bookConfig.FlipStyle)&&gotoPageFun(this.toPageIndex,!1,"change book type");isPhone()||isPad()||(this.bookAttachments.noteAdd&&(this.bookAttachments.noteAdd.show(),this.bookAttachments.noteAdd.onResize()),this.switchNormalImage())},resetZoomConfig:function(){this.flipping||1!=this.currentPageIndex||bookConfig.isTheBookOpen||
this.bookAttachments&&this.bookAttachments.Items.find("StaticAd").each(function(b){b.setStyle({"z-index":3})}.bind(this));this.status_zoom=!1;this.controlBar&&this.controlBar.setVisible(!1);this.bookAttachments&&this.bookAttachments.Items.find("ZoomMap").each(function(b){b.hide()});window.toolBar&&window.toolBar.btnZoom&&window.toolBar.changeZoomIcon(!0);StateSynchronous.instance().findButtons("ZoomButton",!0).each(function(b){b.setAsZoomin();b.executeCallback()});this.thicknessManager&&this.thicknessManager.showCanvas();
this.bookAttachments&&this.bookAttachments.Items.find("BookmarkTab").each(function(b){b.show()});this.showPage&&this.showPage.parameters&&(this.showPage.parameters.zoomFlag=!1,this.showPage.parameters.scale=1,this.showPage.parameters.toScale=1)},beforePan:function(){this.bookAttachments&&this.bookAttachments.Items.find("ZoomMap").each(function(b){b.refreshArea()})},afterPan:function(){},curling:function(b,c){this.selected||this.status_zoom||this.status_resize||(this.optionPage=this.curlingPage(b,
c))&&(this.flipIntervalManager.flipInterval||this.flipIntervalManager.setFlipInterval())},curlingPage:function(b,c){if(!c&&b.x<this.MiddleX||c&&0<=c.indexOf("l")){if(this.flipping&&"left"==this.flipToDirection)return;var d=this.realIndex(!1)[0];var e=this.realIndex(!1)[1];var f=d+"-"+e;var g=!1}if(!c&&b.x>this.MiddleX||c&&0<=c.indexOf("r")){if(this.flipping&&"right"==this.flipToDirection)return;d=this.realIndex(!0)[0];e=this.realIndex(!0)[1];f=d+"-"+e;g=!0}if(f&&d&&e){var h=originTotalPageCount;bookConfig.SingleModeBanFlipToLastPage&&
this.bookType==BookType.single_book&&(h=Math.max(1,bookConfig.totalPageCount-1));if(!(0>=d||d>h||0>=e||e>h||this.flipPageManager[f]&&this.flipPageManager[f].fallback||this.flipPageManager[f]&&this.flipPageManager[f].flipping||BookEvent.trigger("beforeFlipPage",[e])))if(h=e,BookInfo.isDoublePage()&&(h=BookInfo.getMinPageIndex(h)),passwardType()&&bookConfig.excludeFrontPages&&h>=parseInt(bookConfig.excludeFrontPages)&&!verifyPassward())global.passwardPannel||(global.passwardPannel=new PasswardPannel),
global.passwardPannel.show();else return this.defineFlipPage(f,b,c,d,e,g),f}},defineFlipPage:function(b,c,d,e,f,g){if(c){var h=originTotalPageCount;bookConfig.SingleModeBanFlipToLastPage&&this.bookType==BookType.single_book&&(h=Math.max(1,bookConfig.totalPageCount-1));0>=e||e>h||0>=f||f>h||(this.flipPageManager[b]?d=this.getFromStartPointByCoordinate(c,d,this.flipPageManager[b]):(this.beforeFlipTo(f),d=this.getFromStartPointByCoordinate(c,d,this.flipPageManager[b]),this.flipIntervalManager.flipToPoint(this.flipPageManager[b],
e,f,d[0],d[1],!0)),g?(this.flipPageManager[b].AliceToLeft=!0,this.flipPageManager[b].AliceToRight=!1):(this.flipPageManager[b].AliceToLeft=!1,this.flipPageManager[b].AliceToRight=!0),this.flipPageManager[b].loosen=!1,this.flipPageManager[b].fromPoint=d[0],this.flipPageManager[b].startPoint=d[1],this.flipPageManager[b].toPoint=c,0>this.flipPageManager.pinDownCurlingArray.indexOf(b)&&this.flipPageManager.pinDownCurlingArray.push(b),this.flipPageManager.fallbackArray.removeElement(b),this.flipPageManager.flipArray.removeElement(b))}},
unCurling:function(){if(!(this.selected||this.status_zoom||this.status_resize)&&this.flipPageManager.array)for(var b=this.flipPageManager.array.length,c=0;c<b;c++){var d=this.flipPageManager.array[c];if(d!=this.optionPage&&this.flipPageManager[d]&&!this.flipPageManager[d].fallback&&!this.flipPageManager[d].flipping&&(this.flipPageManager[d].AliceToRight||this.flipPageManager[d].AliceToLeft)){this.flipPageManager[d].AliceToRight=!1;this.flipPageManager[d].AliceToLeft=!1;this.flipPageManager[d].fallback=
!0;var e=this.getRealToPoint(this.flipPageManager[d],this.flipPageManager[d].fromPoint,this.flipPageManager[d].startPoint);this.flipPageManager[d].toPoint=e.toPoint;this.flipPageManager[d].fromPoint=e.fromPoint;this.flipPageManager[d].coordinate=e.coordinate;0>this.flipPageManager.fallbackArray.indexOf(d)&&this.flipPageManager.fallbackArray.push(d);this.flipPageManager.pinDownCurlingArray.removeElement(d);this.flipPageManager.flipArray.removeElement(d)}}},getFromStartPointByCoordinate:function(b,
c,d){if(b){var e={x:0,y:0},f={x:0,y:0};if(bookConfig.FlipDirection){var g=d.getPageWidthHeight().height;d=d.getPageWidthHeight().width}else g=d.getPageWidthHeight().width,d=d.getPageWidthHeight().height;var h=b.y>d/2?b.y-5:b.y+5;0>b.x&&(e={x:-g,y:h});0<b.x&&(e={x:g,y:h});c&&0<=c.indexOf("r")&&(e.x=g);c&&0<=c.indexOf("l")&&(e.x=-g);"tl"==c&&(e={x:-g,y:0});"bl"==c&&(e={x:-g,y:d});"tr"==c&&(e={x:g,y:0});"br"==c&&(e={x:g,y:d});f.x=e.x;f.y=e.y;return[e,f]}},getRealToPoint:function(b,c,d){if(bookConfig.FlipDirection){b.getPageWidthHeight();
var e=b.getPageWidthHeight().width}else b.getPageWidthHeight(),e=b.getPageWidthHeight().height;if(0==c.y||c.y==e)return{fromPoint:c,toPoint:d,coordinate:b.coordinate};var f={},g={},h=b.coordinate;b.coordinate.y<=c.y?(f.y=e,f.x=c.x,g.y=e):(f.y=0,f.x=c.x,g.y=0);g.x=d.x;b=(h.y-c.y)/(h.x-c.x);h.x=[(b*b-1)*f.x+b*(-2*f.y+c.y+h.y)+(c.x+h.x)]/(b*b+1);h.y=f.y+b*(h.x-f.x);return{fromPoint:f,toPoint:g,coordinate:h}},realIndex:function(b){var c=BookInfo.getMinPageIndex(this.currentPageIndex);if(b&&!rightToLeft||
!b&&rightToLeft)return[c+1,c+2];if(!b&&!rightToLeft||b&&rightToLeft)return[c,c-1]},getNextPage:function(b){"right"==this.flipToDirection&&!rightToLeft||"left"==this.flipToDirection&&rightToLeft?previousPageFun(b):nextPageFun(b)},realBookPosition:function(){if(bookConfig.upsideOnMobile())var b=this.flipBook.offset().top,c=this.flipBook.offset().left;else b=this.flipBook.offset().left,c=this.flipBook.offset().top;return[b,c]},realPoint:function(b){if((b=b.originalEvent&&b.originalEvent.changedTouches?
b.originalEvent.changedTouches:b.changedTouches?b.changedTouches:[b])&&!(3<=b.length)){var c=this.realBookPosition()[0],d=this.realBookPosition()[1],e=b[0].pageX,f=b[0].pageY;bookConfig.upsideOnMobile()&&(e=b[0].pageY,f=windowHeight-b[0].pageX);if(bookConfig.FlipDirection){f=f-d-this.pageHeight;var g=this.getCurrentPageWidthHeight(f),h=g.pageWidth;e=this.pageWidth-(e-c)-(this.pageWidth-h)/2;if(!b[1])return[{x:f,y:e}];g=b[1].pageX;b=b[1].pageY;g=this.pageWidth-(g-c)-(this.pageWidth-h)/2;b=b-d-this.pageHeight;
return[{x:f,y:e},{x:b,y:g}]}e=e-c-this.pageWidth;g=this.getCurrentPageWidthHeight(e);h=g.pageHeight;f=f-d-(this.pageHeight-h)/2;if(!b[1])return[{x:e,y:f}];g=b[1].pageX;b=b[1].pageY;g=g-c-this.pageWidth;b=b-d-(this.pageHeight-h)/2;return[{x:e,y:f},{x:g,y:b}]}},mouseWheelFlip:function(){var b;this.flipBook.bind(_event._mousewheel,function(c){if(void 0!=b&&150>(new Date).getTime()-b)var d=!1;else b=(new Date).getTime(),d=!0;if(!d)return!1;d=c.originalEvent;d=Math.max(-1,Math.min(1,d.wheelDelta||-d.detail));
c=c.originalEvent?c.originalEvent:c;this.status_zoom&&(c={pointers:[{pageX:c.pageX,pageY:c.pageY},{pageX:c.pageX,pageY:c.pageY}]},0>d?this.controlBar&&this.controlBar.zoomDown(c):this.controlBar&&this.controlBar.zoomUp(c));this.status_zoom||!bookConfig.mouseWheelFlip||this.flipping||(0>d?nextPageFun("mouse wheel flip"):previousPageFun("mouse wheel flip"));if(bookConfig.mouseWheelFlip)return stopEvent(c),!1}.bind(this))},mouseZoomEvent:function(){$(this.flipBook).bind(_event._move,function(b){var c=
BookInfo.getBook();if(c.status_zoom&&!this.flipBook.parameters.zoomming&&c.controlBar&&c.controlBar.moveByMousePosition){c=this.flipBook;var d=c.width(),e=c.height(),f=b.pageX;b=b.pageY;d=f-f*d/windowWidth;e=b-b*e/windowHeight;b={};b.origin=c.parameters.origin;b.scale=c.parameters.scale;d-=c.parameters.left;e-=c.parameters.top;b.tran={x:d,y:e};e=transformCSS(b);c.css(e);this.bookAttachments&&this.bookAttachments.zoomMap&&this.bookAttachments.zoomMap.refreshArea()}}.bind(this))}});
var DoubleFlipBook=Class({newFlipPage:function(){return new DoubleFlipPage(this)},resetPages:function(b){isNaN(b)||0>=b||(b=this.getMinPageIndex(b),this.unWrapPageExcludeArray([b,b+1,b+2,b+3,b-1,b-2]),this.addPageArray([b,b+1,b+2,b+3,b-1,b-2]),this.currentPage=this.pageArray[b],this.currentPage2=this.pageArray[b+1],this.nextPage=this.pageArray[b+2],this.nextPage2=this.pageArray[b+3],this.previousPage=this.pageArray[b-1],this.previousPage2=this.pageArray[b-2],this.setPageCss(),this.loading())},setPageCss:function(){var b=
transformCSS({rotate:0,tran:{x:0,y:0}});this.currentPage&&(this.setZIndexByPageIndex(this.currentPage),this.currentPage.setCSSByStyle(b));this.previousPage&&(this.setZIndexByPageIndex(this.previousPage),this.previousPage.setCSSByStyle(b));this.previousPage2&&(this.setZIndexByPageIndex(this.previousPage2),this.previousPage2.setCSSByStyle(b));this.currentPage2&&(this.setZIndexByPageIndex(this.currentPage2),this.currentPage2.setCSSByStyle(b));this.nextPage&&(this.setZIndexByPageIndex(this.nextPage),
this.nextPage.setCSSByStyle(b));this.nextPage2&&(this.setZIndexByPageIndex(this.nextPage2),this.nextPage2.setCSSByStyle(b));rightToLeft?(this.currentPage&&this.currentPage.setLeftOrRight(!1),this.previousPage&&this.previousPage.setLeftOrRight(!1),this.previousPage2&&this.previousPage2.setLeftOrRight(!1),this.currentPage2&&this.currentPage2.setLeftOrRight(!0),this.nextPage&&this.nextPage.setLeftOrRight(!0),this.nextPage2&&this.nextPage2.setLeftOrRight(!0)):(this.currentPage&&this.currentPage.setLeftOrRight(!0),
this.previousPage&&this.previousPage.setLeftOrRight(!0),this.previousPage2&&this.previousPage2.setLeftOrRight(!0),this.currentPage2&&this.currentPage2.setLeftOrRight(!1),this.nextPage&&this.nextPage.setLeftOrRight(!1),this.nextPage2&&this.nextPage2.setLeftOrRight(!1))},getDownUpHardPage:function(b,c,d){this.addPageArray([b,c]);d?(this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-left-side"),this.pageArray[c]&&this.pageArray[c].setCSSByName("flip-hard-right-side")):(this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-right-side"),
this.pageArray[c]&&this.pageArray[c].setCSSByName("flip-hard-left-side"));return[this.pageArray[b],this.pageArray[c]]},getDownUpPage:function(b,c){this.addPageArray([b,c]);this.pageArray[b]&&this.pageArray[b].beginToFlip();this.pageArray[c]&&this.pageArray[c].beginToFlip();this.pageArray[b]&&(this.pageArray[b].page.setCSSByName("right-flip-side"),this.setZIndexByPageIndex(this.pageArray[b]));this.pageArray[c]&&(this.pageArray[c].page.setCSSByName("flip-side"),this.pageArray[c].page.side.addClass("boxShadow"),
this.setZIndexByPageIndex(this.pageArray[c]));return[this.pageArray[b],this.pageArray[c]]},flipToMax:function(b,c,d,e){e=this.flipPageManager.initFlipPageByIndex(b,c,e);this.addPagesBeforeFlipToMax(c,d);this.pageArray[c+1]&&(this.pageArray[c+1].setLeftOrRight(rightToLeft),e.nextPage=this.pageArray[c+1]);this.setPagesStyleBeforeFlipToMax(c,d);this.deleteUnnecessaryPagesBeforeFlipToMax(b,c);return e},addPagesBeforeFlipToMax:function(b,c){this.addPageArray([b+1]);c&&this.supportSerialsFlip()&&this.addPageArray([b+
2,b+3])},setPagesStyleBeforeFlipToMax:function(b,c){c&&this.supportSerialsFlip()&&(this.pageArray[b+1]&&this.setZIndexByPageIndex(this.pageArray[b+1],b),this.pageArray[b+2]&&(this.setZIndexByPageIndex(this.pageArray[b+2],b),this.pageArray[b+2].setLeftOrRight(rightToLeft)),this.pageArray[b+3]&&(this.setZIndexByPageIndex(this.pageArray[b+3],b),this.pageArray[b+3].setLeftOrRight(rightToLeft)))},deleteUnnecessaryPagesBeforeFlipToMax:function(b,c){for(var d=c+4;d<=originTotalPageCount;d++)this.pageArray[d]&&
(this.pageArray[d].remove(),this.pageArray[d]=void 0);for(d=b+1;d<c;d++)this.pageArray[d]&&(this.pageArray[d].remove(),this.pageArray[d]=void 0)},afterFlipToMax:function(b,c){b=this.getMinPageIndex(b);this.addPagesAfterFlipToMax(b);this.setPagesStyleAfterFlipToMax(b);this.deleteUnnecessaryPagesAfterFlipToMax(b)},addPagesAfterFlipToMax:function(b){this.flipping||this.addPageArray([b+3,b,b-1,b-2]);this.supportSerialsFlip()||this.addPageArray([b+2,b+3]);this.pageArray[b+1]&&this.fillContent(b+1);this.pageArray[b+
2]&&this.fillContent(b+2);this.pageArray[b+3]&&this.fillContent(b+3)},setPagesStyleAfterFlipToMax:function(b){this.pageArray[b]&&(this.setZIndexByPageIndex(this.pageArray[b],b),this.pageArray[b].setLeftOrRight(!rightToLeft));this.pageArray[b-1]&&(this.setZIndexByPageIndex(this.pageArray[b-1],b),this.pageArray[b-1].setLeftOrRight(!rightToLeft));this.pageArray[b-2]&&(this.setZIndexByPageIndex(this.pageArray[b-2],b),this.pageArray[b-2].setLeftOrRight(!rightToLeft));this.supportSerialsFlip()&&this.flipping||
(this.pageArray[b+1]&&this.setZIndexByPageIndex(this.pageArray[b+1]),this.pageArray[b+2]&&(this.setZIndexByPageIndex(this.pageArray[b+2]),this.pageArray[b+2].setLeftOrRight(rightToLeft)),this.pageArray[b+3]&&(this.setZIndexByPageIndex(this.pageArray[b+3]),this.pageArray[b+3].setLeftOrRight(rightToLeft)))},deleteUnnecessaryPagesAfterFlipToMax:function(b){for(b-=3;0<=b;b--)this.pageArray[b]&&(this.pageArray[b].remove(),this.pageArray[b]=void 0)},flipToMin:function(b,c,d,e){e=this.flipPageManager.initFlipPageByIndex(b,
c,e);this.addPagesBeforeFlipToMin(c,d);this.pageArray[c-1]&&(this.pageArray[c-1].setLeftOrRight(!rightToLeft),e.nextPage=this.pageArray[c-1]);this.setPagesStyleBeforeFlipToMin(c,d);this.deleteUnnecessaryPagesBeforeFlipToMin(b,c);return e},addPagesBeforeFlipToMin:function(b,c){this.addPageArray([b-1]);c&&this.supportSerialsFlip()&&this.addPageArray([b-2,b-3])},setPagesStyleBeforeFlipToMin:function(b,c){c&&this.supportSerialsFlip()&&(this.pageArray[b-1]&&this.setZIndexByPageIndex(this.pageArray[b-1],
b),this.pageArray[b-2]&&(this.setZIndexByPageIndex(this.pageArray[b-2],b),this.pageArray[b-2].setLeftOrRight(!rightToLeft)),this.pageArray[b-3]&&(this.setZIndexByPageIndex(this.pageArray[b-3],b),this.pageArray[b-3].setLeftOrRight(!rightToLeft)))},deleteUnnecessaryPagesBeforeFlipToMin:function(b,c){for(var d=c-4;0<=d;d--)this.pageArray[d]&&(this.pageArray[d].remove(),this.pageArray[d]=void 0);for(d=b-1;d>c;d--)this.pageArray[d]&&(this.pageArray[d].remove(),this.pageArray[d]=void 0)},afterFlipToMin:function(b,
c){b=this.getMaxPageIndex(b);this.addPagesAfterFlipToMin(b);this.setPagesStyleAfterFlipToMin(b);this.deleteUnnecessaryPagesAfterFlipToMin(b)},addPagesAfterFlipToMin:function(b){this.flipping||this.addPageArray([b-3,b,b+1,b+2]);this.supportSerialsFlip()||this.addPageArray([b-2,b-3]);this.pageArray[b-1]&&this.fillContent(b-1);this.pageArray[b-2]&&this.fillContent(b-2);this.pageArray[b-3]&&this.fillContent(b-3)},setPagesStyleAfterFlipToMin:function(b){this.pageArray[b]&&(this.setZIndexByPageIndex(this.pageArray[b],
b),this.pageArray[b].setLeftOrRight(rightToLeft));this.pageArray[b+1]&&(this.setZIndexByPageIndex(this.pageArray[b+1],b),this.pageArray[b+1].setLeftOrRight(rightToLeft));this.pageArray[b+2]&&(this.setZIndexByPageIndex(this.pageArray[b+2],b),this.pageArray[b+2].setLeftOrRight(rightToLeft));this.supportSerialsFlip()&&this.flipping||(this.pageArray[b-1]&&this.setZIndexByPageIndex(this.pageArray[b-1]),this.pageArray[b-2]&&(this.setZIndexByPageIndex(this.pageArray[b-2]),this.pageArray[b-2].setLeftOrRight(!rightToLeft)),
this.pageArray[b-3]&&(this.setZIndexByPageIndex(this.pageArray[b-3]),this.pageArray[b-3].setLeftOrRight(!rightToLeft)))},deleteUnnecessaryPagesAfterFlipToMin:function(b){for(b+=3;b<=originTotalPageCount;b++)this.pageArray[b]&&(this.pageArray[b].remove(),this.pageArray[b]=void 0)},getFlipTo:function(b){var c=this.getMinPageIndex(this.currentPageIndex);b=this.getMinPageIndex(b);var d=c+1,e="";b>d&&(e="max");b+1<c&&(e="min",b+=1);return{flipTo:e,minIndex:c,maxIndex:d,toIndex:b}},getCurrentPages:function(){return BookInfo.getPagesByIndex(this.currentPageIndex)},
getPagesByIndex:function(b){return BookInfo.getPagesByIndex(b)},movetoCenter:function(b,c,d){if(!this.status_zoom&&bookConfig.retainBookCenter&&!(1<BookInfo.getPagesByIndex(b).length&&1<BookInfo.getPagesByIndex(c).length)){var e=this.pageWidth,f=-e/2,g=e/2,h=0,k=0;BookInfo.isLeftPage(b,!0)||1!=BookInfo.getPagesByIndex(b).length||(h=f);BookInfo.isLeftPage(b,!0)&&1==BookInfo.getPagesByIndex(b).length&&(h=g);BookInfo.isLeftPage(c,!0)||1!=BookInfo.getPagesByIndex(c).length||(k=f);BookInfo.isLeftPage(c,
!0)&&1==BookInfo.getPagesByIndex(c).length&&(k=g);this.fromTrans=0>this.movedX*k&&this.toTrans!=k?this.movedX:h;this.toTrans=k;b=2*e;void 0==d&&(d=b);isNaN(d)||(this.movedLength=d,this.movedX=$.easing.easeInOutSine(null,d,this.fromTrans,this.toTrans-this.fromTrans,b),d={tran:{x:parseInt(this.movedX),y:0}},this.setCSS(d))}},edgeX:function(){this.MiddleX=0},getFromStartPointByIndex:function(b,c){var d=this.getMinPageIndex(this.currentPageIndex),e=d+1;if(b!=e&&b!=d){var f={x:0,y:0},g={x:0,y:0},h=c.getPageWidthHeight().width;
c=c.getPageWidthHeight().height;var k=!1;if(b>e&&!rightToLeft||b<d&&rightToLeft)f={x:h,y:c},g.x=f.x-2,g.y=f.y-2,k=!0;if(b<d&&!rightToLeft||b>e&&rightToLeft)f={x:-h,y:c},g.x=f.x+2,g.y=f.y-2,k=!1;this.flipToDirection=k?"left":"right";return[f,g]}},afterZoomIn:function(b){if(!isPhone()&&!isPad()||bookConfig.usePdfJs){if(isPhone()||isPad()||this.showPages(),b&&this.flipBook.parameters&&!this.flipBook.parameters.resize){this.flipBook.parameters.resize=!0;b=this.flipBook.offset().left;var c=this.flipBook.offset().top,
d=this.flipBook.parameters.left,e=c-this.flipBook.parameters.top;f=this.flipBook.parameters.scale;d={tran:{x:parseInt(b-d),y:parseInt(e)},scale:1,origin:{x:0,y:0}};1!=f&&this.resizeBook(Math.round(this.width*f/2),Math.round(this.height*f));this.status_zoom||(f=0,1==this.currentPageIndex&&bookConfig.retainBookCenter&&!bookConfig.isTheBookOpen&&(f=rightToLeft?this.width/4:-this.width/4),this.currentPageIndex==totalPageCount&&bookConfig.retainBookCenter&&(f=rightToLeft?-this.width/4:this.width/4),d.tran=
{x:parseInt(f),y:0},d.left=b-f,d.top=c-0);this.setCSS(d);this.flipBook.parameters.tran=d.tran;this.flipBook.parameters.scale=1;this.flipBook.parameters.toScale=1;this.flipBook.parameters.width=$(this.flipBook).width();this.flipBook.parameters.height=$(this.flipBook).height();this.flipBook.parameters.origin={x:0,y:0};this.flipBook.parameters.resize=!1;isPhone()||isPad()||this.switchLargeImage()}}else if(c=BookInfo.getCurrentPages(),void 0!=c&&null!=c)for(d=0;d<c.length;d++)if(e=c[d],this.pageArray[e]){var f=
this.flipBook.parameters.scale;this.pageArray[e].resizeSvg(Math.round(this.pageWidth*f),Math.round(this.pageHeight*f));bookConfig.highDefinitionConversion?this.pageArray[e].zoomInSideImage():(1<b.scale&&this.pageArray[e].zoomInSideImage(),1==b.scale&&this.pageArray[e].zoomOutSideImage())}},setZIndexByPageIndex:function(b,c){b&&(c=c?c:this.currentPageIndex,c=this.getMinPageIndex(c),b==this.pageArray[c+1]?b.setZIndex(2):b==this.pageArray[c+2]?b.setZIndex(1):b==this.pageArray[c+3]?b.setZIndex(0):b==
this.pageArray[c]?b.setZIndex(2):b==this.pageArray[c-1]?b.setZIndex(1):b==this.pageArray[c-2]&&b.setZIndex(0))},getFitWH:function(){this.getSpace(!1);var b=this.getSpace(!0),c=windowWidth-b.left-b.right;b=windowHeight-b.top-b.bottom;var d=bookConfig.largePageWidth*(-parseFloat(bookConfig.visibleAreaLeft)+parseFloat(bookConfig.visibleAreaRight))/100,e=bookConfig.largePageHeight*(parseFloat(bookConfig.visibleAreaBottom)-parseFloat(bookConfig.visibleAreaTop))/100;return fitPageWidthHeight(c,b,2*d,e)},
getSpace:function(b){var c=bookConfig.leftMargin+templateArea.getLeftWidth(),d=bookConfig.rightMargin+templateArea.getRightWidth(),e=bookConfig.topMargin+templateArea.getTopHeight(),f=bookConfig.bottomMargin+templateArea.getBottomHeight();b&&(c+=bookConfig.hardCoverBorderWidth+totalThicknessWidth(!0),d+=bookConfig.hardCoverBorderWidth+totalThicknessWidth(!0),e+=bookConfig.hardCoverBorderWidth,f+=bookConfig.hardCoverBorderWidth);return{left:c,right:d,top:e,bottom:f}},getMinPageIndex:function(b){return b=
bookConfig.isTheBookOpen?2*Math.ceil(b/2)-1:2*Math.floor(b/2)},getMaxPageIndex:function(b){return b=bookConfig.isTheBookOpen?2*Math.ceil(b/2):2*Math.floor(b/2)+1}}).extend(FlipBook),SingleFlipBook=Class({pageBackArray:null,create:function(b){this.pageBackArray=[];this._super(b)},newFlipPage:function(){return new SingleFlipPage(this)},resetPages:function(b){isNaN(b)||0>=b||(this.unWrapPageBackExcludeArray([b,b+1]),this.unWrapPageExcludeArray([b,b+1]),this.addPageArray([b,b+1]),this.addPageBackArray([b]),
this.currentPage=this.pageArray[b],this.currentPage2=this.pageBackArray[b],this.nextPage=this.pageArray[b+1],this.previousPage=this.pageArray[b-1],this.previousPage2=this.pageBackArray[b-1],this.setPageCss(),this.loading())},setPageCss:function(){var b=transformCSS({rotate:0,tran:{x:0,y:0}});this.currentPage&&(this.setZIndexByPageIndex(this.currentPage),this.currentPage.setCSSByStyle(b));this.previousPage&&(this.setZIndexByPageIndex(this.previousPage),this.previousPage.setCSSByStyle(b));this.previousPage2&&
(this.setZIndexByPageIndex(this.previousPage2),this.previousPage2.setCSSByStyle(b));this.currentPage2&&(this.setZIndexByPageIndex(this.currentPage2),this.currentPage2.setCSSByStyle(b));this.nextPage&&(this.setZIndexByPageIndex(this.nextPage),this.nextPage.setCSSByStyle(b));rightToLeft?(this.currentPage&&this.currentPage.setLeftOrRight(!0),this.previousPage&&this.previousPage.setLeftOrRight(!0),this.previousPage2&&this.previousPage2.setLeftOrRight(!0),this.currentPage2&&this.currentPage2.setLeftOrRight(!0),
this.nextPage&&this.nextPage.setLeftOrRight(!0)):(this.currentPage&&this.currentPage.setLeftOrRight(!1),this.previousPage&&this.previousPage.setLeftOrRight(!1),this.previousPage2&&this.previousPage2.setLeftOrRight(!1),this.currentPage2&&this.currentPage2.setLeftOrRight(!1),this.nextPage&&this.nextPage.setLeftOrRight(!1))},addPageBackArray:function(b){if(b&&this.pageBackArray)for(var c=0;c<b.length;c++)if(!(0>=b[c]||b[c]>originTotalPageCount||(!this.pageBackArray[b[c]]||this.flipping&&!imageLoaded[b[c]]||
this.fillContent(b[c],!0),this.pageBackArray[b[c]]))){var d=this.newPageBack(b[c]),e=this.pageInfoArray[b[c]];d.mirrorSide();d.onResize(this.pageWidth*e.pageWidth,this.pageHeight*e.pageHeight,e.opacity);this.pageBackArray[b[c]]=d;this.flipping&&!imageLoaded[b[c]]||this.fillContent(b[c],!0);this.flipBook.append(d.$page)}},getDownUpPage:function(b,c){var d=b;b>c&&(d=c);this.addPageArray([d]);this.addPageBackArray([d]);this.pageArray[d]&&this.pageArray[d].beginToFlip();this.pageBackArray[d]&&this.pageBackArray[d].beginToFlip();
this.pageArray[d]&&this.pageArray[d].page.setCSSByName("right-flip-side");this.pageBackArray[d]&&(this.pageBackArray[d].page.setCSSByName("flip-side"),this.pageBackArray[d].page.side.addClass("boxShadow"));return[this.pageArray[d],this.pageBackArray[d]]},getDownUpHardPage:function(b,c){var d=b;b>c&&(d=c);this.addPageArray([d]);this.addPageBackArray([d]);rightToLeft?(this.pageArray[d]&&this.pageArray[d].setCSSByName("flip-hard-left-side"),this.pageBackArray[d]&&this.pageBackArray[d].setCSSByName("flip-hard-right-side")):
(this.pageArray[d]&&this.pageArray[d].setCSSByName("flip-hard-right-side"),this.pageBackArray[d]&&this.pageBackArray[d].setCSSByName("flip-hard-left-side"));return[this.pageArray[d],this.pageBackArray[d]]},flipToMax:function(b,c,d){var e=this.flipPageManager.initFlipPageByIndex(b,c);this.addPagesBeforeFlipToMax(c,d);this.pageArray[c]&&(this.pageArray[c].setLeftOrRight(rightToLeft),e.nextPage=this.pageArray[c]);this.setPagesStyleBeforeFlipToMax(c,d);this.deleteUnnecessaryPagesBeforeFlipToMax(b,c);
return e},hidePagesBeforeFlip:function(b){if(!this.supportSerialsFlip()){var c=this.pageArray.length;this.flipPageArray=[];var d=b.currentIndex;b=b.nextIndex;for(var e=[d,b],f=0;f<c;f++)0>e.indexOf(f)&&(this.pageArray[f]&&this.pageArray[f].visible&&(this.flipPageArray.push(this.pageArray[f]),this.pageArray[f].setVisible(!1)),this.pageBackArray[f]&&this.pageBackArray[f].visible&&(this.flipPageArray.push(this.pageBackArray[f]),this.pageBackArray[f].setVisible(!1)));c=Math.max(d,b);this.pageBackArray[c]&&
this.pageBackArray[c].visible&&(this.flipPageArray.push(this.pageBackArray[c]),this.pageBackArray[c].setVisible(!1))}},showPagesAfterFlip:function(){if(!this.supportSerialsFlip()&&this.flipPageArray){for(var b=this.flipPageArray.length,c=0;c<b;c++){var d=this.flipPageArray[c];d&&d.setVisible(!0)}this.flipPageArray=[]}},addPagesBeforeFlipToMax:function(b,c){this.addPageArray([b]);c&&this.supportSerialsFlip()&&(this.addPageBackArray([b]),this.addPageArray([b+1]))},setPagesStyleBeforeFlipToMax:function(b,
c){c&&(this.pageArray[b]&&(this.setZIndexByPageIndex(this.pageArray[b],b),this.pageArray[b].setLeftOrRight(rightToLeft)),this.pageBackArray[b]&&(this.setZIndexByPageIndex(this.pageBackArray[b],b),this.pageBackArray[b].setLeftOrRight(rightToLeft)),this.pageArray[b+1]&&(this.setZIndexByPageIndex(this.pageArray[b+1],b),this.pageArray[b+1].setLeftOrRight(rightToLeft)))},deleteUnnecessaryPagesBeforeFlipToMax:function(b,c){for(var d=c+1;d<=originTotalPageCount;d++)this.pageBackArray[d]&&(this.pageBackArray[d]&&
this.pageBackArray[d].remove(),this.pageBackArray[d]=void 0);for(d=c+2;d<=originTotalPageCount;d++)this.pageArray[d]&&(this.pageArray[d]&&this.pageArray[d].remove(),this.pageArray[d]=void 0);for(d=b+1;d<c;d++)if(this.pageArray[d]||this.pageBackArray[d])this.pageArray[d]&&this.pageArray[d].remove(),this.pageBackArray[d]&&this.pageBackArray[d].remove(),this.pageArray[d]=void 0,this.pageBackArray[d]=void 0},afterFlipToMax:function(b){this.addPagesAfterFlipToMax(b);this.setPagesStyleAfterFlipToMax(b);
this.deleteUnnecessaryPagesAfterFlipToMax(b)},addPagesAfterFlipToMax:function(b){this.supportSerialsFlip()||(this.addPageArray([b]),this.addPageBackArray([b]),this.addPageArray([b+1]));this.pageArray[b]&&this.fillContent(b);this.pageArray[b+1]&&this.fillContent(b+1)},setPagesStyleAfterFlipToMax:function(b){this.pageArray[b-1]&&this.setZIndexByPageIndex(this.pageArray[b-1],b);this.pageBackArray[b-1]&&this.setZIndexByPageIndex(this.pageBackArray[b-1],b);this.supportSerialsFlip()||(this.pageArray[b]&&
(this.setZIndexByPageIndex(this.pageArray[b]),this.pageArray[b].setLeftOrRight(rightToLeft)),this.pageBackArray[b]&&(this.setZIndexByPageIndex(this.pageBackArray[b]),this.pageBackArray[b].setLeftOrRight(rightToLeft)),this.pageArray[b+1]&&(this.setZIndexByPageIndex(this.pageArray[b+1]),this.pageArray[b+1].setLeftOrRight(rightToLeft)))},deleteUnnecessaryPagesAfterFlipToMax:function(b){for(b-=2;0<=b;b--)if(this.pageArray[b]||this.pageBackArray[b])this.pageArray[b]&&this.pageArray[b].remove(),this.pageBackArray[b]&&
this.pageBackArray[b].remove(),this.pageArray[b]=void 0,this.pageBackArray[b]=void 0},flipToMin:function(b,c,d){var e=this.flipPageManager.initFlipPageByIndex(b,c);this.addPagesBeforeFlipToMin(c,d);this.pageArray[b]&&(e.nextPage=this.pageArray[b]);this.setPagesStyleBeforeFlipToMin(c);this.deleteUnnecessaryPagesBeforeFlipToMin(b,c);return e},addPagesBeforeFlipToMin:function(b,c){},setPagesStyleBeforeFlipToMin:function(b){},deleteUnnecessaryPagesBeforeFlipToMin:function(b,c){for(--b;b>c;b--)if(this.pageArray[b]||
this.pageBackArray[b])this.pageArray[b]&&this.pageArray[b].remove(),this.pageBackArray[b]&&this.pageBackArray[b].remove(),this.pageArray[b]=void 0,this.pageBackArray[b]=void 0},afterFlipToMin:function(b){this.addPagesAfterFlipToMin(b);this.setPagesStyleAfterFlipToMin(b);this.deleteUnnecessaryPagesAfterFlipToMin(b)},addPagesAfterFlipToMin:function(b){this.supportSerialsFlip()||(this.addPageArray([b]),this.addPageBackArray([b]),this.addPageArray([b-1]));this.pageArray[b]&&this.fillContent(b);this.pageArray[b-
1]&&this.fillContent(b-1)},setPagesStyleAfterFlipToMin:function(b){this.pageArray[b+1]&&(this.setZIndexByPageIndex(this.pageArray[b+1]),this.pageArray[b+1].setLeftOrRight(rightToLeft));this.supportSerialsFlip()||(this.pageArray[b]&&(this.setZIndexByPageIndex(this.pageArray[b]),this.pageArray[b].setLeftOrRight(rightToLeft)),this.pageBackArray[b]&&(this.setZIndexByPageIndex(this.pageBackArray[b]),this.pageBackArray[b].setLeftOrRight(rightToLeft)),this.pageArray[b-1]&&(this.setZIndexByPageIndex(this.pageArray[b-
1]),this.pageArray[b-1].setLeftOrRight(rightToLeft)))},deleteUnnecessaryPagesAfterFlipToMin:function(b){for(var c=b+2;c<=originTotalPageCount;c++)if(this.pageArray[c]||this.pageBackArray[c])this.pageArray[c]&&this.pageArray[c].remove(),this.pageBackArray[c]&&this.pageBackArray[c].remove(),this.pageArray[c]=void 0,this.pageBackArray[c]=void 0;this.pageBackArray[b+1]&&(this.pageBackArray[b+1]&&this.pageBackArray[b+1].remove(),this.pageBackArray[b+1]=void 0)},getCurrentPages:function(){return[this.currentPageIndex]},
getPagesByIndex:function(b){return[b]},movetoCenter:function(){},getFromStartPointByIndex:function(b,c){var d=this.currentPageIndex;if(b!=d&&b!=d){var e={x:0,y:0},f=c.getPageWidthHeight().width,g=c.getPageWidthHeight().height,h=!1;c={x:f,y:g};rightToLeft&&(c={x:-f,y:g});if(b>d&&!rightToLeft||b<d&&rightToLeft)h=!0;if(b<d&&!rightToLeft||b>d&&rightToLeft)h=!1;b>d&&(e={x:c.x*(f-2)/f,y:g-2});b<d&&(e={x:-c.x*(f-2)/f,y:g-2});this.flipToDirection=h?"left":"right";return[c,e]}},realBookPosition:function(){var b=
this.flipBook.offset().left-(rightToLeft?0:this.pageWidth),c=this.flipBook.offset().top;return[b,c]},edgeX:function(){this.MiddleX=this.pageWidth/2;rightToLeft&&(this.MiddleX=-this.pageWidth/2)},realIndex:function(b){var c=this.currentPageIndex;if(b&&!rightToLeft||!b&&rightToLeft)return[c,c+1];if(!b&&!rightToLeft||b&&rightToLeft)return[c,c-1]},getFromStartPointByCoordinate:function(b,c,d){if(b){var e={x:0,y:0},f={x:0,y:0},g=d.getPageWidthHeight().width;d=d.getPageWidthHeight().height;var h=b.y>d/
2?b.y-5:b.y+5;b.x<this.MiddleX&&(e.y=h,f.x=-g);b.x>this.MiddleX&&(e.y=h,f.x=g);c&&0<=c.indexOf("r")&&(f.x=g);c&&0<=c.indexOf("l")&&(f.x=-g);"tl"==c&&(e.y=0);"bl"==c&&(e.y=d);"tr"==c&&(e.y=0);"br"==c&&(e.y=d);e.x=rightToLeft?-g:g;f.y=e.y;return[e,f]}},getFlipTo:function(b){var c=this.currentPageIndex,d="";b>c&&(d="max");b<c&&(d="min");return{flipTo:d,minIndex:c,maxIndex:c,toIndex:b}},afterZoomIn:function(b){if(!isPhone()&&!isPad()||bookConfig.usePdfJs){if(isPhone()||isPad()||this.showPages(),b&&this.flipBook.parameters&&
!this.flipBook.parameters.resize){this.flipBook.parameters.resize=!0;b=this.flipBook.offset().left;var c=this.flipBook.offset().top;b-=this.flipBook.parameters.left;var d=c-this.flipBook.parameters.top;c=this.flipBook.parameters.scale;1!=c&&this.resizeBook(Math.round(this.width*c),Math.round(this.height*c));transformCSS({tran:{x:b,y:d},scale:1,origin:{x:0,y:0},obj:this.flipBook});this.flipBook.parameters.tran={x:b,y:d};this.flipBook.parameters.scale=1;this.flipBook.parameters.toScale=1;this.flipBook.parameters.width=
$(this.flipBook).width();this.flipBook.parameters.height=$(this.flipBook).height();this.flipBook.parameters.origin={x:0,y:0};this.flipBook.parameters.resize=!1;isPhone()||isPad()||this.switchLargeImage()}}else if(d=BookInfo.getCurrentPages(),void 0!=d&&null!=d)for(var e=0;e<d.length;e++){var f=d[e];this.pageArray[f]&&this.pageArray[f]&&(c=this.flipBook.parameters.scale,this.pageArray[f].resizeSvg(Math.round(this.width*c),Math.round(this.height*c)),bookConfig.highDefinitionConversion?this.pageArray[f].zoomInSideImage():
(1<b.scale&&this.pageArray[f].zoomInSideImage(),1==b.scale&&this.pageArray[f].zoomOutSideImage()))}},setZIndexByPageIndex:function(b,c){b&&(c=c?c:this.currentPageIndex,b==this.pageArray[c]?b.setZIndex(2):b==this.pageBackArray[c]?b.setZIndex(1):b==this.pageArray[c+1]?b.setZIndex(0):b.setZIndex(-1))},getFitWH:function(){this.getSpace(!1);var b=this.getSpace(!0),c=windowWidth-b.left-b.right;b=windowHeight-b.top-b.bottom;var d=bookConfig.largePageWidth*(-parseFloat(bookConfig.visibleAreaLeft)+parseFloat(bookConfig.visibleAreaRight))/
100,e=bookConfig.largePageHeight*(parseFloat(bookConfig.visibleAreaBottom)-parseFloat(bookConfig.visibleAreaTop))/100;return fitPageWidthHeight(c,b,d,e)},getSpace:function(b){var c=bookConfig.leftMargin+templateArea.getLeftWidth(),d=bookConfig.rightMargin+templateArea.getRightWidth(),e=bookConfig.topMargin+templateArea.getTopHeight(),f=bookConfig.bottomMargin+templateArea.getBottomHeight();b&&(c+=rightToLeft?bookConfig.hardCoverBorderWidth+totalThicknessWidth(!1):0,d+=rightToLeft?0:bookConfig.hardCoverBorderWidth+
totalThicknessWidth(!1),e+=bookConfig.hardCoverBorderWidth,f+=bookConfig.hardCoverBorderWidth);return{left:c,right:d,top:e,bottom:f}},getTranX:function(b){if(!bookConfig.retainBookCenter)return 0;b=this.getCssLeft();var c=this.getSpace(!0);return c.left+(windowWidth-c.left-c.right-this.width)/2-b},getTranY:function(){var b=this.getCssTop(),c=this.getSpace(!0);return c.top+(windowHeight-c.top-c.bottom-this.pageWidthHeight.y)/2-b}}).extend(FlipBook),NormalBook=Class({bookType:BookType.normal_book,doublePage:!0,
create:function(b){this._super(b);this.resetZoomArea()},initBook:function(){this._super()},resetBookShadow:function(b){b=this.flipPageManager.array.length;if(0==b){var c=2==BookInfo.getCurrentPages().length,d=!BookInfo.isLeftPage(this.currentPageIndex,!0);this.bookAttachments.Items.find("BookShadow").each(function(l){l.doubleWidth(c);l.right(d);l.show()});this.bookAttachments.Items.find("GrayShadow").each(function(l){c?l.show():l.hide()})}else{for(var e=!0,f=!0,g=0;g<b;g++){var h=this.flipPageManager.array[g],
k=this.flipPageManager[h].nextIndex;h=this.flipPageManager[h].currentIndex;1==BookInfo.getPagesByIndex(k).length&&BookInfo.isLeftPage(k,!0)&&(f=!1);1==BookInfo.getPagesByIndex(h).length&&BookInfo.isLeftPage(h,!0)&&(f=!1);1!=BookInfo.getPagesByIndex(k).length||BookInfo.isLeftPage(k,!0)||(e=!1);1!=BookInfo.getPagesByIndex(h).length||BookInfo.isLeftPage(h,!0)||(e=!1)}e||f||this.bookAttachments.Items.find("BookShadow").each(function(l){l.hide()});(e&&!f||!e&&f)&&this.bookAttachments.Items.find("BookShadow").each(function(l){l.show();
l.doubleWidth(!1);l.right(f)});this.bookAttachments.Items.find("GrayShadow").each(function(l){e&&f?l.show():l.hide()})}},hasTwoSingleFlipPage:function(b){for(var c=this.flipPageManager.array.length,d,e=0;e<c;e++){var f=this.flipPageManager.array[e],g=this.flipPageManager[f].nextIndex;f=this.flipPageManager[f].currentIndex;1==BookInfo.getPagesByIndex(g).length&&(d=g);1==BookInfo.getPagesByIndex(f).length&&(d=f)}return d&&(d!=b&&1==BookInfo.getPagesByIndex(b).length||d!=this.currentPageIndex&&1==BookInfo.getPagesByIndex(this.currentPageIndex).length)?
(this.bookAttachments.Items.find("BookShadow").each(function(h){h.hide()}),!0):!1},newPage:function(b){return new NormalPage(b,"page",!1,this.bookType)},flippingTo:function(b){this.currentPageIndex=b;this.currentPageIndex=Math.max(1,this.currentPageIndex);this.currentPageIndex=Math.min(originTotalPageCount,this.currentPageIndex);this.resetZoomArea()},resetZoomArea:function(){this.flipBook&&this.flipBook.parameters&&this.flipBook.parameters.zoomArea&&(1!=this.getCurrentPages().length||BookInfo.isLeftPage(this.currentPageIndex,
!0)?1==this.getCurrentPages().length&&BookInfo.isLeftPage(this.currentPageIndex,!0)?this.flipBook.parameters.zoomArea={left:0,top:0,right:50,bottom:0}:this.flipBook.parameters.zoomArea={left:0,top:0,right:0,bottom:0}:this.flipBook.parameters.zoomArea={left:50,top:0,right:0,bottom:0})},afterCurling:function(){this._super();this.resetBookShadow(this.currentPageIndex);this.bookAttachments.afterCurling()},setAttachmentBeforeFlipTo:function(b){this.pauseAnimation();this.bookAttachments.setAttachmentBeforeFlipTo(b);
this.resetBookShadow(b)},setAttachmentAfterFlipTo:function(b){this.stopMedia();this.resetSlider();this.bookAttachments.setAttachmentAfterFlipTo(b);this.resetBookShadow(b);this.flipping||this.enterPage();global.thumbnail&&(thumbnail.clearHighLight(),thumbnail.setHighLight(this.currentPageIndex));window.resizeBookAfterFlip&&!this.flipping&&window.setTimeout(function(){onStageResize()},30)},resizeBook:function(b,c){this.endFlip();this.width=2*b;this.height=c;this.pageWidth=b;this.pageHeight=c;this.maskWidth=
parseInt(Math.sqrt(b*b+c*c));0!=(this.maskWidth-this.height)%2&&(this.maskWidth+=1);this.setCSS({width:this.width,height:this.height});this.resizePage(this.pageWidth,this.pageHeight);this.resetBookShadow(this.currentPageIndex)},resizeAttachments:function(b,c){this.bookAttachments.onResize(b,c)},movetoCenter:function(b,c,d){this._super(b,c,d);this.bookAttachments.Items.find("ThicknessManager").each(function(e){e.followToPoint(b,c,d,!1)})},afterZoomIn:function(b){b&&this.flipBook.parameters&&!this.flipBook.parameters.resize&&
(this._super(b),this.bookAttachments.afterZoomIn(this.width,this.height))}}).extend(DoubleFlipBook),SingleBook=Class({bookType:BookType.single_book,doublePage:!1,create:function(b){this._super(b)},newPage:function(b){return new NormalPage(b,"page",!0,BookType.single_book)},newPageBack:function(b){return new NormalPage(b,"pageBack",!0,BookType.single_book,!0)},afterCurling:function(){this._super();this.bookAttachments.afterCurling()},setAttachmentBeforeFlipTo:function(b){this.pauseAnimation();this.bookAttachments.setAttachmentBeforeFlipTo(b)},
setAttachmentAfterFlipTo:function(b){this.stopMedia();this.resetSlider();this.flipping||this.enterPage();this.bookAttachments.setAttachmentAfterFlipTo(b);bookConfig.ThumbnailsButtonVisible&&global.thumbnail&&(thumbnail.clearHighLight(),thumbnail.setHighLight(this.currentPageIndex));window.resizeBookAfterFlip&&!this.flipping&&window.setTimeout(function(){onStageResize()},30)},resizeBook:function(b,c){this.endFlip();this.width=b;this.height=c;this.pageWidth=b;this.pageHeight=c;this.maskWidth=parseInt(Math.sqrt(b*
b+c*c));0!=(this.maskWidth-this.height)%2&&(this.maskWidth+=1);this.flipBook.css({width:this.width+"px",height:this.height+"px"});this.resizePage(this.pageWidth,this.pageHeight);this.resetBookShadow()},resizeAttachments:function(b,c){this.bookAttachments.onResize(b,c)},resetBookShadow:function(){this.bookAttachments.Items.find("BookShadow").each(function(b){b.doubleWidth(!0);b.right(!1)})},flippingTo:function(b){this.currentPageIndex=b;this.currentPageIndex=Math.max(1,this.currentPageIndex);this.currentPageIndex=
Math.min(originTotalPageCount,this.currentPageIndex)},movetoCenter:function(b,c,d){this._super(b,c,d);this.bookAttachments.Items.find("ThicknessManager").each(function(e){e.followToPoint(b,c,d,!1)})},afterZoomIn:function(b){b&&this.flipBook.parameters&&!this.flipBook.parameters.resize&&(this._super(b),this.bookAttachments.afterZoomIn(this.width,this.height))}}).extend(SingleFlipBook),zoom_icons={moveByPos:"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",
moveByDrag:"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",
ZU:"iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAQAAAD8x0bcAAAACXBIWXMAAAsTAAALEwEAmpwYAAADGWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjaY2BgnuDo4uTKJMDAUFBUUuQe5BgZERmlwH6egY2BmYGBgYGBITG5uMAxIMCHgYGBIS8/L5UBA3y7xsDIwMDAcFnX0cXJlYE0wJpcUFTCwMBwgIGBwSgltTiZgYHhCwMDQ3p5SUEJAwNjDAMDg0hSdkEJAwNjAQMDg0h2SJAzAwNjCwMDE09JakUJAwMDg3N+QWVRZnpGiYKhpaWlgmNKflKqQnBlcUlqbrGCZ15yflFBflFiSWoKAwMD1A4GBgYGXpf8EgX3xMw8BUNTVQYqg4jIKAX08EGIIUByaVEZhMXIwMDAIMCgxeDHUMmwiuEBozRjFOM8xqdMhkwNTJeYNZgbme+y2LDMY2VmzWa9yubEtoldhX0mhwBHJycrZzMXM1cbNzf3RB4pnqW8xryH+IL5nvFXCwgJrBZ0E3wk1CisKHxYJF2UV3SrWJw4p/hWiRRJYcmjUhXSutJPZObIhsoJyp2V71HwUeRVvKA0RTlKRUnltepWtUZ1Pw1Zjbea+7QmaqfqWOsK6b7SO6I/36DGMMrI0ljS+LfJPdPDZivM+y0qLBOtfKwtbFRtRexY7L7aP3e47XjB6ZjzXpetruvdVrov9VjkudBrgfdCn8W+y/xW+a8P2Bq4N+hY8PmQW6HPwr5EMEUKRilFG8e4xUbF5cW3JMxO3Jx0Nvl5KlOaXLpNRlRmVdas7D059/KY8tULfAqLi2YXHy55WyZR7lJRWDmv6mz131q9uvj6SQ3HGn83G7Skt85ru94h2Ond1d59uJehz76/bsK+if8nO05pnXpiOu+M4JmzZj2aozW3ZN6+BVwLwxYtXvxxqcOyCcsfrjRe1br65lrddU3rb2402NSx+cFWq21Tt3/Y6btr1R6Oven7jh9QP9h56PURv6Obj4ufqD355LT3mS3nZM+3X/h0Ke7yqasW15bdEL3ZeuvrnfS7N+/7PDjwyPTx6qeKz2a+EHzZ9Zr5Td3bn+9LP3z6VPD53de8b+9+5P/88Lv4z7d/Vf//AwAqvx2K829RWwAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAAAL0lEQVR42mL8z0AYMDEMDUX/Gf7TyjrG/6gWocmSbRLCPEZ6OHwIRTAAAAD//wMAHjoIG4Kx7iYAAAAASUVORK5CYII=",
PB:"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",
ZD:"iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAQAAAD8x0bcAAAACXBIWXMAAAsTAAALEwEAmpwYAAADGWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjaY2BgnuDo4uTKJMDAUFBUUuQe5BgZERmlwH6egY2BmYGBgYGBITG5uMAxIMCHgYGBIS8/L5UBA3y7xsDIwMDAcFnX0cXJlYE0wJpcUFTCwMBwgIGBwSgltTiZgYHhCwMDQ3p5SUEJAwNjDAMDg0hSdkEJAwNjAQMDg0h2SJAzAwNjCwMDE09JakUJAwMDg3N+QWVRZnpGiYKhpaWlgmNKflKqQnBlcUlqbrGCZ15yflFBflFiSWoKAwMD1A4GBgYGXpf8EgX3xMw8BUNTVQYqg4jIKAX08EGIIUByaVEZhMXIwMDAIMCgxeDHUMmwiuEBozRjFOM8xqdMhkwNTJeYNZgbme+y2LDMY2VmzWa9yubEtoldhX0mhwBHJycrZzMXM1cbNzf3RB4pnqW8xryH+IL5nvFXCwgJrBZ0E3wk1CisKHxYJF2UV3SrWJw4p/hWiRRJYcmjUhXSutJPZObIhsoJyp2V71HwUeRVvKA0RTlKRUnltepWtUZ1Pw1Zjbea+7QmaqfqWOsK6b7SO6I/36DGMMrI0ljS+LfJPdPDZivM+y0qLBOtfKwtbFRtRexY7L7aP3e47XjB6ZjzXpetruvdVrov9VjkudBrgfdCn8W+y/xW+a8P2Bq4N+hY8PmQW6HPwr5EMEUKRilFG8e4xUbF5cW3JMxO3Jx0Nvl5KlOaXLpNRlRmVdas7D059/KY8tULfAqLi2YXHy55WyZR7lJRWDmv6mz131q9uvj6SQ3HGn83G7Skt85ru94h2Ond1d59uJehz76/bsK+if8nO05pnXpiOu+M4JmzZj2aozW3ZN6+BVwLwxYtXvxxqcOyCcsfrjRe1br65lrddU3rb2402NSx+cFWq21Tt3/Y6btr1R6Oven7jh9QP9h56PURv6Obj4ufqD355LT3mS3nZM+3X/h0Ke7yqasW15bdEL3ZeuvrnfS7N+/7PDjwyPTx6qeKz2a+EHzZ9Zr5Td3bn+9LP3z6VPD53de8b+9+5P/88Lv4z7d/Vf//AwAqvx2K829RWwAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAAAJklEQVR42mL8z0AYMDGMeEUsKDz0QGMkwSTG0RAnShEAAAD//wMAU6UDIxn1UhsAAAAASUVORK5CYII=",
ZO:"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",
PR:"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",
NE:"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",
"arrow-left":"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",
zoom_close:"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"};
bdor[500]=global.bdor[404];bdor[13]="p";
var ZoomControlBar=Class({create:function(b){this.moveByMousePosition=!1;this.moveByPositionUrl=this.getImageUrl("moveByPos");this.moveByDragUrl=this.getImageUrl("moveByDrag");this.initButtons();this.initBar(b);this.initEvent();this.setA11y()},initButtons:function(){this.btnZoomUp=$("<div class='button' title='"+getLanguage("btnZoomIn","zoom in")+"'><img src='"+this.getImageUrl("ZU")+"'/></div>");this.btnZoomDown=$("<div class='button' title='"+getLanguage("btnZoomOut","zoom out")+"'><img src='"+
this.getImageUrl("ZD")+"'/></div>");this.btnZoomOut=$("<div class='button' title='"+getLanguage("btnZoomOut","zoom out")+"'><img src='"+this.getImageUrl("ZO")+"'/></div>");this.btnPre=$("<div class='button' title='"+getLanguage("btnPrePage","pre")+"'><img src='"+this.getImageUrl("PR")+"'/></div>");this.btnNext=$("<div class='button' title='"+getLanguage("btnNextPage","next")+"'><img src='"+this.getImageUrl("NE")+"'/></div>");this.btnMoveMode=$("<div class='button' title='"+getLanguage("btnPositionToMove",
"Move by mouse position")+"'><img src='"+this.moveByPositionUrl+"'/></div>");this.btnClose=$("<div class='button' title='"+getLanguage("btnClose","Close")+"'><img src='"+this.getImageUrl("zoom_close")+"'/></div>")},initBar:function(b){this.height=40;this.bar=$("<div class='zoomControlBar'></div>");this.bar.append(this.btnZoomUp);this.bar.append(this.btnZoomDown);this.bar.append(this.btnZoomOut);this.bar.append(this.btnPre);this.bar.append(this.btnNext);this.bar.append(this.btnMoveMode);this.bar.append(this.btnClose);
this.bar.css({"background-color":bookConfig.toolbarColor});"slide"==bookConfig.FlipStyle.toLowerCase()&&this.btnMoveMode.css({display:"none"});b.append(this.bar);this.width=this.bar.width()},getImageUrl:function(b){return window.zoom_icons&&zoom_icons[b]?"data:image/png;base64,"+zoom_icons[b]:uiBaseURL+b+".png"},setVisible:function(b){b&&this.buttonChangeColor();this.bar.css({display:b?"block":"none"});b&&(this.bar.attr("tabindex",0),this.bar.focus())},buttonChangeColor:function(){this.hasChanged||
(this.btnZoomUp.changeButtonColor(bookConfig.iconColor),this.btnZoomDown.changeButtonColor(bookConfig.iconColor),this.btnZoomOut.changeButtonColor(bookConfig.iconColor),this.btnPre.changeButtonColor(bookConfig.iconColor),this.btnNext.changeButtonColor(bookConfig.iconColor),this.btnMoveMode.changeButtonColor(bookConfig.iconColor),this.btnClose.changeButtonColor(bookConfig.iconColor),this.hasChanged=!0)},setPosition:function(b,c,d){void 0==d&&(d=["left","top"]);this.bar.css(d[0],b+"px");this.bar.css(d[1],
c+"px")},initEvent:function(){var b=this;this.btnZoomUp.bind(_event._click,function(){BookEvent.trigger("zoomIn",["zoom bar",BookInfo.getCurrentPages().join("-")]);this.zoomUp()}.bind(this));this.btnZoomDown.bind(_event._click,function(){BookEvent.trigger("zoomOut",["zoom bar",BookInfo.getCurrentPages().join("-")]);this.zoomDown()}.bind(this));this.btnZoomOut.bind(_event._click,function(){BookEvent.trigger("zoomOut",["zoom bar",BookInfo.getCurrentPages().join("-")]);this.zoomOut()}.bind(this));this.btnPre.bind(_event._click,
function(){rightToLeft?nextPageFun("zoom bar"):previousPageFun("zoom bar")});this.btnNext.bind(_event._click,function(){rightToLeft?previousPageFun("zoom bar"):nextPageFun("zoom bar")});this.btnMoveMode.bind(_event._click,function(){BookEvent.trigger("zoomMove",["zoom bar",BookInfo.getCurrentPages().join("-")]);this.changeMoveMode()}.bind(this));this.btnClose.bind(_event._click,function(){b.bar.hide()})},changeMoveMode:function(){1==this.moveByMousePosition?(this.moveByMousePosition=!1,this.btnMoveMode.empty().append(getImage(this.moveByPositionUrl)).attr("title",
getLanguage("btnPositionToMove","Move by mouse position"))):(this.moveByMousePosition=!0,this.btnMoveMode.empty().append(getImage(this.moveByDragUrl)).attr("title",getLanguage("btnDragToMove","Move by mouse drag")));this.btnMoveMode.changeButtonColor(bookConfig.iconColor)},destroy:function(){this.bar.remove()},zoomUp:function(b){var c=BookInfo.getBook().showPage;if(bookType===BookType.documentView_book||bookType===BookType.singleDocumentView_book)c=BookInfo.getBook().docViewBook;if(!c.parameters.eventCancel&&
!c.parameters.zoomming){bookConfig.AnnotationButtonVisible&&global.annotationCookie&&global.annotationCookie.saveCookie();c.scale=c.parameters.toScale;var d=Math.min(c.parameters.naturalHeight*c.maxScale/c.parameters.height,1.5*parseFloat(c.scale));d!=c.scale&&(b||(b={pointers:[{pageX:windowWidth/2,pageY:windowHeight/2},{pageX:windowWidth/2,pageY:windowHeight/2}]}),c.parameters.origin=c.mathOrigin(c,b),c.originObj(c,c.parameters.origin),c.animateToScale(c,d,b,150))}},zoomDown:function(b){var c=BookInfo.getBook().showPage;
if(bookType===BookType.documentView_book||bookType===BookType.singleDocumentView_book)c=BookInfo.getBook().docViewBook;if(!c.parameters.eventCancel&&!c.parameters.zoomming){bookConfig.AnnotationButtonVisible&&global.annotationCookie&&global.annotationCookie.saveCookie();b||(b={pointers:[{pageX:windowWidth/2,pageY:windowHeight/2},{pageX:windowWidth/2,pageY:windowHeight/2}]});c.scale=c.parameters.toScale;c.parameters.origin=c.mathOrigin(c,b);c.originObj(c,c.parameters.origin);var d=c.parameters.naturalHeight/
c.parameters.height,e=.5*parseFloat(c.scale);e<=d&&(c.parameters.zoomOut=!0);c.animateToScale(c,Math.max(d,e),b,150)}},zoomOut:function(){var b=BookInfo.getBook().showPage;if(bookType===BookType.documentView_book||bookType===BookType.singleDocumentView_book)b=BookInfo.getBook().docViewBook;b.onDoubleTap.bind(b)({pointers:[{pageX:windowWidth/2,pageY:windowHeight/2}]});StateSynchronous.instance().findButtons("ZoomButton",!0).each(function(c){c.setAsZoomin();c.executeCallback()})},setA11y:function(){this.bar.find(".button").each(function(){$(this).attr("tabindex",
0);$(this).attr("role","button");$(this).off("keydown.a11y").on("keydown.a11y",function(b){"Enter"!==b.key&&" "!==b.key||$(this).trigger("click")})})}}),CatalogZoomControlBar=Class({}).extend(ZoomControlBar),ZoomMap=Class({create:function(b){this.book=b;this.maxWidth=80;this.maxHeight=100;this.pageHeight=this.pageWidth=this.height=this.width=0;this.doublePage=!1;this.init();this.initEvent()},init:function(){this.map=$("<div class='thumbnail_map'></div>");bookConfig.FlipDirection?(this.imageLeft=$("<img class='map_img map_img_up'></img>"),
this.imageRight=$("<img class='map_img map_img_down'></img>")):(this.imageLeft=$("<img class='map_img map_img_left'></img>"),this.imageRight=$("<img class='map_img map_img_right'></img>"));this.mapCursor=$("<div class='map_cursor'></div>");this.map.append(this.imageLeft);this.map.append(this.imageRight);this.map.append(this.mapCursor);bookContainer.append(this.map)},show:function(){this.visible=!0;this.refreshArea();this.map.show()},hide:function(){this.visible=!1;this.map.hide()},onResize:function(){bookConfig.largePageWidth/
bookConfig.largePageHeight<this.maxWidth/this.maxHeight?(this.pageWidth=this.maxWidth,this.pageHeight=bookConfig.largePageHeight*this.maxWidth/bookConfig.largePageWidth):(this.pageHeight=this.maxHeight,this.pageWidth=bookConfig.largePageWidth*this.maxHeight/bookConfig.largePageHeight);bookConfig.FlipDirection?(this.height=this.book.doublePage?2*(this.pageHeight+1):this.pageHeight,this.width=this.pageWidth+2):(this.height=this.pageHeight+2,this.width=this.book.doublePage?2*(this.pageWidth+1):this.pageWidth);
var b=20+bookConfig.rightMargin,c=templateArea.getTopHeight()+10+bookConfig.topMargin;this.map.css({left:"auto",right:b+"px",top:c,width:this.width+"px",height:this.height+"px"});$(".map_img").css({width:this.pageWidth+"px",height:this.pageHeight+"px"});this.doublePage=this.book.doublePage},fillContent:function(b){this.visible&&(b=BookInfo.getCurrentPages(),this.doublePage=1<b.length,bookConfig.FlipDirection?(this.doublePage?(this.fillImage(this.imageLeft,b[0]),this.fillImage(this.imageRight,b[1]),
this.imageLeft.show(),this.imageRight.show(),this.imageLeft.css({"border-bottom":"none"})):(this.fillImage(this.imageLeft,b[0]),this.imageLeft.show(),this.imageRight.hide(),this.imageLeft.css({"border-bottom":"1px solid gray"})),this.height=this.pageHeight,this.doublePage&&(this.height=2*(this.pageHeight+1)),this.map.css({height:this.height+"px"})):(this.doublePage?(this.fillImage(this.imageLeft,b[0]),this.fillImage(this.imageRight,b[1]),this.imageLeft.show(),this.imageRight.show(),this.imageLeft.css({"border-right":"none"})):
(this.fillImage(this.imageLeft,b[0]),this.imageLeft.show(),this.imageRight.hide(),this.imageLeft.css({"border-right":"1px solid gray"})),this.width=this.pageWidth,this.doublePage&&(this.width=2*(this.pageWidth+1)),this.map.css({width:this.width+"px"})),$(".map_img").css({width:this.pageWidth+"px",height:this.pageHeight+"px"}))},fillImage:function(b,c){b&&pageResourceLoad(c,"thumb",function(d){b.attr("src",d)})},refreshArea:function(){if(this.book.showPage){var b=this.book.showPage,c=b.width(),d=b.height();
b=getTransform(b[0]);var e=this.getBookPosition();if(1==this.book.doublePage&&0==this.doublePage)if(bookConfig.FlipDirection){d/=2;var f=BookInfo.getBook().getCurrentPageIndex();BookInfo.isLeftPage(f,!0)||(e.top+=d)}else c/=2,f=BookInfo.getBook().getCurrentPageIndex(),BookInfo.isLeftPage(f,!0)||(e.left+=c);f=-(e.left+b.x);var g=-(e.top+b.y);b=(f+windowWidth)/c;e=(g+windowHeight)/d;c=Math.max(0,f/c);d=Math.max(0,g/d);b=Math.min(1,b);e=Math.min(1,e);f=this.width;this.mapCursor.css({left:c*f,top:d*this.height,
width:(b-c)*f,height:(e-d)*this.height})}},getBookPosition:function(){var b=this.book.showPage.css("left");b=parseInt(b.replace("px",""));var c=this.book.showPage.css("top");c=parseInt(c.replace("px",""));return{left:b,top:c}},initEvent:function(){var b=new Hammer.Manager(this.mapCursor[0]);b.add(new Hammer.Pan);b.on("panstart panmove panend pancancel",this.onPan.bind(this))},onPan:function(b){if(b&&b.pointers&&1==b.pointers.length){var c=this.book.showPage.width()/this.width,d=this.book.showPage.height()/
this.height;c=this.book.showPage.panForMove(this.book.showPage,-b.deltaX*c,-b.deltaY*d,!1);this.refreshArea();this.mapCursor.css({"background-color":"RGBA(245,225,135,0.8)",cursor:"move"});if("panend"==b.type||"pancancel"==b.type)this.mapCursor.css({"background-color":"RGBA(250,240,185,0.5)",cursor:"default"}),this.book.showPage.setZoomParameters(this.book.showPage,c),this.book.showPage.restrictInBoundary(this.book.showPage,this.refreshArea.bind(this))}}}),FlipShotBar=Class({create:function(b){this.flipShotObj=
$("<div id='flipShotBar' class='flipShotBar'></div>");this.flipShotObj.css({"z-index":2*(bookConfig.totalPageCount+5)+1});this.isLeft=b;this.visible=!0;this.width=50;this.height=0;this.init();this.initEvents();this.flipShotObj.append(this.firstDiv);this.flipShotObj.append(this.prevDiv)},init:function(){this.firstDiv=$("<div class='flipbutton upbutton'></div>");this.prevDiv=$("<div class='flipbutton downbutton'></div>");this.isLeft?(this.firstDiv.addClass("left"),this.prevDiv.addClass("left"),this.prevImageUrl=
uiBaseURL+"slide_leftButton.png",this.firstImageUrl=uiBaseURL+"catalog_firstButton.png"):(this.firstDiv.addClass("right"),this.prevDiv.addClass("right"),this.prevImageUrl=uiBaseURL+"slide_rightButton.png",this.firstImageUrl=uiBaseURL+"catalog_lastButton.png");this.prevDiv.append("<img src='"+this.prevImageUrl+"'/>");this.firstDiv.append("<img src='"+this.firstImageUrl+"'/>")},onResize:function(b,c){var d=Math.min(50,.7*c/8),e=Math.min(.7*c,310);this.width=d;this.height=e;this.flipShotObj.css({width:d,
height:e});this.setPosition(b,c)},setPosition:function(b,c){this.flipShotObj.css({left:this.isLeft?1-this.width:"100%",top:(c-this.height)/2})},setScale:function(b){this.width*=b;this.height*=b;this.flipShotObj.css({width:this.width,height:this.height})},setVisible:function(b){this.flipShotObj.css({display:b?"block":"none"});this.visible=b},getContainer:function(){return this.flipShotObj},initEvents:function(){this.isLeft?(this.prevDiv.bind(_event._end,function(b){rightToLeft?nextPageFun("flip shot bar"):
previousPageFun("flip shot bar")}),this.firstDiv.bind(_event._end,function(b){rightToLeft?lastPageFun("flip shot bar"):firstPageFun("flip shot bar")})):(this.prevDiv.bind(_event._end,function(b){rightToLeft?previousPageFun("flip shot bar"):nextPageFun("flip shot bar")}),this.firstDiv.bind(_event._end,function(b){rightToLeft?firstPageFun("flip shot bar"):lastPageFun("flip shot bar")}));this.prevDiv.on("mousedown mouseup touchstart",function(b){b.stopPropagation()});this.firstDiv.on("mousedown mouseup touchstart",
function(b){b.stopPropagation()})},setVisibleByIndex:function(b){this.isLeft?(1<b&&(rightToLeft||this.setVisible(!0)),b<originTotalPageCount-1&&rightToLeft&&this.setVisible(!0),3>=b&&(bookConfig.RightToLeft||1>=b&&this.setVisible(!1)),b>=originTotalPageCount-2&&bookConfig.RightToLeft&&b>=originTotalPageCount-1&&this.setVisible(!1)):(1<b&&rightToLeft&&this.setVisible(!0),b<originTotalPageCount-1&&(rightToLeft||this.setVisible(!0)),3>=b&&bookConfig.RightToLeft&&1>=b&&this.setVisible(!1),b>=originTotalPageCount-
2&&(bookConfig.RightToLeft||b>=originTotalPageCount-1&&this.setVisible(!1)))},refresh:function(){}}),setCurrentIndexTextField=function(b){b=getShownPageNumberInfo(b);$("#guidPageIndex").html("<b>"+b+"</b>");$("#currentPageIndexTextField")&&$("#currentPageIndexTextField")[0]&&!$("#currentPageIndexTextField")[0].onFocus&&$("#currentPageIndexTextField").val(b);if(isMacOSChrome()){var c,d;null==(c=global)||null==(d=c.toolBar)||d.resetPageNumberSize(b.length)}c=$(".currentPageIndexTextField");for(d=0;d<
c.length;d++)c[d]&&!c[d].onFocus&&$(c[d]).val(b)},getShownPageNumberInfo=function(b){BookInfo.isDoublePage();b=BookInfo.getCurrentPages();for(var c=originTotalPageCount,d="",e=0;e<b.length;e++){var f=getShownPageNumber(b[e]);0!=e&&d!=f&&(d+="-");d!=f&&(d+=f)}0==b.length&&(d=getShownPageNumber(1));bookConfig.totalPagesCaption&&(c=bookConfig.totalPagesCaption);return rightToLeft?c+"/"+d:d+"/"+c},getShownPageArray=function(){var b=bookConfig.pageNumberCaption+"",c=originTotalPageCount;";"==b.substr(b.length-
1,1)&&(b=b.substr(0,b.length-1));b=b.split(";");for(var d=[],e=0;e<b.length;e++)if(""!=b[e]&&void 0!=b[e]){var f=b[e].split(":");if(f[0])if(f[1]||(f[1]=""),-1<f[1].indexOf("+")){var g=f[0];g.indexOf("-");g=g.split("-");var h=g[0];g=g[1];h=parseInt(h);var k=g?parseInt(g):c;f=getPageNumberFormat(f[1]);for(var l=h;l<=k;l++){var n=(l-h)*f.addition+f.startPage;g="";0==f.type&&(g=n+"");1==f.type&&(g=parseRoman(n));2==f.type&&(g=parseRoman(n).toLowerCase());d[l]=String.format(f.page,g)}}else if(!isNaN(f[0]))h=
parseInt(f[0]),d[h]=void 0==f[1]?"":f[1];else if(-1<f[0].indexOf("-"))for(g=f[0],g.indexOf("-"),g=g.split("-"),h=g[0],g=g[1],h=parseInt(h),k=g?parseInt(g):c,l=h;l<=k;l++)d[l]=void 0==f[1]?"":f[1]}return d};
function getPageNumberFormat(b){var c={page:"%s",startPage:1,type:0,addition:1};if(-1<b.indexOf("{")){var d=b.indexOf("{"),e=b.indexOf("}")+1;d=b.substring(d,e);c.page=b.replace(d,"%s");-1<d.indexOf("N+")&&(c.type=0);-1<d.indexOf("R+")&&(c.type=1);-1<d.indexOf("r+")&&(c.type=2);d=d.subBetween("+","}");c.startPage=""==d?1:parseInt(d)}else d=b.split("+")[0],b=b.split("+")[1],c.startPage=""==d?1:parseInt(d),b&&(c.addition=parseInt(b));return c}
function parseRoman(b){if(isNaN(b))return"";for(var c=[" I II III IV V VI VII VIII IX".split(" ")," X XX XXX XL L LX LXX LXXX XC".split(" ")," C CC CCC CD D DC DCC DCCC CM".split(" ")],d="",e,f=0,g=1E3;3>f;f++,g/=10)e=Math.floor(b%g/(g/10)),d+=c[2-f][e];return d}
var getShownPageNumber=function(b){var c=bookConfig.pageNumberCaption;if(""==c||void 0==c)return b;b=parseInt(b);c=getShownPageArray();return void 0==c[b]?b:c[b]},getRealPageNumber=function(b){b=getRealPage(b);isNaN(b)&&(b=1);return b},getRealPage=function(b,c){c=void 0===c?!1:c;var d=bookConfig.pageNumberCaption;if(""==d||void 0==d)return parseInt(b);b+="";d=getShownPageArray();for(var e=c?[]:-1,f=d.length,g=1;g<=f;g++)if(c)(d[g]+"").includes(b)&&e.push(g);else if(d[g]+""==b){e=g;break}return c?
0<e.length?e:"error":-1!=e?e:isNaN(parseInt(b))||void 0!==d[parseInt(b)]?"error":parseInt(b)},setLocationHash=function(b){bookConfig.updateURLForPage&&(window.location.hash="#p="+getShownPageNumber(b))},nextPageFun=function(b){switch(bookType){case BookType.normal_book:gotoPageFun(BookInfo.getMinPageIndex(flipBook.getCurrentPageIndex())+2,!1,b);break;case BookType.single_book:gotoPageFun(parseInt(singlePageBook.currentPageIndex)+1,!1,b);break;case BookType.slide_book:gotoPageFun(BookInfo.getMinPageIndex(slideBook.getRealPageIndex())+
2,!1,b);break;case BookType.singleSlide_book:gotoPageFun(parseInt(singleSlideBook.getRealPageIndex())+1,!1,b);break;case BookType.catalog_book:gotoPageFun(BookInfo.getMinPageIndex(catalogBook.getCurrentPageIndex())+2,!1,b);break;case BookType.singleCatalog_book:gotoPageFun(parseInt(singleCatalogBook.currentIndex)+1,!1,b);break;case BookType.documentView_book:gotoPageFun(BookInfo.getMinPageIndex(singleDocumentViewBook.getRealPageIndex())+2,!1,b);break;case BookType.singleDocumentView_book:gotoPageFun(parseInt(singleDocumentViewBook.getRealPageIndex())+
1,!1,b);break;case BookType.card_book:gotoPageFun(parseInt(cardBook.getCurrentPageIndex())+1,!1,b);break;case BookType.invert_book:gotoPageFun(parseInt(invertBook.getCurrentPageIndex())+1,!1,b)}},previousPageFun=function(b){switch(bookType){case BookType.normal_book:gotoPageFun(BookInfo.getMaxPageIndex(flipBook.getCurrentPageIndex())-2,!1,b);break;case BookType.catalog_book:gotoPageFun(BookInfo.getMaxPageIndex(catalogBook.getCurrentPageIndex())-2,!1,b);break;case BookType.single_book:gotoPageFun(parseInt(singlePageBook.currentPageIndex)-
1,!1,b);break;case BookType.slide_book:gotoPageFun(BookInfo.getMaxPageIndex(slideBook.getRealPageIndex())-2,!1,b);break;case BookType.singleSlide_book:gotoPageFun(singleSlideBook.getRealPageIndex()-1,!1,b);break;case BookType.singleCatalog_book:gotoPageFun(parseInt(singleCatalogBook.currentIndex)-1,!1,b);break;case BookType.documentView_book:gotoPageFun(BookInfo.getMinPageIndex(singleDocumentViewBook.getRealPageIndex())-2,!1,b);break;case BookType.singleDocumentView_book:gotoPageFun(parseInt(singleDocumentViewBook.getRealPageIndex())-
1,!1,b);break;case BookType.card_book:gotoPageFun(parseInt(cardBook.getCurrentPageIndex())-1,!1,b);break;case BookType.invert_book:gotoPageFun(parseInt(invertBook.getCurrentPageIndex())-1,!1,b)}},firstPageFun=function(b){gotoPageFun(1,!1,b)},lastPageFun=function(b){gotoPageFun(originTotalPageCount,!1,b)},delayToFlipFirstTimer=null,gotoPageFun=function(b,c,d){if(!(isNaN(b)||BookEvent.trigger("beforeFlipPage",[b])||(window.hashGotoPageTimer&&clearTimeout(window.hashGotoPageTimer),gotoPageVisit(b,d),
BookEvent.suspendFlipPage&&0<=BookInfo.getCurrentPagesByIndex(b).indexOf(parseInt(BookEvent.suspendFlipPage))))){b=parseInt(b);var e=bookConfig.totalPageCount;bookConfig.SingleModeBanFlipToLastPage&&bookType==BookType.single_book&&(e=Math.max(1,bookConfig.totalPageCount-1));if(1>b&&bookConfig.isShowFirstOrLastPagePrompt||b>e&&bookConfig.isShowFirstOrLastPagePrompt){if(0>BookInfo.getCurrentPages().indexOf(e)&&b>e){gotoPageFun(e,c,d);return}if(0>BookInfo.getCurrentPages().indexOf(1)&&1>b){gotoPageFun(1,
c,d);return}if(bookConfig.isShowFirstOrLastPagePrompt){b=1>b?getLanguage("lblFirst","This is the first page"):getLanguage("lblLast","This is the last page");global._tipsBox||(_tipsBox=new TipsBox(b,bookContainer));_tipsBox.setCaption(b);_tipsBox.showTipsBox();return}}d=b;BookInfo.isDoublePage()&&(d=BookInfo.getMaxPageIndex(d));d=Math.max(1,d);if(passwardType()&&bookConfig.excludeFrontPages&&d>=parseInt(bookConfig.excludeFrontPages)&&!verifyPassward()&&(global.passwardPannel||(global.passwardPannel=
new PasswardPannel),global.passwardPannel.show(),d>parseInt(bookConfig.excludeFrontPages)))return;switch(bookType){case BookType.normal_book:flipBook.gotoPage(b,c);break;case BookType.single_book:singlePageBook.gotoPage(b,c);break;case BookType.slide_book:slideBook.gotoPage(b,c);break;case BookType.singleSlide_book:singleSlideBook.gotoPage(b,c);break;case BookType.catalog_book:catalogBook.gotoPage(b,c);break;case BookType.singleCatalog_book:singleCatalogBook.gotoPage(b,c);break;case BookType.documentView_book:singleDocumentViewBook.gotoPage(b,
c);break;case BookType.singleDocumentView_book:singleDocumentViewBook.gotoPage(b,c);break;case BookType.card_book:cardBook.gotoPage(b,c);break;case BookType.invert_book:invertBook.gotoPage(b,c)}global.bookmark&&global.bookmark.elements.refreshElements();bookConfig.SelectTextButtonVisible&&BookInfo.getBook().unSelect();bookConfig.MagnifierButtonVisible&&BookInfo.getBook().unMagnifierZoom();global.annotationPannel&&global.annotationPannel.clearBtnDownCase();bookConfig.addCurrentPage&&global.sharePanel&&
global.sharePanel.elements&&global.sharePanel.elements.fillArea(!0,"link");global.downLoadBody&&downLoadBody.gotoPage(b);if(bookConfig.AnnotationButtonVisible&&!isPhone()&&!isPad()&&BookInfo.getBook().bookAttachments.noteAdd)BookInfo.getBook().bookAttachments.noteAdd.onResize();setCurrentIndexTextField(BookInfo.getCurrentPageIndex(),BookInfo.isDoublePage());setLocationHash(BookInfo.getCurrentPageIndex());global.phoneGotoPagePanel&&global.phoneGotoPagePanel.visible&&global.phoneGotoPagePanel.refreshSlider();
global.NeatStyle&&NeatStyle.refreshSlider();global.assistant&&global.assistant.refresh();global.pcArticlePages&&(global.pcArticlePages.clearHighLight(),global.pcArticlePages.setHighLight(b));global.phoneArticlePages&&(global.phoneArticlePages.clearHighLight(),global.phoneArticlePages.setHighLight(b));global.flipPageAudio&&global.flipPageAudio.playByIndex(b);global.phoneGotoPagePanel&&global.phoneGotoPagePanel.showFirstOrLast();global.flipShotButton&&global.flipShotButton.showFirstOrLast();global.toolbar&&
global.toolBar&&global.toolBar.showFirstOrLast&&global.toolBar.showFirstOrLast();bookConfig.delayToFlipFirst&&1!==b&&(delayToFlipFirstTimer&&clearTimeout(delayToFlipFirstTimer),delayToFlipFirstTimer=setTimeout(function(){firstPageFun("auto flip")},1E3*bookConfig.timeToFlipFirst))}},gotoPageVisit=function(b,c){var d=window.lastVisitTime?(new Date).getTime()-window.lastVisitTime:0;window.lastVisitTime=(new Date).getTime();0>=b||b>bookConfig.totalPageCount||BookEvent.trigger("flipPage",[c,BookInfo.getCurrentPages().join("-"),
BookInfo.getCurrentPagesByIndex(b).join("-"),d])},BookInfo=Class({statics:{getCurrentPages:function(){var b=[];if(this.isDoublePage()){var c=this.getCurrentPageIndex();b=this.getPagesByIndex(c)}else c=this.getCurrentPageIndex(),b.push(c);return b},getCurrentPagesByIndex:function(b){var c=[];this.isDoublePage()?c=this.getPagesByIndex(b):c.push(b);return c},getPageCount:function(){return bookConfig.totalPageCount},isRightToLeft:function(){return rightToLeft},getBookType:function(){return bookType},
getBook:function(){switch(this.getBookType()){case BookType.normal_book:var b=global.flipBook;break;case BookType.single_book:b=global.singlePageBook;break;case BookType.slide_book:b=global.slideBook;break;case BookType.singleSlide_book:b=global.singleSlideBook;break;case BookType.catalog_book:b=global.catalogBook;break;case BookType.singleCatalog_book:b=global.singleCatalogBook;break;case BookType.documentView_book:b=global.singleDocumentViewBook;break;case BookType.singleDocumentView_book:b=global.singleDocumentViewBook;
break;case BookType.card_book:b=global.cardBook;break;case BookType.invert_book:b=global.invertBook}return b},getBooks:function(){var b=[];global.flipBook&&b.push(global.flipBook);global.singlePageBook&&b.push(global.singlePageBook);global.slideBook&&b.push(global.slideBook);global.singleSlideBook&&b.push(global.singleSlideBook);global.catalogBook&&b.push(global.catalogBook);global.singleCatalogBook&&b.push(global.singleCatalogBook);global.cardBook&&b.push(global.cardBook);global.invertBook&&b.push(global.invertBook);
return b},getCurrentPageIndex:function(){var b=this.getBook();return b&&b.getCurrentPageIndex?b.getCurrentPageIndex():bookConfig.OriginPageIndex},isDoublePage:function(b){var c=this.getBookType();void 0!=b&&(c=b);switch(c){case BookType.single_book:return!1;case BookType.singleSlide_book:return!1;case BookType.singleCatalog_book:return!1;case BookType.documentView_book:return!1;case BookType.singleDocumentView_book:return!1;case BookType.card_book:return!1;case BookType.invert_book:return!1}return!0},
left:function(){var b=this.getBook();return b&&b.getLeft?b.getLeft():0},top:function(){var b=this.getBook();return b&&b.getTop?b.getTop():0},width:function(){var b=this.getBook();return b&&b.getWidth?b.getWidth():0},height:function(){var b=this.getBook();return b&&b.getHeight?b.getHeight():0},scale:function(){var b=this.getBook();return b&&b.getScale?b.getScale():0},isZoomming:function(){return bookType===BookType.documentView_book||bookType===BookType.singleDocumentView_book?this.getBook().docViewBook.parameters.zoomming:
this.getBook().showPage.parameters.zoomming},zoomStatus:function(){return this.getBook()&&this.getBook().status_zoom?!0:!1},container:function(){return bookContainer},getThumbnailPages:function(){for(var b=[],c=Math.ceil(bookConfig.totalPageCount/2),d=0;d<=c;d++){var e=this.getPagesByIndex(2*d+1);0<e.length&&b.push(e)}return b},getPagesByIndex:function(b){function c(f){1<=f&&f<=bookConfig.totalPageCount&&d.push(f)}var d=[];if(bookConfig.isTheBookOpen){b=2*Math.ceil(b/2);var e=b-1}else e=2*Math.floor(b/
2),b=e+1;rightToLeft?(c(b),c(e)):(c(e),c(b));return d},isLeftPage:function(b,c){c=void 0==c?this.isDoublePage():c;if(!c&&!rightToLeft)return!1;if(!c&&rightToLeft||(0==b%2&&!rightToLeft||0!=b%2&&rightToLeft)&&!bookConfig.isTheBookOpen)return!0;if((0==b%2&&!rightToLeft||0!=b%2&&rightToLeft)&&bookConfig.isTheBookOpen||(0==b%2&&rightToLeft||0!=b%2&&!rightToLeft)&&!bookConfig.isTheBookOpen)return!1;if((0==b%2&&rightToLeft||0!=b%2&&!rightToLeft)&&bookConfig.isTheBookOpen)return!0},isInnerPage:function(b,
c){if(1!=b&&c==BookType.single_book||!this.isCoverPage(b)&&c!=BookType.single_book)return!0},isCoverPage:function(b,c){return 0<=[1,totalPageCount].indexOf(b)&&!bookConfig.isTheBookOpen||b==totalPageCount&&bookConfig.isTheBookOpen?!0:!1},getHardCoverPages:function(b){if(b&&rightToLeft&&!bookConfig.isTheBookOpen)return[totalPageCount-1,2];if(b&&!rightToLeft&&!bookConfig.isTheBookOpen)return[2,totalPageCount-1];if(b&&rightToLeft&&bookConfig.isTheBookOpen)return[0==bookConfig.totalPageCount%2?bookConfig.totalPageCount:
bookConfig.totalPageCount-1,1];if(b&&!rightToLeft&&bookConfig.isTheBookOpen)return[1,0==bookConfig.totalPageCount%2?bookConfig.totalPageCount:bookConfig.totalPageCount-1];if(!b)return[bookConfig.totalPageCount]},getSensitiveIndex:function(b){if(b&&!bookConfig.isTheBookOpen)return b=totalPageCount-2,{min:3,max:b};if(b&&bookConfig.isTheBookOpen)return b=totalPageCount-2,{min:4,max:b};b=bookConfig.totalPageCount;return{min:2,max:b}},getMinPageIndex:function(b){return b=bookConfig.isTheBookOpen?2*Math.ceil(b/
2)-1:2*Math.floor(b/2)},getMaxPageIndex:function(b){return b=bookConfig.isTheBookOpen?2*Math.ceil(b/2):2*Math.floor(b/2)+1},getLeftPageIndex:function(b){b=this.getPagesByIndex(b);return 1==b.length&&(1==b[0]&&!bookConfig.RightToLeft||b[0]==totalPageCount&&bookConfig.RightToLeft)?null:b[0]},getRightPageIndex:function(b){b=this.getPagesByIndex(b);return 1==b.length?1==b[0]&&bookConfig.RightToLeft||b[0]==totalPageCount&&!bookConfig.RightToLeft?null:b[0]:b[1]},getLeftPages:function(b){void 0==b&&(b=this.getCurrentPageIndex());
b=this.getMinPageIndex(b);return bookConfig.RightToLeft?[b+1,b+2,b+3]:[b,b-1,b-2]},getRightPages:function(b){void 0==b&&(b=this.getCurrentPageIndex());b=this.getMinPageIndex(b);return bookConfig.RightToLeft?[b,b-1,b-2]:[b+1,b+2,b+3]},getAttachmentByName:function(b){var c=this.getBook();if(!c)return null;var d;return(b=null==c?void 0:null==(d=c.bookAttachments)?void 0:d.getItemByName(b))?b:null}}}),FlipHistory=Class({create:function(){this.array=[];this.currentIndex=0},backward:function(){var b=this.currentIndex-
1;void 0!=this.array[b]&&(this.currentIndex=b,gotoPageFun(this.array[b].index,!0,"history"))},forward:function(){var b=this.currentIndex+1;void 0!=this.array[b]&&(this.currentIndex=b,gotoPageFun(this.array[b].index,!0,"history"))},addFromCurrentIndex:function(b){this.array=this.array.slice(0,this.currentIndex+1);this.array.push({index:b});this.currentIndex=this.array.length-1},push:function(b){this.array.push({index:b})}}),flipHistory=new FlipHistory,IssuuPage=Class({create:function(b,c,d,e){this._super(b,
c,d,e);this.renderPage();this.addFlipShadow()},remove:function(){this.sideImage&&this.sideImage.remove();this.side.remove();this.sideImage=this.side=void 0;this.pageBackground&&this.pageBackground.destroy();this.render&&(this.render.taskPool.stop(),this.renderInterval&&(window.clearInterval(this.renderInterval),this.renderInterval=void 0));this.hasReader&&this.destroySlider()},destroy:function(){this.pageBackground&&this.pageBackground.destroy();this.sideImage=this.side=void 0;this.hasReader&&this.destroySlider()},
hasReader:function(){return window.readerConfig&&0<window.readerConfig.pages.length&&window.readerConfig.pages.length>=this.pageIndex&&(this.hasReaderItems()||window.inverseEditor&&window.inverseEditor.length&&window.inverseEditor[this.pageIndex-1]&&window.inverseEditor[this.pageIndex-1].length)?!0:!1},hasReaderItems:function(){var b=window.readerConfig.pages[this.pageIndex-1];return b&&0!==Object.values(b).filter(function(c){return Array.isArray(c)&&c.length}).length},loading:function(){"restrict"==
BookRestrict.isRestrictPage(this.pageIndex)||this.originalImageLoaded||this.removeLoad||(this.loadingImage||(this.loadingImage=$("<div class='loadingOuter'><img alt='loadingOuter' width='auto' height='auto' class='loadingImage' src='"+bookConfig.pageLoadingUrl+"'/></div>")),this.sideContent.append(this.loadingImage))},unLoading:function(b){this.hasReader()&&!b||!this.loadingImage||(this.loadingImage.css({display:"none"}),this.loadingImage.remove(),this.loadingImage=null)},restrict:function(){if(!this.restrictImage){this.restrictImage=
$("<div class='loadingOuter'></div>");var b=1==this.pageIndex?getMeta("og:image"):bookConfig.pageRestrictUrl;this.restrictImage.css({"background-image":"url("+b+")"});1==this.pageIndex?this.restrictImage.css({"background-size":"contain"}):this.restrictImage.css({"background-size":"auto"});this.mirrorRestrict();this.sideContent.append(this.restrictImage)}},unRestrict:function(){this.restrictImage&&(this.restrictImage.remove(),this.restrictImage=null)},mirrorRestrict:function(){if(this.isMirrorSide&&
this.restrictImage){var b="scaleX(-1)";bookConfig.FlipDirection&&(b="scaleY(-1)");this.restrictImage.css({"-webkit-transform":b,"-moz-transform":b,"-o-transform":b,"-ms-transform":b,opacity:.2})}},mirrorSide:function(){this.isMirrorSide=!0;var b="scaleX(-1)";bookConfig.FlipDirection&&(b="scaleY(-1)");this.sideImage.css({"-webkit-transform":b,"-moz-transform":b,"-o-transform":b,"-ms-transform":b,opacity:.2});this.rendering&&(this.rendering.destroy(),this.rendering=null);this.unLoading()},fillPreviewImage:function(){var b=
this,c,d;return $jscomp.asyncExecutePromiseGeneratorProgram(function(e){if(1==e.nextAddress)return bookConfig.loadPreviewImage?b.isMirrorSide||window.sliderJS&&window.sliderJS[b.pageIndex-1]&&sliderJS[b.pageIndex-1].elements&&sliderJS[b.pageIndex-1].elements.length?e.jumpTo(0):e.yield(getPageDir(b.pageIndex,"previewPage",originTotalPageCount),3):e.return();c=e.yieldResult;c.startsWith("none")||(b.sideImage.css({"background-image":"url("+c+")","background-size":"contain","background-repeat":"no-repeat",
"background-position":"center"}),bookConfig.removeLoad&&(d=$("<img src='"+c+"'/>"),d[0].onload=function(){this.unLoading();this.unRestrict();this.removeLoad=!0}.bind(b)));e.jumpToEnd()})},setFlipShadow:function(b,c,d){this.pageFlipShadow&&this.pageFlipShadow.flip(b,c,d)},addFlipShadow:function(){bookConfig.HardInnerPageEnable?this.addHardFlipShadow():this.pageFlipShadow||(this.pageFlipShadow="magazine"==bookConfig.pageHighlightType?new IssuuPageHighlightsFlipShadow(this.side,this.pageIndex):new IssuuPageFlipShadow(this.side,
this.pageIndex))},addHardFlipShadow:function(){this.pageFlipShadow||(this.pageFlipShadow=new HardPageFlipShadow(this.side))},clearFlipShadow:function(){this.pageFlipShadow&&this.pageFlipShadow.clear();this.side.removeClass("boxShadow")},resizeFlipShadow:function(b,c){this.pageFlipShadow&&this.pageFlipShadow.resize(b,c)},centerPage:function(){this.isLeft=!1;this.side.attr("class","center-side")},setLeftOrRight:function(b){(this.isLeft=b)?this.side.attr("class","left-side"):this.side.attr("class","right-side")},
setUpOrDown:function(b){(this.isUp=b)?this.side.attr("class","up-side"):this.side.attr("class","down-side")},renderPage:function(){this.rendering&&(this.rendering.destroy(),this.rendering=null);this.rendering=new PageRendering(this.side,this.pageIndex,this.bookType);this.rendering.onResize(this.width,this.height);this.rendering.render()},hideMiddleShadow:function(){this.rendering&&this.rendering.hideMiddleShadow()},fillContent:function(b){"restrict"==BookRestrict.isRestrictPage(this.pageIndex)?this.restrict():
this.fillPage(this.pageIndex,b)},fillPage:function(b,c,d){this.isMirrorSide&&!bookConfig.showMirrorSide||b!=this.pageIndex||this.originalImageLoaded||(d||(d="normal",this.isMirrorSide&&(d="thumb")),"normal"==d&&(bookConfig.usePdfJs?(b=function(e,f,g){this.pageBackground.load.renderCnvas(e,f,g,this.pageIndex,this.pageWidth,this.pageHeight,this.initContents.bind(this))}.bind(this),this.initPageBackground(c,"normal",b)):this.initPageBackground(c,"normal",this.initContents.bind(this))),"thumb"==d&&(this.type=
"thumb",this.initPageBackground(c,"thumb",this.onMirrorSideLoaded.bind(this))))},initPageBackground:function(b,c,d){if(!this.pageBackground||b)this.pageBackground=new IsuuPageBackground(this.pageIndex,c,d,this.pageWidth,this.pageHeight,this.isMirrorSide,this.sideImage),this.imageURL=this.pageBackground.imageURL},initContents:function(b,c,d){imageLoaded[this.pageIndex]=!0;this.isReaderConfigLoaded(function(){try{this.onOriginalImageLoaded(b,c,d)}catch(e){}}.bind(this))},onMirrorSideLoaded:function(b,
c,d){b&&(this.originalImageLoaded=!1,this.unLoading(),this.unRestrict(),isPhone()||isPad()?bookConfig.EnableRecognizeQRcodePressOnMobile||$(d).css({"pointer-events":"none"}):bookConfig.isStopMouseMenu&&$(d).css({"pointer-events":"none"}),this.sideImage&&this.sideImage.empty().append(d))},onOriginalImageLoaded:function(b,c,d){var e=this,f,g,h,k;return $jscomp.asyncExecutePromiseGeneratorProgram(function(l){if(!b)return l.return();e.originalImageLoaded=!0;e.unLoading();e.unRestrict();if(e.sideImage&&
("string"==typeof c&&!c.startsWith("none")||"string"!=typeof c))if("string"==typeof c||"object"==typeof c&&0<=c[0].indexOf(".zip"))isPhone()||isPad()?bookConfig.EnableRecognizeQRcodePressOnMobile||$(d).css({"pointer-events":"none"}):bookConfig.isStopMouseMenu&&$(d).css({"pointer-events":"none"}),e.sideImage.empty().append(d);else{e.sideImage.empty();for(f=0;f<d.length;f++)isPhone()||isPad()?bookConfig.EnableRecognizeQRcodePressOnMobile||$(d).css({"pointer-events":"none"}):bookConfig.isStopMouseMenu&&
$(d).css({"pointer-events":"none"}),e.sideImage.append(d[f]);e.imageWidth=d[0][0].naturalWidth;e.imageHeight=d[0][0].naturalHeight}g=fitPageWidthHeight(e.pageWidth,e.pageHeight,e.imageWidth,e.imageHeight);!bookConfig.isSingleBookFullWindowOnMobile||1!=e.bookType||!isPhone()&&!isPad()||e.imageWidth||e.imageHeight||(g=fitPageWidthHeight(e.pageWidth,e.pageHeight,bookConfig.largePageWidth,bookConfig.largePageHeight),h=bookConfig.largePageWidth/bookConfig.largePageHeight,k=e.pageWidth/e.pageHeight,.01>
h-k&&-.01<h-k&&(g.x=e.pageWidth,g.y=e.pageHeight),e.imageWidth=g.x,e.imageHeight=g.y);e.pageAttachments||(e.pageAttachments=new IssuuPageAttachmentsParser(e.sideContent,e.pageWidth,e.pageHeight,e.pageWidth,e.pageHeight,e.pageIndex,e.bookType,e,function(){if(this.onPageLoaded)this.onPageLoaded(this.pageIndex)}.bind(e)));l.jumpToEnd()})},isReaderConfigLoaded:function(b){try{var c=function(){try{b&&b()}catch(e){}};(window.readerConfig||window.readerConfigLoaded)&&c();var d=window.setInterval(function(){window.readerConfigLoaded&&
(window.clearInterval(d),c())},100)}catch(e){}},onPageLoaded:function(){var b=this.pageIndex;BookInfo.getBook().getRealBookIndex&&(b=BookInfo.getBook().getRealBookIndex(this.pageIndex));BookInfo.getBook().onBookPageLoaded(b)},enterSide:function(){this.pageAttachments&&this.pageAttachments.enterSide();this.pageBackground&&this.pageBackground.enterSide();window.vuePopDom&&window.vuePopDom.enterPage&&window.vuePopDom.enterPage()},leaveSide:function(){this.pageAttachments&&this.pageAttachments.leaveSide();
this.pageBackground&&this.pageBackground.leaveSide();window.vuePopDom&&window.vuePopDom.leavePage&&window.vuePopDom.leavePage()},initSelectTextEvent:function(){this.pageAttachments&&this.pageAttachments.select()},destroySelect:function(){this.pageAttachments&&this.pageAttachments.destroySelect()},initMagnifierEvent:function(){this.pageAttachments&&this.pageAttachments.initMagnifierEvent()},destroyMagnifier:function(){this.pageAttachments&&this.pageAttachments.destroyMagnifier()},pauseAnimation:function(){this.pageAttachments&&
this.pageAttachments.pauseAnimation()},startAnimation:function(){this.pageAttachments&&this.pageAttachments.startAnimation()},resetSlider:function(){this.pageAttachments&&this.pageAttachments.resetSlider()},destroySlider:function(){this.pageAttachments&&this.pageAttachments.destroySlider()},addHistoryTexts:function(){this.pageAttachments&&this.pageAttachments.addHistoryTexts()},highlightSearch:function(){this.pageAttachments&&this.pageAttachments.highlightSearch()},clearHighlight:function(){this.pageAttachments&&
this.pageAttachments.clearHighlight()},initReaderOrSlider:function(){this.pageAttachments&&this.pageAttachments.initReaderOrSlider()},onResize:function(b,c){this.resizePage(b,c);this.resizeFlipShadow(b,c);if(this.rendering)this.rendering.onResize(b,c);this.pageAttachments&&(fitPageWidthHeight(this.pageWidth,this.pageHeight,this.imageWidth,this.imageHeight),this.pageAttachments.onResize(this.pageWidth,this.pageHeight,this.pageWidth,this.pageHeight))},resizePage:function(b,c){this.width=b;this.height=
c;this.pageWidth=parseInt(100*b/(-parseFloat(bookConfig.visibleAreaLeft)+parseFloat(bookConfig.visibleAreaRight)));this.pageHeight=parseInt(100*c/(parseFloat(bookConfig.visibleAreaBottom)-parseFloat(bookConfig.visibleAreaTop)));this.side.css({width:b,height:c});this.sideContent.css({width:this.pageWidth,height:this.pageHeight,top:-this.pageHeight*parseFloat(bookConfig.visibleAreaTop)/100,left:-this.pageWidth*parseFloat(bookConfig.visibleAreaLeft)/100});if(this.pageBackground)this.pageBackground.onResize(this.pageWidth,
this.pageHeight)},zoomInSideImage:function(){this.pageBackground.zoomIn()},zoomOutSideImage:function(){this.pageBackground.zoomOut()},switchLargeImage:function(){this.pageBackground&&this.pageBackground.zoomIn(this.onSwitchImage.bind(this))},switchNormalImage:function(b){this.pageBackground&&this.pageBackground.zoomOut(b,this.onSwitchImage.bind(this))},onSwitchImage:function(b,c,d){if(!this.originalImageLoaded)this.initContents(b,c,d);else if(b)if("string"==typeof c)isPhone()||isPad()?bookConfig.EnableRecognizeQRcodePressOnMobile||
$(d).css({"pointer-events":"none"}):bookConfig.isStopMouseMenu&&$(d).css({"pointer-events":"none"}),this.sideImage.empty().append(d),this.imageWidth=d.naturalWidth,this.imageHeight=d.naturalHeight;else{this.sideImage.empty();for(b=0;b<d.length;b++)isPhone()||isPad()?bookConfig.EnableRecognizeQRcodePressOnMobile||$(d).css({"pointer-events":"none"}):bookConfig.isStopMouseMenu&&$(d).css({"pointer-events":"none"}),this.sideImage.append(d[b]);this.imageWidth=d[b][0].naturalWidth;this.imageHeight=d[b][0].naturalHeight}},
resizeSvg:function(b,c){try{this.pageBackground.resizeSvg(b,c)}catch(d){}}}).extend(Side);bdor[30]=function(b,c){return bdor[b]-c};bdor[38]=function(){return bdor[30](37,40)}();
var IssuuNormalPage=Class({create:function(b,c,d,e,f){this._super(b,c,d,e,f);this.$page=$("<div style='will-change: transform;-webkit-backface-visibility:hidden;backface-visibility:hidden;'></div>");this.$page.attr("id",c+"Mask"+b);this.$pageMask=$("<div class='mask-content'></div>");this.$page.append(this.$pageMask);this.setMaskCss();this.$pageMask.append(this.page.side)},setMaskCss:function(){if(bookConfig.FlipDirection){var b="vertical-mask";this.isSingleBook&&rightToLeft&&(b="single-book-right-vertical-mask");
this.isSingleBook&&!rightToLeft&&(b="single-book-vertical-mask")}else b="mask",this.isSingleBook&&rightToLeft&&(b="single-book-right-mask"),this.isSingleBook&&!rightToLeft&&(b="single-book-mask");this.setCSSByName(b)},onResize:function(b,c,d){this.pageWidth=b;this.pageHeight=c;d||(d=1);var e=parseInt(Math.sqrt(Math.pow(b,2)+Math.pow(c,2)));0!=(e-c)%2&&(e+=1);this.width=this.maskWidth=e;this.$page.css({width:b,height:c,opacity:d});this.$pageMask.css({width:e,height:e});if(this.page)this.page.onResize(b,
c);bookConfig.FlipDirection?(this.$pageMask.css({left:"50%","margin-left":-this.width/2+"px"}),this.page&&this.page.side.css({left:(this.width-b)/2})):(this.$pageMask.css({top:"50%","margin-top":-this.width/2+"px"}),this.page&&this.page.side.css({top:(this.width-c)/2}))},setLeftOrRight:function(b){var c=this.isSingleBook?"left-single-mask-side":"left-mask-side";b||(c=this.isSingleBook?"right-single-mask-side":"right-mask-side");this.setCSSByName(c);this.page&&this.page.setLeftOrRight(b)},setUpOrDown:function(b){var c=
this.isSingleBook?"up-single-mask-side":"up-mask-side";b||(c=this.isSingleBook?"down-single-mask-side":"down-mask-side");this.setCSSByName(c);this.page&&this.page.setUpOrDown(b)},beginToFlip:function(){this.setMaskCss()},setMaskCSSByStyle:function(b){this.$pageMask.css(b)}}).extend(PageInterface);bdor[39]=function(){return 8}();
var IssuuPageAttachmentsParser=function(b,c,d,e,f,g,h,k,l){this.parent=b;this.width=c;this.page=k;this.height=d;this.pageWidth=e;this.pageHeight=f;this.pageIndex=g;this.bookType=h;this.callback=l;this.createAttachmentsForPage()};IssuuPageAttachmentsParser.prototype.createAttachmentsForPage=function(){this.Items=new ObjectPool;this.factory=new PageAttachmentsFactory;this.isHiddenEditor()||getArticleEditor().then(this.createAnimation.bind(this));this.createAnnotation();this.highlightSearch()};
IssuuPageAttachmentsParser.prototype.isHiddenEditor=function(){return!bookConfig.isPreview||bookConfig.previewPages&&-1!==(Array.isArray(bookConfig.previewPages)&&bookConfig.previewPages.indexOf(this.pageIndex))?!1:!0};
IssuuPageAttachmentsParser.prototype.createAnimation=function(){this.hasAnimation()&&(this.createAnimationDom(),this.pageAnimation=this.factory.createAttachment("animation",this.$animation,this.width,this.height,this.pageIndex,this.parent,this.bookType,this.page,function(){this.callback();this.onResizeAnimation(this.width,this.height,this.pageWidth,this.pageHeight)}.bind(this)),this.Items.add(this.pageAnimation))};
IssuuPageAttachmentsParser.prototype.createAnimationDom=function(){this.$animation||(this.$animation=$("<div id='animation"+this.bookType+"-"+this.pageIndex+"' style='width:100%;height:100%;position:absolute;bottom:0;right:0;left:0;top:0;z-index:4;'></div>"),this.$animation.css({width:this.width+"px",height:this.height+"px"}),this.parent.append(this.$animation))};
IssuuPageAttachmentsParser.prototype.hasAnimation=function(){var b=this.pageIndex-1;return this.isHiddenEditor()?!1:global.pageEditor&&(!pageEditor.pageAnnos&&pageEditor[b]&&0<pageEditor[b].length||pageEditor.pageAnnos&&pageEditor.pageAnnos[b]&&0<pageEditor.pageAnnos[b].length)||global.sliderJS&&sliderJS[b]&&0<sliderJS[b].elements.length||global.inverseEditor&&global.inverseEditor.length&&global.inverseEditor[b]&&global.inverseEditor[b].length||window.assistantConfig||global.readerConfig&&global.readerConfig.pages&&
0<global.readerConfig.pages.length&&this.hasReaderItems()?!0:!1};IssuuPageAttachmentsParser.prototype.hasReaderItems=function(){var b=window.readerConfig.pages[this.pageIndex-1];return b&&0!==Object.values(b).filter(function(c){return Array.isArray(c)&&c.length}).length};IssuuPageAttachmentsParser.prototype.isHiddenEditor=function(){return!bookConfig.isPreview||bookConfig.previewPages&&-1!==(Array.isArray(bookConfig.previewPages)&&bookConfig.previewPages.indexOf(this.pageIndex))?!1:!0};
IssuuPageAttachmentsParser.prototype.select=function(){this.pageSelect||(this.$select=$("<div id='select"+this.bookType+"-"+this.pageIndex+"' style='cursor:text;width:100%;height:100%;position:absolute;left:0;top:0;z-index:4;'></div>"),this.$select.css({width:this.width+"px",height:this.height+"px",bottom:0,right:0,margin:"auto"}),this.pageSelect=this.factory.createAttachment("select",this.$select,this.width,this.height,this.pageIndex,this.parent,this.bookType),this.Items.add(this.pageSelect),this.parent.append(this.$select))};
IssuuPageAttachmentsParser.prototype.destroySelect=function(){this.Items.find("PageSelect").each(function(b){b.destroySelect()});this.Items.remove(this.pageSelect);this.$select=void 0;this.pageSelect=null};
IssuuPageAttachmentsParser.prototype.initMagnifierEvent=function(){this.pageMagnifier||(this.$magnifier=$("<div class='mgnifierBox' style='width:100%;height:100%;position:absolute;z-index:10;cursor:none;top:0;bottom:0;left:0;right:0;margin:auto;'></div>"),this.$magnifier.css({width:this.width+"px",height:this.height+"px",bottom:0,right:0,margin:"auto"}),this.pageMagnifier=this.factory.createAttachment("magnifier",this.$magnifier,this.width,this.height,this.pageIndex,this.parent,this.bookType),this.Items.add(this.pageMagnifier),
this.parent.append(this.$magnifier))};IssuuPageAttachmentsParser.prototype.destroyMagnifier=function(){this.Items.find("PageMagnifier").each(function(b){b.destroyMagnifier()});this.Items.remove(this.pageMagnifier);this.$magnifier=void 0;this.pageMagnifier=null};IssuuPageAttachmentsParser.prototype.addHistoryTexts=function(){this.Items.find("PageAnnotation").each(function(b){b.enterSide()})};
IssuuPageAttachmentsParser.prototype.highlightSearch=function(){if(bookConfig.SearchButtonVisible&&window.frmSearch&&!this.pageHighlight){var b=!0;window.frmSearch&&frmSearch.visible&&0<frmSearch.getList().length&&(b=!1);window.frmSearch&&(isPhone()||isPad())&&window.frmSearch.input.val()&&(b=!1);b||(this.$highlight=$("<div id='highlight"+this.bookType+"-"+this.pageIndex+"' style='pointer-events:none;width:100%;height:100%;position:absolute;left:0;top:0;z-index:4;' class='kong'></div>"),this.$highlight.css({width:this.width+
"px",height:this.height+"px",bottom:0,right:0,margin:"auto"}),this.pageHighlight=this.factory.createAttachment("highlight",this.$highlight,this.width,this.height,this.pageIndex,this.parent,this.bookType),this.Items.add(this.pageHighlight),this.parent.append(this.$highlight))}};IssuuPageAttachmentsParser.prototype.clearHighlight=function(){this.Items.find("PageHighlight").each(function(b){b.clearHighlight()});this.Items.remove(this.pageHighlight);this.$highlight=void 0;this.pageHighlight=null};
IssuuPageAttachmentsParser.prototype.createAnnotation=function(){bookConfig.AnnotationButtonVisible&&!this.pageAnnotation&&(this.createAnimationDom(),this.$annotation=this.$animation,this.pageAnnotation=this.factory.createAttachment("annotation",this.$annotation,this.pageWidth,this.pageHeight,this.pageIndex,this.parent,this.bookType),this.Items.add(this.pageAnnotation),this.onResizeAnimation(this.width,this.height,this.pageWidth,this.pageHeight))};IssuuPageAttachmentsParser.prototype.enterSide=function(){this.Items.each(function(b){b.enterSide()})};
IssuuPageAttachmentsParser.prototype.leaveSide=function(){this.Items.each(function(b){b.leaveSide()});this.destroySelect();global.annotationPannel&&global.annotationPannel.resetAnnoConfig()};IssuuPageAttachmentsParser.prototype.pauseAnimation=function(){this.Items.find("PageAnimation").each(function(b){b.pauseAnimation()})};IssuuPageAttachmentsParser.prototype.startAnimation=function(){this.Items.find("PageAnimation").each(function(b){b.startAnimation()})};
IssuuPageAttachmentsParser.prototype.resetSlider=function(){this.Items.find("PageAnimation").each(function(b){b.resetSlider()})};IssuuPageAttachmentsParser.prototype.destroySlider=function(){this.Items.find("PageAnimation").each(function(b){b.destroySlider()})};IssuuPageAttachmentsParser.prototype.initReaderOrSlider=function(){this.Items.each(function(b){b.initReaderOrSlider&&b.initReaderOrSlider()})};IssuuPageAttachmentsParser.prototype.removeAttachment=function(){this.attachment&&this.destroyMM()};
IssuuPageAttachmentsParser.prototype.onResize=function(b,c,d,e){this.width=b;this.height=c;this.pageWidth=d;this.pageHeight=e;this.onResizeAnimation(b,c,d,e);this.onResizeAnnotation(b,c,d,e);this.$select&&this.$select.css({width:this.width+"px",height:this.height+"px"});this.$magnifier&&this.$magnifier.css({width:this.width+"px",height:this.height+"px"});this.$highlight&&this.$highlight.css({width:this.width+"px",height:this.height+"px"});this.Items.each(function(f){if(f!=this.pageAnimation&&f!=this.pageAnnotation)f.onResize(b,
c)}.bind(this))};IssuuPageAttachmentsParser.prototype.onResizeAnimation=function(b,c,d,e){this.pageAnimation&&(this.$animation.css({width:d+"px",height:e+"px",left:"0px",top:"0px"}),this.pageAnimation.onResize(d,e))};IssuuPageAttachmentsParser.prototype.onResizeAnnotation=function(b,c,d,e){this.pageAnnotation&&(this.$annotation.css({width:d+"px",height:e+"px",left:"0px",top:"0px"}),this.pageAnnotation.onResize(d,e))};
IssuuPageAttachmentsParser.prototype.resizeOnMobile=function(){var b=1024,c=1024;BookInfo.isDoublePage()&&this.bookType==BookType.normal_book&&(c=b=768);b=fitPageWidthHeight(b,c,this.pageWidth,this.pageHeight);this.pageAnimation.onResize(Math.ceil(b.x),Math.ceil(b.y));this.scale(Math.ceil(b.x),Math.ceil(b.y))};
IssuuPageAttachmentsParser.prototype.highDefinition=function(){var b=6*Math.min(windowWidth,windowHeight),c=6*Math.min(windowWidth,windowHeight);isPad()&&(b=3*Math.min(windowWidth,windowHeight),c=3*Math.min(windowWidth,windowHeight));b=fitPageWidthHeight(b,c,this.pageWidth,this.pageHeight);this.pageAnimation.onResize(Math.ceil(b.x),Math.ceil(b.y));this.scale(Math.ceil(b.x),Math.ceil(b.y))};
IssuuPageAttachmentsParser.prototype.scale=function(b,c){var d=fitPageWidthHeight(this.pageWidth,this.pageHeight,this.pageWidth,this.pageHeight).y/c;this.$animation.css({width:b+"px",height:c+"px",left:(this.pageWidth-b*d)/2+"px",top:(this.pageHeight-c*d)/2+"px"});b=!1;if(isPhone()||isPad())b=!0;d=transformCSS({scale:d,origin:{x:0,y:0}},b);this.$animation.css(d)};
var IssuuImageArrayLoadImage=Class({index:0,type:0,pageWidth:0,pageHeight:0,width:0,height:0,$image:null,imageURL:"",isMirrorSide:"",create:function(b,c,d,e,f,g,h,k,l){var n=this,p,r;return $jscomp.asyncExecutePromiseGeneratorProgram(function(B){n.index=b;n.type=d;n.i=l;n.callback=e;n.errorCallback=f;n.pageWidth=g;n.pageHeight=h;n.isMirrorSide=k;p=c;bookConfig.useTheAliCloudChart&&BookInfo.getBook().status_zoom&&(p=p.removeStartFrom("?"));n.imageURL=p;n.imageObject=new ImageObject;n.imageObject.alt(n.index);
n.imageObject.src(n.imageURL);n.imageObject.css({"z-index":0});n.$image=n.imageObject.$image;bookConfig.EnableRecognizeQRcodePressOnMobile&&n.imageObject.css({"-webkit-touch-callout":"default"});n.loaded=!1;n.$image[0].onload=function(){this.loaded=!0;this.callback&&this.callback(this.$image);this.width=this.$image[0].naturalWidth;this.height=this.$image[0].naturalHeight;this.onResize(this.pageWidth,this.pageHeight)}.bind(n);n.$image[0].onerror=function(){this.loaded=!0;this.errorCallback&&this.errorCallback(this.$image)}.bind(n);
bookConfig.textSharpening&&(r="-webkit-optimize-contrast",_agent_.browser.firefox&&(r="-moz-crisp-edges"),_agent_.browser.opera&&(r="-o-crisp-edges"),n.$image.css({"image-rendering":r,"-ms-interpolation-mode":"nearest-neighbor"}));B.jumpToEnd()})},zoomIn:function(b){bookConfig.useTheAliCloudChart&&isPC()?this.switchLargeImage(b):(isPhone()||isPad())&&this.highDefinition()},zoomOut:function(b,c){bookConfig.useTheAliCloudChart&&isPC()?this.switchNormalImage(b,c):(isPhone()||isPad())&&this.resize()},
onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;if((isPhone()||isPad())&&!this.isMirrorSide&&BookInfo.getBook().status_zoom)this.highDefinition();else{this.imageObject.css({width:"100%",height:"100%",position:"absolute",top:0,left:0});b=!1;if(isPhone()||isPad())b=!0;b=transformCSS({scale:1,origin:{x:0,y:0}},b);this.imageObject.css(b)}},resize:function(){this.imageObject.css({width:"100%",height:"100%",position:"absolute",top:0,left:0});var b=!1;if(isPhone()||isPad())b=!0;b=transformCSS({scale:1,
origin:{x:0,y:0}},b);this.imageObject.css(b)},highDefinition:function(){this.scale(this.width,this.height)},scale:function(b,c){var d=this.parent.width();var e=this.parent.height()/c;d/=b;this.imageObject.css({width:b+"px",height:c+"px",position:"absolute",left:0,bottom:"auto",top:0,right:"auto"});b=!1;if(isPhone()||isPad())b=!0;e=transformCSS({scale:{x:d,y:e},origin:{x:0,y:0}},b);this.imageObject.css(e)},switchLargeImage:function(b){if(bookConfig.useTheAliCloudChart){b=this.imageURL.removeStartFrom("?");
window.isSupportWebp?0>b.indexOf("webp")?b+="?x-oss-process=image/format,webp":bookConfig.textClarityEnhancement&&(b+="?x-oss-process=image"):b+="?x-oss-process=image/format,"+getWebpOriginFormat(b);switch(bookConfig.textClarityEnhancement){case 1:b+="/sharpen,100";break;case 2:b+="/sharpen,150";break;case 3:b+="/sharpen,200"}this.loaded&&(this.callback=void 0);this.imageObject.attr("src",b)}},switchNormalImage:function(b,c){var d=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==
f.nextAddress)return bookConfig.useTheAliCloudChart?b?f.yield(getPageDir(d.index,"normal",originTotalPageCount)[d.i],3):f.jumpTo(2):f.return();if(2!=f.nextAddress){e=f.yieldResult;if(!e||e==d.imageURL)return f.return();d.imageURL=e}d.loaded&&(d.callback=void 0);d.imageObject.attr("src",d.imageURL);f.jumpToEnd()})},destroy:function(){this.imageObject.destroy()}}),IssuuImageArrayLoadSvg=Class({index:0,type:0,pageWidth:0,pageHeight:0,width:0,height:0,$image:null,imageURL:"",isMirrorSide:"",create:function(b,
c,d,e,f,g,h,k,l){var n=this,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){n.index=b;n.type=d;n.i=l;n.callback=e;n.errorCallback=f;n.pageWidth=g;n.pageHeight=h;n.isMirrorSide=k;p=c;bookConfig.useTheAliCloudChart&&!bookConfig.isEncryptionBook&&(p=p.removeStartFrom("?"));n.imageURL=p;n.$image=$("<img src='"+n.imageURL+"' style='z-index:0;'/>");bookConfig.EnableRecognizeQRcodePressOnMobile&&n.$image.css({"-webkit-touch-callout":"default"});n.$image[0].onload=function(){this.callback&&
this.callback(this.$image);this.width=this.$image[0].naturalWidth;this.height=this.$image[0].naturalHeight;this.onResize(this.pageWidth,this.pageHeight)}.bind(n);n.$image[0].onerror=function(){this.errorCallback&&this.errorCallback(this.$image)}.bind(n);r.jumpToEnd()})},zoomIn:function(b){},zoomOut:function(b,c){},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;this.$image.css({width:"100%",height:"100%",position:"absolute",top:0,left:0});b=!1;if(isPhone()||isPad())b=!0;b=transformCSS({scale:1,
origin:{x:0,y:0}},b);_agent_.system.name!=_agent_.system.ANDROID&&this.$image.css(b)},scale:function(b,c){var d=this.parent.width();var e=this.parent.height()/c;d/=b;this.$image.css({width:b+"px",height:c+"px",position:"absolute",left:0,bottom:"auto",top:0,right:"auto"});b=!1;if(isPhone()||isPad())b=!0;e=transformCSS({scale:{x:d,y:e},origin:{x:0,y:0}},b);this.$image.css(e)},destroy:function(){this.$image=this.$image[0].onload=null},resizeSvg:function(b,c){if(isPhone()||isPad())b=fitPageWidthHeight(b,
c,this.width,this.height),this.scale(b.x,b.y)}}),IssuuImageArrayLoad=Class({index:0,type:0,pageWidth:0,pageHeight:0,width:0,height:0,$image:null,imageURL:"",isMirrorSide:"",create:function(b,c,d,e,f,g){var h=this,k,l,n,p,r,B;return $jscomp.asyncExecutePromiseGeneratorProgram(function(v){if(1==v.nextAddress)return h.index=b,h.type=c,h.pageWidth=e,h.pageHeight=f,h.isMirrorSide=g,h.callback=d,h.$images=[],h.loadArray=[],v.yield(getPageDir(b,c,originTotalPageCount),2);k=v.yieldResult;h.imagesURL=k;l=
0;n=function(){l++;this.callback&&l==k.length&&this.callback(k,k,this.$images,this.index)}.bind(h);p=function(w){l++;this.$images.removeElement(w);this.callback&&l==k.length&&this.callback(k,k,this.$images,this.index)}.bind(h);for(r=0;r<k.length;r++)B=-1<k[r].indexOf(".svg")?new IssuuImageArrayLoadSvg(b,k[r],c,n,p,e,f,g,r):new IssuuImageArrayLoadImage(b,k[r],c,n,p,e,f,g,r),h.$images.push(B.$image),h.loadArray.push(B);v.jumpToEnd()})},zoomIn:function(b){for(var c=0;c<this.loadArray.length;c++)this.loadArray[c].zoomIn&&
this.loadArray[c].zoomIn(b)},zoomOut:function(b,c){for(var d=0;d<this.loadArray.length;d++)this.loadArray[d].zoomOut&&this.loadArray[d].zoomOut(b,c)},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;for(var d=0;d<this.loadArray.length;d++)if(this.loadArray[d].onResize)this.loadArray[d].onResize(b,c)},destroy:function(){for(var b=0;b<this.loadArray.length;b++)this.loadArray[b].destroy&&this.loadArray[b].destroy()},resizeSvg:function(b,c){for(var d=0;d<this.loadArray.length;d++)this.loadArray[d].resizeSvg&&
this.loadArray[d].resizeSvg(b,c)}}),IssuuImageLoad=Class({index:0,type:0,pageWidth:0,pageHeight:0,width:0,height:0,$image:null,imageURL:"",isMirrorSide:"",canvasDom:null,create:function(b,c,d,e,f,g,h){var k=this,l,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return k.index=b,k.type=c,k.pageWidth=e,k.pageHeight=f,k.isMirrorSide=g,k.parent=h,k.callback=d,p.yield(getPageDir(b,c,originTotalPageCount),2);l=p.yieldResult;k.imageURL=l;bookConfig.useTheAliCloudChart&&
BookInfo.getBook().status_zoom&&(l=l.removeStartFrom("?"));k.realImageURL=l;k.id=randomString(10);k.imageObject=new ImageObject;k.imageObject.attr("id",k.id);k.imageObject.alt(k.id);k.imageObject.src(k.realImageURL);k.$image=k.imageObject.$image;bookConfig.textSharpening&&(n="-webkit-optimize-contrast",_agent_.browser.firefox&&(n="-moz-crisp-edges"),_agent_.browser.opera&&(n="-o-crisp-edges"),k.$image.css({"image-rendering":n,"-ms-interpolation-mode":"nearest-neighbor"}));k.$image[0].onload=k.onLoad.bind(k);
k.enableRecognizeQRcode();k.setTextSharpening();p.jumpToEnd()})},onLoad:function(){this.width=this.$image[0].naturalWidth;this.height=this.$image[0].naturalHeight;if(!(this.width>1.25*this.pageWidth&&this.height>1.25*this.pageHeight)||!0!==bookConfig.canvasRender&&"true"!==bookConfig.canvasRender||isPhone()||isPad())this.width=this.$image[0].naturalWidth,this.height=this.$image[0].naturalHeight,this.callback&&this.callback(this.realImageURL,this.realImageURL,this.$image[0],this.index),this.onResize();
else try{this.canvasDom=document.createElement("canvas");this.canvasDom.setAttribute("id","pageCanvas");this.canvasDom.setAttribute("width",this.width);this.canvasDom.setAttribute("height",this.height);var b=this.canvasDom.getContext("2d");b.width=this.width;b.height=this.height;b.drawImage(this.$image[0],0,0);canvasReload(this.canvasDom,this.pageWidth,this.pageHeight,!0);this.callback&&this.callback(this.realImageURL,this.realImageURL,this.canvasDom,this.index)}catch(c){this.width=this.$image[0].naturalWidth,
this.height=this.$image[0].naturalHeight,this.callback&&this.callback(this.realImageURL,this.realImageURL,this.$image[0],this.index),this.onResize()}},enableRecognizeQRcode:function(){bookConfig.EnableRecognizeQRcodePressOnMobile&&this.setImageCss({"-webkit-touch-callout":"default"})},setTextSharpening:function(){if(bookConfig.textSharpening){var b="-webkit-optimize-contrast";_agent_.browser.firefox&&(b="-moz-crisp-edges");_agent_.browser.opera&&(b="-o-crisp-edges");this.setImageCss({"image-rendering":b,
"-ms-interpolation-mode":"nearest-neighbor"})}},zoomIn:function(b){bookConfig.useTheAliCloudChart&&this.switchLargeImage(b);isPhone()||isPad()?this.highDefinition():_agent_.browser.safari&&this.$image.css("image-rendering","auto")},zoomOut:function(b,c){bookConfig.useTheAliCloudChart&&this.switchNormalImage(b,c);isPhone()||isPad()?this.resize():_agent_.browser.safari&&this.$image.css("image-rendering","-webkit-optimize-contrast")},onResize:function(b,c){try{if(!(!0!==bookConfig.canvasRender&&"true"!==
bookConfig.canvasRender||isPhone()||isPad())&&this.canvasDom){this.pageWidth=b;this.pageHeight=c;this.canvasDom.setAttribute("width",this.width);this.canvasDom.setAttribute("height",this.height);var d=this.canvasDom.getContext("2d");d.width=this.width;d.width=this.height;d.drawImage(this.$image[0],0,0);canvasReload(this.canvasDom,this.pageWidth,this.pageHeight,!0);return}}catch(e){console.log("this function cross-domain !")}b&&c&&(this.pageWidth=b,this.pageHeight=c);if((isPhone()||isPad())&&!this.isMirrorSide&&
BookInfo.getBook().status_zoom)this.highDefinition();else{this.setImageCss({width:"100%",height:"100%",position:"absolute",top:0,left:0});b=!1;if(isPhone()||isPad())b=!0;b=transformCSS({scale:1,origin:{x:0,y:0}},b);this.setImageCss(b)}},resize:function(){this.setImageCss({width:"100%",height:"100%",position:"absolute",top:0,left:0});var b=!1;if(isPhone()||isPad())b=!0;b=transformCSS({scale:1,origin:{x:0,y:0}},b);this.setImageCss(b)},highDefinition:function(){this.scale(this.width,this.height)},scale:function(b,
c){var d=this.parent.width();var e=this.parent.height()/c;d/=b;this.setImageCss({width:b+"px",height:c+"px",position:"absolute",left:0,bottom:"auto",top:0,right:"auto"});b=!1;if(isPhone()||isPad())b=!0;e=transformCSS({scale:{x:d,y:e},origin:{x:0,y:0}},b);this.setImageCss(e)},switchLargeImage:function(b){if(bookConfig.useTheAliCloudChart){var c=this.imageURL.removeStartFrom("?");window.isSupportWebp?0>c.indexOf("webp")?c+="?x-oss-process=image/format,webp":bookConfig.textClarityEnhancement&&(c+="?x-oss-process=image"):
c+="?x-oss-process=image/format,"+getWebpOriginFormat(c);switch(bookConfig.textClarityEnhancement){case 1:c+="/sharpen,100";break;case 2:c+="/sharpen,150";break;case 3:c+="/sharpen,200"}if(isPhone()||isPad())if(this.largeImageObject)this.largeImageObject&&this.largeImageObject.show();else{this.largeImageObject=new ImageObject;this.largeImageObject.attr("id",this.id);this.largeImageObject.alt(this.id);this.largeImageObject.src(c);var d=this.largeImageObject.$image;bookConfig.isStopMouseMenu&&$(d).css({"pointer-events":"none"});
d[0].onload=function(){this.onResize();this.parent.append(d)}.bind(this)}else b&&(this.callback=b),this.imageObject.attr("src",c)}},switchNormalImage:function(b,c){var d=this,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){if(1==f.nextAddress)return bookConfig.useTheAliCloudChart?b?f.yield(getPageDir(d.index,"normal",originTotalPageCount),3):f.jumpTo(2):f.return();if(2!=f.nextAddress){e=f.yieldResult;if(e==d.imageURL)return f.return();d.imageURL=e}isPhone()||isPad()?d.largeImageObject&&
d.largeImageObject.hide():(c&&(d.callback=c),d.imageObject.attr("src",d.imageURL));f.jumpToEnd()})},setImageCss:function(b){this.imageObject&&this.imageObject.css(b);this.largeImageObject&&this.largeImageObject.css(b)}}),IssuuPdfLoad=Class({index:0,pageWidth:0,pageHeight:0,create:function(b,c,d,e,f,g,h){var k=this,l,n;return $jscomp.asyncExecutePromiseGeneratorProgram(function(p){if(1==p.nextAddress)return k.index=b,k.type=c,k.pageWidth=e,k.pageHeight=f,k.renderWidth=e,k.renderHeight=f,k.callback=
d,k.parent=h,l=k,p.yield(getPageDir(b,c,originTotalPageCount),2);if(3!=p.nextAddress)return l.imageURL=p.yieldResult,n=k,p.yield(getPageDir(b,"thumb",originTotalPageCount),3);n.thumbUrl=p.yieldResult;k.$content=$("<div style='position:absolute;left:0;top:0;width:100%;height:100%;'></div>");k.pdfLoadingTask=new PdfLoadingTask(k.index,k.type,e,f,k.loaded.bind(k));window.pdfLoadStack||(window.pdfLoadStack=new PdfLoadArray(3));window.pdfLoadStack&&pdfLoadStack.push(k.pdfLoadingTask);p.jumpToEnd()})},
enterSide:function(){this.enter=!0},leaveSide:function(){this.enter=!1;this.pdfLoadingTask&&this.pdfLoadingTask.leaveSide()},zoomIn:function(){isPhone()||isPad()},zoomOut:function(){isPhone()||isPad()},onResize:function(b,c){var d={width:"100%",height:"100%",position:"absolute",top:0,left:0};this.$canvas&&this.$canvas.css(d);this.$content&&this.$content.css(d);window.pdfLoadStack&&(isPC()||isSlideBook()||0<=BookInfo.getCurrentPages().indexOf(this.index)||bookConfig.upsideOnMobile())&&this.pdfLoadingTask&&
(this.pdfLoadingTask.changeRenderWH(b,c),pdfLoadStack.push(this.pdfLoadingTask))},loaded:function(b){this.pdfLoaded=!0;this.changeImageSrc(b)},changeImageSrc:function(b){this.pdfLoaded&&(this.width=parseFloat(b.style.width),this.height=parseFloat(b.style.height),this.$canvas=$(b),this.$content.empty().append(this.$canvas),this.callback&&this.callback(this.imageURL,this.imageURL,this.$content,this.index),this.resizeImage())},resizeImage:function(){if(this.zoom)b=this.renderWidth,c=this.renderHeight;
else{var b=this.parent.width(),c=this.parent.height();this.pageWidth=b;this.pageHeight=c;this.renderWidth=b;this.renderHeight=c}var d={width:"100%",height:"100%",position:"absolute",top:0,left:0};2>=b-this.width&&(d.width=this.width+"px",d.left=Math.round((b-this.width)/2)+"px");2>=c-this.height&&(d.height=this.height+"px",d.top=Math.round((c-this.height)/2)+"px");this.$canvas.css(d);d=b-this.width;var e=c-this.height;(0!==d||0!==e)&&4>=d&&4>=e&&(this.$thumb||(this.$thumb=$('<img src="'+this.thumbUrl+
'" style="z-index:-1;width:100%;height:100%;position:absolute;top:0;left:0;"/>')),this.$content.append(this.$thumb));d=transformCSS({scaleX:this.pageWidth/b,scaleY:this.pageHeight/c,origin:{x:0,y:0}},!1);this.$content.css(d);this.$content.css({width:b+"px",height:c+"px"})},resizeSvg:function(b,c){this.renderWidth=b;this.renderHeight=c;this.zoom=this.renderHeight>this.pageHeight?!0:!1;window.pdfLoadStack&&(isPC()||isSlideBook()||0<=BookInfo.getCurrentPages().indexOf(this.index))&&(this.pdfLoadingTask.changeRenderWH(b,
c),pdfLoadStack.push(this.pdfLoadingTask))},destroy:function(){this.pdfLoadingTask&&(window.pdfLoadStack&&pdfLoadStack.pop(this.pdfLoadingTask),this.pdfLoadingTask.destroy(),this.pdfLoadingTask=null)}}),IsuuPageBackground=Class({create:function(b,c,d,e,f,g,h){var k=this,l,n,p;return $jscomp.asyncExecutePromiseGeneratorProgram(function(r){if(1==r.nextAddress){if(!b||!c)return r.return();k.type=c;k.pageWidth=e;k.pageHeight=f;return r.yield(getPageDir(b,c,originTotalPageCount),2)}l=r.yieldResult;n=getPageSize(b,
c);k.imageURL=l;k.load=null;k.parent=h;p=k.getUrlType(l,n);k.urlType=p;switch(p){case 0:k.load=new CanvasLoad(b,c,d,k.pageWidth,k.pageHeight,g,h);break;case 1:k.load=new IssuuImageLoad(b,c,d,k.pageWidth,k.pageHeight,g,h);break;case 2:k.load=new JsLoad(b,c,d,k.pageWidth,k.pageHeight,g,h);break;case 3:k.load=new SvgLoad(b,c,d,k.pageWidth,k.pageHeight,g,h);break;case 4:k.load=new IssuuImageArrayLoad(b,c,d,k.pageWidth,k.pageHeight,g,h);break;case 5:k.load=new IssuuPdfLoad(b,c,d,k.pageWidth,k.pageHeight,
g,h);break;case 6:k.load=new ImageStageLoad(b,c,d,k.pageWidth,k.pageHeight,g,h);break;case 7:k.load=new NoneLoad(b,c,d,k.pageWidth,k.pageHeight,g,h)}r.jumpToEnd()})},getUrlType:function(b,c){return this.isPdf(b)?5:c&&isPC()?6:"object"==typeof b?4:"normal"==this.type&&bookConfig.usePdfJs?0:-1<b.indexOf("none")?7:-1<b.indexOf(".js")?2:-1<b.indexOf(".svg")?3:1},isPdf:function(b){return-1<b.indexOf(".pdf")||-1<b.indexOf(".zip")?!0:!1},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;if(this.load&&
this.load.onResize)this.load.onResize(b,c)},zoomIn:function(b,c){this.load&&this.load.zoomIn&&this.load.zoomIn(b,c)},zoomOut:function(b,c){this.load&&this.load.zoomOut&&this.load.zoomOut(b,c)},destroy:function(){this.load&&this.load.destroy&&this.load.destroy()},resizeSvg:function(b,c){this.load&&this.load.resizeSvg&&this.load.resizeSvg(b,c)},enterSide:function(){this.load&&this.load.enterSide&&this.load.enterSide()},leaveSide:function(){this.load&&this.load.leaveSide&&this.load.leaveSide()}}),IssuuPageFlipShadow=
Class({create:function(b,c){this.parent=b;this.pageIndex=c;this.init()},init:function(){this.flipShadowContent=$("<div style='pointer-events:none;width:100%;height:100%;position:absolute;z-index:100;left:0;top:0;'></div>");bookConfig.FlipDirection?(this.flipBackShadow=$("<div class='flip-vertical-shadowB'></div>"),this.flipFrontShadow=$("<div class='flip-vertical-topshadow'></div>")):(this.flipBackShadow=$("<div class='flip-shadowB'></div>"),this.flipFrontShadow=$("<div class='flip-topshadow'></div>"));
this.flipShadowContent.append(this.flipBackShadow);this.flipShadowContent.append(this.flipFrontShadow);this.parent.append(this.flipShadowContent)},setCSSByStyle:function(b){this.flipShadowContent.css(b)},flip:function(b,c,d){var e=b.shadowRate;d=b.rotate;var f=.9<e?1+2*(1-e)/.1:3*e/.9;if(isPhone()||isPad())f=1;e=.9<e?.2*(1-e)/.1:.1>e?.2*e/.1:.2;if(bookConfig.FlipDirection){var g=transformCSS({scaleY:f,rotate:-d,tran:{x:0,y:(b.frontShadowDistance-100*(90<d?0:f))/Math.cos(d*Math.PI/180)}});b=transformCSS({scaleY:f,
rotate:d,tran:{x:-b.maskTranY,y:b.maskTranX}})}else g=transformCSS({scaleX:f,rotate:-d,tran:{x:(b.frontShadowDistance-100*(90<d?0:f))/Math.cos(d*Math.PI/180),y:0}}),b=transformCSS({scaleX:f,rotate:d,tran:{x:b.maskTranX,y:b.maskTranY}});this.flipFrontShadow.css(g);this.flipBackShadow.css(b);this.beforeFlip(d,c);isPhone()||isPad()||(this.flipFrontShadow.css({opacity:e}),this.flipBackShadow.css({opacity:e}))},beforeFlip:function(b,c){c?(this.flipBackShadow&&this.flipBackShadow.css({visibility:"hidden"}),
this.flipFrontShadow&&this.flipFrontShadow.css({visibility:"visible"})):(this.flipBackShadow&&this.flipBackShadow.css({visibility:"visible"}),this.flipFrontShadow&&this.flipFrontShadow.css({visibility:"hidden"}));bookConfig.FlipDirection?(90<b?(this.flipFrontShadow.css({bottom:"0px"}),this.flipBackShadow.css({top:"100%"})):(this.flipFrontShadow.css({bottom:"auto"}),this.flipBackShadow.css({top:"0px"})),c=0<=b&&180>b?100/3:100*(this.width+this.maskWidth)/(3*this.maskWidth),b=90<b?100:0):(90<b?(this.flipFrontShadow.css({right:"0px"}),
this.flipBackShadow.css({left:"100%"})):(this.flipFrontShadow.css({right:"auto"}),this.flipBackShadow.css({left:"0px"})),c=90<b?100:0,b=0<=b&&180>b?100*(this.height+this.maskWidth)/(3*this.maskWidth):100/3);this.flipFrontShadow.css({"transform-origin":c+"% "+b+"%","-webkit-transform-origin":c+"% "+b+"%","-moz-transform-origin":c+"% "+b+"%","-ms-transform-origin":c+"% "+b+"%"})},clear:function(){this.flipBackShadow&&this.flipBackShadow.css({visibility:"hidden"});this.flipFrontShadow&&this.flipFrontShadow.css({visibility:"hidden"})},
resize:function(b,c){this.width=b;this.height=c;this.maskWidth=parseInt(Math.sqrt(Math.pow(b,2)+Math.pow(c,2)));bookConfig.FlipDirection?(this.flipFrontShadow.css({width:3*this.maskWidth,left:-this.maskWidth}),this.flipBackShadow.css({width:this.maskWidth,left:(this.width-this.maskWidth)/2})):(this.flipFrontShadow.css({height:3*this.maskWidth,top:-this.maskWidth}),this.flipBackShadow.css({height:this.maskWidth,top:(this.height-this.maskWidth)/2}))}});
HardPageFlipShadow=Class({init:function(){this._super();var b=Color(bookConfig.thicknessColor);this.flipThickWidth=getMaxThicknessWidth()/5;this.flipThick=bookConfig.FlipDirection?$("<div class='flip-vertical-thick'></div>"):$("<div class='flip-thick'></div>");this.flipThick.css({background:b.reduce(50)});this.parent.append(this.flipThick)},flip:function(b,c){var d=b.shadowRate?b.shadowRate:0;d=.5>d?2*d:2*(1-d);var e={"background-image":"none","box-shadow":"rgba(0,0,0,0.3) 0 0 2000px 5000px inset",
width:"100%",height:"100%",top:0,left:0};this.flipFrontShadow.css(e);this.flipFrontShadow.css({opacity:d});this.flipBackShadow.css(e);this.flipBackShadow.css({opacity:d});b=bookConfig.FlipDirection?transformCSS({perspective:5E3,rotateX:-b.rotate,scaleY:this.flipThickWidth/6*d}):transformCSS({perspective:5E3,rotateY:-b.rotate,scaleX:this.flipThickWidth/6*d});this.flipThick.css(b);c?(this.flipBackShadow&&this.flipBackShadow.css({visibility:"hidden"}),this.flipFrontShadow&&this.flipFrontShadow.css({visibility:"visible"})):
(this.flipBackShadow&&this.flipBackShadow.css({visibility:"visible"}),this.flipFrontShadow&&this.flipFrontShadow.css({visibility:"hidden"}));this.flipThick&&this.flipThick.css({visibility:"visible"})}}).extend(PageFlipShadow);
var IssuuPageHighlightsFlipShadow=Class({create:function(b,c){this.parent=b;this.pageIndex=c;this.init()},init:function(){this.flipShadowContent=$("<div style='pointer-events:none;width:100%;height:100%;position:absolute;z-index:100;left:0;top:0;'></div>");bookConfig.FlipDirection?(this.flipBackShadow=$("<div class='flip-vertical-shadowB'></div>"),this.flipFrontShadow=$("<div class='flip-vertical-topshadow2'></div>"),this.flipFrontHighlightShadow=$("<div class='flip-vertical-top-hightlight-shadow'></div>"),
this.flipFrontEdgeShadow=$("<div class='flip-vertical-top-edge-shadow'></div>"),this.flipFrontTopHighlightShadow=$("<div class='flip-vertical-front-top-hightlight-shadow'></div>")):(this.flipBackShadow=$("<div class='flip-shadowB2'></div>"),this.flipFrontShadow=$("<div class='flip-topshadow2'></div>"),this.flipFrontHighlightShadow=$("<div class='flip-top-hightlight-shadow'></div>"),this.flipFrontEdgeShadow=$("<div class='flip-top-edge-shadow'></div>"),this.flipFrontTopHighlightShadow=$("<div class='flip-front-top-hightlight-shadow'></div>"));
this.flipShadowContent.append(this.flipBackShadow);this.flipShadowContent.append(this.flipFrontShadow);this.flipShadowContent.append(this.flipFrontEdgeShadow);this.flipShadowContent.append(this.flipFrontHighlightShadow);this.flipShadowContent.append(this.flipFrontTopHighlightShadow);this.parent.append(this.flipShadowContent)},setCSSByStyle:function(b){this.flipShadowContent.css(b)},flip:function(b,c,d){var e=b.shadowRate;d=b.rotate;var f=.9<e?1+2*(1-e)/.1:3*e/.9;e=.9<e?(1-e)/.1:.1>e?1*e/.1:1;var g=
1,h=(b.frontShadowDistance-(90<d?0:260*Math.min(1,b.frontShadowDistance/260)))/Math.cos(d*Math.PI/180),k=(b.frontShadowDistance-3-(90<d?0:18))/Math.cos(d*Math.PI/180),l=(b.frontShadowDistance-(90<d?0:3))/Math.cos(d*Math.PI/180),n=(b.frontShadowDistance-23*Math.min(1,b.frontShadowDistance/260)-(90<d?0:78*Math.min(1,b.frontShadowDistance/260)))/Math.cos(d*Math.PI/180);21>=b.frontShadowDistance&&(g=b.frontShadowDistance/21,l=(b.frontShadowDistance-(90<d?0:3*g))/Math.cos(d*Math.PI/180),k=(b.frontShadowDistance-
3*g-(90<d?0:18*g))/Math.cos(d*Math.PI/180));bookConfig.FlipDirection?(h=transformCSS({scaleY:Math.min(1,b.frontShadowDistance/260),rotate:-d,tran:{x:0,y:h}}),k=transformCSS({scaleY:g,rotate:-d,tran:{x:0,y:k}}),g=transformCSS({scaleY:g,rotate:-d,tran:{x:0,y:l}}),n=transformCSS({scaleY:Math.min(1,b.frontShadowDistance/260),rotate:-d,tran:{x:0,y:n}}),f=transformCSS({scaleY:f,rotate:d,tran:{x:-b.maskTranY,y:b.maskTranX}})):(h=transformCSS({scaleX:Math.min(1,b.frontShadowDistance/260),rotate:-d,tran:{x:h,
y:0}}),k=transformCSS({scaleX:g,rotate:-d,tran:{x:k,y:0}}),g=transformCSS({scaleX:g,rotate:-d,tran:{x:l,y:0}}),n=transformCSS({scaleX:Math.min(1,b.frontShadowDistance/260),rotate:-d,tran:{x:n,y:0}}),f=transformCSS({scaleX:f,rotate:d,tran:{x:b.maskTranX,y:b.maskTranY}}));this.flipBackShadow.css(f);this.flipFrontShadow.css(h);this.flipFrontHighlightShadow.css(k);this.flipFrontEdgeShadow.css(g);this.flipFrontTopHighlightShadow.css(n);this.beforeFlip(d,c);c=.34*b.frontShadowDistance/260;260<b.frontShadowDistance&&
(c=.34*e);this.flipFrontEdgeShadow.css({opacity:.5*e});this.flipFrontHighlightShadow.css({opacity:.34*e});this.flipFrontShadow.css({opacity:c});this.flipBackShadow.css({opacity:.3*e});this.flipFrontTopHighlightShadow.css({opacity:c})},beforeFlip:function(b,c){var d={};c?(this.flipBackShadow&&this.flipBackShadow.css({visibility:"hidden"}),d.visibility="visible"):(this.flipBackShadow&&this.flipBackShadow.css({visibility:"visible"}),d.visibility="hidden");bookConfig.FlipDirection?(90<b?(d.bottom="0px",
this.flipBackShadow.css({top:"100%"})):(d.bottom="auto",this.flipBackShadow.css({top:"0px"})),c=0<=b&&180>b?100/3:100*(this.width+this.maskWidth)/(3*this.maskWidth),b=90<b?100:0):(90<b?(d.right="0",this.flipBackShadow.css({left:"100%"})):(d.right="auto",this.flipBackShadow.css({left:"0px"})),c=90<b?100:0,b=0<=b&&180>b?100*(this.height+this.maskWidth)/(3*this.maskWidth):100/3);d["transform-origin"]=c+"% "+b+"%";d["-webkit-transform-origin"]=c+"% "+b+"%";d["-moz-transform-origin"]=c+"% "+b+"%";d["-ms-transform-origin"]=
c+"% "+b+"%";this.flipFrontShadow.css(d);this.flipFrontHighlightShadow.css(d);this.flipFrontEdgeShadow.css(d);this.flipFrontTopHighlightShadow.css(d)},clear:function(){this.flipBackShadow&&this.flipBackShadow.css({visibility:"hidden"});this.flipFrontShadow&&this.flipFrontShadow.css({visibility:"hidden"});this.flipFrontHighlightShadow&&this.flipFrontHighlightShadow.css({visibility:"hidden"});this.flipFrontEdgeShadow&&this.flipFrontEdgeShadow.css({visibility:"hidden"});this.flipFrontTopHighlightShadow&&
this.flipFrontTopHighlightShadow.css({visibility:"hidden"})},resize:function(b,c){this.width=b;this.height=c;this.maskWidth=parseInt(Math.sqrt(Math.pow(b,2)+Math.pow(c,2)));bookConfig.FlipDirection?(this.flipFrontShadow.css({width:3*this.maskWidth,left:-this.maskWidth}),this.flipFrontTopHighlightShadow.css({width:3*this.maskWidth,left:-this.maskWidth}),this.flipFrontEdgeShadow.css({width:3*this.maskWidth,left:-this.maskWidth}),this.flipFrontHighlightShadow.css({width:3*this.maskWidth,left:-this.maskWidth}),
this.flipBackShadow.css({width:this.maskWidth,left:(this.width-this.maskWidth)/2})):(this.flipFrontTopHighlightShadow.css({height:3*this.maskWidth,top:-this.maskWidth}),this.flipFrontEdgeShadow.css({height:3*this.maskWidth,top:-this.maskWidth}),this.flipFrontHighlightShadow.css({height:3*this.maskWidth,top:-this.maskWidth}),this.flipFrontShadow.css({height:3*this.maskWidth,top:-this.maskWidth}),this.flipBackShadow.css({height:this.maskWidth,top:(this.height-this.maskWidth)/2}))}}),IssuuFlipBookIntervalManager=
Class({create:function(b){this.book=b;this.flippingTime=1E3*bookConfig.flippingTime},flipIntervalTmp:function(b,c,d,e){if(b){this.book.flipping=!0;b.flipping=!0;var f=.05;if(isIE()||isFirefox())f=0;b.setFlipOriginPoint(e);b.coordinate||(b.coordinate=b.startPoint);var g=b.coordinate.x,h=b.coordinate.y,k,l=this.flippingTime;l=l*Math.abs(b.toPoint.x-g)/Math.abs(b.toPoint.x-b.startPoint.x);e=isAndroidWeChat()||isAndroidDefault()||isIE()||isFirefox()?function(){var p=0;k=function(){n(p,25,"Sine");p++}.interval(this,
l/25)}.bind(this):function(){k=function(p,r){n(p,r,"Sine")}.animation(this,l)}.bind(this);var n=function(p,r,B){if(!b)return!1;var v=b.pageWidth,w=b.pageHeight,u=$.easing["easeInOut"+B],x=$.easing["easeOut"+B];B=x(null,p,g,b.toPoint.x-g,r);x=x(null,p,h,b.toPoint.y-h,r);b.dragMoveToFlip||(B=u(null,p,g,b.toPoint.x-g,r),x=bookConfig.FlipDirection?f*Math.sqrt(w*w-B*B):w-f*Math.sqrt(v*v-B*B));p<r?this.flipToPoint(b,c,d,b.fromPoint,{x:B,y:x}):(this.flipToPoint(b,c,d,b.fromPoint,b.toPoint),this.book.afterFlipTo(b,
d),BookEvent.trigger("afterFlipPage",[d]),k.stop())}.bind(this);e()}},setFlipInterval:function(){this.flipInterval=function(){if(!this.flipIntervalManager.flipInterval||!this.flipIntervalManager.flipInterval.stop){if(this.flipPageManager&&this.flipPageManager.array&&0!=this.flipPageManager.array.length)for(var b=0;b<this.flipPageManager.array.length;b++){var c=this.flipPageManager.array[b];if(c){var d=this.flipPageManager[c];if(!this.flipPageManager[c])this.flipPageManager.array.removeElement(c),
b--;else if(this.flipPageManager[c].fromPoint&&this.flipPageManager[c].startPoint&&this.flipPageManager[c].toPoint&&this.flipPageManager[c].downMask&&this.flipPageManager[c].upMask&&!this.flipPageManager[c].flipping){this.flipPageManager[c].Alice=!0;this.flipPageManager[c].coordinate||(this.flipPageManager[c].coordinate=this.flipPageManager[c].startPoint);var e=.22*(d.toPoint.x-d.coordinate.x),f=e+this.flipPageManager[c].coordinate.x;d=e/((d.coordinate.x-d.toPoint.x)/(d.coordinate.y-d.toPoint.y))+
this.flipPageManager[c].coordinate.y;e=this.flipPageManager[c].downMask.pageIndex;var g=this.flipPageManager[c].upMask.pageIndex;this.flipIntervalManager.flipToPoint(this.flipPageManager[c],e,g,this.flipPageManager[c].fromPoint,{x:f,y:d});!this.flipPageManager[c].flipping&&this.flipPageManager[c].loosen&&(1>Math.abs(f.toFixed(2)-this.flipPageManager[c].toPoint.x)&&1>Math.abs(d.toFixed(2)-this.flipPageManager[c].toPoint.y)||isNaN(f)||isNaN(d))&&(this.flipPageManager[c].Alice=!1,f=this.flipPageManager[c].toPoint.x,
d=this.flipPageManager[c].toPoint.y,this.flipIntervalManager.flipToPoint(this.flipPageManager[c],e,g,this.flipPageManager[c].fromPoint,{x:f,y:d}),this.flipPageManager[c].endFlipByIndex(0>this.flipPageManager[c].toPoint.x),this.flipPageManager.removeFlipArrayByIndex(this.flipPageManager[c]),this.afterCurling(),b--)}}}else this.flipIntervalManager.flipInterval.stop=!0,this.flipIntervalManager.flipInterval=void 0;this.flipIntervalManager.flipInterval&&(isAndroidWeChat()||isAndroidDefault()||isIE()||
isFirefox()?window.setTimeout(this.flipIntervalManager.flipInterval,30):window.requestAnimationFrame(this.flipIntervalManager.flipInterval))}}.bind(this.book);this.flipInterval()},flipToPoint:function(b,c,d,e,f,g){b&&b.flipToPoint(e,f,g);c=Math.abs(f.x-e.x)*this.book.width/(2*b.pageWidth);(!this.book.movedLength||Math.abs(this.book.movedLength)>c||!b.loosen||b.flipping)&&this.book.movetoCenter(b.currentIndex,b.nextIndex,c)},endFlip:function(){},destroy:function(){}}),IssuuFlipPage=Class({downMask:null,
upMask:null,currentIndex:0,nextIndex:0,hardPage:!1,coverPage:!1,coordinate:null,startPoint:null,toPoint:null,fromPoint:null,AliceToLeft:!1,AliceToRight:!1,loosen:!0,flipping:!1,dragMoveToFlip:!1,fallback:!1,pageWidth:0,pageHeight:0,maskWidth:0,create:function(b){this.book=b},startToFlip:function(){this.loosen=this.flipping=!0;this.fallback=this.AliceToRight=this.AliceToLeft=!1},meetFlipCondition:function(){var b=this.toPoint&&this.startPoint&&(this.book.mouseMoveDirection==this.book.moveDirectionType.MOVE_LEFT&&
0<this.startPoint.x||this.book.mouseMoveDirection==this.book.moveDirectionType.MOVE_RIGHT&&0>this.startPoint.x);return this.toPoint&&this.startPoint&&(this.toPoint.x<this.book.MiddleX&&0<this.startPoint.x||this.toPoint.x>this.book.MiddleX&&0>this.startPoint.x)||b},flipToPoint:function(b,c,d){if(b&&c)if(1==this.hardPage)this.flipToHardPoint(b,c);else if(this.downMask&&this.upMask&&this.downMask.page&&this.upMask.page){this.coordinate=c;var e=this.downMask.pageWidth,f=computePoint(e,this.downMask.pageHeight,
this.downMask.maskWidth,b,c);if(f){var g=transformCSS({rotate:f.rotate,tran:{x:f.maskTranX,y:f.maskTranY}}),h=transformCSS({rotate:f.rotate,tran:{x:f.maskTranX,y:f.maskTranY}}),k=transformCSS({rotate:-f.rotate,tran:{x:-f.pageTranX,y:0}}),l=transformCSS({rotate:f.rotate,tran:{x:f.pageTranX,y:0}});this.downMask&&this.downMask.setMaskCSSByStyle(g);this.upMask&&this.upMask.setMaskCSSByStyle(h);this.downMask&&this.downMask.page&&this.downMask.page.setCSSByStyle(k);this.upMask&&this.upMask.page&&this.upMask.page.setCSSByStyle(l);
this.setFlipAlpha(e,b,c);this.setFlipShadow(f,d);this.book.followToPoint(this,b,c)}}},flipToHardPoint:function(b,c){if(b&&c){var d=this.pageWidth,e=this.pageHeight,f=this.maskWidth;c.x>d&&(c.x=d);c.x<-d&&(c.x=-d);this.coordinate=c;if(e=computePoint(d,e,f,b,c)){f=-90+90*Math.abs(c.x/b.x);0>c.x&&(f=90-90*Math.abs(c.x/b.x));var g,h;transformCSS({perspective:6E3,rotateY:f,scale:null!=(h=null==(g=this.downMask)?void 0:g.scale)?h:1});var k,l;transformCSS({perspective:6E3,rotateY:f,scale:null!=(l=null==
(k=this.upMask)?void 0:k.scale)?l:1});e.rotate=f;this.downMask.rotateY=f;this.upMask.rotateY=f;0>c.x/b.x?this.setPagesVisible(!1):this.setPagesVisible(!0);this.setHardFlipShadow(e);this.setFlipAlpha(d,b,c);this.book.followToPoint(this,b,c)}}},setPagesVisible:function(b){},setHardFlipShadow:function(b){b&&(this.upMask&&this.upMask.setFlipShadow(b,!0),this.downMask&&this.downMask.setFlipShadow(b,!1))},setFlipAlpha:function(b,c,d){},setFlipShadow:function(b,c){b&&(this.upMask.page&&this.upMask.page.setFlipShadow(b,
!0,c),this.nextPage&&!this.isMiniPage()&&this.nextPage.setFlipShadow(b,!1,c))},isMiniPage:function(){return!1},resetWidthHeight:function(){var b=this.getPageWidthHeight().width,c=this.getPageWidthHeight().height,d=parseInt(Math.sqrt(Math.pow(b,2)+Math.pow(c,2)));0!=(d-c)%2&&(d+=1);this.pageWidth=b;this.pageHeight=c;this.maskWidth=d},getPageWidthHeight:function(){if(this.downMask)return{width:this.downMask.pageWidth,height:this.downMask.pageHeight};if(this.upMask)return{width:this.upMask.pageWidth,
height:this.upMask.pageHeight}},setPageZIndex:function(){},setFlipOriginPoint:function(){},endFlipByIndex:function(){},isDragMoveToFlip:function(){this.dragMoveToFlip=!1;this.coordinate&&this.startPoint&&this.coordinate.x!=this.startPoint.x&&(this.dragMoveToFlip=!0)},endFlip:function(){this.flipping=!1},destroy:function(){}}),IssuuDoubleFlipPage=Class({setPagesVisible:function(b){b?(this.upMask.setVisible(!1),this.downMask.setVisible(!0)):(this.upMask.setVisible(!0),this.downMask.setVisible(!1))},
setPageZIndex:function(b){var c=this.downMask.pageIndex,d=this.upMask.pageIndex,e=originTotalPageCount+5+d,f=originTotalPageCount+5-c;"min"==b.flipTo&&(e=2*originTotalPageCount+5-d);"min"==b.flipTo&&(f=5+c);if(bookConfig.HardPageEnable){if(d==totalPageCount||1==d)e=2*(bookConfig.totalPageCount+5)+10;if(c==totalPageCount||1==c)f=2*(bookConfig.totalPageCount+5)+10}this.upMask.setZIndex(e);this.downMask.setZIndex(f)},setFlipOriginPoint:function(b){this.dragMoveToFlip||"left"!=b||(this.fromPoint={x:this.downMask.pageWidth,
y:this.downMask.pageHeight});this.dragMoveToFlip||"right"!=b||(this.fromPoint={x:-this.downMask.pageWidth,y:this.downMask.pageHeight});this.toPoint={x:-this.fromPoint.x,y:this.fromPoint.y};this.startPoint={x:this.fromPoint.x,y:this.fromPoint.y}},endFlipByIndex:function(b){var c=transformCSS({rotate:0,tran:{x:0,y:0}});this.upMask.clearTran();this.upMask.page&&this.upMask.page.setCSSByStyle(c);this.downMask.clearTran();this.downMask.page&&this.downMask.page.setCSSByStyle(c);b?(this.downMask.setLeftOrRight(!0),
this.upMask.setLeftOrRight(!0)):(this.downMask.setLeftOrRight(!1),this.upMask.setLeftOrRight(!1));this.book.setZIndexByPageIndex(this.upMask);this.book.setZIndexByPageIndex(this.downMask);this.upMask.clearFlipShadow();this.downMask.clearFlipShadow()}}).extend(IssuuFlipPage),IssuuSingleFlipPage=Class({flipToHardPoint:function(b,c){if(b&&c){this.coordinate=c;var d=this.pageWidth,e=computePoint(d,this.pageHeight,this.maskWidth,b,c);if(e){var f=-90+90*Math.abs(c.x/b.x);0>c.x&&(f=90-90*Math.abs(c.x/b.x));
transformCSS({perspective:6E3,rotateY:f});transformCSS({perspective:6E3,rotateY:f});this.downMask.rotateY=f;this.upMask.rotateY=f;0>c.x/b.x?(this.upMask.setVisible(!1),this.downMask.setVisible(!1)):(this.upMask.setVisible(!1),this.downMask.setVisible(!0));this.setHardFlipShadow(e);this.setFlipAlpha(d,b,c);this.book.followToPoint(this,b,c)}}},setHardFlipShadow:function(b){b&&(this.upMask&&this.upMask.setFlipShadow(b,!0),this.downMask&&this.downMask.setFlipShadow(b,!1))},setPageZIndex:function(){var b=
this.downMask.pageIndex,c=this.upMask.pageIndex,d=originTotalPageCount+5+c,e=originTotalPageCount+5-b;if(bookConfig.HardPageEnable){if(c==totalPageCount||1==c)d=2*(bookConfig.totalPageCount+5)+10;if(b==totalPageCount||1==b)e=2*(bookConfig.totalPageCount+5)+10}this.upMask.setZIndex(d);this.downMask.setZIndex(e)},setFlipAlpha:function(b,c,d){},setFlipOriginPoint:function(){this.dragMoveToFlip||rightToLeft||(this.fromPoint={x:this.pageWidth,y:this.pageHeight});!this.dragMoveToFlip&&rightToLeft&&(this.fromPoint=
{x:-this.pageWidth,y:this.pageHeight});this.toPoint="left"==this.book.flipToDirection?{x:-this.pageWidth,y:this.fromPoint.y}:{x:this.pageWidth,y:this.fromPoint.y};this.startPoint||(this.startPoint={x:0,y:0});this.startPoint.x=-this.toPoint.x;this.startPoint.y=this.toPoint.y},endFlipByIndex:function(b){b=transformCSS({rotate:0,tran:{x:0,y:0}});this.upMask.clearTran();this.upMask.page&&this.upMask.page.setCSSByStyle(b);this.downMask.clearTran();this.downMask.page&&this.downMask.page.setCSSByStyle(b);
this.upMask.setLeftOrRight(rightToLeft);this.downMask.setLeftOrRight(rightToLeft);this.book.setZIndexByPageIndex(this.upMask);this.book.setZIndexByPageIndex(this.downMask);this.upMask.clearFlipShadow();this.downMask.clearFlipShadow()}}).extend(IssuuFlipPage),IssuuFlipPageManager=Class({create:function(b){this.book=b;this.array=[];this.pinDownCurlingArray=[];this.fallbackArray=[];this.flipArray=[];this.zoomArray=[];this.resizeArray=[];this.hardFlipArray=[];this.softFlipArray=[];this.coverFlipArray=
[]},initFlipPageByIndex:function(b,c,d){if(this.book.isCoverPage(b,c))return this.initCoverFlipByIndex(b,c,d);if(this.book.isHardPage(b,c))return this.initHardFlipByIndex(b,c,d);d=this.book.getDownUpPage(b,c,d);var e=b+"-"+c;this[e]||(this[e]=this.book.newFlipPage());this[e].downMask=d[0];this[e].upMask=d[1];this[e].currentIndex=b;this[e].nextIndex=c;this[e].hardPage=!1;this[e].resetWidthHeight();0>this.array.indexOf(e)&&this.array.push(e);0>this.softFlipArray.indexOf(e)&&this.softFlipArray.push(e);
return this[e]},initHardFlipByIndex:function(b,c,d){d=this.book.getDownUpHardPage(b,c,d);var e=b+"-"+c;this[e]||(this[e]=this.book.newFlipPage());this[e].downMask=d[0];this[e].upMask=d[1];this[e].currentIndex=b;this[e].nextIndex=c;this[e].hardPage=!0;this[e].resetWidthHeight();0>this.array.indexOf(e)&&this.array.push(e);0>this.hardFlipArray.indexOf(e)&&this.hardFlipArray.push(e);return this[e]},initCoverFlipByIndex:function(b,c,d){d=this.book.getDownUpHardPage(b,c,d);var e=b+"-"+c;this[e]||(this[e]=
this.book.newFlipPage());this[e].downMask=d[0];this[e].upMask=d[1];this[e].currentIndex=b;this[e].nextIndex=c;this[e].hardPage=!0;this[e].coverPage=!0;this[e].resetWidthHeight();0>this.array.indexOf(e)&&this.array.push(e);0>this.coverFlipArray.indexOf(e)&&this.coverFlipArray.push(e);return this[e]},checkFlipping:function(){for(var b=this.array.length,c=0;c<b;c++)if(this.array[c]){var d=this.array[c];if(this[d]&&this[d].flipping)return!0}return!1},removeFlipArrayByIndex:function(b){b=b.currentIndex+
"-"+b.nextIndex;this[b]&&this[b].nextPage&&this[b].nextPage.clearFlipShadow();this[b]&&delete this[b];this.array&&this.array.removeElement(b);this.flipArray&&this.flipArray.removeElement(b);this.hardFlipArray&&this.hardFlipArray.removeElement(b);this.softFlipArray&&this.softFlipArray.removeElement(b);this.coverFlipArray&&this.coverFlipArray.removeElement(b);this.pinDownCurlingArray&&this.pinDownCurlingArray.removeElement(b);this.fallbackArray&&this.fallbackArray.removeElement(b)},endFlip:function(){if(this.array&&
0!=this.array.length)for(var b=this.array.length,c=0;c<b;c++)if(this.array[c]){var d=this[this.array[c]];d&&(d.endFlipByIndex(),this.removeFlipArrayByIndex(d))}},doNotMeetPageConditions:function(b){if(this.hasBeenMonitor()||this.hasUnLoosenPage()||this.fallbackArray&&0<this.fallbackArray.length||0<=this.book.getPagesByIndex(b).indexOf(this.book.currentPageIndex))return!0;var c=!1;!rightToLeft&&b>this.book.currentPageIndex&&(c=!0);rightToLeft&&b<this.book.currentPageIndex&&(c=!0);return this.isReverseSeriesFlip(c)||
this.isReversePinDownCurlingArray(c,b)?!0:this.existMutexPages(b)?(this.monitorMutexFlipSituation(b),!0):this.crossFlipMode(b)?(this.book.gotoNearPage(b),window.setTimeout(function(){gotoPageFun(b,!1,"cross page")},20),!0):this.crossPageMode(b)?(window.setTimeout(function(){gotoPageFun(b,!1,"cross page")},20),!0):!1},hasBeenMonitor:function(){return this.monitorMutexFlipInterval?!0:!1},hasUnLoosenPage:function(){var b=this.book.optionPage;return b&&this[b]&&!this[b].loosen?!0:!1},isReverseSeriesFlip:function(b){if(b&&
this.book.flipping&&this.book.flipToDirection==this.book.direction_right||!b&&this.book.flipping&&this.book.flipToDirection==this.book.direction_left)return!0},isReversePinDownCurlingArray:function(b,c){if(!this.pinDownCurlingArray||0>=this.pinDownCurlingArray.length)return!1;c=this.book.getPagesByIndex(c);for(var d=this.pinDownCurlingArray.length,e=0;e<d;e++){var f=this[this.pinDownCurlingArray[e]];if(b&&f&&f.AliceToRight||!b&&f&&f.AliceToLeft||f&&0>c.indexOf(f.nextIndex))return!0}return!1},existMutexPages:function(b){return this.hardFlipArray&&
0<this.hardFlipArray.length&&(this.toSoftPage(b)||this.toCoverPage(b))||this.softFlipArray&&0<this.softFlipArray.length&&(this.toHardPage(b)||this.toCoverPage(b))||this.coverFlipArray&&0<this.coverFlipArray.length&&(this.toHardPage(b)||this.toSoftPage(b))?!0:!1},monitorMutexFlipSituation:function(b){this.monitorMutexFlipInterval||(this.monitorMutexFlipInterval=window.setInterval(function(){this.existMutexPages(b)||(window.clearInterval(this.monitorMutexFlipInterval),this.monitorMutexFlipInterval=
void 0,gotoPageFun(b,!1,"cross page"))}.bind(this),20))},toSoftPage:function(b){return this.book.toSoftPage(b)},toHardPage:function(b){return this.book.toHardPage(b)},toCoverPage:function(b){return this.book.toCoverPage(b)},crossFlipMode:function(b){return this.book.crossFlipMode(b)?!0:!1},crossPageMode:function(b){var c=this.book.getFlipTo(b),d=c.minIndex,e=c.maxIndex,f=c.toIndex;if("max"==c.flipTo){if(this.book.pageInfoArray[e].isMiniPage&&!(0<=this.book.getPagesByIndex(e+1).indexOf(b)))return nextPageFun("cross page"),
!0;if(this.book.pageInfoArray[f].isMiniPage&&!(0<=this.book.getPagesByIndex(e+1).indexOf(b)))return gotoPageFun(f-1,!1,"cross page"),!0}if("min"==c.flipTo){if(this.book.pageInfoArray[d].isMiniPage&&!(0<=this.book.getPagesByIndex(d-1).indexOf(b)))return previousPageFun("cross page"),!0;if(this.book.pageInfoArray[f].isMiniPage&&!(0<=this.book.getPagesByIndex(d-1).indexOf(b)))return gotoPageFun(f+1,!1,"cross page"),!0}},beyondPageRange:function(b){return 0>=b||b>originTotalPageCount?!0:!1},beforeFlip:function(b,
c){try{var d=this.book.beforeFlipTo(b,!0);this.isDragMoveToFlip(d);if(!d.dragMoveToFlip){var e=this.book.getFromStartPointByIndex(b,d);d.flipToPoint(e[0],e[1],!0)}var f=d.currentIndex+"-"+d.nextIndex;this.book.optionPage==f&&(this.book.optionPage=null);0<this.pinDownCurlingArray.indexOf(f)&&(d.dragMoveToFlip=!0);0>this.flipArray.indexOf(f)&&this.flipArray.push(f);this.fallbackArray.removeElement(f);this.pinDownCurlingArray.removeElement(f);d.startToFlip();this.book.flipping=!0;return d}catch(g){}},
isDragMoveToFlip:function(b){b.dragMoveToFlip=!1;b.coordinate&&b.startPoint&&b.coordinate.x!=b.startPoint.x&&(b.dragMoveToFlip=!0)}}),IssuuSingleFlipBook=Class({pageBackArray:null,create:function(b){this.pageBackArray=[];this._super(b)},newFlipPage:function(){return new IssuuSingleFlipPage(this)},resetPages:function(b){isNaN(b)||0>=b||(this.unWrapPageBackExcludeArray([b,b+1]),this.unWrapPageExcludeArray([b,b+1]),this.addPageArray([b,b+1]),this.addPageBackArray([b]),this.currentPage=this.pageArray[b],
this.currentPage2=this.pageBackArray[b],this.nextPage=this.pageArray[b+1],this.previousPage=this.pageArray[b-1],this.previousPage2=this.pageBackArray[b-1],this.setPageCss(),this.loading())},setPageCss:function(){this.currentPage&&(this.setZIndexByPageIndex(this.currentPage),this.currentPage.clearTran());this.previousPage&&(this.setZIndexByPageIndex(this.previousPage),this.previousPage.clearTran());this.previousPage2&&(this.setZIndexByPageIndex(this.previousPage2),this.previousPage2.clearTran());this.currentPage2&&
(this.setZIndexByPageIndex(this.currentPage2),this.currentPage2.clearTran());this.nextPage&&(this.setZIndexByPageIndex(this.nextPage),this.nextPage.clearTran());rightToLeft?(this.currentPage&&this.currentPage.setLeftOrRight(!0),this.previousPage&&this.previousPage.setLeftOrRight(!0),this.previousPage2&&this.previousPage2.setLeftOrRight(!0),this.currentPage2&&this.currentPage2.setLeftOrRight(!0),this.nextPage&&this.nextPage.setLeftOrRight(!0)):(this.currentPage&&this.currentPage.setLeftOrRight(!1),
this.previousPage&&this.previousPage.setLeftOrRight(!1),this.previousPage2&&this.previousPage2.setLeftOrRight(!1),this.currentPage2&&this.currentPage2.setLeftOrRight(!1),this.nextPage&&this.nextPage.setLeftOrRight(!1))},addPageBackArray:function(b){if(b&&this.pageBackArray)for(var c=0;c<b.length;c++)if(!(0>=b[c]||b[c]>originTotalPageCount||(!this.pageBackArray[b[c]]||this.flipping&&!imageLoaded[b[c]]||this.fillContent(b[c],!0),this.pageBackArray[b[c]]))){var d=this.newPageBack(b[c]),e=this.pageInfoArray[b[c]];
d.mirrorSide();d.onResize(this.pageWidth*e.pageWidth,this.pageHeight*e.pageHeight,e.opacity);this.pageBackArray[b[c]]=d;this.flipping&&!imageLoaded[b[c]]||this.fillContent(b[c],!0);this.flipBook.append(d.$page)}},getDownUpPage:function(b,c){var d=b;b>c&&(d=c);this.addPageArray([d]);this.addPageBackArray([d]);this.pageArray[d]&&this.pageArray[d].beginToFlip();this.pageBackArray[d]&&this.pageBackArray[d].beginToFlip();this.pageArray[d]&&this.pageArray[d].page.setCSSByName("right-flip-side");this.pageBackArray[d]&&
(this.pageBackArray[d].page.setCSSByName("flip-side"),this.pageBackArray[d].page.side.addClass("boxShadow"));return[this.pageArray[d],this.pageBackArray[d]]},getDownUpHardPage:function(b,c){var d=b;b>c&&(d=c);this.addPageArray([d]);this.addPageBackArray([d]);rightToLeft?(this.pageArray[d]&&this.pageArray[d].setCSSByName("flip-hard-left-side"),this.pageBackArray[d]&&this.pageBackArray[d].setCSSByName("flip-hard-right-side")):(this.pageArray[d]&&this.pageArray[d].setCSSByName("flip-hard-right-side"),
this.pageBackArray[d]&&this.pageBackArray[d].setCSSByName("flip-hard-left-side"));return[this.pageArray[d],this.pageBackArray[d]]},flipToMax:function(b,c,d){var e=this.flipPageManager.initFlipPageByIndex(b,c);this.addPagesBeforeFlipToMax(c,d);this.pageArray[c]&&(this.pageArray[c].setLeftOrRight(rightToLeft),e.nextPage=this.pageArray[c]);this.setPagesStyleBeforeFlipToMax(c,d);this.deleteUnnecessaryPagesBeforeFlipToMax(b,c);return e},hidePagesBeforeFlip:function(b){if(!this.supportSerialsFlip()){var c=
this.pageArray.length;this.flipPageArray=[];var d=b.currentIndex;b=b.nextIndex;for(var e=[d,b],f=0;f<c;f++)0>e.indexOf(f)&&(this.pageArray[f]&&this.pageArray[f].visible&&(this.flipPageArray.push(this.pageArray[f]),this.pageArray[f].setVisible(!1)),this.pageBackArray[f]&&this.pageBackArray[f].visible&&(this.flipPageArray.push(this.pageBackArray[f]),this.pageBackArray[f].setVisible(!1)));c=Math.max(d,b);this.pageBackArray[c]&&this.pageBackArray[c].visible&&(this.flipPageArray.push(this.pageBackArray[c]),
this.pageBackArray[c].setVisible(!1))}},showPagesAfterFlip:function(){if(!this.supportSerialsFlip()&&this.flipPageArray){for(var b=this.flipPageArray.length,c=0;c<b;c++){var d=this.flipPageArray[c];d&&d.setVisible(!0)}this.flipPageArray=[]}},addPagesBeforeFlipToMax:function(b,c){this.addPageArray([b]);c&&this.supportSerialsFlip()&&(this.addPageBackArray([b]),this.addPageArray([b+1]))},setPagesStyleBeforeFlipToMax:function(b,c){c&&(this.pageArray[b]&&(this.setZIndexByPageIndex(this.pageArray[b],b),
this.pageArray[b].setLeftOrRight(rightToLeft)),this.pageBackArray[b]&&(this.setZIndexByPageIndex(this.pageBackArray[b],b),this.pageBackArray[b].setLeftOrRight(rightToLeft)),this.pageArray[b+1]&&(this.setZIndexByPageIndex(this.pageArray[b+1],b),this.pageArray[b+1].setLeftOrRight(rightToLeft)))},deleteUnnecessaryPagesBeforeFlipToMax:function(b,c){for(var d=c+1;d<=originTotalPageCount;d++)this.pageBackArray[d]&&(this.pageBackArray[d]&&this.pageBackArray[d].remove(),this.pageBackArray[d]=void 0);for(d=
c+2;d<=originTotalPageCount;d++)this.pageArray[d]&&(this.pageArray[d]&&this.pageArray[d].remove(),this.pageArray[d]=void 0);for(d=b+1;d<c;d++)if(this.pageArray[d]||this.pageBackArray[d])this.pageArray[d]&&this.pageArray[d].remove(),this.pageBackArray[d]&&this.pageBackArray[d].remove(),this.pageArray[d]=void 0,this.pageBackArray[d]=void 0},afterFlipToMax:function(b){this.addPagesAfterFlipToMax(b);this.setPagesStyleAfterFlipToMax(b);this.deleteUnnecessaryPagesAfterFlipToMax(b)},addPagesAfterFlipToMax:function(b){this.supportSerialsFlip()||
(this.addPageArray([b]),this.addPageBackArray([b]),this.addPageArray([b+1]));this.pageArray[b]&&this.fillContent(b);this.pageArray[b+1]&&this.fillContent(b+1)},setPagesStyleAfterFlipToMax:function(b){this.pageArray[b-1]&&this.setZIndexByPageIndex(this.pageArray[b-1],b);this.pageBackArray[b-1]&&this.setZIndexByPageIndex(this.pageBackArray[b-1],b);this.supportSerialsFlip()||(this.pageArray[b]&&(this.setZIndexByPageIndex(this.pageArray[b]),this.pageArray[b].setLeftOrRight(rightToLeft)),this.pageBackArray[b]&&
(this.setZIndexByPageIndex(this.pageBackArray[b]),this.pageBackArray[b].setLeftOrRight(rightToLeft)),this.pageArray[b+1]&&(this.setZIndexByPageIndex(this.pageArray[b+1]),this.pageArray[b+1].setLeftOrRight(rightToLeft)))},deleteUnnecessaryPagesAfterFlipToMax:function(b){for(b-=2;0<=b;b--)if(this.pageArray[b]||this.pageBackArray[b])this.pageArray[b]&&this.pageArray[b].remove(),this.pageBackArray[b]&&this.pageBackArray[b].remove(),this.pageArray[b]=void 0,this.pageBackArray[b]=void 0},flipToMin:function(b,
c,d){var e=this.flipPageManager.initFlipPageByIndex(b,c);this.addPagesBeforeFlipToMin(c,d);this.pageArray[b]&&(e.nextPage=this.pageArray[b]);this.setPagesStyleBeforeFlipToMin(c);this.deleteUnnecessaryPagesBeforeFlipToMin(b,c);return e},addPagesBeforeFlipToMin:function(b,c){},setPagesStyleBeforeFlipToMin:function(b){},deleteUnnecessaryPagesBeforeFlipToMin:function(b,c){for(--b;b>c;b--)if(this.pageArray[b]||this.pageBackArray[b])this.pageArray[b]&&this.pageArray[b].remove(),this.pageBackArray[b]&&this.pageBackArray[b].remove(),
this.pageArray[b]=void 0,this.pageBackArray[b]=void 0},afterFlipToMin:function(b){this.addPagesAfterFlipToMin(b);this.setPagesStyleAfterFlipToMin(b);this.deleteUnnecessaryPagesAfterFlipToMin(b)},addPagesAfterFlipToMin:function(b){this.supportSerialsFlip()||(this.addPageArray([b]),this.addPageBackArray([b]),this.addPageArray([b-1]));this.pageArray[b]&&this.fillContent(b);this.pageArray[b-1]&&this.fillContent(b-1)},setPagesStyleAfterFlipToMin:function(b){this.pageArray[b+1]&&(this.setZIndexByPageIndex(this.pageArray[b+
1]),this.pageArray[b+1].setLeftOrRight(rightToLeft));this.supportSerialsFlip()||(this.pageArray[b]&&(this.setZIndexByPageIndex(this.pageArray[b]),this.pageArray[b].setLeftOrRight(rightToLeft)),this.pageBackArray[b]&&(this.setZIndexByPageIndex(this.pageBackArray[b]),this.pageBackArray[b].setLeftOrRight(rightToLeft)),this.pageArray[b-1]&&(this.setZIndexByPageIndex(this.pageArray[b-1]),this.pageArray[b-1].setLeftOrRight(rightToLeft)))},deleteUnnecessaryPagesAfterFlipToMin:function(b){for(var c=b+2;c<=
originTotalPageCount;c++)if(this.pageArray[c]||this.pageBackArray[c])this.pageArray[c]&&this.pageArray[c].remove(),this.pageBackArray[c]&&this.pageBackArray[c].remove(),this.pageArray[c]=void 0,this.pageBackArray[c]=void 0;this.pageBackArray[b+1]&&(this.pageBackArray[b+1]&&this.pageBackArray[b+1].remove(),this.pageBackArray[b+1]=void 0)},getCurrentPages:function(){return[this.currentPageIndex]},getPagesByIndex:function(b){return[b]},movetoCenter:function(){},getFromStartPointByIndex:function(b,c){var d=
this.currentPageIndex;if(b!=d&&b!=d){var e={x:0,y:0},f=c.getPageWidthHeight().width,g=c.getPageWidthHeight().height,h=!1;c={x:f,y:g};rightToLeft&&(c={x:-f,y:g});if(b>d&&!rightToLeft||b<d&&rightToLeft)h=!0;if(b<d&&!rightToLeft||b>d&&rightToLeft)h=!1;b>d&&(e={x:c.x*(f-2)/f,y:g-2});b<d&&(e={x:-c.x*(f-2)/f,y:g-2});this.flipToDirection=h?"left":"right";return[c,e]}},realBookPosition:function(){var b=this.flipBook.offset().left-(rightToLeft?0:this.pageWidth),c=this.flipBook.offset().top;return[b,c]},edgeX:function(){this.MiddleX=
this.pageWidth/2;rightToLeft&&(this.MiddleX=-this.pageWidth/2)},realIndex:function(b){var c=this.currentPageIndex;if(b&&!rightToLeft||!b&&rightToLeft)return[c,c+1];if(!b&&!rightToLeft||b&&rightToLeft)return[c,c-1]},getFromStartPointByCoordinate:function(b,c,d){if(b){var e={x:0,y:0},f={x:0,y:0},g=d.getPageWidthHeight().width;d=d.getPageWidthHeight().height;var h=b.y>d/2?b.y-5:b.y+5;b.x<this.MiddleX&&(e.y=h,f.x=-g);b.x>this.MiddleX&&(e.y=h,f.x=g);c&&0<=c.indexOf("r")&&(f.x=g);c&&0<=c.indexOf("l")&&
(f.x=-g);"tl"==c&&(e.y=0);"bl"==c&&(e.y=d);"tr"==c&&(e.y=0);"br"==c&&(e.y=d);e.x=rightToLeft?-g:g;f.y=e.y;return[e,f]}},getFlipTo:function(b){var c=this.currentPageIndex,d="";b>c&&(d="max");b<c&&(d="min");return{flipTo:d,minIndex:c,maxIndex:c,toIndex:b}},afterZoomIn:function(b){if(!isPhone()&&!isPad()||bookConfig.usePdfJs){if(isPhone()||isPad()||this.showPages(),b&&this.flipBook.parameters&&!this.flipBook.parameters.resize){this.flipBook.parameters.resize=!0;b=this.flipBook.offset().left;var c=this.flipBook.offset().top;
b-=this.flipBook.parameters.left;var d=c-this.flipBook.parameters.top;c=this.flipBook.parameters.scale;1!=c&&this.resizeBook(Math.round(this.width*c),Math.round(this.height*c),c);transformCSS({tran:{x:b,y:d},scale:1,origin:{x:0,y:0},obj:this.flipBook});this.flipBook.parameters.tran={x:b,y:d};this.flipBook.parameters.scale=1;this.flipBook.parameters.toScale=1;this.flipBook.parameters.width=$(this.flipBook).width();this.flipBook.parameters.height=$(this.flipBook).height();this.flipBook.parameters.origin=
{x:0,y:0};this.flipBook.parameters.resize=!1;isPhone()||isPad()||this.switchLargeImage()}}else if(d=BookInfo.getCurrentPages(),void 0!=d&&null!=d)for(var e=0;e<d.length;e++){var f=d[e];this.pageArray[f]&&this.pageArray[f]&&(c=this.flipBook.parameters.scale,this.pageArray[f].resizeSvg(Math.round(this.width*c),Math.round(this.height*c)),bookConfig.highDefinitionConversion?this.pageArray[f].zoomInSideImage():(1<b.scale&&this.pageArray[f].zoomInSideImage(),1==b.scale&&this.pageArray[f].zoomOutSideImage()))}},
setZIndexByPageIndex:function(b,c){b&&(c=c?c:this.currentPageIndex,b==this.pageArray[c]?b.setZIndex(2):b==this.pageBackArray[c]?b.setZIndex(1):b==this.pageArray[c+1]?b.setZIndex(0):b.setZIndex(-1))},getFitWH:function(){var b=this.getCurrentPageIndex();b=this.getFitWHByIndex(b);return{x:b[0].x,y:b[0].y}},getSpace:function(b){var c=bookConfig.leftMargin+templateArea.getLeftWidth(),d=bookConfig.rightMargin+templateArea.getRightWidth(),e=bookConfig.topMargin+templateArea.getTopHeight(),f=bookConfig.bottomMargin+
templateArea.getBottomHeight();b&&(c+=rightToLeft?bookConfig.hardCoverBorderWidth+totalThicknessWidth(!1):0,d+=rightToLeft?0:bookConfig.hardCoverBorderWidth+totalThicknessWidth(!1),e+=bookConfig.hardCoverBorderWidth,f+=bookConfig.hardCoverBorderWidth);return{left:c,right:d,top:e,bottom:f}},getTranX:function(b){if(!bookConfig.retainBookCenter)return 0;b=this.getCssLeft();var c=this.getSpace(!0);return c.left+(windowWidth-c.left-c.right-this.width)/2-b},getTranY:function(){var b=this.getCssTop(),c=
this.getSpace(!0);return c.top+(windowHeight-c.top-c.bottom-this.pageWidthHeight.y)/2-b}}).extend(FlipBook),IssuuDoubleFlipBook=Class({create:function(b){this._super(b)},newFlipPage:function(){return new IssuuDoubleFlipPage(this)},resetPages:function(b){isNaN(b)||0>=b||(b=this.getMinPageIndex(b),this.unWrapPageExcludeArray([b,b+1,b+2,b+3,b-1,b-2]),this.addPageArray([b,b+1,b+2,b+3,b-1,b-2]),this.currentPage=this.pageArray[b],this.currentPage2=this.pageArray[b+1],this.nextPage=this.pageArray[b+2],this.nextPage2=
this.pageArray[b+3],this.previousPage=this.pageArray[b-1],this.previousPage2=this.pageArray[b-2],this.setPageCss(),this.loading())},setPageCss:function(){this.currentPage&&(this.setZIndexByPageIndex(this.currentPage),this.currentPage.clearTran());this.previousPage&&(this.setZIndexByPageIndex(this.previousPage),this.previousPage.clearTran());this.previousPage2&&(this.setZIndexByPageIndex(this.previousPage2),this.previousPage2.clearTran());this.currentPage2&&(this.setZIndexByPageIndex(this.currentPage2),
this.currentPage2.clearTran());this.nextPage&&(this.setZIndexByPageIndex(this.nextPage),this.nextPage.clearTran());this.nextPage2&&(this.setZIndexByPageIndex(this.nextPage2),this.nextPage2.clearTran());rightToLeft?(this.currentPage&&this.currentPage.setLeftOrRight(!1),this.previousPage&&this.previousPage.setLeftOrRight(!1),this.previousPage2&&this.previousPage2.setLeftOrRight(!1),this.currentPage2&&this.currentPage2.setLeftOrRight(!0),this.nextPage&&this.nextPage.setLeftOrRight(!0),this.nextPage2&&
this.nextPage2.setLeftOrRight(!0)):(this.currentPage&&this.currentPage.setLeftOrRight(!0),this.previousPage&&this.previousPage.setLeftOrRight(!0),this.previousPage2&&this.previousPage2.setLeftOrRight(!0),this.currentPage2&&this.currentPage2.setLeftOrRight(!1),this.nextPage&&this.nextPage.setLeftOrRight(!1),this.nextPage2&&this.nextPage2.setLeftOrRight(!1))},getDownUpHardPage:function(b,c,d){this.addPageArray([b,c]);d?(this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-left-side"),this.pageArray[c]&&
this.pageArray[c].setCSSByName("flip-hard-right-side")):(this.pageArray[b]&&this.pageArray[b].setCSSByName("flip-hard-right-side"),this.pageArray[c]&&this.pageArray[c].setCSSByName("flip-hard-left-side"));return[this.pageArray[b],this.pageArray[c]]},getDownUpPage:function(b,c){this.addPageArray([b,c]);this.pageArray[b]&&this.pageArray[b].beginToFlip();this.pageArray[c]&&this.pageArray[c].beginToFlip();this.pageArray[b]&&(this.pageArray[b].page.setCSSByName("right-flip-side"),this.setZIndexByPageIndex(this.pageArray[b]));
this.pageArray[c]&&(this.pageArray[c].page.setCSSByName("flip-side"),this.pageArray[c].page.side.addClass("boxShadow"),this.setZIndexByPageIndex(this.pageArray[c]));return[this.pageArray[b],this.pageArray[c]]},flipToMax:function(b,c,d,e){e=this.flipPageManager.initFlipPageByIndex(b,c,e);this.addPagesBeforeFlipToMax(c,d);this.pageArray[c+1]&&(this.pageArray[c+1].setLeftOrRight(rightToLeft),e.nextPage=this.pageArray[c+1]);this.setPagesStyleBeforeFlipToMax(c,d);this.deleteUnnecessaryPagesBeforeFlipToMax(b,
c);return e},addPagesBeforeFlipToMax:function(b,c){this.addPageArray([b+1]);c&&this.supportSerialsFlip()&&this.addPageArray([b+2,b+3])},setPagesStyleBeforeFlipToMax:function(b,c){c&&this.supportSerialsFlip()&&(this.pageArray[b+1]&&this.setZIndexByPageIndex(this.pageArray[b+1],b),this.pageArray[b+2]&&(this.setZIndexByPageIndex(this.pageArray[b+2],b),this.pageArray[b+2].setLeftOrRight(rightToLeft)),this.pageArray[b+3]&&(this.setZIndexByPageIndex(this.pageArray[b+3],b),this.pageArray[b+3].setLeftOrRight(rightToLeft)))},
deleteUnnecessaryPagesBeforeFlipToMax:function(b,c){for(var d=c+4;d<=originTotalPageCount;d++)this.pageArray[d]&&(this.pageArray[d].remove(),this.pageArray[d]=void 0);for(d=b+1;d<c;d++)this.pageArray[d]&&(this.pageArray[d].remove(),this.pageArray[d]=void 0)},afterFlipToMax:function(b,c){b=this.getMinPageIndex(b);this.addPagesAfterFlipToMax(b);this.setPagesStyleAfterFlipToMax(b);this.deleteUnnecessaryPagesAfterFlipToMax(b)},addPagesAfterFlipToMax:function(b){this.flipping||this.addPageArray([b+3,b,
b-1,b-2]);this.supportSerialsFlip()||this.addPageArray([b+2,b+3]);this.pageArray[b+1]&&this.fillContent(b+1);this.pageArray[b+2]&&this.fillContent(b+2);this.pageArray[b+3]&&this.fillContent(b+3)},setPagesStyleAfterFlipToMax:function(b){this.pageArray[b]&&(this.setZIndexByPageIndex(this.pageArray[b],b),this.pageArray[b].setLeftOrRight(!rightToLeft));this.pageArray[b-1]&&(this.setZIndexByPageIndex(this.pageArray[b-1],b),this.pageArray[b-1].setLeftOrRight(!rightToLeft));this.pageArray[b-2]&&(this.setZIndexByPageIndex(this.pageArray[b-
2],b),this.pageArray[b-2].setLeftOrRight(!rightToLeft));this.supportSerialsFlip()&&this.flipping||(this.pageArray[b+1]&&this.setZIndexByPageIndex(this.pageArray[b+1]),this.pageArray[b+2]&&(this.setZIndexByPageIndex(this.pageArray[b+2]),this.pageArray[b+2].setLeftOrRight(rightToLeft)),this.pageArray[b+3]&&(this.setZIndexByPageIndex(this.pageArray[b+3]),this.pageArray[b+3].setLeftOrRight(rightToLeft)))},deleteUnnecessaryPagesAfterFlipToMax:function(b){for(b-=3;0<=b;b--)this.pageArray[b]&&(this.pageArray[b].remove(),
this.pageArray[b]=void 0)},flipToMin:function(b,c,d,e){e=this.flipPageManager.initFlipPageByIndex(b,c,e);this.addPagesBeforeFlipToMin(c,d);this.pageArray[c-1]&&(this.pageArray[c-1].setLeftOrRight(!rightToLeft),e.nextPage=this.pageArray[c-1]);this.setPagesStyleBeforeFlipToMin(c,d);this.deleteUnnecessaryPagesBeforeFlipToMin(b,c);return e},addPagesBeforeFlipToMin:function(b,c){this.addPageArray([b-1]);c&&this.supportSerialsFlip()&&this.addPageArray([b-2,b-3])},setPagesStyleBeforeFlipToMin:function(b,
c){c&&this.supportSerialsFlip()&&(this.pageArray[b-1]&&this.setZIndexByPageIndex(this.pageArray[b-1],b),this.pageArray[b-2]&&(this.setZIndexByPageIndex(this.pageArray[b-2],b),this.pageArray[b-2].setLeftOrRight(!rightToLeft)),this.pageArray[b-3]&&(this.setZIndexByPageIndex(this.pageArray[b-3],b),this.pageArray[b-3].setLeftOrRight(!rightToLeft)))},deleteUnnecessaryPagesBeforeFlipToMin:function(b,c){for(var d=c-4;0<=d;d--)this.pageArray[d]&&(this.pageArray[d].remove(),this.pageArray[d]=void 0);for(d=
b-1;d>c;d--)this.pageArray[d]&&(this.pageArray[d].remove(),this.pageArray[d]=void 0)},afterFlipToMin:function(b,c){b=this.getMaxPageIndex(b);this.addPagesAfterFlipToMin(b);this.setPagesStyleAfterFlipToMin(b);this.deleteUnnecessaryPagesAfterFlipToMin(b)},addPagesAfterFlipToMin:function(b){this.flipping||this.addPageArray([b-3,b,b+1,b+2]);this.supportSerialsFlip()||this.addPageArray([b-2,b-3]);this.pageArray[b-1]&&this.fillContent(b-1);this.pageArray[b-2]&&this.fillContent(b-2);this.pageArray[b-3]&&
this.fillContent(b-3)},setPagesStyleAfterFlipToMin:function(b){this.pageArray[b]&&(this.setZIndexByPageIndex(this.pageArray[b],b),this.pageArray[b].setLeftOrRight(rightToLeft));this.pageArray[b+1]&&(this.setZIndexByPageIndex(this.pageArray[b+1],b),this.pageArray[b+1].setLeftOrRight(rightToLeft));this.pageArray[b+2]&&(this.setZIndexByPageIndex(this.pageArray[b+2],b),this.pageArray[b+2].setLeftOrRight(rightToLeft));this.supportSerialsFlip()&&this.flipping||(this.pageArray[b-1]&&this.setZIndexByPageIndex(this.pageArray[b-
1]),this.pageArray[b-2]&&(this.setZIndexByPageIndex(this.pageArray[b-2]),this.pageArray[b-2].setLeftOrRight(!rightToLeft)),this.pageArray[b-3]&&(this.setZIndexByPageIndex(this.pageArray[b-3]),this.pageArray[b-3].setLeftOrRight(!rightToLeft)))},deleteUnnecessaryPagesAfterFlipToMin:function(b){for(b+=3;b<=originTotalPageCount;b++)this.pageArray[b]&&(this.pageArray[b].remove(),this.pageArray[b]=void 0)},getFlipTo:function(b){var c=this.getMinPageIndex(this.currentPageIndex);b=this.getMinPageIndex(b);
var d=c+1,e="";b>d&&(e="max");b+1<c&&(e="min",b+=1);return{flipTo:e,minIndex:c,maxIndex:d,toIndex:b}},getCurrentPages:function(){return BookInfo.getPagesByIndex(this.currentPageIndex)},getPagesByIndex:function(b){return BookInfo.getPagesByIndex(b)},movetoCenter:function(b,c,d){if(!this.status_zoom&&bookConfig.retainBookCenter&&!(1<BookInfo.getPagesByIndex(b).length&&1<BookInfo.getPagesByIndex(c).length)){var e=this.pageWidth,f=-e/2,g=e/2,h=0,k=0;BookInfo.isLeftPage(b,!0)||1!=BookInfo.getPagesByIndex(b).length||
(h=f);BookInfo.isLeftPage(b,!0)&&1==BookInfo.getPagesByIndex(b).length&&(h=g);BookInfo.isLeftPage(c,!0)||1!=BookInfo.getPagesByIndex(c).length||(k=f);BookInfo.isLeftPage(c,!0)&&1==BookInfo.getPagesByIndex(c).length&&(k=g);this.fromTrans=0>this.movedX*k&&this.toTrans!=k?this.movedX:h;this.toTrans=k;b=2*e;void 0==d&&(d=b);isNaN(d)||(this.movedLength=d,this.movedX=$.easing.easeInOutSine(null,d,this.fromTrans,this.toTrans-this.fromTrans,b),d={tran:{x:parseInt(this.movedX),y:0}},this.setCSS(d))}},edgeX:function(){this.MiddleX=
0},getFromStartPointByIndex:function(b,c){var d=this.getMinPageIndex(this.currentPageIndex),e=d+1;if(b!=e&&b!=d){var f={x:0,y:0},g={x:0,y:0},h=c.getPageWidthHeight().width;c=c.getPageWidthHeight().height;var k=!1;if(b>e&&!rightToLeft||b<d&&rightToLeft)f={x:h,y:c},g.x=f.x-2,g.y=f.y-2,k=!0;if(b<d&&!rightToLeft||b>e&&rightToLeft)f={x:-h,y:c},g.x=f.x+2,g.y=f.y-2,k=!1;this.flipToDirection=k?"left":"right";return[f,g]}},afterZoomIn:function(b){if(!isPhone()&&!isPad()||bookConfig.usePdfJs){if(isPhone()||
isPad()||this.showPages(),b&&this.flipBook.parameters&&!this.flipBook.parameters.resize){this.flipBook.parameters.resize=!0;b=this.flipBook.offset().left;var c=this.flipBook.offset().top,d=this.flipBook.parameters.left,e=c-this.flipBook.parameters.top;var f=this.flipBook.parameters.scale;d={tran:{x:parseInt(b-d),y:parseInt(e)},scale:1,origin:{x:0,y:0}};1!=f&&this.resizeBook(Math.round(this.width*f),Math.round(this.height*f),f);this.status_zoom||(d.tran={x:0,y:0},d.left=b-0,d.top=c-0);this.setCSS(d);
this.flipBook.parameters.tran=d.tran;this.flipBook.parameters.scale=1;this.flipBook.parameters.toScale=1;this.flipBook.parameters.width=$(this.flipBook).width();this.flipBook.parameters.height=$(this.flipBook).height();this.flipBook.parameters.origin={x:0,y:0};this.flipBook.parameters.resize=!1;isPhone()||isPad()||this.switchLargeImage()}}else if(c=BookInfo.getCurrentPages(),void 0!=c&&null!=c)for(f=0;f<c.length;f++)d=c[f],this.pageArray[d]&&(bookConfig.highDefinitionConversion?this.pageArray[d].zoomInSideImage():
(1<b.scale&&this.pageArray[d].zoomInSideImage(),1==b.scale&&this.pageArray[d].zoomOutSideImage()))},setZIndexByPageIndex:function(b,c){b&&(c=c?c:this.currentPageIndex,c=this.getMinPageIndex(c),b==this.pageArray[c+1]?b.setZIndex(2):b==this.pageArray[c+2]?b.setZIndex(1):b==this.pageArray[c+3]?b.setZIndex(0):b==this.pageArray[c]?b.setZIndex(2):b==this.pageArray[c-1]?b.setZIndex(1):b==this.pageArray[c-2]&&b.setZIndex(0))},getFitWH:function(){var b=this.getCurrentPageIndex(),c=this.getFitWHByIndex(b);
b=parseInt(c[0].x+c[1].x);c=parseInt(c[0].y);return{x:b,y:c}},getSpace:function(b){var c=bookConfig.leftMargin+templateArea.getLeftWidth(),d=bookConfig.rightMargin+templateArea.getRightWidth(),e=bookConfig.topMargin+templateArea.getTopHeight(),f=bookConfig.bottomMargin+templateArea.getBottomHeight();b&&(c+=bookConfig.hardCoverBorderWidth+totalThicknessWidth(!0),d+=bookConfig.hardCoverBorderWidth+totalThicknessWidth(!0),e+=bookConfig.hardCoverBorderWidth,f+=bookConfig.hardCoverBorderWidth);return{left:c,
right:d,top:e,bottom:f}},getMinPageIndex:function(b){return b=bookConfig.isTheBookOpen?2*Math.ceil(b/2)-1:2*Math.floor(b/2)},getMaxPageIndex:function(b){return b=bookConfig.isTheBookOpen?2*Math.ceil(b/2):2*Math.floor(b/2)+1},getTranX:function(b){if(!bookConfig.retainBookCenter)return 0;b=this.getCssLeft();var c=this.getSpace(!0);return c.left+(windowWidth-c.left-c.right-this.width)/2-b},getTranY:function(){var b=this.getCssTop(),c=this.getSpace(!0);return c.top+(windowHeight-c.top-c.bottom-this.pageWidthHeight.y)/
2-b}}).extend(FlipBook),IssuuBook=Class({bookType:BookType.normal_book,doublePage:!0,create:function(b){bookConfig.bookPageStretch=!0;this._super(b);this.resetZoomArea();bookConfig.supportSerialsFlip=!1},initBook:function(){this._super()},resetBookShadow:function(b){},hasTwoSingleFlipPage:function(b){for(var c=this.flipPageManager.array.length,d,e=0;e<c;e++){var f=this.flipPageManager.array[e],g=this.flipPageManager[f].nextIndex;f=this.flipPageManager[f].currentIndex;1==BookInfo.getPagesByIndex(g).length&&
(d=g);1==BookInfo.getPagesByIndex(f).length&&(d=f)}return d&&(d!=b&&1==BookInfo.getPagesByIndex(b).length||d!=this.currentPageIndex&&1==BookInfo.getPagesByIndex(this.currentPageIndex).length)?!0:!1},newPage:function(b){return new IssuuNormalPage(b,"page",!1,this.bookType)},flippingTo:function(b){this.currentPageIndex=b;this.currentPageIndex=Math.max(1,this.currentPageIndex);this.currentPageIndex=Math.min(originTotalPageCount,this.currentPageIndex);this.resetZoomArea()},resetZoomArea:function(){this.flipBook.parameters.zoomArea=
{left:0,top:0,right:0,bottom:0}},afterCurling:function(){this._super();this.resetBookShadow(this.currentPageIndex)},setAttachmentBeforeFlipTo:function(b){this.pauseAnimation();this.bookAttachments.setAttachmentBeforeFlipTo(b);this.resetBookShadow(b)},setAttachmentAfterFlipTo:function(b){this.stopMedia();this.resetSlider();this.resetBookShadow(b);this.flipping||this.enterPage();bookConfig.ThumbnailsButtonVisible&&global.thumbnail&&(thumbnail.clearHighLight(),thumbnail.setHighLight(this.currentPageIndex));
window.resizeBookAfterFlip&&!this.flipping&&window.setTimeout(function(){onStageResize()},30)},resizeBook:function(b,c,d){this.endFlip();this.width=b;this.height=c;this.pageWidth=b;this.pageHeight=c;this.maskWidth=parseInt(Math.sqrt(b*b+c*c));0!=(this.maskWidth-this.height)%2&&(this.maskWidth+=1);this.setCSS({width:this.width,height:this.height});this.resizePage(this.pageWidth,this.pageHeight,d);this.resetBookShadow(this.currentPageIndex)},resizePage:function(b,c,d){b=this.getFitWHByIndex(this.currentPageIndex);
var e=BookInfo.getLeftPages(this.currentPageIndex);c=BookInfo.getRightPages(this.currentPageIndex);for(var f=0;f<e.length;f++){var g=this.pageArray[e[f]];if(g)if(d)g.onResize(g.pageWidth*d,g.pageHeight*d);else g.onResize(b[0].x,b[0].y)}for(e=0;e<c.length;e++)if(g=this.pageArray[c[e]])if(d)g.onResize(g.pageWidth*d,g.pageHeight*d);else g.onResize(b[1].x,b[1].y)},addPageArray:function(b){if(b&&this.pageArray)for(var c=0;c<b.length;c++)if(!(0>=b[c]||b[c]>originTotalPageCount||(this.pageArray[b[c]]&&this.fillContent(b[c]),
this.pageArray[b[c]]))){var d=this.newPage(b[c]);d.fillPreviewImage();var e=this.getFitWHByIndex(this.currentPageIndex);if(b[c]>=this.getMaxPageIndex(this.currentPageIndex)&&bookConfig.RightToLeft||b[c]<=this.getMinPageIndex(this.currentPageIndex)&&!bookConfig.RightToLeft)d.onResize(e[0].x,e[0].y);else d.onResize(e[1].x,e[1].y);this.pageArray[b[c]]=d;this.fillContent(b[c]);this.flipBook.append(d.$page)}},resizeAttachments:function(b,c){this.bookAttachments.onResize(b,c)},resetPages:function(b){this._super(b);
b=this.getTranScaleByIndex(b);this.scalePages(BookInfo.getRightPages(this.currentPageIndex),2,2,b[1],b[1],{x:0,y:50});this.scalePages(BookInfo.getLeftPages(this.currentPageIndex),2,2,b[0],b[0],{x:100,y:50})},afterFlipTo:function(b,c){this._super(b,c);resizeFlipBook();this.scalePages(BookInfo.getRightPages(this.currentPageIndex),2,2,{x:1,y:1},{x:1,y:1},{x:0,y:50});this.scalePages(BookInfo.getLeftPages(this.currentPageIndex),2,2,{x:1,y:1},{x:1,y:1},{x:100,y:50})},afterCurling:function(){this._super();
this.getTranScaleByIndex(this.currentPageIndex);this.scalePages(BookInfo.getRightPages(this.currentPageIndex),2,2,{x:1,y:1},{x:1,y:1},{x:0,y:50});this.scalePages(BookInfo.getLeftPages(this.currentPageIndex),2,2,{x:1,y:1},{x:1,y:1},{x:100,y:50})},movetoCenter:function(b,c,d){if(bookConfig.retainBookCenter){var e=this.getMovedXByIndex(c).x-this.getMovedXByIndex(b).x,f=this.width;if(void 0==d||d>f)d=f;if(!isNaN(d)){this.movedLength=d;var g=this.getFitWHByIndex(b),h=this.getFitWHByIndex(c);this.status_zoom&&
(g=this.getFitWHByIndex(b,this.width,this.height),h=this.getFitWHByIndex(c,this.width,this.height));this.getFlipTo(c);var k=BookInfo.getMinPageIndex(b),l=BookInfo.getMaxPageIndex(b);if(bookConfig.RightToLeft)if(b<c){var n=this.scalePages([k,k-1,k-2],d,f,g[1],h[1],{x:0,y:50});k=this.scalePages([l,c],d,f,g[0],h[1],{x:100,y:50},!1,0,{x:-g[1].x,y:0});var p=this.scalePages([c+1],d,f,g[0],h[0],{x:100,y:50},!0,k);this.scalePages([c+2],d,f,g[0],h[0],{x:100,y:50})}else k=this.scalePages([k,c],d,f,g[1],h[0],
{x:100,y:50},!1,0,{x:-g[1].x,y:0}),n=this.scalePages([c-1],d,f,g[1],h[1],{x:0,y:50},!0,k),this.scalePages([c-2],d,f,g[1],h[1],{x:0,y:50}),p=this.scalePages([l,l+1,l+2],d,f,g[0],h[0],{x:100,y:50});else b<c?(p=this.scalePages([k,k-1,k-2],d,f,g[0],h[0],{x:100,y:50}),k=this.scalePages([l,c],d,f,g[1],h[0],{x:100,y:50},!1,0,{x:-g[1].x,y:0}),n=this.scalePages([c+1],d,f,g[1],h[1],{x:0,y:50},!0,k),this.scalePages([c+2],d,f,g[1],h[1],{x:0,y:50})):(k=this.scalePages([k,c],d,f,g[0],h[1],{x:100,y:50},!1,0,{x:-g[1].x,
y:0}),p=this.scalePages([c-1],d,f,g[0],h[0],{x:100,y:50},!0,k),this.scalePages([c-2],d,f,g[0],h[0],{x:100,y:50}),n=this.scalePages([l,l+1,l+2],d,f,g[1],h[1],{x:0,y:50}));this.movedX=$.easing.easeInOutSine(null,d,0,e+(h[0].x-g[0].x)-0,f);e={tran:{x:parseInt(this.movedX),y:0}};this.status_zoom||this.setCSS(e);this.bookAttachments.Items.find("ThicknessManager").each(function(r){r.leftThickness&&r.leftThickness.doSetMovingScale(b,c,d,f,!1,p.y,(-p.x+1)*g[0].x);r.rightThickness&&r.rightThickness.doSetMovingScale(b,
c,d,f,!1,n.y,(n.x-1)*g[1].x)}.bind(this));this.bookAttachments.Items.find("BookmarkTab").each(function(r){r.setScale(p.x,p.y,(-p.x+1)*g[0].x,(-p.y+1)*g[0].y/2,n.x,n.y,(n.x-1)*g[1].x,(-p.y+1)*g[1].y/2)}.bind(this))}}},getDownUpPage:function(b,c){this.addPageArray([b,c]);var d=this.getFitWHByIndex(this.currentPageIndex);d=transformCSS({tran:{x:-d[1].x,y:0},origin:{x:100,y:50}});this.pageArray[b]&&(this.pageArray[b].beginToFlip(),this.pageArray[b].setCSSByStyle(d));this.pageArray[c]&&(this.pageArray[c].beginToFlip(),
this.pageArray[c].setCSSByStyle(d));this.pageArray[b]&&(this.pageArray[b].page.setCSSByName("right-flip-side"),this.setZIndexByPageIndex(this.pageArray[b]));this.pageArray[c]&&(this.pageArray[c].page.setCSSByName("flip-side"),this.pageArray[c].page.side.addClass("boxShadow"),this.setZIndexByPageIndex(this.pageArray[c]));return[this.pageArray[b],this.pageArray[c]]},getMovedXByIndex:function(b){var c=this.getSpace(),d=this.getFitWHByIndex(b);b=parseInt(d[0].x+d[1].x);d=parseInt(d[0].y);return{x:(windowWidth-
c.left-c.right-b)/2+c.left,y:(windowHeight-c.top-c.bottom-d)/2+c.top}},scalePages:function(b,c,d,e,f,g,h,k,l){try{var n=1,p=1;n=$.easing.easeInOutSine(null,c,1,f.x/e.x-1,d);p=$.easing.easeInOutSine(null,c,1,f.y/e.y-1,d);for(c=0;c<b.length;c++){var r=this.pageArray[b[c]];if(r){var B=transformCSS({tran:l?l:{x:0,y:0},scale:{x:n,y:p},origin:g});this.isCoverPage(b[c])&&(r.tran=l?l:{x:0,y:0},r.scale={x:n,y:p},r.rotateY?(r.$page[0].style.removeProperty("transform-origin"),d=void 0,B=transformCSS({scale:{x:n,
y:p},perspective:6E3,rotateY:null!=(d=r.rotateY)?d:0})):(d=void 0,B=transformCSS({origin:g,scale:{x:n,y:p},perspective:6E3,rotateY:null!=(d=r.rotateY)?d:0})));r.setCSSByStyle(B);if(r.page.pageFlipShadow){var v=h?transformCSS({scale:{x:k.x/n,y:1},origin:g}):transformCSS({scale:{x:1,y:1},origin:g});r.page.pageFlipShadow&&r.page.pageFlipShadow.setCSSByStyle(v)}}}return{x:n,y:p}}catch(w){}},getTranScaleByIndex:function(b){return this.getFitWHByIndex(b)},getFitWHByIndex:function(b,c,d){this.getSpace(!1);
var e=this.getSpace(!0);c||(c=windowWidth-e.left-e.right);d||(d=windowHeight-e.top-e.bottom);e=[];b=[BookInfo.getLeftPageIndex(b),BookInfo.getRightPageIndex(b)];for(var f=0;f<b.length;f++)b[f]?e.push(window.pageList&&pageList[b[f]-1]?pageList[b[f]-1]:{width:bookConfig.largePageWidth,height:bookConfig.largePageHeight}):e.push({width:0,height:bookConfig.largePageHeight});f=e[0].height;b=e[0].width;e=e[1]?f*e[1].width/e[1].height:0;c=fitPageWidthHeight(c,d,b+e,f);d=[];d.push({x:Math.round(b/(b+e)*c.x),
y:Math.round(c.y)});d.push({x:Math.round(e/(b+e)*c.x),y:Math.round(c.y)});return d},getPagesFitWHByIndex:function(b){this.getSpace(!1);var c=this.getSpace(!0),d=windowWidth-c.left-c.right,e=windowHeight-c.top-c.bottom,f=[];c=BookInfo.getPagesByIndex(b);for(var g=0;g<c.length;g++)c[g]?f.push(window.pageList&&pageList[c[g]-1]?pageList[c[g]-1]:{width:bookConfig.largePageWidth,height:bookConfig.largePageHeight}):f.push({width:0,height:bookConfig.largePageHeight});var h=f[0].height;g=f[0].width;f=f[1]?
h*f[1].width/f[1].height:0;d=fitPageWidthHeight(d,e,g+f,h);e=[];e.push({x:Math.round(g/(g+f)*d.x),y:Math.round(d.y)});e.push({x:Math.round(f/(g+f)*d.x),y:Math.round(d.y)});return c[0]==b?e[0]:e[1]},getSpace:function(b){var c=bookConfig.leftMargin+templateArea.getLeftWidth(),d=bookConfig.rightMargin+templateArea.getRightWidth(),e=bookConfig.topMargin+templateArea.getTopHeight(),f=bookConfig.bottomMargin+templateArea.getBottomHeight();b&&(c+=bookConfig.hardCoverBorderWidth+totalThicknessWidth(!0),d+=
bookConfig.hardCoverBorderWidth+totalThicknessWidth(!0),e+=bookConfig.hardCoverBorderWidth,f+=bookConfig.hardCoverBorderWidth);return{left:c,right:d,top:e,bottom:f}},afterZoomIn:function(b){b&&this.flipBook.parameters&&!this.flipBook.parameters.resize&&(this._super(b),this.bookAttachments.afterZoomIn(this.width,this.height))},getCurrentPageWidthHeight:function(b){this.edgeX();var c=this.getFitWHByIndex(this.currentPageIndex);if(b<=this.MiddleX&&!rightToLeft||b>=this.MiddleX&&rightToLeft)return{pageWidth:c[0].x,
pageHeight:c[0].y};if(b<=this.MiddleX&&rightToLeft||b>=this.MiddleX&&!rightToLeft)return{pageWidth:c[1].x,pageHeight:c[1].y}},realPoint:function(b){if((b=b.originalEvent&&b.originalEvent.changedTouches?b.originalEvent.changedTouches:b.changedTouches?b.changedTouches:[b])&&!(3<=b.length)){var c=this.realBookPosition()[0],d=this.realBookPosition()[1],e=b[0].pageX,f=b[0].pageY;bookConfig.upsideOnMobile()&&(e=b[0].pageY,f=windowHeight-b[0].pageX);var g=this.getFitWHByIndex(this.currentPageIndex);if(bookConfig.FlipDirection){f=
f-d-g[0].y;var h=this.getCurrentPageWidthHeight(f),k=h.pageWidth;e=this.pageWidth-(e-c)-(this.pageWidth-k)/2;if(!b[1])return[{x:f,y:e}];h=b[1].pageX;b=b[1].pageY;h=this.pageWidth-(h-c)-(this.pageWidth-k)/2;b=b-d-g[0].y;return[{x:f,y:e},{x:b,y:h}]}e=e-c-g[0].x;h=this.getCurrentPageWidthHeight(e);k=h.pageHeight;f=f-d-(this.pageHeight-k)/2;if(!b[1])return[{x:e,y:f}];h=b[1].pageX;b=b[1].pageY;h=h-c-g[0].x;b=b-d-(this.pageHeight-k)/2;return[{x:e,y:f},{x:h,y:b}]}}}).extend(IssuuDoubleFlipBook),SingleIssuuBook=
Class({bookType:BookType.single_book,doublePage:!1,create:function(b){bookConfig.bookPageStretch=!0;this._super(b);this.resetZoomArea();bookConfig.supportSerialsFlip=!1},initBook:function(){this._super()},resetBookShadow:function(b){},hasTwoSingleFlipPage:function(b){for(var c=this.flipPageManager.array.length,d,e=0;e<c;e++){var f=this.flipPageManager.array[e],g=this.flipPageManager[f].nextIndex;f=this.flipPageManager[f].currentIndex;1==BookInfo.getPagesByIndex(g).length&&(d=g);1==BookInfo.getPagesByIndex(f).length&&
(d=f)}return d&&(d!=b&&1==BookInfo.getPagesByIndex(b).length||d!=this.currentPageIndex&&1==BookInfo.getPagesByIndex(this.currentPageIndex).length)?!0:!1},newPage:function(b){return new IssuuNormalPage(b,"page",!0,this.bookType)},newPageBack:function(b){return new IssuuNormalPage(b,"pageBack",!0,BookType.single_book,!0)},flippingTo:function(b){this.currentPageIndex=b;this.currentPageIndex=Math.max(1,this.currentPageIndex);this.currentPageIndex=Math.min(originTotalPageCount,this.currentPageIndex);this.resetZoomArea()},
resetZoomArea:function(){this.flipBook.parameters.zoomArea={left:0,top:0,right:0,bottom:0}},afterCurling:function(){this._super();this.resetBookShadow(this.currentPageIndex)},setAttachmentBeforeFlipTo:function(b){this.pauseAnimation();this.bookAttachments.setAttachmentBeforeFlipTo(b);this.resetBookShadow(b)},setAttachmentAfterFlipTo:function(b){this.stopMedia();this.resetSlider();this.resetBookShadow(b);this.flipping||this.enterPage();bookConfig.ThumbnailsButtonVisible&&global.thumbnail&&(thumbnail.clearHighLight(),
thumbnail.setHighLight(this.currentPageIndex));window.resizeBookAfterFlip&&!this.flipping&&window.setTimeout(function(){onStageResize()},30)},resizeBook:function(b,c,d){this.endFlip();this.width=b;this.height=c;this.pageWidth=b;this.pageHeight=c;this.maskWidth=parseInt(Math.sqrt(b*b+c*c));0!=(this.maskWidth-this.height)%2&&(this.maskWidth+=1);this.setCSS({width:this.width,height:this.height});this.resizePage(this.pageWidth,this.pageHeight,d);this.resetBookShadow(this.currentPageIndex)},resizePage:function(b,
c,d){b=this.getFitWHByIndex(this.currentPageIndex);for(var e=0;e<this.pageArray.length;e++)if(c=this.pageArray[e])if(d)c.onResize(c.pageWidth*d,c.pageHeight*d);else c.onResize(b[0].x,b[0].y);for(e=0;e<this.pageBackArray.length;e++)if(c=this.pageBackArray[e])if(d)c.onResize(c.pageWidth*d,c.pageHeight*d);else c.onResize(b[0].x,b[0].y)},addPageArray:function(b){if(b&&this.pageArray)for(var c=0;c<b.length;c++)if(!(0>=b[c]||b[c]>originTotalPageCount||(this.pageArray[b[c]]&&this.fillContent(b[c]),this.pageArray[b[c]]))){var d=
this.newPage(b[c]);d.fillPreviewImage();var e=this.getFitWHByIndex(this.currentPageIndex);d.onResize(e[0].x,e[0].y);this.pageArray[b[c]]=d;this.fillContent(b[c]);this.flipBook.append(d.$page)}},resizeAttachments:function(b,c){this.bookAttachments.onResize(b,c)},resetPages:function(b){this._super(b);var c=this.getTranScaleByIndex(b);this.scalePages(BookInfo.getRightPages(b),2,2,c[1],c[1],{x:0,y:50});this.scalePages(BookInfo.getLeftPages(b),2,2,c[0],c[0],{x:100,y:50})},afterFlipTo:function(b,c){this._super(b,
c);resizeFlipBook();this.scalePages(BookInfo.getRightPages(),2,2,{x:1,y:1},{x:1,y:1},{x:0,y:50});this.scalePages(BookInfo.getLeftPages(),2,2,{x:1,y:1},{x:1,y:1},{x:100,y:50})},afterCurling:function(){this._super();this.scalePages(BookInfo.getRightPages(),2,2,{x:1,y:1},{x:1,y:1},{x:0,y:50});this.scalePages(BookInfo.getLeftPages(),2,2,{x:1,y:1},{x:1,y:1},{x:100,y:50})},movetoCenter:function(b,c,d){if(bookConfig.retainBookCenter){var e=this.getMovedXByIndex(c).x-this.getMovedXByIndex(b).x,f=this.width;
if(void 0==d||d>f)d=f;if(!isNaN(d)){this.movedLength=d;var g=this.getFitWHByIndex(b),h=this.getFitWHByIndex(c);this.status_zoom&&(g=this.getFitWHByIndex(b,this.width,this.height),h=this.getFitWHByIndex(c,this.width,this.height));if(bookConfig.RightToLeft)if(b<c){var k=this.scalePages([c],d,f,g[0],h[0],{x:0,y:50},!1,0,{x:-g[0].x,y:0});this.scalePages([c+1,c-1],d,f,g[0],h[0],{x:0,y:50},!0,k);this.scalePages([c,c-1],d,f,g[0],h[0],{x:0,y:50})}else k=this.scalePages([c],d,f,g[0],h[0],{x:0,y:50},!1,0,{x:-g[0].x,
y:0}),this.scalePages([c+1,c-1],d,f,g[0],h[0],{x:0,y:50},!0,k),this.scalePages([c,c+1],d,f,g[0],h[0],{x:0,y:50});else b<c?(k=this.scalePages([c],d,f,g[0],h[0],{x:0,y:50},!1,0,{x:-g[0].x,y:0}),this.scalePages([c+1,c-1],d,f,g[0],h[0],{x:0,y:50},!0,k),this.scalePages([c,c-1],d,f,g[0],h[0],{x:0,y:50})):(k=this.scalePages([c],f-d,f,g[0],h[0],{x:0,y:50},!1,0,{x:-g[0].x,y:0}),this.scalePages([c+1,c-1],f-d,f,g[0],h[0],{x:0,y:50},!0,k),this.scalePages([c,c+1],f-d,f,g[0],h[0],{x:0,y:50}));this.movedX=$.easing.easeInOutSine(null,
b<c?d:f-d,0,e-0,f);e={tran:{x:parseInt(this.movedX),y:0}};this.status_zoom||this.setCSS(e);this.bookAttachments.Items.find("ThicknessManager").each(function(l){l.leftThickness&&l.leftThickness.hide();l.rightThickness&&l.rightThickness.doSetMovingScale(b,c,d,f,!1,k.y,(k.x-1)*g[0].x)}.bind(this));this.bookAttachments.Items.find("BookmarkTab").each(function(l){l.setScale(1,1,0,0,k.x,k.y,(k.x-1)*g[0].x,(-k.y+1)*g[0].y/2)}.bind(this));this.hardCover&&this.hardCover.doSetMovingScale(k)}}},getDownUpPage:function(b,
c){var d=b;b>c&&(d=c);this.addPageArray([d]);this.addPageBackArray([d]);b=this.getFitWHByIndex(this.currentPageIndex);b=transformCSS({tran:{x:-b[1].x,y:0},origin:{x:100,y:50}});this.pageArray[d]&&(this.pageArray[d].beginToFlip(),this.pageArray[d].setCSSByStyle(b));this.pageBackArray[d]&&(this.pageBackArray[d].beginToFlip(),this.pageBackArray[d].setCSSByStyle(b));this.pageArray[d]&&this.pageArray[d].page.setCSSByName("right-flip-side");this.pageBackArray[d]&&(this.pageBackArray[d].page.setCSSByName("flip-side"),
this.pageBackArray[d].page.side.addClass("boxShadow"));return[this.pageArray[d],this.pageBackArray[d]]},getMovedXByIndex:function(b){var c=this.getSpace(),d=this.getFitWHByIndex(b);b=parseInt(d[0].x+d[1].x);d=parseInt(d[0].y);return{x:(windowWidth-c.left-c.right-b)/2+c.left,y:(windowHeight-c.top-c.bottom-d)/2+c.top}},scalePages:function(b,c,d,e,f,g,h,k,l){var n=this;try{var p=1,r=1;p=$.easing.easeInOutSine(null,c,1,f.x/e.x-1,d);r=$.easing.easeInOutSine(null,c,1,f.y/e.y-1,d);c=function(v){if(v){var w=
transformCSS({tran:l?l:{x:0,y:0},scale:{x:p,y:r},origin:g});if(n.isCoverPage(v.pageIndex))if(v.tran=l?l:{x:0,y:0},v.scale={x:p,y:r},v.rotateY){v.$page[0].style.removeProperty("transform-origin");var u;w=transformCSS({scale:{x:p,y:r},perspective:6E3,rotateY:null!=(u=v.rotateY)?u:0})}else{var x;w=transformCSS({origin:g,scale:{x:p,y:r},perspective:6E3,rotateY:null!=(x=v.rotateY)?x:0})}v.setCSSByStyle(w);w=h?transformCSS({scale:{x:k.x/p,y:1},origin:g}):transformCSS({scale:{x:1,y:1},origin:g});v.page.pageFlipShadow&&
v.page.pageFlipShadow.setCSSByStyle(w)}};for(d=0;d<b.length;d++){var B=this.pageBackArray[b[d]];c(this.pageArray[b[d]]);c(B)}return{x:p,y:r}}catch(v){}},getTranScaleByIndex:function(b){return this.getFitWHByIndex(b)},getFitWHByIndex:function(b,c,d){this.getSpace(!1);var e=this.getSpace(!0);c||(c=windowWidth-e.left-e.right);d||(d=windowHeight-e.top-e.bottom);e=[];b=[b];for(var f=0;f<b.length;f++)b[f]?e.push(window.pageList&&pageList[b[f]-1]?pageList[b[f]-1]:{width:bookConfig.largePageWidth,height:bookConfig.largePageHeight}):
e.push({width:0,height:bookConfig.largePageHeight});f=e[0].height;b=e[0].width;e=e[1]?f*e[1].width/e[1].height:0;c=fitPageWidthHeight(c,d,b+e,f);d=[];d.push({x:Math.round(b/(b+e)*c.x),y:Math.round(c.y)});d.push({x:Math.round(e/(b+e)*c.x),y:Math.round(c.y)});return d},getPagesFitWHByIndex:function(b){this.getSpace(!1);var c=this.getSpace(!0);b=window.pageList&&pageList[b-1]?pageList[b-1]:{width:bookConfig.largePageWidth,height:bookConfig.largePageHeight};c=fitPageWidthHeight(windowWidth-c.left-c.right,
windowHeight-c.top-c.bottom,b.width,b.height);return{x:Math.round(c.x),y:Math.round(c.y)}},getSpace:function(b){var c=bookConfig.leftMargin+templateArea.getLeftWidth(),d=bookConfig.rightMargin+templateArea.getRightWidth(),e=bookConfig.topMargin+templateArea.getTopHeight(),f=bookConfig.bottomMargin+templateArea.getBottomHeight();b&&(c+=rightToLeft?bookConfig.hardCoverBorderWidth+totalThicknessWidth(!1):0,d+=rightToLeft?0:bookConfig.hardCoverBorderWidth+totalThicknessWidth(!1),e+=bookConfig.hardCoverBorderWidth,
f+=bookConfig.hardCoverBorderWidth);return{left:c,right:d,top:e,bottom:f}},afterZoomIn:function(b){b&&this.flipBook.parameters&&!this.flipBook.parameters.resize&&(this._super(b),this.bookAttachments.afterZoomIn(this.width,this.height))},getCurrentPageWidthHeight:function(b){this.edgeX();b=this.getFitWHByIndex(this.currentPageIndex);return{pageWidth:b[0].x,pageHeight:b[0].y}},realPoint:function(b){if((b=b.originalEvent&&b.originalEvent.changedTouches?b.originalEvent.changedTouches:b.changedTouches?
b.changedTouches:[b])&&!(3<=b.length)){var c=this.realBookPosition()[0],d=this.realBookPosition()[1],e=b[0].pageX,f=b[0].pageY;bookConfig.upsideOnMobile()&&(e=b[0].pageY,f=windowHeight-b[0].pageX);var g=this.getFitWHByIndex(this.currentPageIndex);if(bookConfig.FlipDirection){f=f-d-g[0].y;var h=this.getCurrentPageWidthHeight(f),k=h.pageWidth;e=this.pageWidth-(e-c)-(this.pageWidth-k)/2;if(!b[1])return[{x:f,y:e}];h=b[1].pageX;b=b[1].pageY;h=this.pageWidth-(h-c)-(this.pageWidth-k)/2;b=b-d-g[0].y;return[{x:f,
y:e},{x:b,y:h}]}e=e-c-g[0].x;h=this.getCurrentPageWidthHeight(e);k=h.pageHeight;f=f-d-(this.pageHeight-k)/2;if(!b[1])return[{x:e,y:f}];h=b[1].pageX;b=b[1].pageY;h=h-c-g[0].x;b=b-d-(this.pageHeight-k)/2;return[{x:e,y:f},{x:h,y:b}]}}}).extend(IssuuSingleFlipBook),CardBook=Class({create:function(b){this._super(b);this.defineProperty();this.bookType=BookType.card_book;this.currentPageIndex=this.getRealBookIndex(b.currentPageIndex);this.mainPageIndex=this.getRealBookIndex(b.currentPageIndex);this.initBook();
this.initAttachments();this.initEvent()},defineProperty:function(){this.showPage=this.flipBookElement=this.bookAttachments=null;this.scrollableWidth=this.contentWidth=0;this.pageSpacing=bookConfig.continuousPageArrangement?0:windowWidth;this.unitOffset=this.currentOffset=this.totalOffset=this.startOffset=0;this.unitRotate=-45;this.k=0;this.flipAnimation=null;this.flipping=!1;this.isUpdateOffset=!0;this.status_resize=this.isZooming=this.status_zoom=this.selected=!1;this.toPageIndex=0},getRealBookIndex:function(b){return b=
Number.between(b,1,bookConfig.totalPageCount)},initBook:function(){this.flipBookElement=$("<div class='card-book' id='card-book'></div>");this.parent.append(this.flipBookElement)},refreshPages:function(b){if(bookConfig.RightToLeft){var c=1-(this.currentOffset-this.startOffset-this.pageWidth)/this.unitOffset;var d=Math.max(1,Math.ceil(1-(this.currentOffset-this.startOffset+this.width)/this.unitOffset)-2);c=Math.min(bookConfig.totalPageCount,Math.floor(c)+2)}else d=this.currentOffset-this.startOffset,
c=d+this.width,d=Math.max(1,Math.floor(d/this.unitOffset)+1-2),c=Math.min(bookConfig.totalPageCount,Math.ceil(c/this.unitOffset)+2);for(var e=d;e<=c;e++){if(bookConfig.RightToLeft){var f=this.startOffset+this.unitOffset*(1-e)-this.currentOffset;var g=this.unitRotate*(1-e)-this.k*this.currentOffset}else f=this.startOffset+this.unitOffset*(e-1)-this.currentOffset,g=this.unitRotate*(e-1)-this.k*this.currentOffset;if(this.pageArray[e]){var h=this.pageArray[e];h.refreshTransform({x:f,y:0},{x:0,y:g});if(!["flipping",
"flipped"].includes(b))h.onResize(this.pageWidth,this.pageHeight)}else h=new CardBookPage(this,e),h.initialize(this.pageWidth,this.pageHeight,{x:f,y:0},{x:0,y:g},e),this.pageArray[e]=h}if("flipping"!==b){for(b=0;b<this.pageArray.length;b++)(b<d||b>c)&&this.pageArray[b]&&(this.pageArray[b].remove(),this.pageArray[b]=void 0);this.loading();this.fillContent()}if(b=this.pageArray[this.currentPageIndex])this.showPage=b.pagesElement,$(".card-side").css({"z-index":3}),$("#card-side-"+this.currentPageIndex).css({"z-index":4})},
initAttachments:function(){this.bookAttachments=new BookAttachmentsBuilder(this.flipBookElement,this.currentPageIndex,this,this.options.isDoublePage);this.options.thickness&&this.bookAttachments.thickness(!0);this.options.bookshadow&&this.bookAttachments.bookshadow();this.options.grayshadow&&this.bookAttachments.grayshadow();this.options.miniFullscreen&&this.bookAttachments.miniFullscreen();this.options.bookpagenumber&&this.bookAttachments.bookpagenumber();this.options.staticad&&this.bookAttachments.staticad();
this.options.zoommap&&this.bookAttachments.zoommap();this.options.bookmarktab&&this.bookAttachments.bookmarktab();this.options.noteadd&&this.bookAttachments.noteadd()},getBook:function(){return this.flipBookElement},show:function(){this.visible=!0;this.setStyleByCSS({display:"block"});this.enterPage();this.bookAttachments&&this.bookAttachments.show()},hide:function(){this.visible=!1;this.setStyleByCSS({display:"none"});this.stopMedia();this.resetSlider();this.bookAttachments&&this.bookAttachments.hide()},
setStyleByCSS:function(b){this.flipBookElement.css(b)},enterPage:function(){this.afterChangeBookType();this.openShownMedia();this.addSearchHighlight()},afterChangeBookType:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].initReaderOrSlider()},openShownMedia:function(){var b=this.pageArray[this.currentPageIndex];b&&(b.enterSide(),b.addHistoryTexts())},stopMedia:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].leaveSide()},
addSearchHighlight:function(){var b=this.pageArray[this.currentPageIndex];b&&b.highlightSearch()},clearSearchHighlight:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].clearHighlight()},resetSlider:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].resetSlider()},onResize:function(){this.status_zoom=!1;this.endFlip();this.resizeBookAttachments();this.resizeBook();this.setPageSize();this.refreshPages("resize")},resizeBook:function(){var b=
bookConfig.topMargin+templateArea.getTopHeight(),c=bookConfig.bottomMargin+templateArea.getBottomHeight(),d=bookConfig.leftMargin+templateArea.getLeftWidth(),e=bookConfig.rightMargin+templateArea.getRightWidth();e=windowWidth-d-e;c=windowHeight-b-c;var f=bookConfig.largePageWidth*(-parseFloat(bookConfig.visibleAreaLeft)+parseFloat(bookConfig.visibleAreaRight))/100,g=bookConfig.largePageHeight*(parseFloat(bookConfig.visibleAreaBottom)-parseFloat(bookConfig.visibleAreaTop))/100;bookConfig.continuousPageArrangement?
(this.width=e,this.height=c,this.bookLeft=d,this.bookTop=b):(f=fitPageWidthHeight(e,c,f,g),this.width=parseInt(f.x),this.height=parseInt(f.y),this.bookLeft=d+(e-this.width)/2,this.bookTop=b+(c-this.height)/2);this.flipBookElement.css({width:this.width+"px",height:this.height+"px",left:this.bookLeft+"px",top:this.bookTop+"px"})},setPageSize:function(){var b=bookConfig.largePageWidth*(-parseFloat(bookConfig.visibleAreaLeft)+parseFloat(bookConfig.visibleAreaRight))/100,c=bookConfig.largePageHeight*(parseFloat(bookConfig.visibleAreaBottom)-
parseFloat(bookConfig.visibleAreaTop))/100;bookConfig.isSingleBookFullWindowOnMobile&&(isPhone()||isPad())?(this.pageWidth=windowWidth,this.pageHeight=windowHeight):(b=fitPageWidthHeight(this.width,this.height,b,c),this.pageWidth=parseInt(b.x),this.pageHeight=parseInt(b.y));b=bookConfig.totalPageCount;this.contentWidth=this.pageWidth*b+this.pageSpacing*(b-1);bookConfig.startingFromTheSide?(this.startOffset=0,this.scrollableWidth=this.contentWidth-this.width):(this.startOffset=this.width/2-this.pageWidth/
2,this.scrollableWidth=this.contentWidth-this.pageWidth);this.unitOffset=this.pageWidth+this.pageSpacing;this.k=this.unitRotate/this.unitOffset},resizeBookAttachments:function(){this.bookAttachments.onResize(this.width,this.height)},getLeft:function(){return this.bookLeft},getTop:function(){return this.bookTop},getCssLeft:function(){return parseInt(this.flipBookElement.css("left"))},getCssTop:function(){return parseInt(this.flipBookElement.css("top"))},getHeight:function(){return this.height},getWidth:function(){return this.width},
getScale:function(){var b=this.pageArray[this.currentPageIndex];return b?b.pagesElement.parameters.toScale:1},getCurrentPageIndex:function(){return this.getRealPageIndex()},getRealPageIndex:function(){var b=this.currentPageIndex;return b=Number.between(b,1,bookConfig.totalPageCount)},getCurrentPages:function(){return[this.currentPageIndex]},gotoPage:function(b,c){this.toPageIndex=b;if(this.status_zoom){b={pointers:[{pageX:windowWidth/2,pageY:windowHeight/2}]};c=this.pageArray[this.currentPageIndex];
if(!c)return;c=c.pagesElement;c.onDoubleTap.bind(c)(b);return!0}this.flipping||(!c&&flipHistory&&flipHistory.addFromCurrentIndex(this.toPageIndex),bookConfig.restorePageVisible&&this.toPageIndex!==this.currentPageIndex&&window.localStorage.setItem(realLocation+"?historyPageIndex",this.toPageIndex),this.flipAnimation&&this.flipAnimation.stop(),this.bookAttachments.setAttachmentBeforeFlipTo(b),this.playFlipAnimation(b),playFlipSound())},playFlipAnimation:function(b){this.flipping=!0;this.currentPageIndex=
b;this.isUpdateOffset&&this.updateTotalOffset(b);var c=this.currentOffset,d=this.totalOffset-c;this.flipAnimation=function(e,f){e<f?(this.currentOffset=(0,$.easing.easeInOutSine)(null,e,c,d,f),this.refreshPages("flipping")):(this.currentOffset=this.totalOffset,this.refreshPages("flipped"),this.endFlip(),this.isUpdateOffset=!0,this.flipAnimation.stop(),this.afterPlayFlipAnimation(),BookEvent.trigger("afterFlipPage",[b]))}.bind(this).animation(this,this.flippingTime)},endFlip:function(){this.flipping=
!1},updateTotalOffset:function(b){this.totalOffset=bookConfig.RightToLeft?-this.unitOffset*(b-1):this.unitOffset*(b-1)},afterPlayFlipAnimation:function(){this.stopMedia();this.resetSlider();this.enterPage();global.thumbnail&&(thumbnail.clearHighLight(),thumbnail.setHighLight(this.getRealPageIndex()));window.resizeBookAfterFlip&&window.setTimeout(function(){return onStageResize()},30);this.bookAttachments.setAttachmentAfterFlipTo()},select:function(){var b=this.pageArray[this.currentPageIndex];b&&
(this.selected=!0,b.initSelectTextEvent(),b.pagesElement.parameters.eventCancel=!0)},unSelect:function(){var b=this.pageArray[this.currentPageIndex];b&&(this.selected=!1,b.destroySelect(),b.pagesElement.parameters.eventCancel=!1,StateSynchronous.instance().findButtons("SelectTextButton",!0).each(function(c){c.setAsUnSelect();c.executeCallback()}))},magnifierZoom:function(){var b=this.pageArray[this.currentPageIndex];b&&(this.selected=!0,b.initMagnifierEvent())},unMagnifierZoom:function(){var b=this.pageArray[this.currentPageIndex];
b&&(this.selected=!1,b.destroyMagnifier(),bookConfig.MagnifierButtonVisible&&window.magnifierZoomBox&&window.magnifierZoomBox.hide(),StateSynchronous.instance().findButtons("magnifier",!0).each(function(c){c.setAsZoomin()}))},switchLargeImage:function(){var b=this.pageArray[this.currentPageIndex];b&&b.switchLargeImage()},switchNormalImage:function(b){var c=this.pageArray[this.currentPageIndex];c&&c.switchNormalImage(b)},hideOtherPage:function(){for(var b=0;b<this.pageArray.length;b++)b!==this.currentPageIndex&&
this.pageArray[b]&&this.pageArray[b].sideElement.css({display:"none"})},showAllPage:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].sideElement.css({display:"block"})},loading:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].loading()},fillContent:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].fillContent()},destroy:function(){this.flipBookElement.remove()}}).extend(Book);
CardBook.expand({initEvent:function(){this.moveDirectionType={MOVE_LEFT:-1,MOVE_RIGHT:1,MOVE_NONE:0};this.mouseMoveDirection=this.moveDirectionType.MOVE_NONE;this.initHammerEvent();this.initDomEvent();this.dragStartOffset=0;this.swipeSpeed=this.panSpeed=this.scrollSpeed=1;this.isNextPage=!0;this.dMouseWheelTime=0},initHammerEvent:function(){var b=new Hammer.Manager(this.flipBookElement[0]);b.add(new Hammer.Pan);b.on("panstart panmove",this.onPan.bind(this));b.on("panend",this.onPanEnd.bind(this))},
initDomEvent:function(){this.flipBookElement.bind("click",this.onTap.bind(this));this.flipBookElement.bind(_event._mousewheel,this.onScroll.bind(this))},onScroll:function(b){if(!(this.flipping||0>=this.scrollableWidth)){var c=b.originalEvent;c=Math.max(-1,Math.min(1,c.wheelDelta||-c.detail));if(this.status_zoom){b={pointers:[{pageX:b.pageX,pageY:b.pageY},{pageX:b.pageX,pageY:b.pageY}]};var d=this.pageArray[this.currentPageIndex];d&&d.controlBar&&(0>c?d.controlBar.zoomDown(b):d.controlBar.zoomUp(b))}!this.status_zoom&&
bookConfig.mouseWheelFlip&&this.canAcceptMouseWheel()&&(bookConfig.automaticAdsorption?(d=Math.ceil(this.scrollSpeed),c=bookConfig.RightToLeft?0<c?this.currentPageIndex+d:this.currentPageIndex-d:0>c?this.currentPageIndex+d:this.currentPageIndex-d,this.isUpdateOffset=!0,gotoPageFun(c,!1,"mouse wheel flip")):(d=this.unitOffset*this.scrollSpeed/5,bookConfig.RightToLeft?(this.isNextPage=0<c?!0:!1,c=this.currentOffset+c*d,d=0<c?0:c<-this.scrollableWidth?bookConfig.totalPageCount+1:this.getTargetPageIndex(c)):
(this.isNextPage=0>c?!0:!1,c=this.currentOffset+-c*d,d=0>c?0:c>this.scrollableWidth?bookConfig.totalPageCount+1:this.getTargetPageIndex(c)),this.totalOffset=bookConfig.RightToLeft?Number.between(c,-this.scrollableWidth,0):Number.between(c,0,this.scrollableWidth),this.isUpdateOffset=!1,gotoPageFun(d,!1,"mouse wheel flip")));if(bookConfig.mouseWheelFlip)return stopEvent(b),!1}},canAcceptMouseWheel:function(){if(0!==this.dMouseWheelTime&&150>(new Date).getTime()-this.dMouseWheelTime)return!1;this.dMouseWheelTime=
(new Date).getTime();return!0},onPan:function(b){bookType!==this.bookType||!bookConfig.mouseDragFlip||0>=this.scrollableWidth||this.selected||this.isZoomming||this.status_zoom||this.status_resize||this.flipping||("panstart"==b.type?this.dragStartOffset=this.currentOffset:"panmove"==b.type&&(bookConfig.upsideOnMobile()?(bookConfig.RightToLeft?(b=this.dragStartOffset+-b.deltaY*this.panSpeed,this.isNextPage=b<this.dragStartOffset?!0:!1):(b=this.dragStartOffset+-b.deltaY*this.panSpeed,this.isNextPage=
b>this.dragStartOffset?!0:!1),this.currentOffset=b):(bookConfig.RightToLeft?(b=this.dragStartOffset+-b.deltaX*this.panSpeed,this.isNextPage=b<this.dragStartOffset?!0:!1):(b=this.dragStartOffset+-b.deltaX*this.panSpeed,this.isNextPage=b>this.dragStartOffset?!0:!1),this.currentOffset=b),this.refreshPages("flipping")))},onPanEnd:function(b){bookType!==this.bookType||!bookConfig.mouseDragFlip||0>=this.scrollableWidth||this.selected||this.isZoomming||this.status_zoom||this.status_resize||this.flipping||
(b=this.currentOffset-this.dragStartOffset,bookConfig.automaticAdsorption?(Math.abs(b)>=.05*this.unitOffset?(b=bookConfig.RightToLeft?-b/this.unitOffset:b/this.unitOffset,b=0<b?Math.ceil(b):Math.floor(b),b=this.currentPageIndex+b):b=this.currentPageIndex,b=Number.between(b,1,bookConfig.totalPageCount),this.isUpdateOffset=!0):(b=this.getTargetPageIndex(this.totalOffset),b=Number.between(b,1,bookConfig.totalPageCount),this.totalOffset=bookConfig.RightToLeft?Number.between(this.currentOffset,-this.scrollableWidth,
0):Number.between(this.currentOffset,0,this.scrollableWidth),this.isUpdateOffset=!1),gotoPageFun(b,!1,"pan to flip"))},getTargetPageIndex:function(b){b=bookConfig.RightToLeft?-b/this.unitOffset+1:b/this.unitOffset+1;return b=this.isNextPage?Math.ceil(b):Math.floor(b)},onTap:function(b){onWindowTap(b.srcEvent)}});
var CardBookPage=Class({create:function(b,c){this.defineProperty();this.parent=b;this.parentElement=b.flipBookElement;this.pageIndex=c;this.bookType=b.bookType;this.sideElement=$("<div class='card-side'></div>");this.sideElement.attr("id","card-side-"+c);this.pagesElement=$("<div class='card-pages'></div>");this.pageElement=this.createPage(c);this.parentElement.append(this.sideElement);this.sideElement.append(this.pagesElement);this.pagesElement.append(this.pageElement);this.initEvent()},defineProperty:function(){this.controlBar=
null;this.pageIndex=this.pageHeight=this.pageWidth=0;this.clickStartPosition=this.page=null},createPage:function(b){b=new Page(b,"page-",this.bookType);b.hideMiddleShadow();b.centerPage();this.page=b;return b.side},initEvent:function(){this.sideElement.bind("mousedown",function(b){this.clickStartPosition={x:b.pageX,y:b.pageY}}.bind(this));this.sideElement.bind("click",this.onClick.bind(this));isBelowIE9()?this.pagesElement.IEZoom({sideElement:this,zoomIn:this.zoomIn.bind(this),zoomOut:this.zoomOut.bind(this),
onZoomed:this.onZoomed.bind(this)}):this.pagesElement.zoom({sideElement:this,zoomIn:this.zoomIn.bind(this),zoomOut:this.zoomOut.bind(this),onZoomed:this.onZoomed.bind(this)})},initialize:function(b,c,d,e,f){this.onResize(b,c);this.refreshTransform(d,e)},enterSide:function(){this.page.enterSide()},leaveSide:function(){this.page.leaveSide()},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;var d=transformCSS({rotate:0,tran:{x:0,y:0},scale:1});this.sideElement.css({width:b+"px",height:c+"px"});
this.pagesElement.css(Object.assign({},d,{width:b+"px",height:c+"px"}));this.page.onResize(b,c);this.resetPagesParameters();this.parent.showAllPage()},resetPagesParameters:function(){this.pagesElement.parameters&&(this.pagesElement.parameters.width=$(this.pagesElement).width(),this.pagesElement.parameters.height=$(this.pagesElement).height(),this.pagesElement.parameters.origin={x:0,y:0},this.pagesElement.parameters.tran={x:0,y:0},this.pagesElement.parameters.scale=1,this.pagesElement.parameters.toScale=
1,this.pagesElement.parameters.resize=!1,this.pagesElement.swipeInterval&&this.pagesElement.swipeInterval.stop(),this.pagesElement.animateInterval&&this.pagesElement.animateInterval.stop(),this.pagesElement.parameters.zoomFlag=!1,this.pagesElement.parameters.zoomOut=!0,this.pagesElement.parameters.toScale=1,this.pagesElement.parameters.scale=1)},refreshTransform:function(b,c){b=transformCSS({tran:b,rotateY:c.y});this.sideElement.css(b)},fillContent:function(b){this.page.fillContent(b)},fillPage:function(b,
c){this.page.fillPage(b,c)},onClick:function(b){b.stopPropagation();this.clickStartPosition&&2<Math.sqrt(Math.pow(b.pageX-this.clickStartPosition.x,2)+Math.pow(b.pageY-this.clickStartPosition.y,2))||this.parent.currentPageIndex!==this.pageIndex&&gotoPageFun(this.pageIndex,!1,"click card page")},zoomIn:function(b){this.parent.status_zoom=!0;this.parent.adContainer&&this.parent.adContainer.css({"z-index":1});StateSynchronous.instance().findButtons("ZoomButton",!0).each(function(c){c.setAsZoomout();
c.executeCallback()});global.toolBar&&global.toolBar.btnZoom&&global.toolBar.changeZoomIcon(!1);this.switchLargeImage();this.parent.hideOtherPage();bookConfig.ZoomToolbarVisible&&!this.controlBar&&(this.controlBar=new ZoomControlBar(tmpContainer),this.controlBar.setPosition((windowWidth-this.controlBar.width)/2,templateArea.getTopHeight()+5));this.controlBar&&(this.controlBar.setPosition((windowWidth-this.controlBar.width)/2,templateArea.getTopHeight()+5),this.controlBar.setVisible(bookConfig.isZoomControlBarVisible));
global.canMagnifierZoom&&BookInfo.getBook().unMagnifierZoom()},zoomOut:function(){this.parent.status_zoom=!1;this.parent.flipping||!this.parent.adContainer||1!=this.parent.currentPageIndex||bookConfig.isTheBookOpen||this.parent.adContainer.css({"z-index":3});StateSynchronous.instance().findButtons("ZoomButton",!0).each(function(b){b.setAsZoomin();b.executeCallback()});global.toolBar&&global.toolBar.btnZoom&&global.toolBar.changeZoomIcon(!0);this.switchNormalImage();this.parent.showAllPage();this.controlBar&&
this.controlBar.setVisible(!1);gotoPageFun(this.parent.toPageIndex,!1,"change book type")},onZoomed:function(b){if(isPhone()||isPad())this.onMobileZoomed(b);else this.onPCZoomed(b)},onPCZoomed:function(b){if(b&&!this.pagesElement.parameters.resize){this.pagesElement.parameters.resize=!0;b=this.pagesElement.offset().left;var c=this.pagesElement.offset().top;b-=this.pagesElement.parameters.left;c-=this.pagesElement.parameters.top;var d=this.pagesElement.parameters.scale;1!==d&&(this.pageWidth=parseInt(this.pageWidth*
d),this.pageHeight=parseInt(this.pageHeight*d),this.pagesElement.css({width:this.pageWidth+"px",height:this.pageHeight+"px"}),this.page.onResize(this.pageWidth,this.pageHeight),d=1);d=transformCSS({origin:{x:0,y:0},tran:{x:b,y:c},scale:d});this.pagesElement.css(d);this.pagesElement.parameters&&(this.pagesElement.parameters.width=$(this.pagesElement).width(),this.pagesElement.parameters.height=$(this.pagesElement).height(),this.pagesElement.parameters.origin={x:0,y:0},this.pagesElement.parameters.tran=
{x:b,y:c},this.pagesElement.parameters.scale=1,this.pagesElement.parameters.toScale=1,this.pagesElement.parameters.resize=!1)}},onMobileZoomed:function(b){this.resizeSvg(Math.round(this.pageWidth*b.scale),Math.round(this.pageHeight*b.scale));bookConfig.highDefinitionConversion?this.zoomInSideImage():(1<b.scale&&this.zoomInSideImage(),1==b.scale&&this.zoomOutSideImage())},initSelectTextEvent:function(){this.page.initSelectTextEvent()},destroySelect:function(){this.page.destroySelect()},initMagnifierEvent:function(){this.page.initMagnifierEvent()},
destroyMagnifier:function(){this.page.destroyMagnifier()},startAnimation:function(){this.page.startAnimation()},pauseAnimation:function(){this.page.pauseAnimation()},addHistoryTexts:function(b){this.page.addHistoryTexts(b)},highlightSearch:function(){this.page.highlightSearch()},clearHighlight:function(){this.page.clearHighlight()},initReaderOrSlider:function(){this.page.initReaderOrSlider()},resetSlider:function(){this.page.resetSlider()},zoomInSideImage:function(){this.page.zoomInSideImage()},zoomOutSideImage:function(){this.page.zoomOutSideImage()},
switchLargeImage:function(){this.page.switchLargeImage()},switchNormalImage:function(b){this.page.switchNormalImage(b)},resizeSvg:function(b,c){this.page.resizeSvg(b,c)},loading:function(){this.page.loading()},destroy:function(){this.sideElement.remove()},remove:function(){this.controlBar&&this.controlBar.destroy();this.sideElement.remove();this.sideElement=void 0}}),InvertBook=Class({create:function(b){this._super(b);this.defineProperty();this.bookType=BookType.invert_book;this.currentPageIndex=
this.getRealBookIndex(b.currentPageIndex);this.mainPageIndex=this.getRealBookIndex(b.currentPageIndex);this.initBook();this.initAttachments();this.initEvent()},defineProperty:function(){this.showPage=this.flipBookElement=this.bookAttachments=null;this.status_resize=this.isZooming=this.status_zoom=this.selected=this.flipping=!1;this.toPageIndex=0;this.rotateAxle=bookConfig.FlipDirection?"x":"y";this.isUpsideOnMobile=bookConfig.upsideOnMobile()},getRealBookIndex:function(b){return b=Number.between(b,
1,bookConfig.totalPageCount)},initBook:function(){this.flipBookElement=$("<div class='invert-book' id='invert-book'></div>");this.parent.append(this.flipBookElement)},gotoPage:function(b,c){this.toPageIndex=b;if(this.status_zoom){b={pointers:[{pageX:windowWidth/2,pageY:windowHeight/2}]};if(c=this.pageArray[this.currentPageIndex])c=c.pagesElement,c.onDoubleTap.bind(c)(b);return!0}this.flipping||b===this.currentPageIndex||0>=b||b>bookConfig.totalPageCount||(!c&&flipHistory&&flipHistory.addFromCurrentIndex(b),
bookConfig.restorePageVisible&&window.localStorage.setItem(realLocation+"?historyPageIndex",b),this.bookAttachments.setAttachmentBeforeFlipTo(b),this.playFlipAnimation(b),playFlipSound())},playFlipAnimation:function(b){var c=this;this.flipping=!0;var d=b>this.currentPageIndex?1:-1;this.currentPageIndex=b;var e=this.pageArray[b],f=0<d?this.pageArray[b-1]:this.pageArray[b+1];if(f){f.setTransition(this.flippingTime);var g="side-prev-"+this.rotateAxle;g=bookConfig.RightToLeft?0<d?"side-next-"+this.rotateAxle:
"side-prev-"+this.rotateAxle:0<d?"side-prev-"+this.rotateAxle:"side-next-"+this.rotateAxle;f.setState(g)}e?(e.setTransition(this.flippingTime),e.setState("side-current-"+this.rotateAxle),e.sideElement.one("transitionend",function(){c.endFlip();c.resetPages();c.afterPlayFlipAnimation();BookEvent.trigger("afterFlipPage",[b])})):(e=new InvertBookPage(this,b),e.initialize(this.pageWidth,this.pageHeight,b),this.pageArray[b]=e,this.endFlip(),this.resetPages(),this.disableTransition(),this.afterPlayFlipAnimation(),
BookEvent.trigger("afterFlipPage",[b]))},afterPlayFlipAnimation:function(){this.stopMedia();this.resetSlider();this.enterPage();global.thumbnail&&(thumbnail.clearHighLight(),thumbnail.setHighLight(this.getRealPageIndex()));window.resizeBookAfterFlip&&window.setTimeout(function(){return onStageResize()},30);this.bookAttachments.setAttachmentAfterFlipTo()},onResize:function(){this.status_zoom=!1;this.endFlip();this.resizeBookAttachments();this.resizeBook();this.setPageSize();this.resetPages();this.resizePage()},
resizeBook:function(){var b=bookConfig.topMargin+templateArea.getTopHeight(),c=bookConfig.bottomMargin+templateArea.getBottomHeight(),d=bookConfig.leftMargin+templateArea.getLeftWidth(),e=bookConfig.rightMargin+templateArea.getRightWidth();c=windowHeight-b-c;this.width=windowWidth-d-e;this.height=c;this.bookLeft=d;this.bookTop=b;this.flipBookElement.css({width:this.width+"px",height:this.height+"px",left:this.bookLeft+"px",top:this.bookTop+"px"})},setPageSize:function(){var b=bookConfig.largePageWidth*
(-parseFloat(bookConfig.visibleAreaLeft)+parseFloat(bookConfig.visibleAreaRight))/100,c=bookConfig.largePageHeight*(parseFloat(bookConfig.visibleAreaBottom)-parseFloat(bookConfig.visibleAreaTop))/100;bookConfig.isSingleBookFullWindowOnMobile&&(isPhone()||isPad())?(this.pageWidth=windowWidth,this.pageHeight=windowHeight):(b=fitPageWidthHeight(this.width,this.height,b,c),this.pageWidth=parseInt(b.x),this.pageHeight=parseInt(b.y))},resetPages:function(){this.setPageArray([this.currentPageIndex,this.currentPageIndex+
1,this.currentPageIndex-1]);this.loading();this.fillContent();this.setPageState(this.currentPageIndex);var b=this.pageArray[this.currentPageIndex];b&&(this.showPage=b.pagesElement)},setPageArray:function(b){for(var c=0;c<this.pageArray.length;c++)!this.pageArray[c]||0<=b.indexOf(c)||(this.pageArray[c].remove(),this.pageArray[c]=void 0);for(c=0;c<b.length;c++)if(!(0>=b[c]||b[c]>bookConfig.totalPageCount||this.pageArray[b[c]])){var d=new InvertBookPage(this,b[c]);d.initialize(this.pageWidth,this.pageHeight,
b[c]);this.pageArray[b[c]]=d}},setPageState:function(b){for(var c=0;c<this.pageArray.length;c++)this.pageArray[c]&&(bookConfig.RightToLeft?c===b?this.pageArray[c].setState("side-current-"+this.rotateAxle):c>b?this.pageArray[c].setState("side-prev-"+this.rotateAxle):this.pageArray[c].setState("side-next-"+this.rotateAxle):c===b?this.pageArray[c].setState("side-current-"+this.rotateAxle):c>b?this.pageArray[c].setState("side-next-"+this.rotateAxle):this.pageArray[c].setState("side-prev-"+this.rotateAxle))},
resizePage:function(){for(var b=0;b<this.pageArray.length;b++)if(this.pageArray[b])this.pageArray[b].onResize(this.pageWidth,this.pageHeight)},resizeBookAttachments:function(){this.bookAttachments.onResize(this.width,this.height)},initAttachments:function(){this.bookAttachments=new BookAttachmentsBuilder(this.flipBookElement,this.currentPageIndex,this,this.options.isDoublePage);this.options.thickness&&this.bookAttachments.thickness(!0);this.options.bookshadow&&this.bookAttachments.bookshadow();this.options.grayshadow&&
this.bookAttachments.grayshadow();this.options.miniFullscreen&&this.bookAttachments.miniFullscreen();this.options.bookpagenumber&&this.bookAttachments.bookpagenumber();this.options.staticad&&this.bookAttachments.staticad();this.options.zoommap&&this.bookAttachments.zoommap();this.options.bookmarktab&&this.bookAttachments.bookmarktab();this.options.noteadd&&this.bookAttachments.noteadd()},getBook:function(){return this.flipBookElement},show:function(){this.visible=!0;this.setStyleByCSS({display:"flex"});
this.enterPage();this.bookAttachments&&this.bookAttachments.show()},hide:function(){this.visible=!1;this.setStyleByCSS({display:"none"});this.stopMedia();this.resetSlider();this.bookAttachments&&this.bookAttachments.hide()},endFlip:function(){this.flipping=!1},setStyleByCSS:function(b){this.flipBookElement.css(b)},enterPage:function(){this.afterChangeBookType();this.openShownMedia();this.addSearchHighlight()},getCurrentPageIndex:function(){return this.getRealPageIndex()},getRealPageIndex:function(){var b=
this.currentPageIndex;return b=Number.between(b,1,bookConfig.totalPageCount)},getCurrentPages:function(){return[this.currentPageIndex]},getLeft:function(){return this.bookLeft},getTop:function(){return this.bookTop},getCssLeft:function(){return parseInt(this.flipBookElement.css("left"))},getCssTop:function(){return parseInt(this.flipBookElement.css("top"))},getHeight:function(){return this.height},getWidth:function(){return this.width},getScale:function(){var b=this.pageArray[this.currentPageIndex];
return b?b.pagesElement.parameters.toScale:1},select:function(){var b=this.pageArray[this.currentPageIndex];b&&(this.selected=!0,b.initSelectTextEvent(),b.pagesElement.parameters.eventCancel=!0)},unSelect:function(){var b=this.pageArray[this.currentPageIndex];b&&(this.selected=!1,b.destroySelect(),b.pagesElement.parameters.eventCancel=!1,StateSynchronous.instance().findButtons("SelectTextButton",!0).each(function(c){c.setAsUnSelect();c.executeCallback()}))},magnifierZoom:function(){var b=this.pageArray[this.currentPageIndex];
b&&(this.selected=!0,b.initMagnifierEvent())},unMagnifierZoom:function(){var b=this.pageArray[this.currentPageIndex];b&&(this.selected=!1,b.destroyMagnifier(),bookConfig.MagnifierButtonVisible&&window.magnifierZoomBox&&window.magnifierZoomBox.hide(),StateSynchronous.instance().findButtons("magnifier",!0).each(function(c){c.setAsZoomin()}))},switchLargeImage:function(){var b=this.pageArray[this.currentPageIndex];b&&b.switchLargeImage()},switchNormalImage:function(b){var c=this.pageArray[this.currentPageIndex];
c&&c.switchNormalImage(b)},loading:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].loading()},fillContent:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].fillContent()},afterChangeBookType:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].initReaderOrSlider()},openShownMedia:function(){var b=this.pageArray[this.currentPageIndex];b&&(b.enterSide(),b.addHistoryTexts())},stopMedia:function(){for(var b=
0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].leaveSide()},addSearchHighlight:function(){var b=this.pageArray[this.currentPageIndex];b&&b.highlightSearch()},clearSearchHighlight:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].clearHighlight()},resetSlider:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].resetSlider()},disableTransition:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&
this.pageArray[b].disableTransition()},enableTransition:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].setTransition(this.flippingTime)},clearTransform:function(){for(var b=0;b<this.pageArray.length;b++)this.pageArray[b]&&this.pageArray[b].clearTransform()},destroy:function(){this.flipBookElement.remove()}}).extend(Book);
InvertBook.expand({initEvent:function(){this.initHammerEvent();this.initDomEvent();this.lastDeltaPosition=this.currentVirtualIndex=this.lastCenterPageIndex=this.panStartPosition=this.dMouseWheelTime=0},initHammerEvent:function(){var b=new Hammer.Manager(this.flipBookElement[0]);b.add(new Hammer.Pan);b.on("panstart panmove",this.onPan.bind(this));b.on("panend",this.onPanEnd.bind(this))},initDomEvent:function(){this.flipBookElement.bind("click",this.onTap.bind(this));this.flipBookElement.bind(_event._mousewheel,
this.onScroll.bind(this))},onScroll:function(b){if(this.flipping)return!1;var c=b.originalEvent;c=Math.max(-1,Math.min(1,c.wheelDelta||-c.detail));if(this.status_zoom){b={pointers:[{pageX:b.pageX,pageY:b.pageY},{pageX:b.pageX,pageY:b.pageY}]};var d=this.pageArray[this.currentPageIndex];d&&d.controlBar&&(0>c?d.controlBar.zoomDown(b):d.controlBar.zoomUp(b))}!this.status_zoom&&bookConfig.mouseWheelFlip&&this.canAcceptMouseWheel()&&(bookConfig.RightToLeft?0>c?previousPageFun("mouse wheel flip"):nextPageFun("mouse wheel flip"):
0>c?nextPageFun("mouse wheel flip"):previousPageFun("mouse wheel flip"));if(bookConfig.mouseWheelFlip)return stopEvent(b),!1},canAcceptMouseWheel:function(){if(0!==this.dMouseWheelTime&&150>(new Date).getTime()-this.dMouseWheelTime)return!1;this.dMouseWheelTime=(new Date).getTime();return!0},onPan:function(b){if(bookType===this.bookType&&bookConfig.mouseDragFlip&&!(this.status_zoom||this.selected||this.flipping||this.isZoomming||this.status_resize))if("panstart"===b.type)this.panStartPosition=this.isUpsideOnMobile?
"x"===this.rotateAxle?b.center.x:b.center.y:"x"===this.rotateAxle?b.center.y:b.center.x,this.lastCenterPageIndex=this.currentPageIndex,this.disableTransition();else if("panmove"===b.type){b=this.isUpsideOnMobile?"x"===this.rotateAxle?b.center.x-this.panStartPosition:b.center.y-this.panStartPosition:"x"===this.rotateAxle?b.center.y-this.panStartPosition:b.center.x-this.panStartPosition;var c=b/this.pageWidth;var d=bookConfig.RightToLeft?this.currentPageIndex+c:this.currentPageIndex-c;var e=Math.max(1,
Math.min(bookConfig.totalPageCount,Math.round(d)));e!==this.lastCenterPageIndex&&(this.setPageArray([e-1,e,e+1]),this.setPageState(e),this.lastCenterPageIndex=e);e=Math.floor(d);var f=Math.ceil(d),g=d-e;if(0>c){var h=e;var k=f}else h=f,k=e;e=this.pageArray[h];f=this.pageArray[k];h!==k&&(h="x"===this.rotateAxle,k=bookConfig.RightToLeft,g=(c=0>c)?g:1-g,k&&c||!k&&!c?(c=h?-g:g,g=h?1-g:-(1-g)):(c=h?g:-g,g=h?-(1-g):1-g),e&&e.updateTransform(180*c),f&&f.updateTransform(180*g));this.currentVirtualIndex=d;
this.lastDeltaPosition=b}},onPanEnd:function(b){bookType!==this.bookType||!bookConfig.mouseDragFlip||this.status_zoom||this.selected||this.flipping||this.isZoomming||this.status_resize||(this.clearTransform(),this.enableTransition(),b=bookConfig.RightToLeft?0<this.lastDeltaPosition?Math.ceil(this.currentVirtualIndex):Math.floor(this.currentVirtualIndex):0<this.lastDeltaPosition?Math.floor(this.currentVirtualIndex):Math.ceil(this.currentVirtualIndex),Math.abs(this.lastDeltaPosition)>.05*this.pageWidth&&
b!==this.currentPageIndex&&1<=b&&b<=bookConfig.totalPageCount?gotoPageFun(b,!1,"pan to flip"):this.resetPages(),this.lastDeltaPosition=this.lastCenterPageIndex=this.currentVirtualIndex=null)},onSwipe:function(b){},onTap:function(b){onWindowTap(b.srcEvent)}});
var InvertBookPage=Class({create:function(b,c){this.defineProperty();this.parent=b;this.parentElement=b.flipBookElement;this.pageIndex=c;this.bookType=b.bookType;this.rotateAxle=b.rotateAxle;this.sideElement=$("<div class='invert-side'></div>");this.sideElement.attr("id","invert-side-"+c);this.pagesElement=$("<div class='invert-pages'></div>");this.pageElement=this.createPage(c);this.parentElement.append(this.sideElement);this.sideElement.append(this.pagesElement);this.pagesElement.append(this.pageElement);
this.initEvent()},defineProperty:function(){this.controlBar=null;this.pageIndex=this.pageHeight=this.pageWidth=0;this.page=null;this.currentState=""},createPage:function(b){b=new Page(b,"page-",this.bookType);b.hideMiddleShadow();b.centerPage();this.page=b;return b.side},initEvent:function(){isBelowIE9()?this.pagesElement.IEZoom({sideElement:this,zoomIn:this.zoomIn.bind(this),zoomOut:this.zoomOut.bind(this),onZoomed:this.onZoomed.bind(this)}):this.pagesElement.zoom({sideElement:this,zoomIn:this.zoomIn.bind(this),
zoomOut:this.zoomOut.bind(this),onZoomed:this.onZoomed.bind(this)})},initialize:function(b,c,d){this.onResize(b,c)},setState:function(b){this.currentState!==b&&(this.sideElement.removeClass("side-current-"+this.rotateAxle+" side-prev-"+this.rotateAxle+" side-next-"+this.rotateAxle),b&&this.sideElement.addClass(b),this.currentState=b)},setTransition:function(b){this.sideElement.css("transition","transform "+b+"ms ease-in-out")},disableTransition:function(){this.sideElement.css("transition","none")},
updateTransform:function(b){this.sideElement.css({transform:"x"===this.rotateAxle?"translate(-50%, -50%) rotateX("+b+"deg)":"translate(-50%, -50%) rotateY("+b+"deg)"})},clearTransform:function(){this.sideElement.css("transform","")},setStyleByCSS:function(b){this.sideElement.css(b)},onResize:function(b,c){this.pageWidth=b;this.pageHeight=c;this.sideElement.css({width:b+"px",height:c+"px"});this.pagesElement.css({width:b+"px",height:c+"px"});this.resetPagesParameters();this.page.onResize(b,c);b=transformCSS({rotate:0,
tran:{x:0,y:0},scale:1});this.pagesElement.css(b)},resetPagesParameters:function(){this.pagesElement.parameters&&(this.pagesElement.parameters.width=$(this.pagesElement).width(),this.pagesElement.parameters.height=$(this.pagesElement).height(),this.pagesElement.parameters.origin={x:0,y:0},this.pagesElement.parameters.tran={x:0,y:0},this.pagesElement.parameters.scale=1,this.pagesElement.parameters.toScale=1,this.pagesElement.parameters.resize=!1,this.pagesElement.swipeInterval&&this.pagesElement.swipeInterval.stop(),
this.pagesElement.animateInterval&&this.pagesElement.animateInterval.stop(),this.pagesElement.parameters.zoomFlag=!1,this.pagesElement.parameters.zoomOut=!0,this.pagesElement.parameters.toScale=1,this.pagesElement.parameters.scale=1)},fillContent:function(b){this.page.fillContent(b)},fillPage:function(b,c){this.page.fillPage(b,c)},enterSide:function(){this.page.enterSide()},leaveSide:function(){this.page.leaveSide()},zoomIn:function(b){this.parent.status_zoom=!0;StateSynchronous.instance().findButtons("ZoomButton",
!0).each(function(c){c.setAsZoomout();c.executeCallback()});global.toolBar&&global.toolBar.btnZoom&&global.toolBar.changeZoomIcon(!1);this.switchLargeImage();bookConfig.ZoomToolbarVisible&&!this.controlBar&&(this.controlBar=new ZoomControlBar(tmpContainer),this.controlBar.setPosition((windowWidth-this.controlBar.width)/2,templateArea.getTopHeight()+5));this.controlBar&&(this.controlBar.setPosition((windowWidth-this.controlBar.width)/2,templateArea.getTopHeight()+5),this.controlBar.setVisible(!0))},
zoomOut:function(){this.parent.status_zoom=!1;StateSynchronous.instance().findButtons("ZoomButton",!0).each(function(b){b.setAsZoomin();b.executeCallback()});global.toolBar&&global.toolBar.btnZoom&&global.toolBar.changeZoomIcon(!0);this.switchNormalImage();this.controlBar&&this.controlBar.setVisible(!1);gotoPageFun(this.parent.toPageIndex,!1,"change book type")},onZoomed:function(b){if(isPhone()||isPad())this.onMobileZoomed(b);else this.onPCZoomed(b)},onPCZoomed:function(b){if(b&&!this.pagesElement.parameters.resize){this.pagesElement.parameters.resize=
!0;b=this.pagesElement.offset().left;var c=this.pagesElement.offset().top;b-=this.pagesElement.parameters.left;c-=this.pagesElement.parameters.top;var d=this.pagesElement.parameters.scale;1!==d&&(this.pageWidth=parseInt(this.pageWidth*d),this.pageHeight=parseInt(this.pageHeight*d),this.pagesElement.css({width:this.pageWidth+"px",height:this.pageHeight+"px"}),this.page.onResize(this.pageWidth,this.pageHeight),d=1);d=transformCSS({origin:{x:0,y:0},tran:{x:b,y:c},scale:d});this.pagesElement.css(d);this.pagesElement.parameters&&
(this.pagesElement.parameters.width=$(this.pagesElement).width(),this.pagesElement.parameters.height=$(this.pagesElement).height(),this.pagesElement.parameters.origin={x:0,y:0},this.pagesElement.parameters.tran={x:b,y:c},this.pagesElement.parameters.scale=1,this.pagesElement.parameters.toScale=1,this.pagesElement.parameters.resize=!1)}},onMobileZoomed:function(b){this.resizeSvg(Math.round(this.pageWidth*b.scale),Math.round(this.pageHeight*b.scale));bookConfig.highDefinitionConversion?this.zoomInSideImage():
(1<b.scale&&this.zoomInSideImage(),1==b.scale&&this.zoomOutSideImage())},initSelectTextEvent:function(){this.page.initSelectTextEvent()},destroySelect:function(){this.page.destroySelect()},initMagnifierEvent:function(){this.page.initMagnifierEvent()},destroyMagnifier:function(){this.page.destroyMagnifier()},startAnimation:function(){this.page.startAnimation()},pauseAnimation:function(){this.page.pauseAnimation()},addHistoryTexts:function(b){this.page.addHistoryTexts(b)},highlightSearch:function(){this.page.highlightSearch()},
clearHighlight:function(){this.page.clearHighlight()},initReaderOrSlider:function(){this.page.initReaderOrSlider()},resetSlider:function(){this.page.resetSlider()},zoomInSideImage:function(){this.page.zoomInSideImage()},zoomOutSideImage:function(){this.page.zoomOutSideImage()},switchLargeImage:function(){this.page.switchLargeImage()},switchNormalImage:function(b){this.page.switchNormalImage(b)},resizeSvg:function(b,c){this.page.resizeSvg(b,c)},loading:function(){this.page.loading()},destroy:function(){this.sideElement.remove()},
remove:function(){this.controlBar&&this.controlBar.destroy();this.sideElement.remove();this.sideElement=void 0}}),BookEvent=Class({statics:{bindEvent:function(b,c){"string"==typeof b&&c&&"function"==typeof c&&(this[b]||(this[b]=[]),this[b].push(c))},bindOnceEvent:function(b,c){if("string"===typeof b&&c&&"function"===typeof c){var d=function(e){for(var f=[],g=0;g<arguments.length;++g)f[g-0]=arguments[g];f=c.apply(this,f);this.removeEvent(b,d);return f}.bind(this);this[b]||(this[b]=[]);this[b].push(d)}},
removeEvent:function(b,c){"string"==typeof b&&c&&"function"==typeof c&&this[b].removeElement(c)},trigger:function(b,c){if((b=this[b])&&0!=b.length){for(var d=!1,e=0;e<b.length;e++)if("function"==typeof b[e]){var f=b[e].apply(this,c);d=(f?f.paused:!1)||d}return d}}}});function statisticalData(b,c){global.sendvisitinfo&&"function"==typeof global.sendvisitinfo&&sendvisitinfo(b,c)}
var googleAnalytics=function(){bookConfig.googleAnalyticsID&&window.setTimeout(function(){loadJavascript("https://www.googletagmanager.com/gtag/js?id="+bookConfig.googleAnalyticsID,function(){window.dataLayer=window.dataLayer||[];window.gtag=function(){dataLayer.push(arguments)};gtag("js",new Date);gtag("config",bookConfig.googleAnalyticsID)},function(){})},3E3)},googleTagManager=function(){bookConfig.googleTagManagerID&&window.setTimeout(function(){var b=window,c=bookConfig.googleTagManagerID;b.dataLayer=
b.dataLayer||[];b.dataLayer.push({"gtm.start":(new Date).getTime(),event:"gtm.js"});b=document.getElementsByTagName("script")[0];var d=document.createElement("script");d.async=!0;d.src="https://www.googletagmanager.com/gtm.js?id="+c;b.parentNode.insertBefore(d,b)},3E3)},PluginEvent=Class({statics:{bindEvent:function(b,c){"string"==typeof b&&c&&"function"==typeof c&&(this[b]||(this[b]=[]),this[b].push(c))},removeEvent:function(b,c){"string"==typeof b&&c&&"function"==typeof c&&this[b].removeElement(c)},
trigger:function(b,c){if((b=this[b])&&0!=b.length){for(var d=!1,e=0;e<b.length;e++)"function"==typeof b[e]&&(d=b[e].apply(this,c)||d);return d}}}}),logEvent=Class({statics:{printLog:!1,visit:function(b,c,d,e,f,g){logEvent.printLog&&console.log("visit",b,c,d,e,f,g)},beforeFlipPage:function(b){logEvent.printLog&&console.log("beforeFlipPage",b)},afterFlipPage:function(b){logEvent.printLog&&console.log("afterFlipPage",b)},flipPage:function(b,c,d,e){statisticalData(1,c);bookConfig.googleAnalyticsID&&window.gtag&&
"popstate"!==b&&(gtag("event",getCustomEventName()+"click",{event_category:"flipPage",event_label:"goto page:"+d}),logEvent.printLog&&console.log("flipPage",b,c,d,e))},suspendFlipPage:4,zoomIn:function(b,c){logEvent.printLog&&console.log("zoomIn",b,c)},zoomOut:function(b,c){logEvent.printLog&&console.log("zoomOut",b,c)},zoomMove:function(b,c){logEvent.printLog&&console.log("zoomMove",b,c)},jumpLink:function(b,c,d){logEvent.printLog&&console.log("jumpLink",b,c,d)},clickButton:function(b,c,d){bookConfig.googleAnalyticsID&&
window.gtag&&gtag("event",getCustomEventName()+"click",{event_category:c,event_label:c+" button is clicked"});logEvent.printLog&&console.log("clickButton",b,c,d)},search:function(b,c,d){statisticalData(6,b);logEvent.printLog&&console.log("search",b,c,d)},share:function(b,c,d){logEvent.printLog&&console.log("share",b,c,d)},print:function(b,c,d){logEvent.printLog&&console.log("print",b,c,d)},addBookmark:function(b,c,d){logEvent.printLog&&console.log("addBookmark",b,c,d)},deleteBookmark:function(b){logEvent.printLog&&
console.log("deleteBookmark",b)},editBookmark:function(b,c,d){logEvent.printLog&&console.log("deleteBookmark",b,c,d)},googleAdSense:function(b,c,d,e,f,g){logEvent.printLog&&console.log("googleAdSense",b,c,d,e,f,g)},playMedia:function(b,c,d,e,f){logEvent.printLog&&console.log("playMedia",b,c,d,e,f)},passward:function(b,c){logEvent.printLog&&console.log("passward",b,c)},clickPageItem:function(b,c,d,e,f,g){logEvent.printLog&&console.log("clickPageItem",b,c,d,e,f,g)},orientationchange:function(b,c,d){logEvent.printLog&&
console.log("orientationchange",b,c,d)},windowClick:function(b,c,d){logEvent.printLog&&console.log("windowClick",b,c,d)},readArticle:function(b){logEvent.readArticle&&console.log("readArticle",b)},errorLog:function(b){logEvent.errorLog&&console.log("errorLog",b)}}});BookEvent.bindEvent("visit",logEvent.visit);BookEvent.bindEvent("flipPage",logEvent.flipPage);BookEvent.bindEvent("jumpLink",logEvent.jumpLink);BookEvent.bindEvent("zoomIn",logEvent.zoomIn);BookEvent.bindEvent("zoomOut",logEvent.zoomOut);
BookEvent.bindEvent("zoomMove",logEvent.zoomMove);BookEvent.bindEvent("clickButton",logEvent.clickButton);BookEvent.bindEvent("search",logEvent.search);BookEvent.bindEvent("share",logEvent.share);BookEvent.bindEvent("print",logEvent.print);BookEvent.bindEvent("addBookmark",logEvent.addBookmark);BookEvent.bindEvent("deleteBookmark",logEvent.deleteBookmark);BookEvent.bindEvent("editBookmark",logEvent.editBookmark);BookEvent.bindEvent("googleAdSense",logEvent.googleAdSense);
BookEvent.bindEvent("playMedia",logEvent.playMedia);BookEvent.bindEvent("passward",logEvent.passward);BookEvent.bindEvent("clickPageItem",logEvent.clickPageItem);BookEvent.bindEvent("orientationchange",logEvent.orientationchange);BookEvent.bindEvent("windowClick",logEvent.windowClick);BookEvent.bindEvent("suspendFlipPage",logEvent.suspendFlipPage);BookEvent.bindEvent("beforeFlipPage",logEvent.beforeFlipPage);BookEvent.bindEvent("errorLog",logEvent.errorLog);
function scrapOriginPageIndex(){window.realLocation=window.location.href.removeStartFrom("?");window.realLocation=realLocation.removeStartFrom("#");var b=bookConfig.OriginPageIndex,c=window.location.hash;""!=c&&3<c.length&&"#p="==c.substr(0,3)&&(b=parseInt(getRealPageNumber(c.substr(3,c.length-3))));b=Number.between(b,1,originTotalPageCount);if(bookConfig.restorePageVisible&&window.localStorage[realLocation+"?historyPageIndex"]){var d=parseInt(window.localStorage[realLocation+"?historyPageIndex"]);
c=window.localStorage[realLocation+"?historySubmmit"];d!=b&&(bookConfig.isRestorePageFrameVisible?(!c||31<c&&(new Date).getTime()-parseInt(c)>=bookConfig.restorePageDuration||31>=c&&(new Date).getDate()!=parseInt(c))&&showMessage(getLanguage("restorePage","Would you like to restore previous session"),function(){window.localStorage.setItem(realLocation+"?historySubmmit",(new Date).getTime());gotoPageFun(window.localStorage[realLocation+"?historyPageIndex"])}):setTimeout(function(){gotoPageFun(d)},
300))}return b}
function initialization(){var b,c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress)return window.tmpContainer=$("<div id= 'tmpContainer' class='tmpContainer'></div>"),isPC()&&_agent_.browser.safari&&_agent_.system.name==_agent_.system.WINDOWS&&tmpContainer.css({"z-index":0}),$("body").append(tmpContainer),window.bookContainer=$("<div id= 'bookContainer' class='bookContainer'></div>"),tmpContainer.append(bookContainer),window.soundBaseURL="style/raw/",b=window.getWidth(),
windowHeight=c=window.getHeight(),windowWidth=b,d.yield(checkBookConfig(),2);if(3!=d.nextAddress)return selectLanguage(bookConfig.language),initImageBaseUrl(),global.onBookLoad=new LoadingBook(tmpContainer,bookConfig.loadingBackground),"article4"===global.templeteName?d.jumpTo(3):d.yield(initToolBarBrand(),3);delayLoading();d.jumpToEnd()})}function extractBrandPath(b){b=b.split("/");b.pop();return b.join("/")}
function initToolBarBrand(){var b,c,d,e;return $jscomp.asyncExecutePromiseGeneratorProgram(function(f){switch(f.nextAddress){case 1:b=_get(window,"bookConfig.toolBarBrandInfoVisible",void 0);if(!window.checkBookConfigRestriction){f.jumpTo(2);break}return f.yield(checkBookConfigRestriction("toolBarBrandInfoVisible",b),3);case 3:b=f.yieldResult;case 2:if(void 0===b)return f.return();c=_get(window,"bookConfig.toolBarBrandInfoUrl","");if(!window.checkBookConfigRestriction){f.jumpTo(4);break}return f.yield(checkBookConfigRestriction("toolBarBrandInfoUrl",
c),5);case 5:c=f.yieldResult;case 4:return b&&""!==c?f.yield(fetchBrandInfo(c),6):(bookConfig.appLogoIcon="",f.return());case 6:d=f.yieldResult,e=extractBrandPath(c),bookConfig.appLogoIcon=d&&d.logo?e+"/"+d.logo.replace("./",""):"",bookConfig.appLogoLinkURL=d&&d.url?getRealURL(d.url):"",f.jumpToEnd()}})}
function fetchBrandInfo(b){var c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){if(1==d.nextAddress)return d.setCatchFinallyBlocks(2),d.yield($.ajax({url:b,type:"get",dataType:"json"}),4);if(2!=d.nextAddress)return c=d.yieldResult,d.return(c);d.enterCatchBlock();return d.return(null)})}
function delayLoading(){var b=function(){window.jsLoadingBar&&(jsLoadingBar.destroy(),global.onBookLoad&&global.onBookLoad.chooseBookStyle(),window.hasOwnProperty("GuideLoadingJS")&&jsLoadingBar instanceof GuideLoadingJS||(jsLoadingBar=null))};window.setTimeout(function(){window.loadingConfig&&loadingConfig.loadingVideo&&jsLoadingBar&&jsLoadingBar.showVideo?(jsLoadingBar.showVideo(),$(jsLoadingBar.video).bind("pause",function(){b()}),$(jsLoadingBar.video).bind("ended",function(){b()}),jsLoadingBar.video.ontimeupdate=
function(){60<=jsLoadingBar.video.currentTime&&b()}):window.jsLoadingBar?b():global.onBookLoad&&global.onBookLoad.chooseBookStyle()},Math.max(1E3*parseInt(window.loadingConfig&&window.loadingConfig.loadingDisplayTime||.01),10))}var onWindowClick=function(){};window.isSupportWebp=!1;
(function(){function b(d){window.isSupportWebp=d&&"load"===d.type?1==c.width:!1;"false"==GetQueryString("isSupportWebp")&&(window.isSupportWebp=!1);"true"==GetQueryString("isSupportWebp")&&(window.isSupportWebp=!0);var e=window.setInterval(function(){window.Module&&Module.isReady&&(window.clearInterval(e),initialization())},100)}var c=new Image;c.onerror=b;c.onload=b;c.src="data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA="})();
function initBookFrame(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(b){if(1==b.nextAddress)return useTheFliphtml5Service(),window.rightToLeft=bookConfig.RightToLeft,initBrowserType(),changeBookConfigValue("pageRestrictUrl",uiBaseURL+"articleEmpty.png"),changeBookConfigValue("OriginPageIndex",bookConfig.OriginPageIndex?bookConfig.OriginPageIndex:1),changeBookConfigValue("upsideOnMobile",function(){return isPhone()||isPad()?bookConfig.alwaysDoublePageOnMobile&&window.innerHeight>window.innerWidth?
!0:!1:!1}),global.originTotalPageCount=parseInt(bookConfig.totalPageCount),global.totalPageCount=originTotalPageCount+(1==originTotalPageCount%2&&!bookConfig.isTheBookOpen||0==originTotalPageCount%2&&bookConfig.isTheBookOpen?1:0),b.yield(checkExpandBookConfig(),2);initBook();changeShowBook(bookType);resizeFlipBook();resizeSlideBook();resizeDocumentViewBook();resizeCardBook();resizeInvertBook();onBookLoad.isReady=!0;try{Module._monitorWH(window.key_index,bookConfig.largePageWidth/bookConfig.largePageHeight,
originTotalPageCount)}catch(c){}b.jumpToEnd()})};
